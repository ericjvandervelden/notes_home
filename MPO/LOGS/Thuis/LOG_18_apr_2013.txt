/ KVM



/we lezen Virtualization Guide in F13	,

http://docs.fedoraproject.org/en-US/Fedora/13/html/Virtualization_Guide/sect-Virtualization-Installing_the_virtualization_packages-Installing_KVM_packages_on_an_existing_Red_Hat_Enterprise_Linux_system.html


/we lezen par 4.2
[root@localhost ~]# yum install kvm
================================================================================
Updating:
 qemu-system-x86       x86_64       2:1.2.2-10.fc18         updates       4.2 M
Installing for dependencies:
 libiscsi              x86_64       1.7.0-3.fc18            updates        53 k
Updating for dependencies:
 qemu-common           x86_64       2:1.2.2-10.fc18         updates       209 k
 qemu-kvm              x86_64       2:1.2.2-10.fc18         updates        36 k

[root@localhost ~]#  yum install virt-manager libvirt libvirt-python python-virtinst
/ hebben we al	,

/ 7	.

/later gaven we 
# virt-manager
/maar we moesten wel	,
# systemctl restart libvirtd.service

/ we doen ook	,
[root@localhost ~]# systemctl enable libvirtd.service 
ln -s '/usr/lib/systemd/system/libvirtd.service' '/etc/systemd/system/multi-user.target.wants/libvirtd.service'

[root@localhost ~]#  ls /var/lib/libvirt/images/
f16.img  f18first-clone.img  f18first.img

/ geef in google
virsh install guest

/7	. 

/ f16 met virt-manager niet OK

/ we wilden	,
[root@localhost ~]# virt-install --name=f16 --ram=1024 --disk=/var/lib/libvirt/images/f16.img,size=8 --graphics=vnc --cdrom=/home/eric/Downloads/Fedora-16-x86_64-DVD.iso --os-variant=fedora16
Please install the 'virt-viewer' package.

/ 7	.

/ lees	,
https://bugzilla.redhat.com/show_bug.cgi?id=839156

/ we doen	,
[root@localhost ~]# virt-install --name=f16 --ram=1024 --disk=/var/lib/libvirt/images/f16.img,size=8 --graphics=vnc --cdrom=/home/eric/Downloads/Fedora-16-x86_64-DVD.iso --serial=pty
/ OK 

/ 7	. 

/ Lees	,
http://www.if-not-true-then-false.com/2012/upgrade-fedora-16-to-fedora-17-with-preupgrade/

/ we zijn in f16-clone	, en we gaan upgrade naar 17	,

# yum update

# yum install preupgrade

/7	.

/ Onze disk space van 8G is te klein	,
/we geven in google,
virt kvm increase disk space

/ we komen op	,
http://serverfault.com/questions/324281/how-do-you-increase-a-kvm-guests-disk-space

/ we doen 	,

[root@localhost ~]# ls /var/lib/libvirt/images/f16-clone.img  -lh
-rw-------. 1 root root 8.0G Aug  2 12:46 /var/lib/libvirt/images/f16-clone.img

[root@localhost ~]# qemu-img resize  /var/lib/libvirt/images/f16-clone.img +8G
Image resized.

[root@localhost ~]# ls /var/lib/libvirt/images/f16-clone.img  -lh
-rw-------. 1 root root 16G Aug  2 13:06 /var/lib/libvirt/images/f16-clone.img

/ we start de vm f16-clone	,

# fdisk -l

GPT (GUID partition table) detected on /dev/sda. fdisk doesn't support GPT. User GNU Parted.

/ we doen in vm	,

# gparted
print all
Error: The backup GPT table is not at the end of the disk
Fix
Warning: Not all of the space on /dev/sda is used, you can fix the GPT to use alle of the space	, (extra 16777216 blocks)
Fix

print free
/we zien 8GB free space




/ we maken een nieuwe vm, met 16G	, 
/ maar	,
Storage parameter error.
There is not enough free space on the storage pool to create the volume. (16384 M requested allocation > 12087 M available)

/ als we click Browse om de  iso te geven, zien we links inderdaad	,
Storage Pools
86% default fs dir

/ we lezen	,
http://docs.fedoraproject.org/en-US/Fedora/18/html/Virtualization_Administration_Guide/sect-partbased-storage-pool.html

/ en  gaan in de virt-manager,
Edit, connection details
Storage

/ we zien inderdaad dat de default storage /var/lib/libvirt/images is	,

/ we lezen op	,
http://docs.fedoraproject.org/en-US/Fedora/18/html/Virtualization_Administration_Guide/chap-Virtualization_Administration_Guide-Storage_Pools-Storage_Pools.html#sect-Virtualization-Storage_Pools-Creating-Dedicated_Disk_Devices

11.1.3. Directory-based storage pools

[root@localhost ~]# virsh pool-define-as --help
  NAME
    pool-define-as - define a pool from a set of args

  SYNOPSIS
    pool-define-as <name> [--print-xml] <type> [<source-host>] [<source-path>] [<source-dev>] [<source-name>] [<target>] [--source-format <string>]

  DESCRIPTION
    Define a pool.

  OPTIONS
    [--name] <string>  name of the pool
    --print-xml      print XML document, but don't define/create
    [--type] <string>  type of the pool
    [--source-host] <string>  source-host for underlying storage
    [--source-path] <string>  source path for underlying storage
    [--source-dev] <string>  source device for underlying storage
    [--source-name] <string>  source name for underlying storage
    [--target] <string>  target for underlying storage
    --source-format <string>  format for underlying storage

[root@localhost libvirt]#  ls -ld /guest_images_fs/
drwxr-xr-x. 2 root root 4096 Aug  5 21:27 /guest_images_fs

[root@localhost libvirt]# virsh pool-start default
Pool default started
/ is weer active,

[root@localhost libvirt]#  virsh pool-define-as guest_images_fs dir - - - - /guest_images_fs/
Pool guest_images_fs defined

[root@localhost libvirt]# virsh pool-list --allName                 State      Autostart 
-----------------------------------------
default              active     yes       
guest_images_fs      inactive   no        

[root@localhost libvirt]#  virsh pool-info default
Name:           default
UUID:           f911c94e-2b1e-c9fb-14fd-fbdfba37ebb2
State:          running
Persistent:     yes
Autostart:      yes
Capacity:       49.09 GiB
Allocation:     37.34 GiB
Available:      11.75 GiB

[root@localhost libvirt]#  virsh pool-info guest_images_fs
Name:           guest_images_fs
UUID:           6fbea6bc-fccf-84de-3fa0-90b1b70291a9
State:          inactive
Persistent:     yes
Autostart:      no

[root@localhost libvirt]# virsh pool-build guest_images_fs 
Pool guest_images_fs built
/ TODO

dr-xr-xr-x. 19 root root 4096 Aug  5 21:27 /
[root@localhost libvirt]#  virsh pool-start guest_images_fs
Pool guest_images_fs started

[root@localhost libvirt]#  virsh pool-info guest_images_fs
Name:           guest_images_fs
UUID:           6fbea6bc-fccf-84de-3fa0-90b1b70291a9
State:          running
Persistent:     yes
Autostart:      no
Capacity:       49.09 GiB
Allocation:     37.34 GiB
Available:      11.75 GiB

/ Toch weer hetzelfde	,
/ we rm de pool weer	,


/ In f16-clone hebben we qemu-img resize	,
/ hierna moeten we parted	,
/ geef in google 
qemu-img parted

/ 7	.

/ we lezen	,
http://lnx.cx/docs/vdg/output/Virtual-Disk-Operations.html#VDG-Cookbook-Resize-Image

/ we hadden eerder	,
[root@localhost ~]# qemu-img resize  /var/lib/libvirt/images/f16-clone.img +8G

/ nu	,
[root@localhost libvirt]# qemu-img info /var/lib/libvirt/images/f16-clone.img 
image: /var/lib/libvirt/images/f16-clone.img
file format: raw
virtual size: 16G (17179869184 bytes)
disk size: 5.8G

/ 7	.

/ we zijn op f18first-clone	,

/ oef met gparted, ...

/ lees	,
http://lnx.cx/docs/vdg/output/Virtual-Disk-Operations.html

/ lees	,
http://mytechdepot.wordpress.com/2013/02/22/enabling-clipboard-copy-paste-in-redhat-kvm/
Display: Spice
Video: QXL
/ spice-vdagent runs al	,
/ nu kunnen we cp paste van vm naar deze notes file	,

# qemu-img, virsh  zijn er al
# systemctl status libvirtd.service
/ draait al	,

[eric@localhost Devel]$ pwd
/home/eric/Devel
[eric@localhost Devel]$ qemu-img create thumb_drive_resize.raw +1G
Formatting 'thumb_drive_resize.raw', fmt=raw size=1073741824 

[eric@localhost Devel]$ qemu-img info thumb_drive_resize.raw 
image: thumb_drive_resize.raw
file format: raw
virtual size: 1.0G (1073741824 bytes)
disk size: 0

[eric@localhost Devel]$ qemu-img resize thumb_drive_resize.raw +1G
Image resized.

[eric@localhost Devel]$ qemu-img info thumb_drive_resize.raw 
image: thumb_drive_resize.raw
file format: raw
virtual size: 2.0G (2147483648 bytes)
disk size: 0

/ op een lege img zien we geen /dev/loop met kpartx	,
 
/7	.

/ we install virt-manager op f18first-clone	, en dl f19	,

# yum install virt-manager
/ notes virt-manager
/ TODO

[root@localhost ~]# yum install virt-manager libvirt libvirt-python python-virtinst
Installing:
 libvirt                          x86_64   0.10.2.6-1.fc18      updates    33 k
Installing for dependencies:
 libvirt-daemon-config-network    x86_64   0.10.2.6-1.fc18      updates    32 k
 libvirt-daemon-config-nwfilter   x86_64   0.10.2.6-1.fc18      updates    36 k
 libvirt-daemon-driver-libxl      x86_64   0.10.2.6-1.fc18      updates   103 k
 libvirt-daemon-driver-lxc        x86_64   0.10.2.6-1.fc18      updates    93 k
 libvirt-daemon-driver-uml        x86_64   0.10.2.6-1.fc18      updates    72 k
 libvirt-daemon-driver-xen        x86_64   0.10.2.6-1.fc18      updates   114 k
 xen-libs                         x86_64   4.2.2-10.fc18        updates   416 k
 xen-licenses                     x86_64   4.2.2-10.fc18        updates    77 k

[root@localhost ~]# yum install kvm
Loaded plugins: langpacks, presto, refresh-packagekit
Package 2:qemu-system-x86-1.2.2-13.fc18.x86_64 already installed and latest version
Nothing to do

[root@localhost ~]# systemctl status libvirtd.service 
libvirtd.service - Virtualization daemon
   Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; enabled)
   Active: active (running) since Wed 2013-08-07 08:30:46 EDT; 11min ago
 Main PID: 857 (libvirtd)
   CGroup: name=systemd:/system/libvirtd.service
           └─857 /usr/sbin/libvirtd

/ Hij is dus al enabled	,

/ Geef in google	,
kvm nested virtualization enabled



















 

/ Einde KVM

/ ANDROID X86

/ we lezen	,
http://www.upubuntu.com/2012/03/how-to-install-android-x86-40-using.html


/ Einde ANDROID X86

/ GOOGLE

/ we kijken	,
https://www.youtube.com/watch?v=ZZNb1NOPTp8

/ Kijk	,
cloud.google.com/mobilebackendtutorial

/ Kijk	 compute engine,
developers.google.com/compute

/ Kijk	gcp,
https://www.youtube.com/watch?v=qokEYBNWA_0

/ kIjk laura	,
https://www.youtube.com/watch?v=ZZNb1NOPTp8

/ videos gcp	,
https://developers.google.com/cloud/videos

/ geef in youtube	,
google cloud platform
/ ze hebben stage 1 en stage 2 elk in 1 video, de hele state	,
https://www.youtube.com/watch?v=Xt7O2oHNCOU
https://www.youtube.com/watch?v=LBolKCDGt1o






/ Einde GOOGLE

/ RVM RUBY

/ er zijn al ruby , gem in  /usr/bin/
/ TODO 

/ Lees https://rvm.io

/ Lees https://rvm.io/rvm/install

/ we install rvm, 
/ geen ruby, 
/ stable slaat op rvm	, 
/ wat doet -s	?
/ TODO

[eric@localhost ~]$ curl -L https://get.rvm.io >/tmp/rvm.bash
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     100   184  100   184    0     0    153      0  0:00:01  0:00:01 --:--:--   22100   184  100   184    0     0    153      0  0:00:01  0:00:01 --:--:--   224
100 13784  100 13784    0     0   8346      0  0:00:01  0:00:01 --:--:--  8346
[eric@localhost ~]$ vi /tmp/rvm.bash 
[eric@localhost ~]$ curl -L https://get.rvm.io | bash -s stable
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--       0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     100   184  100   184    0     0    157      0  0:00:01  0:00:01 --:--:--   230
100 13784  100 13784    0     0   7795      0  0:00:01  0:00:01 --:--:--  7795
Downloading RVM from wayneeseguin branch stable
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     100   124  100   124    0     0    212      0 --:--:-- --:--:-- --:--:--   270
  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--      22 1081k   22  239k    0     0   123k      0  0:00:08  0:00:01  0:00:07  325 69 1081k   69  751k    0     0   255k      0  0:00:04  0:00:02  0:00:02  433100 1081k  100 1081k    0     0   292k      0  0:00:03  0:00:03 --:--:--  434k

Installing RVM to /home/eric/.rvm/
    Adding rvm PATH line to /home/eric/.bashrc /home/eric/.zshrc.
    Adding rvm loading line to /home/eric/.bash_profile /home/eric/.zprofile.
Installation of RVM in /home/eric/.rvm/ is almost complete:

  * To start using RVM you need to run `source /home/eric/.rvm/scripts/rvm`
    in all your open shell windows, in rare cases you need to reopen all shell windows.

# eric,
#
#   Thank you for using RVM!
#   I sincerely hope that RVM helps to make your life easier and more enjoyable!!!
#
# ~Wayne

# In case of problems:
#      run and read: rvm notes
#         read docs: http://rvm.io/
#        talk to us: http://webchat.freenode.net/?channels=rvm (http://freenode.net/faq.shtml#plusr)
#   read cheatsheet: http://cheat.errtheblog.com/s/rvm
#  watch screencast: http://screencasts.org/episodes/how-to-use-rvm
# open a bug report: https://github.com/wayneeseguin/rvm/issues
[eric@localhost ~]$ 

/ open nieuw window,
[eric@localhost ~]$  echo $PATH
/usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/home/eric/.local/bin:/home/eric/bin:/home/eric/gsutil:/home/eric/.rvm/bin

/ dus we hebben rvm, 	

[eric@localhost ~]$ rvm list known
# MRI Rubies
[ruby-]1.8.6[-p420]
[ruby-]1.8.7[-p374]
[ruby-]1.9.1[-p431]
[ruby-]1.9.2[-p320]
[ruby-]1.9.3[-p448]
[ruby-]2.0.0-p195
[ruby-]2.0.0[-p247]
[ruby-]2.0.0-head
ruby-head
...

[eric@localhost ~]$ rvm install 2.0.0
Searching for binary rubies, this might take some time.
Installing requirements for fedora, might require sudo password.
Installing required packages: gcc-c++, readline-devel, zlib-devel, libyaml-devel, libffi-devel, openssl-devel, autoconf, automake, libtool, bison......................................................................................................................................................................................
Requirements installation successful.
ruby-2.0.0-p247 - #configure
ruby-2.0.0-p247 - #download
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 19.6M  100 19.6M    0     0   664k      0  0:00:30  0:00:30 --:--:--  760k
ruby-2.0.0-p247 - #validate archive
ruby-2.0.0-p247 - #extract
ruby-2.0.0-p247 - #validate binary
ruby-2.0.0-p247 - #setup
Saving wrappers to '/home/eric/.rvm/wrappers/ruby-2.0.0-p247'........
ruby-2.0.0-p247 - #importing default gemsets, this may take time.......................

/ we zien in 
# visudo
eric    ALL=(ALL)       ALL
/maar waarom vraagt niet om een wachtwoord	?
/ TODO

[eric@localhost ~]$ which ruby
/usr/bin/ruby
[eric@localhost ~]$ which gem
/usr/bin/gem

[eric@localhost ~]$ rvm use 2.0.0

RVM is not a function, selecting rubies with 'rvm use ...' will not work.

You need to change your terminal emulator preferences to allow login shell.
Sometimes it is required to use `/bin/bash --login` as the command.
Please visit https://rvm.io/integration/gnome-terminal/ for a example.

/ we doen	,
[eric@localhost ~]$ bash --login
[eric@localhost ~]$ rvm use 2.0.0
Using /home/eric/.rvm/gems/ruby-2.0.0-p247
[eric@localhost ~]$ which ruby
~/.rvm/rubies/ruby-2.0.0-p247/bin/ruby
[eric@localhost ~]$ which gem
~/.rvm/rubies/ruby-2.0.0-p247/bin/gem

/ Maar als we deze shell exit, is het weer /usr/bin/ruby	,

[eric@localhost ~]$ bash --login
[eric@localhost ~]$ rvm use 2.0.0 --default
/ helpt ook niet	,
/ TODO

[eric@localhost ~]$ bash --login
/ Dan rvm's ruby, dus we moeten WH nog een keer login,

/ 7	.

/ upgrade rvm

/ lees
https://rvm.io/rvm/upgrading

[eric@localhost omega4]$ rvm get stable
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   184  100   184    0     0     90      0  0:00:02  0:00:02 --:--:--   119
100 19527  100 19527    0     0   7957      0  0:00:02  0:00:02 --:--:-- 93879
Downloading RVM branch stable
Downloading https://github.com/wayneeseguin/rvm/archive/stable.tar.gz to rvm-stable.tgz.
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   124  100   124    0     0    139      0 --:--:-- --:--:-- --:--:--   178
100 1088k  100 1088k    0     0   196k      0  0:00:05  0:00:05 --:--:--  294k

Upgrading the RVM installation in /home/eric/.rvm/
    RVM PATH line found in /home/eric/.bashrc /home/eric/.zshrc.
    RVM sourcing line found in /home/eric/.bash_profile /home/eric/.zprofile.
Upgrade of RVM in /home/eric/.rvm/ is complete.

# eric,
#
#   Thank you for using RVM!
#   We sincerely hope that RVM helps to make your life easier and more enjoyable!!!
#
# ~Wayne, Michal & team.

In case of problems: http://rvm.io/help and https://twitter.com/rvm_io

Upgrade Notes:

  * RVM comes with a set of default gems including 'bundler', 'rake', 'rubygems-bundler' and 'rvm' gems;
    if you do not wish to get these gems, install RVM with this flag: --without-gems="rvm rubygems-bundler"
    this option is remembered, it's enough to use it once.

  * RVM will try to automatically use available package manager, might require `sudo`,
    read more about it in `rvm help autolibs`

  * RVM 1.20.12 removes the automated --progress-bar from curl options,
    if you liked this then you can restore this behavior with:

      echo progress-bar >> ~/.curlrc

  * RVM 1.20 changes default behavior of Autolibs to Enabled - if you prefer the 1.19 behavior
    then run "rvm autolibs read-fail", read more details: rvm help autolibs
  * RVM 1.24 changes default package manager on OSX to Homebrew,
    use `rvm autolibs macports` if you prefer Macports.
  * RVM 1.24 changes default `--verify-downloads` flag to `1` you can get the paranoid mode again with:
      echo rvm_verify_downloads_flag=0 >> ~/.rvmrc

RVM reloaded!

/ 7	.

[eric@localhost omega4]$  gem install compass
Fetching: chunky_png-1.2.9.gem (100%)
Successfully installed chunky_png-1.2.9
Fetching: fssm-0.2.10.gem (100%)
Successfully installed fssm-0.2.10
Fetching: compass-0.12.2.gem (100%)
Successfully installed compass-0.12.2
Parsing documentation for chunky_png-1.2.9
Installing ri documentation for chunky_png-1.2.9
Parsing documentation for fssm-0.2.10
Installing ri documentation for fssm-0.2.10
Parsing documentation for compass-0.12.2
Installing ri documentation for compass-0.12.2
3 gems installed

[eric@localhost omega4]$ gem install susy
Fetching: susy-1.0.9.gem (100%)
Successfully installed susy-1.0.9
Parsing documentation for susy-1.0.9
Installing ri documentation for susy-1.0.9
1 gem installed

/ 7	.

/ lees	,
https://rvm.io/gemsets/basics

/ wat is	,
gem "html5-boilerplate", "~> 2.1.0"

/ lees	,
http://foundation.zurb.com/docs/sass.html

gem "sass", "~> 3.2.12"

[eric@localhost net.tutsplus.com]$ gem "sass", "~> 3.2.12"
ERROR:  While executing gem ... (Gem::CommandLineError)
    Unknown command sass,


/ 7	.

/ gemsets

/ compass 0.12.2 is een gem, 
/maar we gaan gemsets maken, een set van gems, 
/ nl stable, en edge


/ we kijken naar	,
http://www.youtube.com/watch?v=34eDCtcaqHU

/ we kunnen,
[eric@localhost net.tutsplus.com]$ gem help commands
    uninstall              Uninstall gems from the local repository

[eric@localhost net.tutsplus.com]$ gem list

*** LOCAL GEMS ***

compass (1.0.0.alpha.13, 0.13.alpha.12, 0.12.2)
compass-core (1.0.0.alpha.13)
sass (3.3.0.rc.2, 3.2.12)
sassy-buttons (0.2.6)
susy (2.0.0.alpha.5, 1.0.9)

/ 7	

/ rm alles	,

[eric@localhost net.tutsplus.com]$  gem uninstall sassy-buttons
Successfully uninstalled sassy-buttons-0.2.6

/ Inderdaad	, 
[eric@localhost gems]$ pwd
/home/eric/.rvm/gems/ruby-2.0.0-p247/gems
/ in ls zien we dat hij weg is	,

[eric@localhost net.tutsplus.com]$  gem uninstall susy

Select gem to uninstall:
 1. susy-1.0.9
 2. susy-2.0.0.alpha.5
 3. All versions
> 3
Successfully uninstalled susy-1.0.9
Successfully uninstalled susy-2.0.0.alpha.5

[eric@localhost net.tutsplus.com]$  gem uninstall compass

Select gem to uninstall:
 1. compass-1.0.0.alpha.13
 2. compass-0.12.2
 3. compass-0.13.alpha.12
 4. All versions
> 4
Successfully uninstalled compass-1.0.0.alpha.13
Successfully uninstalled compass-0.12.2
Remove executables:
	compass

in addition to the gem? [Yn]  Y
Removing compass
Successfully uninstalled compass-0.13.alpha.12

/ Dat was	,
[eric@localhost gems]$ which compass
~/.rvm/gems/ruby-2.0.0-p247/bin/compass
/ 'n shell script	,

[eric@localhost net.tutsplus.com]$  gem uninstall sass

Select gem to uninstall:
 1. sass-3.2.12
 2. sass-3.3.0.rc.2
 3. All versions
> 3
Successfully uninstalled sass-3.2.12

You have requested to uninstall the gem:
	sass-3.3.0.rc.2

compass-core-1.0.0.alpha.13 depends on sass (>= 3.3.rc.1)
If you remove this gem, these dependencies will not be met.
Continue with Uninstall? [yN]  N
ERROR:  While executing gem ... (Gem::DependencyRemovalException)
    Uninstallation aborted due to dependent gem(s)

[eric@localhost net.tutsplus.com]$  gem uninstall compass-core
Successfully uninstalled compass-core-1.0.0.alpha.13

[eric@localhost net.tutsplus.com]$  gem uninstall sass
Remove executables:
	sass, sass-convert, scss

in addition to the gem? [Yn]  Y
Removing sass
Removing sass-convert
Removing scss
Successfully uninstalled sass-3.3.0.rc.2

/ 7	.

[eric@localhost gems]$ vi ~/.rvm/gems/ruby-2.0.0-p247
ruby-2.0.0-p247/        ruby-2.0.0-p247@global/ 

[eric@localhost gems]$ ls ~/.rvm/gems/ruby-2.0.0-p247/gems/
chunky_png-1.2.9  json-1.8.1        rb-fsevent-0.9.3
ffi-1.9.3         listen-1.1.6      rb-inotify-0.9.2
fssm-0.2.10       multi_json-1.8.2  rb-kqueue-0.2.0

[eric@localhost gems]$ ls ~/.rvm/gems/ruby-2.0.0-p247@global/gems/
bundler-1.3.5         rake-10.1.0             rvm-1.11.3.8
bundler-unload-1.0.1  rubygems-bundler-1.2.2


/ we hadden tot nu toe steeds sass, compass in ruby-2.0.0-p247	,
[eric@localhost net.tutsplus.com]$  rvm info
ruby-2.0.0-p247:
...

[eric@localhost sass-tutorials]$ gem list

*** LOCAL GEMS ***

bundler (1.3.5)
bundler-unload (1.0.1)
chunky_png (1.2.9)
ffi (1.9.3)
fssm (0.2.10)
json (1.8.1)
listen (1.1.6)
multi_json (1.8.2)
rake (10.1.0)
rb-fsevent (0.9.3)
rb-inotify (0.9.2)
rb-kqueue (0.2.0)
rubygems-bundler (1.2.2)
rvm (1.11.3.8)

/ we zien global en local gems	, in de WH default gemset	,

/ we install de stable versions van sass, compass, susy in de default gem	, anders moeten we steeds	,
[eric@localhost net.tutsplus.com]$ bash --login
[eric@localhost net.tutsplus.com]$ rvm 2.0.0-p247@stbl

/ we doen dus in de default gem	,

[eric@localhost sass-tutorials]$ gem install sass --no-ri --no-rdoc
Fetching: sass-3.2.12.gem (100%)
Successfully installed sass-3.2.12
1 gem installed

[eric@localhost sass-tutorials]$ gem list
*** LOCAL GEMS ***

bundler (1.3.5)
bundler-unload (1.0.1)
chunky_png (1.2.9)
ffi (1.9.3)
fssm (0.2.10)
json (1.8.1)
listen (1.1.6)
multi_json (1.8.2)
rake (10.1.0)
rb-fsevent (0.9.3)
rb-inotify (0.9.2)
rb-kqueue (0.2.0)
rubygems-bundler (1.2.2)
rvm (1.11.3.8)
sass (3.2.12)

[eric@localhost gems]$ ls ruby-2.0.0-p247/gems/
sass-3.2.12

[eric@localhost sass-tutorials]$ gem install compass --no-ri --no-rdoc
Fetching: compass-0.12.2.gem (100%)
Successfully installed compass-0.12.2
1 gem installed

/ chunky_png-1.2.9 , fssm-0.2.10 waren er al	,

[eric@localhost sass-tutorials]$ gem install susy --no-rdoc --no-ri
Fetching: susy-1.0.9.gem (100%)
Successfully installed susy-1.0.9
1 gem installed

[eric@localhost sass-tutorials]$ gem install sassy-buttons --no-rdoc --no-ri
Fetching: sassy-buttons-0.2.6.gem (100%)
Successfully installed sassy-buttons-0.2.6
1 gem installed


[eric@localhost sass-tutorials]$  rvm gemset delete stbl
Are you SURE you wish to remove the entire gemset directory 'stbl' (/home/eric/.rvm/gems/ruby-2.0.0-p247@stbl)?
(anything other than 'yes' will cancel) > yes
Removing gemset stbl

[eric@localhost sass-tutorials]$  rvm gemset create ltst
gemset created ltst	=> /home/eric/.rvm/gems/ruby-2.0.0-p247@ltst


[eric@localhost sass-tutorials]$ bash --login
[eric@localhost sass-tutorials]$ rvm 2.0.0-p247@ltst

$ rvm list
/ geeft rubies

$ gem list
/ geeft gems	,

[eric@localhost sass-tutorials]$   gem help install
  Defaults:
    --both --version '>= 0' --document --no-force
    --install-dir /home/eric/.rvm/gems/ruby-2.0.0-p247@ltst

[eric@localhost sass-tutorials]$ gem list sass --pre -r
*** REMOTE GEMS ***

sass (3.3.0.rc.2, 3.3.0.rc.1, ...

/ we hoeven alleen --pre te geven	, dan pakt hij de meest recente	, 
/ dus NIET	-v '>=3.3.0.alpha'	,

[eric@localhost sass-tutorials]$  gem install sass --pre --no-ri --no-rdoc
Fetching: rb-fsevent-0.9.3.gem (100%)
Successfully installed rb-fsevent-0.9.3
Fetching: ffi-1.9.3.gem (100%)
Building native extensions.  This could take a while...
Successfully installed ffi-1.9.3
Fetching: rb-inotify-0.9.2.gem (100%)
Successfully installed rb-inotify-0.9.2
Fetching: rb-kqueue-0.2.0.gem (100%)
Successfully installed rb-kqueue-0.2.0
Fetching: listen-1.1.6.gem (100%)
Successfully installed listen-1.1.6
Fetching: sass-3.3.0.rc.2.gem (100%)
Successfully installed sass-3.3.0.rc.2
6 gems installed

[eric@localhost sass-tutorials]$ gem list

*** LOCAL GEMS ***

bundler (1.3.5)
bundler-unload (1.0.1)
ffi (1.9.3)
listen (1.1.6)
rake (10.1.0)
rb-fsevent (0.9.3)
rb-inotify (0.9.2)
rb-kqueue (0.2.0)
rubygems-bundler (1.2.2)
rvm (1.11.3.8)
sass (3.3.0.rc.2)

[eric@localhost sass-tutorials]$  gem install compass --pre --no-ri --no-rdoc
Fetching: multi_json-1.8.2.gem (100%)
Successfully installed multi_json-1.8.2
Fetching: compass-core-1.0.0.alpha.13.gem (100%)
Successfully installed compass-core-1.0.0.alpha.13
Fetching: chunky_png-1.2.9.gem (100%)
Successfully installed chunky_png-1.2.9
Fetching: json-1.8.1.gem (100%)
Building native extensions.  This could take a while...
Successfully installed json-1.8.1
Fetching: compass-1.0.0.alpha.13.gem (100%)
    Compass is charityware. If you love it, please donate on our behalf at http://umdf.org/compass Thanks!
Successfully installed compass-1.0.0.alpha.13
5 gems installed

[eric@localhost sass-tutorials]$ gem list

*** LOCAL GEMS ***

bundler (1.3.5)
bundler-unload (1.0.1)
chunky_png (1.2.9)
compass (1.0.0.alpha.13)
compass-core (1.0.0.alpha.13)
ffi (1.9.3)
json (1.8.1)
listen (1.1.6)
multi_json (1.8.2)
rake (10.1.0)
rb-fsevent (0.9.3)
rb-inotify (0.9.2)
rb-kqueue (0.2.0)
rubygems-bundler (1.2.2)
rvm (1.11.3.8)
sass (3.3.0.rc.2)

[eric@localhost sass-tutorials]$  gem install susy --pre --no-ri --no-rdoc
Fetching: susy-2.0.0.alpha.5.gem (100%)
Successfully installed susy-2.0.0.alpha.5
1 gem installed

[eric@localhost sass-tutorials]$  gem install sassy-buttons --pre --no-ri --no-rdoc
Fetching: sassy-buttons-0.2.6.gem (100%)
Successfully installed sassy-buttons-0.2.6
Fetching: fssm-0.2.10.gem (100%)
Successfully installed fssm-0.2.10
2 gems installed

/ er zijn geen pre releases	,

[eric@localhost sass-tutorials]$ gem list sassy-buttons --pre -r

*** REMOTE GEMS ***

/ 7	.

/ SAMENVATTING

[eric@localhost net.tutsplus.com]$ gem list

*** LOCAL GEMS ***

bundler (1.3.5)
bundler-unload (1.0.1)
chunky_png (1.2.9)
compass (0.12.2)
ffi (1.9.3)
fssm (0.2.10)
json (1.8.1)
listen (1.1.6)
multi_json (1.8.2)
rake (10.1.0)
rb-fsevent (0.9.3)
rb-inotify (0.9.2)
rb-kqueue (0.2.0)
rubygems-bundler (1.2.2)
rvm (1.11.3.8)
sass (3.2.12)
sassy-buttons (0.2.6)
susy (1.0.9)

[eric@localhost net.tutsplus.com]$ sass -v
Sass 3.2.12 (Media Mark)
[eric@localhost net.tutsplus.com]$ compass -v
Compass 0.12.2 (Alnilam)

[eric@localhost net.tutsplus.com]$ bash --login
[eric@localhost net.tutsplus.com]$ rvm 2.0.0-p247@ltst

[eric@localhost net.tutsplus.com]$ gem list

*** LOCAL GEMS ***

bundler (1.3.5)
bundler-unload (1.0.1)
chunky_png (1.2.9)
compass (1.0.0.alpha.13)
compass-core (1.0.0.alpha.13)
ffi (1.9.3)
fssm (0.2.10)
json (1.8.1)
listen (1.1.6)
multi_json (1.8.2)
rake (10.1.0)
rb-fsevent (0.9.3)
rb-inotify (0.9.2)
rb-kqueue (0.2.0)
rubygems-bundler (1.2.2)
rvm (1.11.3.8)
sass (3.3.0.rc.2)
sassy-buttons (0.2.6)
susy (2.0.0.alpha.5)

[eric@localhost net.tutsplus.com]$ sass -v
Sass 3.3.0.rc.2 (Maptastic Maple)
[eric@localhost net.tutsplus.com]$ compass -v
Compass 1.0.0.alpha.12

[eric@localhost 5]$ pwd
/home/eric/Devel/Web/Sass/compass-tutorials/leveluptuts/5


[eric@localhost 5]$ sass -w --sourcemap --compass -t expanded sass/:stylesheets/
>>> Sass is watching for changes. Press Ctrl-C to stop.
      write stylesheets/screen.css
      write stylesheets/screen.css.map
      write stylesheets/style.css
      write stylesheets/style.css.map




/ Einde RVM RUBY

/ DEBUG COMPASS

[eric@localhost 5]$ pwd
/home/eric/Devel/Web/Sass/compass-tutorials/leveluptuts/5
[eric@localhost 5]$ ls
config.rb  index.html  sass  stylesheets

/ Maak eerst de stylesheets/ leeg	, zodat er geen css files van een andere compass versie overblijven	,

$ rm stylesheets/*

[eric@localhost 5]$ sass --sourcemap --compass -w -t expanded sass/:stylesheets/
>>> Sass is watching for changes. Press Ctrl-C to stop.
      write stylesheets/ie.css
      write stylesheets/ie.css.map
      write stylesheets/print.css
      write stylesheets/print.css.map
      write stylesheets/screen.css
      write stylesheets/screen.css.map
      write stylesheets/style.css
      write stylesheets/style.css.map

/ Maak ook 1 keer een link de document root naar de .rvm/ 	,
$ ls -la ~/Devel/Web
lrwxrwxrwx.  1 eric eric    15 Dec  5 20:29 .rvm -> /home/eric/.rvm

/ geef in chrome	,
http://web/Sass/compass-tutorials/leveluptuts/5/
/ en kijk bij Elements, ctrl+click op een css prop name	,



/ Einde DEBUG COMPASS

/ SUSY

[eric@localhost Sass]$ pwd
/home/eric/Devel/Web/Sass

[eric@localhost Susy]$ compass create first -r susy -u susy
directory first/ 
directory first/sass/ 
directory first/stylesheets/ 
   create first/config.rb 
   create first/sass/screen.scss 
   create first/sass/_base.scss 
   create first/stylesheets/screen.css 

*********************************************************************
Congratulations! Your compass project has been created.

You may now add and edit sass stylesheets in the sass subdirectory of your project.

Sass files beginning with an underscore are called partials and won't be
compiled to CSS, but they can be imported into other sass stylesheets.

You can configure your project by editing the config.rb configuration file.

You must compile your sass stylesheets into CSS when they change.
This can be done in one of the following ways:
  1. To compile on demand:
     compass compile [path/to/project]
  2. To monitor your project for changes and automatically recompile:
     compass watch [path/to/project]

More Resources:
  * Website: http://compass-style.org/
  * Sass: http://sass-lang.com
  * Community: http://groups.google.com/group/compass-users/


Please see the Susy website for all documentation and tutorials:

    http://www.oddbird.net/susy

To get started, set up your grid in the base partial by following the inline instructions.

To import your new stylesheets add the following lines of HTML (or equivalent) to your webpage:
<head>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
</head>

$ cd first
$ rm stylesheets/*
$ compass watch
...

[eric@localhost first]$  vi sass/_base.scss 
// ---------------------------------------------------------------------------
// Imports

@import "susy";

// ---------------------------------------------------------------------------
// Basic Grid

$total-columns  : 12;
$column-width   : 4em;
$gutter-width   : 1em;
$grid-padding   : $gutter-width;

// $show-grid-backgrounds  : true;
// default is true	,

/ SAMENVATTING

/ 7	.

// $show-grid-backgrounds  : true;
// default is true	,

/ we moeten bij mobile first, en bij ieder bp	,
  @include susy-grid-background;
/ anders past hij zich niet aan	,
/TODO



/ Einde SAMENVATTING

/ 7	.

/ we maken	,

[eric@localhost first]$ pwd
/home/eric/Devel/Web/Sass/Susy/first
$ vi index.html

<!doctype html>
<head>
  <link href="stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
</head>
<body>
	<div class="container">
		Hello World
	</div>
</body>

/ we moeten de / voor stylesheets rm, want onze site is niet in de doc root van web	,

[eric@walnut first]$ git init
Initialized empty Git repository in /home/eric/Devel/Web/Sass/Susy/first/.git/
[eric@walnut first]$ git status
# On branch master
#
# Initial commit
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#	.sass-cache/
#	ChangeLog
#	LICENSE
#	README.md
#	bin/
#	config.rb
#	index.html
#	lib/
#	sass/
#	share/
#	stylesheets/
nothing added to commit but untracked files present (use "git add" to track)

$ git add .
$ git commit -m v0.1
$ git tag v0.1

/ 7	.

http://web/Sass/Susy/first/

/ v0.2

/ lees	,
http://susy.oddbird.net/guides/getting-started/

$ vi index.html

<!doctype html>
<head>
  <link href="stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
</head>
<body>
	<div class="page">
		<header>Header</header>
		<nav>
			<ul>
				<li><a href="http://twitter.com">twitter</a>
				<li><a href="http://facebook.com">facebook</a>
			</ul>
		</nav>
		<div class="content">
			<div class="main">main</div>
			<div class="secondary">secondary</div>
		</div>
		<footer>Footer</footer>
	</div>
</body>

$ vi sass/partials/_base.scss

@import "susy";

// ---------------------------------------------------------------------------
// Basic Grid

$total-columns  : 12;
$column-width   : 4em;
$gutter-width   : 1em;
$grid-padding   : $gutter-width;

$show-grid-backgrounds  : true;


$ vi sass/screen.scss

@import "base";

/* -------------------------------------------------------------------------*/
/* Layout */

.page {
  @include container;
  @include susy-grid-background;

  header,footer{
  	background:orange;
  	opacity:.5;
  	clear:both;
  }
  nav{
  	@include span-columns(3,12);
  	opacity:.5;
  	background:green;
  }
  .content{
  	@include span-columns(9 omega,12);
  	
  	opacity:.5;
  	.main{
  		@include span-columns(6,9);
  		background:green;
  		opacity:.5;
  		
  	}
  	.secondary{
  		@include span-columns(3 omega,9);
  		background:red;
  		opacity:.5;
  		
  	}
  }
}

[eric@walnut first]$ git status 
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#	modified:   .sass-cache/d0ec215bd733aa3f1326d878170a9d6826a2c353/screen.scssc
#	modified:   index.html
#	modified:   sass/screen.scss
#	modified:   stylesheets/screen.css
#
no changes added to commit (use "git add" and/or "git commit -a")

[eric@walnut first]$ git commit -a -m "v0.2"
[master 8ed371b] v0.2
 4 files changed, 87 insertions(+), 5 deletions(-)
[eric@walnut first]$ git tag v0.2

/ Lees	,
http://sixrevisions.com/web_design/the-960-grid-system-made-easy/

/ 7	.

/ mobile first

http://web/Sass/Susy/second/

[eric@walnut Susy]$ compass create second -r susy --using susy
$ cd second

$ vi index.html

<!doctype html>
<head>
  <link href="stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
</head>
<body>
  <div class="page">
    Hello world
  </div>
</body>


$ vi sass/_base.scss

$total-columns  : 12;
$column-width   : 4em;
$gutter-width   : 1em;
$grid-padding   : $gutter-width;

$show-grid-backgrounds  : true;

$ vi sass/screen.scss

$total-columns:4;
.page {
  @include susy-grid-background;
  @include container;
  @include at-breakpoint(30em 8){
    @include susy-grid-background;
    @include container;
  }
}


/ Einde SUSY

/ SUSY NETTUTS

/ 7	.

/ we lezen	,
http://net.tutsplus.com/tutorials/html-css-techniques/responsive-grids-with-susy/

[eric@localhost net.tutsplus.com]$ pwd
/home/eric/Devel/Web/Sass/Susy/net.tutsplus.com
[eric@localhost net.tutsplus.com]$ unzip  ~/Downloads/code_download.zip 

/ geef	,
http://web/Sass/Susy/net.tutsplus.com/
/ OK

[eric@localhost net.tutsplus.com]$ gem install sassy-buttons
Fetching: sassy-buttons-0.2.6.gem (100%)
Successfully installed sassy-buttons-0.2.6
Parsing documentation for sassy-buttons-0.2.6
Installing ri documentation for sassy-buttons-0.2.6
1 gem installed

/we copy config.rb van ../first	, en add
require 'sassy-buttons'

/ see http://compass-style.org/index/functions/ voor compact	, 
/hoe kom je hier via 't menu	?
/ TODO

/ 7	.

/ in sass is @include fct call	, @mixin = fct, die args kan hebben	,

@mixin border-radius($radius) {
  -webkit-border-radius: $radius;
     -moz-border-radius: $radius;
      -ms-border-radius: $radius;
       -o-border-radius: $radius;
          border-radius: $radius;
}

.box { @include border-radius(10px)}

/ import is wat in C include heet	,


/ 7	.

[eric@localhost gems]$ pwd
/home/eric/.rvm/gems/ruby-2.0.0-p247/gems

/ container mixin ,
[eric@localhost ~]$  vi susy-1.0.9/sass/susy/_grid.scss 

/ compact	, 
[eric@localhost ~]$  vi compass-0.12.2/lib/compass/sass_extensions/functions/lists.rb

/ at-breakpoint
$ vi susy-1.0.9/sass/susy/_media.scss

/ pie-clearfix
$ vi compass-0.12.2/frameworks/compass/stylesheets/compass/utilities/general/_clearfix.scss

/ 13	.

/ Ga naar	,
https://rubygems.org/gems/susy
https://rubygems.org/gems/sassy-buttons


[eric@localhost net.tutsplus.com]$ gem install susy -v '>=2.0.0alpha5'

/ 7	.

[eric@localhost net.tutsplus.com]$ pwd
/home/eric/Devel/Web/Sass/Susy/net.tutsplus.com
[eric@localhost net.tutsplus.com]$ vi sass/screen.scss 
...
    @include container($total-columns, $tablet, $computer);

/ Deze screen.scss is niet write for susy-2.0.0.alpha5	, die we in de gemset 2.0.0-p247 hebben	, want daar heeft container 1 arg	,
/ TODO


 



/ Einde SUSY NETTUTS

/ SASS COMPASS

/ 7	. 

/ kijk video
http://net.tutsplus.com/tutorials/html-css-techniques/developing-with-sass-and-chrome-devtools/

/ Paul Irish en deze net.tutsplus.com : chrome experiments gaat nu anders	,

/lees
Dev Tools
Editing Styles and the DOM
Working with CSS Preprocessors
https://developers.google.com/chrome-developer-tools/docs/css-preprocessors

/chrome dev tools 
	settings (radertje onder)
General
	Enable CSS source maps	 : al checked
		Auto-reload generated CSS :check

[eric@localhost first]$ gem install sass -v '>=3.3.0alpha' --pre
Fetching: rb-fsevent-0.9.3.gem (100%)
Successfully installed rb-fsevent-0.9.3
Fetching: ffi-1.9.3.gem (100%)
Building native extensions.  This could take a while...
Successfully installed ffi-1.9.3
Fetching: rb-inotify-0.9.2.gem (100%)
Successfully installed rb-inotify-0.9.2
Fetching: rb-kqueue-0.2.0.gem (100%)
Successfully installed rb-kqueue-0.2.0
Fetching: listen-1.1.6.gem (100%)
Successfully installed listen-1.1.6
Fetching: sass-3.3.0.rc.2.gem (100%)
Successfully installed sass-3.3.0.rc.2
Parsing documentation for rb-fsevent-0.9.3
Installing ri documentation for rb-fsevent-0.9.3
Parsing documentation for ffi-1.9.3
Installing ri documentation for ffi-1.9.3
Parsing documentation for rb-inotify-0.9.2
Installing ri documentation for rb-inotify-0.9.2
Parsing documentation for rb-kqueue-0.2.0
Installing ri documentation for rb-kqueue-0.2.0
Parsing documentation for listen-1.1.6
Installing ri documentation for listen-1.1.6
Parsing documentation for sass-3.3.0.rc.2
Installing ri documentation for sass-3.3.0.rc.2
6 gems installed

[eric@localhost first]$ sass -v
Sass 3.3.0.rc.2 (Maptastic Maple)

/ lees	,
https://github.com/chriseppstein/compass/issues/1108

[eric@localhost 6]$ gem install compass -v '>=0.13alpha' --pre
Fetching: multi_json-1.8.2.gem (100%)
Successfully installed multi_json-1.8.2
Fetching: compass-core-1.0.0.alpha.13.gem (100%)
Successfully installed compass-core-1.0.0.alpha.13
Fetching: compass-1.0.0.alpha.13.gem (100%)
    Compass is charityware. If you love it, please donate on our behalf at http://umdf.org/compass Thanks!
Successfully installed compass-1.0.0.alpha.13
Parsing documentation for multi_json-1.8.2
Installing ri documentation for multi_json-1.8.2
Parsing documentation for compass-core-1.0.0.alpha.13
Installing ri documentation for compass-core-1.0.0.alpha.13
Parsing documentation for compass-1.0.0.alpha.13
Installing ri documentation for compass-1.0.0.alpha.13
3 gems installed



[eric@localhost 2]$ pwd
/home/eric/Devel/Web/Sass/compass-tutorials/leveluptuts/2
[eric@localhost 2]$ compass watch
>>> Compass is watching for changes. Press Ctrl-C to Stop.

/ lees	Syntax van Sass ref over command line use	,
http://sass-lang.com/documentation/file.SASS_REFERENCE.html#syntax
If you have a directory with many Sass files, you can also tell Sass to watch the entire directory:
sass --watch app/sass:public/stylesheets

[eric@localhost 9]$ pwd
/home/eric/Devel/Web/Sass/sass-tutorials/leveluptuts/9
[eric@localhost 9]$  sass -w --sourcemap scss/:css
>>> Sass is watching for changes. Press Ctrl-C to stop.
      write css/style.css
      write css/style.css.map

/ Inderdaad, als we met vergrootglas een  

/ 7	.

[eric@localhost sass-tutorials]$ pwd
/home/eric/Devel/Web/Sass/sass-tutorials
[eric@localhost sass-tutorials]$ sass -w --sourcemap style2.scss:style2.css
>>> Sass is watching for changes. Press Ctrl-C to stop.

/ lees	,
https://developers.google.com/chrome-developer-tools/docs/css-preprocessors

http://web/Sass/sass-tutorials/sass-tutorial2.html

/ In Dev Tools, Elements , 
/ click op een div in de body	,
/ we zien css , en rechtsboven style2.scss, maar daar doen we niets mee	,
-webkit-border-radius: 20px;
border-radius: 20px;
/ click Ctrl, en ga met muis over de css props: het worden links	, click op een css prop, en we komen in de scss file en je ziet waar deze css was def	,
/ maar we kunnen ook op een value ctrl+click, dan komen we in een scss file waar deze value wordt set	,

/ 13	.

[eric@localhost sass-lang]$ pwd
/home/eric/Devel/Web/Sass/sass-tutorials/sass-lang
[eric@localhost sass-lang]$ ls
css  index.html  scss
[eric@localhost sass-lang]$ cat index.html 
...
 <link href="css/style3.css" media="all" rel="stylesheet" type="text/css" />

[eric@localhost sass-lang]$ ls scss/
partials    style3.scss
[eric@localhost sass-lang]$ ls scss/partials/
_import3.scss
[eric@localhost sass-lang]$ ls css/
style3.css.map  
style3.css 

/geef	,
http://web/Sass/sass-tutorials/sass-lang/

/ Alles wordt gevonden	,




/ 13	.

[eric@localhost 5]$ pwd
/home/eric/Devel/Web/Sass/compass-tutorials/leveluptuts/5

/ we kunnen , maar dan geen .map files	, 
$ compass watch

 of	,
[eric@localhost 5]$ sass -w --sourcemap --compass -t expanded sass/:stylesheets/
>>> Sass is watching for changes. Press Ctrl-C to stop.

/ 13 

/ in /home/eric/Devel/Web/Sass/compass-tutorials/leveluptuts/6 
/we moeten style.css corrigeren	,

/* line 64, my/*.png */
.my-sprite, .my-flower, .my-tux, .my-waterfall {
  background-image: url('/Sass/compass-tutorials/leveluptuts/6/images/my-s4b013ac02b.png');
  background-repeat: no-repeat;
}
/ want er stond	,
  background-image: url('/images/my-s4b013ac02b.png');

/ ERR met my/*.png


/ Einde SASS COMPASS 

/ COMPASS

[eric@localhost Susy]$ compass create --help | grep using
        --using PATTERN              A framework's pattern to use when creating the project.

/ we zien dit op susy en foundation	,
http://foundation.zurb.com/docs/sass.html
http://susy.oddbird.net/guides/getting-started/



/ Einde COMPASS

/ eODE 

[eric@localhost Node.js]$ pwd
/home/eric/Devel/Node.js
[eric@localhost Node.js]$ tar -xvzf  ~/Downloads/node-v0.10.22.tar.gz 

[eric@localhost node-v0.10.22]$ ./configure 2>&1 | tee LOG_configure.txt
[eric@localhost node-v0.10.22]$ make 2>&1 | tee LOG_make.txt
[eric@localhost node-v0.10.22]$ sudo make install 2>&1 | tee LOG_make_install.txt

/als je met npm -g install, moet je ook met -g uninstall	,
[eric@localhost ~]$ sudo npm uninstall -g n
unbuild n@1.1.0

/ Einde NODE

/ BOWER

[eric@walnut bower-use]$ pwd
/home/eric/Devel/Web/Bower/bower-use

/ 7	. 

/ jquery

/ we kunnen 3 dingen doen	,

/ 13	.
$ bower install jquery

[eric@walnut bower-use]$ ls bower_components/
jquery/ sizzle/ 
[eric@walnut bower-use]$ ls bower_components/jquery/
dist  MIT-LICENSE.txt  src

/ 13	.
$ npm install jquery
[eric@walnut bower-use]$ ls node_modules/jquery/
AUTHORS.txt  bower.json  CONTRIBUTING.md  dist  MIT-LICENSE.txt  package.json  README.md  src
/ 
/ Hier kunnen we,
$ cd src/jquery
[eric@walnut jquery]$ bower install
bower cached        git://github.com/jquery/sizzle.git#1.10.16
bower validate      1.10.16 against git://github.com/jquery/sizzle.git#1.10.16
bower not-cached    git://github.com/jrburke/requirejs-bower.git#~2.1.8
bower resolve       git://github.com/jrburke/requirejs-bower.git#~2.1.8
bower not-cached    git://github.com/cjohansen/Sinon.JS.git#~1.7.3
bower resolve       git://github.com/cjohansen/Sinon.JS.git#~1.7.3
bower not-cached    git://github.com/jquery/qunit.git#~1.12.0
bower resolve       git://github.com/jquery/qunit.git#~1.12.0
bower download      https://github.com/jrburke/requirejs-bower/archive/2.1.11.tar.gz
bower download      https://github.com/cjohansen/Sinon.JS/archive/v1.7.3.tar.gz
bower download      https://github.com/jquery/qunit/archive/v1.12.0.tar.gz
bower extract       requirejs#~2.1.8 archive.tar.gz
bower resolved      git://github.com/jrburke/requirejs-bower.git#2.1.11
bower extract       qunit#~1.12.0 archive.tar.gz
bower resolved      git://github.com/jquery/qunit.git#1.12.0
bower extract       sinon#~1.7.3 archive.tar.gz
bower resolved      git://github.com/cjohansen/Sinon.JS.git#1.7.3
bower install       sizzle#1.10.16
bower install       requirejs#2.1.11
bower install       qunit#1.12.0
bower install       sinon#1.7.3

sizzle#1.10.16 bower_components/sizzle

requirejs#2.1.11 bower_components/requirejs

qunit#1.12.0 bower_components/qunit

sinon#1.7.3 bower_components/sinon

/ TODO (verschil bower en npm)


 /13	.

[eric@walnut bower-use]$ git clone https://github.com/jquery/jquery.git
[eric@walnut bower-use]$ cd jquery/
[eric@walnut jquery]$ npm install
/ install wat er in package.json staat aan dev deps	,
[eric@walnut jquery]$ grunt
grunt-git-authors@1.2.0 node_modules/grunt-git-authors

grunt-compare-size@0.4.0 node_modules/grunt-compare-size

shelljs@0.2.6 node_modules/shelljs

requirejs@2.1.10 node_modules/requirejs

grunt-contrib-uglify@0.3.2 node_modules/grunt-contrib-uglify
├── chalk@0.4.0 (has-color@0.1.4, ansi-styles@1.0.0, strip-ansi@0.1.1)
├── grunt-lib-contrib@0.6.1 (zlib-browserify@0.0.1)
└── uglify-js@2.4.12 (uglify-to-browserify@1.0.2, async@0.2.10, optimist@0.3.7, source-map@0.1.32)

gzip-js@0.3.2 node_modules/gzip-js
├── crc32@0.2.2
└── deflate-js@0.2.3

load-grunt-tasks@0.3.0 node_modules/load-grunt-tasks
├── findup-sync@0.1.2 (lodash@1.0.1, glob@3.1.21)
└── globule@0.2.0 (glob@3.2.8, minimatch@0.2.14, lodash@2.4.1)

grunt-cli@0.1.13 node_modules/grunt-cli
├── resolve@0.3.1
├── nopt@1.0.10 (abbrev@1.0.4)
└── findup-sync@0.1.2 (glob@3.1.21, lodash@1.0.1)

grunt-contrib-jshint@0.8.0 node_modules/grunt-contrib-jshint
└── jshint@2.4.3 (console-browserify@0.1.6, underscore@1.4.4, cli@0.4.5, minimatch@0.2.14, shelljs@0.1.4, htmlparser2@3.3.0)

grunt-contrib-watch@0.5.3 node_modules/grunt-contrib-watch
├── tiny-lr@0.0.4 (debug@0.7.4, faye-websocket@0.4.4, noptify@0.0.3, qs@0.5.6)
└── gaze@0.4.3 (globule@0.1.0)

archiver@0.5.2 node_modules/archiver
├── lazystream@0.1.0
├── readable-stream@1.0.25 (string_decoder@0.10.25-1)
├── lodash@2.4.1
├── file-utils@0.1.5 (rimraf@2.2.6, isbinaryfile@0.1.9, minimatch@0.2.14, glob@3.2.8, findup-sync@0.1.2, iconv-lite@0.2.11, lodash@2.1.0)
└── zip-stream@0.1.4 (lodash.defaults@2.4.1)

testswarm@1.1.0 node_modules/testswarm
└── request@2.12.0

grunt-jscs-checker@0.3.2 node_modules/grunt-jscs-checker
├── vow@0.4.0
├── hooker@0.2.3
├── lodash.assign@2.4.1 (lodash._objecttypes@2.4.1, lodash.keys@2.4.1, lodash._basecreatecallback@2.4.1)
└── jscs@1.2.4 (colors@0.6.0-1, vow@0.3.9, esprima@1.0.3, commander@1.2.0, minimatch@0.2.12, glob@3.2.7, xmlbuilder@1.1.2, vow-fs@0.2.3)

grunt-bowercopy@0.7.1 node_modules/grunt-bowercopy
├── glob@3.2.8 (inherits@2.0.1, minimatch@0.2.14)
├── lodash@2.4.1
└── bower@1.2.8 (junk@0.2.2, stringify-object@0.1.8, abbrev@1.0.4, which@1.0.5, chmodr@0.1.0, osenv@0.0.3, archy@0.0.2, graceful-fs@2.0.2, rimraf@2.2.6, open@0.0.4, bower-endpoint-parser@0.2.1, bower-logger@0.2.2, lru-cache@2.3.1, nopt@2.1.2, p-throttler@0.0.1, chalk@0.2.1, retry@0.6.0, mkdirp@0.3.5, tmp@0.0.23, q@0.9.7, request-progress@0.3.1, sudo-block@0.2.1, semver@2.1.0, fstream@0.1.25, fstream-ignore@0.0.7, bower-json@0.4.0, promptly@0.2.0, tar@0.1.19, decompress-zip@0.0.4, handlebars@1.0.12, request@2.27.0, cardinal@0.4.4, mout@0.7.1, bower-config@0.5.0, update-notifier@0.1.7, inquirer@0.3.5, bower-registry-client@0.1.6)

grunt-jsonlint@1.0.4 node_modules/grunt-jsonlint
└── jsonlint@1.6.0 (nomnom@1.6.2, JSV@4.0.2)
[eric@walnut jquery]$ grunt
Running "jsonlint:pkg" (jsonlint) task
>> 1 file lint free.

Running "jsonlint:jscs" (jsonlint) task
>> 1 file lint free.

Running "jsonlint:bower" (jsonlint) task
>> 1 file lint free.

Running "build:all:*" (build) task
>> File 'dist/jquery.js' created.

Running "jshint:all" (jshint) task
>> 110 files lint free.

Running "jshint:dist" (jshint) task
>> 1 file lint free.

Running "jscs:src" (jscs) task
>> 79 files without code style errors.

Running "jscs:gruntfile" (jscs) task
>> 1 files without code style errors.

Running "jscs:tasks" (jscs) task
>> 3 files without code style errors.

Running "uglify:all" (uglify) task
File dist/jquery.min.map created (source map).
File dist/jquery.min.js created.
Original: 245892 bytes.
Minified: 83866 bytes.

Running "dist:*" (dist) task

Running "compare_size:files" (compare_size) task
   raw     gz Sizes                                                            
245892  72840 dist/jquery.js                                                   
 83866  29373 dist/jquery.min.js                                               

Saved as: master

Done, without errors.

/ geef in chrome	,
http://web/Bower/bower-use/jquery/test
/ en check
Hide passed tests

/ Wat doet 
$ grunt watch
/ TODO

/ 13	.

/ we kunnen 	,
$ bower install angular

$ npm install angular
/ Nu is er geen bower.json 
/ TODO  

/ 7	.

/ video http://www.youtube.com/watch?v=o9Xo_WFAyqg

[eric@walnut my-video]$ pwd
/home/eric/Devel/Web/Bower/my-video

[eric@walnut my-video]$ sudo npm install -g generator-requirejs

generator-requirejs@0.2.2 /usr/local/lib/node_modules/generator-requirejs
├── chalk@0.2.1 (has-color@0.1.4, ansi-styles@0.2.0)
└── yeoman-generator@0.13.4 (dargs@0.1.0, diff@1.0.8, debug@0.7.4, rimraf@2.2.6, text-table@0.1.1, mime@1.2.11, async@0.2.10, mkdirp@0.3.5, isbinaryfile@0.1.9, shelljs@0.1.4, underscore.string@2.3.3, iconv-lite@0.2.11, tar@0.1.19, lodash@1.3.1, glob@3.2.9, findup-sync@0.1.2, cheerio@0.12.4, request@2.25.0, inquirer@0.3.5)

[eric@walnut my-video]$ yo requirejs

[?] What is the name of your app? my-weather-app
[?] Description: An awesome requirejs app

I'm all done. Running bower install & npm install for you to install the required dependencies. If this fails, try running the command yourself.
/ we zien inderdaad npm en bower calls	,

npm WARN package.json my-weather-app@0.0.0 No repository field.
npm http GET https://registry.npmjs.org/grunt-contrib-qunit
npm http GET https://registry.npmjs.org/grunt-contrib-concat
npm http GET https://registry.npmjs.org/grunt-contrib-uglify
npm http GET https://registry.npmjs.org/grunt-contrib-clean
npm http GET https://registry.npmjs.org/grunt-contrib-jshint
npm http GET https://registry.npmjs.org/grunt-contrib-requirejs
npm http GET https://registry.npmjs.org/grunt-contrib-watch
npm http GET https://registry.npmjs.org/grunt-contrib-connect
npm http GET https://registry.npmjs.org/grunt
npm http 304 https://registry.npmjs.org/grunt-contrib-concat
npm http 304 https://registry.npmjs.org/grunt-contrib-uglify
npm http 304 https://registry.npmjs.org/grunt-contrib-clean
npm http 304 https://registry.npmjs.org/grunt-contrib-qunit
npm http 304 https://registry.npmjs.org/grunt-contrib-jshint
npm http 304 https://registry.npmjs.org/grunt-contrib-requirejs
npm http 304 https://registry.npmjs.org/grunt-contrib-watch
npm http 304 https://registry.npmjs.org/grunt-contrib-connect
npm http 304 https://registry.npmjs.org/grunt
bower cached        git://github.com/jrburke/requirejs-bower.git#2.1.11
bower validate      2.1.11 against git://github.com/jrburke/requirejs-bower.git#~2.1.5
bower cached        git://github.com/jquery/qunit.git#1.11.0
bower validate      1.11.0 against git://github.com/jquery/qunit.git#~1.11.0
bower cached        git://github.com/jquery/jquery.git#2.1.0
bower validate      2.1.0 against git://github.com/jquery/jquery.git#>= 1.8.0
npm http GET https://registry.npmjs.org/requirejs
npm http GET https://registry.npmjs.org/grunt-lib-phantomjs
npm http GET https://registry.npmjs.org/jshint
npm http GET https://registry.npmjs.org/uglify-js
npm http GET https://registry.npmjs.org/grunt-lib-contrib
npm http GET https://registry.npmjs.org/chalk
npm http GET https://registry.npmjs.org/connect
npm http GET https://registry.npmjs.org/connect-livereload
npm http GET https://registry.npmjs.org/open/0.0.4
npm http GET https://registry.npmjs.org/portscanner/0.2.2
npm http GET https://registry.npmjs.org/async
npm http GET https://registry.npmjs.org/rimraf
npm http GET https://registry.npmjs.org/async
npm http GET https://registry.npmjs.org/coffee-script
npm http GET https://registry.npmjs.org/dateformat/1.0.2-1.2.3
npm http GET https://registry.npmjs.org/colors
npm http GET https://registry.npmjs.org/eventemitter2
npm http GET https://registry.npmjs.org/findup-sync
npm http GET https://registry.npmjs.org/glob
npm http GET https://registry.npmjs.org/hooker
npm http GET https://registry.npmjs.org/iconv-lite
npm http GET https://registry.npmjs.org/nopt
npm http GET https://registry.npmjs.org/rimraf
npm http GET https://registry.npmjs.org/minimatch
npm http GET https://registry.npmjs.org/lodash
npm http GET https://registry.npmjs.org/underscore.string
npm http GET https://registry.npmjs.org/which
npm http GET https://registry.npmjs.org/js-yaml
npm http GET https://registry.npmjs.org/exit
npm http GET https://registry.npmjs.org/getobject
npm http 304 https://registry.npmjs.org/requirejs
npm http 304 https://registry.npmjs.org/grunt-lib-phantomjs
npm http 304 https://registry.npmjs.org/chalk
npm http 304 https://registry.npmjs.org/jshint
npm http GET https://registry.npmjs.org/gaze
npm http GET https://registry.npmjs.org/tiny-lr/0.0.4
npm http 304 https://registry.npmjs.org/uglify-js
npm http GET https://registry.npmjs.org/temporary
npm http GET https://registry.npmjs.org/eventemitter2
npm http GET https://registry.npmjs.org/semver
npm http GET https://registry.npmjs.org/phantomjs
npm http 304 https://registry.npmjs.org/connect
npm http 304 https://registry.npmjs.org/open/0.0.4
npm http 304 https://registry.npmjs.org/connect-livereload
npm http GET https://registry.npmjs.org/cli
npm http GET https://registry.npmjs.org/minimatch
npm http GET https://registry.npmjs.org/htmlparser2
npm http GET https://registry.npmjs.org/console-browserify
npm http GET https://registry.npmjs.org/exit
npm http GET https://registry.npmjs.org/underscore
npm http GET https://registry.npmjs.org/shelljs
npm http 304 https://registry.npmjs.org/portscanner/0.2.2
npm http 304 https://registry.npmjs.org/grunt-lib-contrib
npm http GET https://registry.npmjs.org/has-color
npm http GET https://registry.npmjs.org/ansi-styles
npm http GET https://registry.npmjs.org/strip-ansi
npm http GET https://registry.npmjs.org/zlib-browserify/0.0.1
npm http 304 https://registry.npmjs.org/rimraf
npm http 304 https://registry.npmjs.org/coffee-script
npm http GET https://registry.npmjs.org/optimist
npm http GET https://registry.npmjs.org/async
npm http GET https://registry.npmjs.org/source-map
npm http GET https://registry.npmjs.org/uglify-to-browserify
npm http 304 https://registry.npmjs.org/dateformat/1.0.2-1.2.3
npm http 304 https://registry.npmjs.org/colors
npm http 304 https://registry.npmjs.org/eventemitter2
npm http 200 https://registry.npmjs.org/async
npm http 304 https://registry.npmjs.org/findup-sync
npm http 304 https://registry.npmjs.org/glob
npm http 200 https://registry.npmjs.org/async
npm http 304 https://registry.npmjs.org/rimraf
npm http 304 https://registry.npmjs.org/minimatch
npm http GET https://registry.npmjs.org/async/0.1.15
npm http 304 https://registry.npmjs.org/nopt
npm http 304 https://registry.npmjs.org/hooker
npm http 304 https://registry.npmjs.org/iconv-lite
npm http 304 https://registry.npmjs.org/which
npm http 304 https://registry.npmjs.org/lodash
npm http 304 https://registry.npmjs.org/js-yaml
npm http GET https://registry.npmjs.org/compressible/1.0.0
npm http GET https://registry.npmjs.org/batch/0.5.0
npm http GET https://registry.npmjs.org/qs/0.6.6
npm http GET https://registry.npmjs.org/cookie-signature/1.0.1
npm http GET https://registry.npmjs.org/buffer-crc32/0.2.1
npm http GET https://registry.npmjs.org/cookie/0.1.0
npm http GET https://registry.npmjs.org/send/0.1.4
npm http GET https://registry.npmjs.org/bytes/0.2.1
npm http GET https://registry.npmjs.org/fresh/0.2.0
npm http GET https://registry.npmjs.org/pause/0.0.1
npm http GET https://registry.npmjs.org/uid2/0.0.3
npm http GET https://registry.npmjs.org/debug
npm http GET https://registry.npmjs.org/raw-body/1.1.2
npm http GET https://registry.npmjs.org/negotiator/0.3.0
npm http GET https://registry.npmjs.org/multiparty/2.2.0
npm http GET https://registry.npmjs.org/methods/0.1.0
bower install       requirejs#2.1.11
bower install       qunit#1.11.0
bower install       jquery#2.1.0
npm http 304 https://registry.npmjs.org/underscore.string
npm http 304 https://registry.npmjs.org/exit
npm http 304 https://registry.npmjs.org/getobject
npm http 304 https://registry.npmjs.org/gaze
npm http 304 https://registry.npmjs.org/eventemitter2
npm http 304 https://registry.npmjs.org/tiny-lr/0.0.4
npm http 304 https://registry.npmjs.org/semver
npm http 304 https://registry.npmjs.org/temporary
npm http 304 https://registry.npmjs.org/phantomjs
npm http 304 https://registry.npmjs.org/exit

requirejs#2.1.11 bower_components/requirejs

qunit#1.11.0 bower_components/qunit

jquery#2.1.0 bower_components/jquery
npm http 304 https://registry.npmjs.org/cli
npm http 304 https://registry.npmjs.org/htmlparser2
npm http GET https://registry.npmjs.org/graceful-fs
npm http 304 https://registry.npmjs.org/minimatch
npm http 304 https://registry.npmjs.org/console-browserify
npm http GET https://registry.npmjs.org/abbrev
npm http 304 https://registry.npmjs.org/shelljs
npm http 304 https://registry.npmjs.org/has-color
npm http 304 https://registry.npmjs.org/ansi-styles
npm http 304 https://registry.npmjs.org/strip-ansi
npm http 304 https://registry.npmjs.org/underscore
npm http GET https://registry.npmjs.org/lru-cache
npm http GET https://registry.npmjs.org/sigmund
npm http GET https://registry.npmjs.org/adm-zip/0.2.1
npm http GET https://registry.npmjs.org/kew
npm http GET https://registry.npmjs.org/npmconf/0.0.24
npm http GET https://registry.npmjs.org/ncp/0.4.2
npm http GET https://registry.npmjs.org/mkdirp/0.3.5
npm http 304 https://registry.npmjs.org/optimist
npm http 304 https://registry.npmjs.org/source-map
npm http 304 https://registry.npmjs.org/uglify-to-browserify
npm http GET https://registry.npmjs.org/package
npm http GET https://registry.npmjs.org/graceful-fs
npm http GET https://registry.npmjs.org/inherits
npm http 304 https://registry.npmjs.org/zlib-browserify/0.0.1
npm http GET https://registry.npmjs.org/noptify
npm http GET https://registry.npmjs.org/debug
npm http GET https://registry.npmjs.org/qs
npm http GET https://registry.npmjs.org/faye-websocket
npm http 304 https://registry.npmjs.org/async/0.1.15
npm http 200 https://registry.npmjs.org/async
npm http 304 https://registry.npmjs.org/batch/0.5.0
npm http 304 https://registry.npmjs.org/compressible/1.0.0
npm http GET https://registry.npmjs.org/globule
npm http 304 https://registry.npmjs.org/qs/0.6.6
npm http 304 https://registry.npmjs.org/cookie-signature/1.0.1
npm http 304 https://registry.npmjs.org/buffer-crc32/0.2.1
npm http 304 https://registry.npmjs.org/cookie/0.1.0
npm http 304 https://registry.npmjs.org/send/0.1.4
npm http GET https://registry.npmjs.org/argparse
npm http GET https://registry.npmjs.org/esprima
npm http 304 https://registry.npmjs.org/bytes/0.2.1
npm http 304 https://registry.npmjs.org/fresh/0.2.0
npm http 304 https://registry.npmjs.org/pause/0.0.1
npm http 304 https://registry.npmjs.org/debug
npm http 304 https://registry.npmjs.org/uid2/0.0.3
npm http GET https://registry.npmjs.org/wordwrap
npm http GET https://registry.npmjs.org/inherits
npm http 304 https://registry.npmjs.org/raw-body/1.1.2
npm http 304 https://registry.npmjs.org/negotiator/0.3.0
npm http 304 https://registry.npmjs.org/multiparty/2.2.0
npm http 304 https://registry.npmjs.org/lru-cache
npm http GET https://registry.npmjs.org/amdefine
npm http GET https://registry.npmjs.org/domhandler
npm http GET https://registry.npmjs.org/domutils
npm http 304 https://registry.npmjs.org/methods/0.1.0
npm http 304 https://registry.npmjs.org/sigmund
npm http GET https://registry.npmjs.org/domelementtype
npm http GET https://registry.npmjs.org/readable-stream
npm http 304 https://registry.npmjs.org/graceful-fs
npm http 304 https://registry.npmjs.org/abbrev
npm http 304 https://registry.npmjs.org/adm-zip/0.2.1
npm http 304 https://registry.npmjs.org/ncp/0.4.2
npm http 304 https://registry.npmjs.org/npmconf/0.0.24
npm http 304 https://registry.npmjs.org/graceful-fs
npm http 304 https://registry.npmjs.org/inherits
npm http 304 https://registry.npmjs.org/debug
npm http 304 https://registry.npmjs.org/mkdirp/0.3.5
npm http 304 https://registry.npmjs.org/package
npm http 304 https://registry.npmjs.org/kew
npm http 304 https://registry.npmjs.org/globule
npm http 304 https://registry.npmjs.org/noptify
npm http GET https://registry.npmjs.org/mime
npm http GET https://registry.npmjs.org/range-parser/0.0.4
npm http 304 https://registry.npmjs.org/qs
npm http 304 https://registry.npmjs.org/inherits
npm http 304 https://registry.npmjs.org/argparse
npm http 304 https://registry.npmjs.org/esprima
npm http 304 https://registry.npmjs.org/amdefine
npm http 304 https://registry.npmjs.org/domhandler
npm http 304 https://registry.npmjs.org/wordwrap
npm http 304 https://registry.npmjs.org/readable-stream
npm http 304 https://registry.npmjs.org/domutils
npm http 304 https://registry.npmjs.org/faye-websocket
npm http GET https://registry.npmjs.org/once
npm http GET https://registry.npmjs.org/osenv/0.0.3
npm http GET https://registry.npmjs.org/ini
npm http GET https://registry.npmjs.org/config-chain
npm http 304 https://registry.npmjs.org/domelementtype
npm http 304 https://registry.npmjs.org/mime
npm http 304 https://registry.npmjs.org/range-parser/0.0.4
npm http 304 https://registry.npmjs.org/ini
npm http 304 https://registry.npmjs.org/config-chain
npm http 304 https://registry.npmjs.org/osenv/0.0.3
npm http 304 https://registry.npmjs.org/once
npm http GET https://registry.npmjs.org/string_decoder
npm http GET https://registry.npmjs.org/proto-list
npm http 304 https://registry.npmjs.org/string_decoder
npm http 304 https://registry.npmjs.org/proto-list

> phantomjs@1.9.7-1 install /home/eric/Devel/Web/Bower/my-video/node_modules/grunt-contrib-qunit/node_modules/grunt-lib-phantomjs/node_modules/phantomjs
> node install.js

PhantomJS detected, but wrong version 1.9.0 @ /home/eric/Devel/Web/phantomjs/bin/phantomjs.
Downloading http://cdn.bitbucket.org/ariya/phantomjs/downloads/phantomjs-1.9.7-linux-x86_64.tar.bz2
Saving to /tmp/phantomjs/phantomjs-1.9.7-linux-x86_64.tar.bz2
Receiving...
Received 781K...
Received 1563K...
Received 2345K...
Received 3127K...
Received 3909K...
Received 4691K...
Received 5473K...
Received 6255K...
Received 7037K...
Received 7819K...
Received 8601K...
Received 9383K...
Received 10165K...
Received 10947K...
Received 11729K...
Received 12511K...
Received 12852K total.
Extracting tar contents (via spawned process)
Copying extracted folder /tmp/phantomjs/phantomjs-1.9.7-linux-x86_64.tar.bz2-extract-1393528985248/phantomjs-1.9.7-linux-x86_64 -> /home/eric/Devel/Web/Bower/my-video/node_modules/grunt-contrib-qunit/node_modules/grunt-lib-phantomjs/node_modules/phantomjs/lib/phantom
Writing location.js file
Done. Phantomjs binary available at /home/eric/Devel/Web/Bower/my-video/node_modules/grunt-contrib-qunit/node_modules/grunt-lib-phantomjs/node_modules/phantomjs/lib/phantom/bin/phantomjs
npm http GET https://registry.npmjs.org/stream-counter
npm http 304 https://registry.npmjs.org/stream-counter
npm http GET https://registry.npmjs.org/core-util-is
npm http GET https://registry.npmjs.org/debuglog/0.0.2
npm http 304 https://registry.npmjs.org/core-util-is
npm http 304 https://registry.npmjs.org/debuglog/0.0.2



grunt-contrib-concat@0.3.0 node_modules/grunt-contrib-concat

grunt-contrib-requirejs@0.4.3 node_modules/grunt-contrib-requirejs
└── requirejs@2.1.11

grunt-contrib-clean@0.5.0 node_modules/grunt-contrib-clean
└── rimraf@2.2.6

grunt-contrib-uglify@0.3.2 node_modules/grunt-contrib-uglify
├── chalk@0.4.0 (has-color@0.1.4, ansi-styles@1.0.0, strip-ansi@0.1.1)
├── grunt-lib-contrib@0.6.1 (zlib-browserify@0.0.1)
└── uglify-js@2.4.12 (uglify-to-browserify@1.0.2, async@0.2.10, optimist@0.3.7, source-map@0.1.32)

grunt-contrib-watch@0.5.3 node_modules/grunt-contrib-watch
├── tiny-lr@0.0.4 (debug@0.7.4, faye-websocket@0.4.4, noptify@0.0.3, qs@0.5.6)
└── gaze@0.4.3 (globule@0.1.0)

grunt@0.4.2 node_modules/grunt
├── which@1.0.5
├── dateformat@1.0.2-1.2.3
├── eventemitter2@0.4.13
├── getobject@0.1.0
├── colors@0.6.2
├── hooker@0.2.3
├── async@0.1.22
├── exit@0.1.2
├── rimraf@2.0.3 (graceful-fs@1.1.14)
├── nopt@1.0.10 (abbrev@1.0.4)
├── minimatch@0.2.14 (sigmund@1.0.0, lru-cache@2.5.0)
├── lodash@0.9.2
├── glob@3.1.21 (inherits@1.0.0, graceful-fs@1.2.3)
├── coffee-script@1.3.3
├── underscore.string@2.2.1
├── findup-sync@0.1.2 (lodash@1.0.1)
├── iconv-lite@0.2.11
└── js-yaml@2.0.5 (esprima@1.0.4, argparse@0.1.15)

grunt-contrib-jshint@0.8.0 node_modules/grunt-contrib-jshint
└── jshint@2.4.4 (console-browserify@0.1.6, exit@0.1.2, minimatch@0.2.14, cli@0.4.5, underscore@1.4.4, shelljs@0.1.4, htmlparser2@3.3.0)

grunt-contrib-qunit@0.4.0 node_modules/grunt-contrib-qunit
└── grunt-lib-phantomjs@0.5.0 (semver@1.0.14, eventemitter2@0.4.13, temporary@0.0.8, phantomjs@1.9.7-1)

grunt-contrib-connect@0.7.0 node_modules/grunt-contrib-connect
├── connect-livereload@0.3.2
├── open@0.0.4
├── async@0.2.10
├── portscanner@0.2.2 (async@0.1.15)
└── connect@2.13.0 (uid2@0.0.3, methods@0.1.0, cookie-signature@1.0.1, pause@0.0.1, fresh@0.2.0, qs@0.6.6, debug@0.7.4, bytes@0.2.1, raw-body@1.1.2, buffer-crc32@0.2.1, batch@0.5.0, cookie@0.1.0, compressible@1.0.0, negotiator@0.3.0, send@0.1.4, multiparty@2.2.0)

[eric@walnut my-video]$ bower search weather
Search results:

    jquery-simpleweather git://github.com/monkeecreate/jquery.simpleWeather
    weather git://github.com/danheberden/jquery-weather.git
    simpleWeather git://github.com/monkeecreate/jquery.simpleWeather.git
    ng-weather git://github.com/asafdav/ngWeather.git

[eric@walnut my-video]$ bower install weather
bower not-cached    git://github.com/danheberden/jquery-weather.git#*
bower resolve       git://github.com/danheberden/jquery-weather.git#*
bower download      https://github.com/danheberden/jquery-weather/archive/v0.2.3.tar.gz
bower extract       weather#* archive.tar.gz
bower resolved      git://github.com/danheberden/jquery-weather.git#0.2.3
bower install       weather#0.2.3

weather#0.2.3 bower_components/weather
└── jquery#2.1.0

[eric@walnut my-video]$ bower install weather --save
bower cached        git://github.com/danheberden/jquery-weather.git#0.2.3
bower validate      0.2.3 against git://github.com/danheberden/jquery-weather.git#*

$ vi bower.json

{
  "name": "my-weather-app",
  "dependencies": {
    "requirejs": "~2.1.5",
    "jquery": ">= 1.8.0",
    "qunit": "~1.11.0",
    "weather": "~0.2.3"
  }
}

/ 7	. 

[eric@walnut my-video]$ pwd
/home/eric/Devel/Web/Bower/my-video

$ vi app/main.js

define(["jquery","components/weather/weather"], function($,weather) {
  weather("02210",function(err,result){
    if(err){
      alert("uh oh: "+err)
      return
    }
    alert(result.condition.temp)
  })
});

$ vi index.htm

$ grunt preview

/geef in chrome	,
http://localhost:8000/index.htm

/ we zien een alert met 27	,
/ HIER HIER

 





/ Einde BOWER

/ DEFERRED

[eric@walnut deferred]$ pwd
/home/eric/Devel/Web/jquery/deferred
$ yo requirejs

/ 7	. 

/ met requrejs schrijf je geen script meer in html met <script>	, 

[eric@walnut deferred]$ pwd
/home/eric/Devel/Web/jquery/deferred
$ bower install jquery requirejs
/ --save heeft geen zin, want we hebben nog geen bower.json	, dat hadden we ook eerst kunnen doen, maar achteraf kan ook	,
$ bower init

$ vi callback.html

<head>
  <script data-main="app/main" src="bower_components/requirejs/require.js"></script>
</head>

$ vi app/main.js

require.config({
  paths: {
    "components": "../bower_components",
    "jquery": "../bower_components/jquery/dist/jquery"
  }
});

define(["jquery"],function($){
  third()
})
function third(){

var callbacks = $.Callbacks( "memory" );
callbacks.add( fn1 );			/ list=[fn1]
callbacks.fire( "foo" );	/ memory=[self,"foo"], calls list fcts	,
callbacks.add( fn2 );			/ list=[fn1,fn2], omdat er is memory -> calls fire wat na fn1 komt	, fn2 dus	,
callbacks.fire( "bar" );	 
callbacks.remove( fn2 );
callbacks.fire( "foobar" );

}

/ WH een uitzondering is dat $ toch een global is	,
/ var callbacks = $.Callbacks( "memory" ); bijv staat binnen third	, want third() staat binnen de callback van define, en deze wordt called nadat jquery is ...	, 
/ op zich is $ global	,maar als we $.Callbacks buiten third, is hij daar te vroeg: $ is nog niet set	,

/ 7	.

/ $.then	,


/ Geef	,
http://web/jquery/deferred/then.html

$ vi app/main.js

var filterResolve = function() {
  var defer = $.Deferred()
   var filtered = defer.then( 	/ reg deze 2 fcts op de 1ste 2 callbacks bij defer	, en return de promise filtered bij de nieuwe deferred	, de resolve-callback bij defer heeft nu 4 fcts, de reject-callback 3	,
    function( value ) {
      return value * 2;
    },
    function( value ) {
      return value * 3;
    }
)
  defer.resolve( 5 )	/ resolve defer: call de 4 fct op de resolve.callback bij defer	, 
///////////////////////////////////////////////////
		/ en resolve de deferred bij de promise filtered, dus set de deferred op resolved en call de 3 fcts op de resolve callback die er altijd zijn, we register een fct op de resolve callback van deferred hieronder	, 
  defer.reject( 5 ) /doet niets, want defer is resolved,
  filtered.done(function( value ) {	/ register en wordt called (memory) deze fct op de resolve-callback van de deferred bij filtered	,
    $( "p" ).append( "Value is ( 2*5 = ) 10: " + value );
  })
  filtered.fail(function( value ) {
    $( "p" ).append( "Value is ( 2*6 = ) 12: " + value );
  })
}

$( "button" ).on( "click", filterResolve )

/ 7	. 

/ ready

/ 13	.

/ we maken ready.html, 
  <script data-main="app/config" src="bower_components/requirejs/require.js"></script>
  <p>foo bar!</p>

/ en in app/main.js	,
define(["jquery"],function($){
    $("p").append(" and baz")
} 

/ we zien dat $.prototype.ready niet wordt called	,

/ we maken 	,
$ vi ready.html

<head>
  <script src="bower_components/jquery/dist/jquery.js"></script>
  <script>
    $(document).ready(function(){
      $("p").append(" and baz")
    })
  </script>

</head>
<body>
  <p>foo bar!</p>
</body>

$ vi jquery.js

/ we geven de commands in volgorde van tijd	, 
/ we kunnen ons script in de head set of achter p, het maakt niet uit:
/ we zien dat in onze code : $(document).ready(function(){...}) eerder wordt called dan completed	(DOMContentLoaded)	,

/ als we	,

<head>
  <script src="bower_components/jquery/dist/jquery.js"></script>

</head>
<body>
  <p>foo bar!</p>
  <script>
      $("p").append(" and baz")
  </script>
</body>

////////////////////////////////////////////////////
/ we zien dat $("p")... OK,	 maar completed wordt erna pas called	, 
/ completed is een DOMContentLoaded handler, 	dus WH is de DOM klaar na p	, maar wordt DOMContentLoaded later pas fired	, daarom gaat het toch goed	,

/ we hebben in het script in ready.html $(document).ready	,
/ we zien dan:

// The deferred used on DOM ready
var readyList;

// Kick off the DOM ready check even if the user does not
jQuery.ready.promise();

jQuery.ready.promise = function( obj ) {
  if ( !readyList ) {
    readyList = jQuery.Deferred();

      // Use the handy event callback
      document.addEventListener( "DOMContentLoaded", completed, false );

  return readyList.promise( obj );
}

/ in onze code : $(document).ready(function(){...})
jQuery.fn.ready = function( fn ) {
  // Add the callback
  jQuery.ready.promise().done( fn );

  return this;
};

function completed() {
  document.removeEventListener( "DOMContentLoaded", completed, false );
  window.removeEventListener( "load", completed, false );
  jQuery.ready();
}


jQuery.extend({
  // Handle when the DOM is ready
  ready: function( wait ) {

   // Remember that the DOM is ready
    jQuery.isReady = true;
    // If there are functions bound, to execute
    readyList.resolveWith( document, [ jQuery ] );
	}

/ vanwege deze 
    readyList.resolveWith( document, [ jQuery ] );
/ moeten we WH
$(document).ready(function(){

})


/ 7	. 

/ ajax	,





~           

/ Einde DEFERRED

/ OPENSHIFT

ericjvandervelden@gmail.com
vlWalnoot27



/ Einde OPENSHIFT


/ Geef in youtube
yeoman requirejs
/ we zien 
Yeoman Backbone Requirejs
Yeoman Testing

/ YEOMAN

/ 7	.

/ video vanaf de yeoman site	,http://www.youtube.com/watch?feature=player_embedded&v=zBt2g9ekiug

[eric@walnut Yeoman]$ pwd
/home/eric/Devel/Web/Yeoman
[eric@walnut Yeoman]$ sudo npm install -g yo

[Yeoman Doctor] Everything looks alright!

yo@1.1.2 /usr/local/lib/node_modules/yo
├── open@0.0.4
├── async@0.2.10
├── shelljs@0.2.6
├── lodash@2.4.1
├── nopt@2.1.2 (abbrev@1.0.4)
├── sudo-block@0.3.0 (chalk@0.3.0)
├── findup@0.1.3 (colors@0.6.2, nopt@1.0.10)
├── chalk@0.4.0 (has-color@0.1.4, ansi-styles@1.0.0, strip-ansi@0.1.1)
├── update-notifier@0.1.7 (chalk@0.2.1, semver@2.1.0, configstore@0.1.7, request@2.27.0)
├── insight@0.3.1 (object-assign@0.1.2, lodash.debounce@2.4.1, configstore@0.2.2, inquirer@0.4.1, request@2.27.0)
└── yeoman-generator@0.16.0 (dargs@0.1.0, diff@1.0.8, debug@0.7.4, class-extend@0.1.1, rimraf@2.2.6, text-table@0.2.0, mime@1.2.11, mkdirp@0.3.5, isbinaryfile@2.0.1, underscore.string@2.3.3, iconv-lite@0.2.11, glob@3.2.9, findup-sync@0.1.2, file-utils@0.1.5, inquirer@0.4.1, request@2.30.0, download@0.1.10, cheerio@0.13.1)

[eric@walnut Yeoman]$ sudo npm install -g generator-webapp

generator-mocha@0.1.3 /usr/local/lib/node_modules/generator-mocha
└── yeoman-generator@0.14.2 (dargs@0.1.0, debug@0.7.4, diff@1.0.8, rimraf@2.2.6, chalk@0.3.0, text-table@0.2.0, mime@1.2.11, async@0.2.10, mkdirp@0.3.5, isbinaryfile@0.1.9, shelljs@0.2.6, glob@3.2.9, findup-sync@0.1.2, underscore.string@2.3.3, iconv-lite@0.2.11, lodash@2.2.1, request@2.27.0, file-utils@0.1.5, inquirer@0.3.5, download@0.1.10, cheerio@0.12.4)

generator-webapp@0.4.7 /usr/local/lib/node_modules/generator-webapp
├── chalk@0.4.0 (has-color@0.1.4, ansi-styles@1.0.0, strip-ansi@0.1.1)
├── cheerio@0.13.1 (underscore@1.5.2, entities@0.5.0, CSSselect@0.4.1, htmlparser2@3.4.0)
└── yeoman-generator@0.16.0 (dargs@0.1.0, diff@1.0.8, debug@0.7.4, class-extend@0.1.1, rimraf@2.2.6, text-table@0.2.0, mime@1.2.11, async@0.2.10, mkdirp@0.3.5, isbinaryfile@2.0.1, shelljs@0.2.6, glob@3.2.9, underscore.string@2.3.3, iconv-lite@0.2.11, findup-sync@0.1.2, lodash@2.4.1, request@2.30.0, file-utils@0.1.5, inquirer@0.4.1, download@0.1.10)

[eric@walnut my-video1]$ pwd
/home/eric/Devel/Web/Yeoman/my-video1

$ yo webapp 2>&1 | tee LOG_yo_webapp.txt

/ we zien 3 mogelijkheden, zoals bootstrap,  al checked	, we kunnen ze ook uncheck	,
/ na de install	,
[eric@walnut my-video1]$ find -iname "*bootstrap*"
./.sass-cache/9573aa22d1ada4b45a1c0612896a2542b60f351a/bootstrap.scssc
./app/bower_components/sass-bootstrap
./app/bower_components/sass-bootstrap/lib/bootstrap.scss
./app/bower_components/sass-bootstrap/dist/css/bootstrap.min.css
./app/bower_components/sass-bootstrap/dist/css/bootstrap-theme.css
./app/bower_components/sass-bootstrap/dist/css/bootstrap-theme.min.css
./app/bower_components/sass-bootstrap/dist/css/bootstrap.css
./app/bower_components/sass-bootstrap/dist/js/bootstrap.js
./app/bower_components/sass-bootstrap/dist/js/bootstrap.min.js

[eric@walnut my-video1]$ grunt server
Running "server" task
>> The `server` task has been deprecated. Use `grunt serve` to start a server.

Running "serve" task

Running "clean:server" (clean) task

Running "concurrent:server" (concurrent) task
    
    Running "copy:styles" (copy) task
    
    
    Done, without errors.
    
    
    Execution Time (2014-02-26 21:57:48 UTC)
    loading tasks  2ms  ▇▇▇▇▇▇▇▇▇▇▇ 22%
    copy:styles    6ms  ▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇ 67%
    Total 9ms
        
    Running "compass:server" (compass) task
    directory .tmp/styles/ 
       create .tmp/styles/main.css (2.019s)
    Compilation took 2.02s
    
    Done, without errors.
    
    
    Execution Time (2014-02-26 21:57:48 UTC)
    compass:server  4.7s  ▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇ 100%
    Total 4.7s
    
Running "autoprefixer:dist" (autoprefixer) task
Prefixed file ".tmp/styles/main.css" created.

Running "connect:livereload" (connect) task
Started connect web server on 127.0.0.1:9000.

Running "watch" task
Waiting...

/ er verschijnt vanzelf een tab in chrome	,
http://127.0.0.1:9000/

/ als we app/index.html edit in vi	, en save	, dan zien we de verandering meteen in de browser	,

/ 7	.

[eric@walnut my-video1]$ sudo npm install -g generator-angular

generator-karma@0.6.0 /usr/local/lib/node_modules/generator-karma
└── yeoman-generator@0.13.4 (dargs@0.1.0, debug@0.7.4, diff@1.0.8, rimraf@2.2.6, chalk@0.2.1, text-table@0.1.1, mime@1.2.11, async@0.2.10, mkdirp@0.3.5, isbinaryfile@0.1.9, glob@3.2.9, shelljs@0.1.4, tar@0.1.19, findup-sync@0.1.2, underscore.string@2.3.3, iconv-lite@0.2.11, cheerio@0.12.4, request@2.25.0, lodash@1.3.1, inquirer@0.3.5)

generator-angular@0.7.1 /usr/local/lib/node_modules/generator-angular
├── chalk@0.3.0 (ansi-styles@0.2.0, has-color@0.1.4)
├── wiredep@0.4.2 (chalk@0.1.1, lodash@1.3.1)
└── yeoman-generator@0.13.4 (dargs@0.1.0, diff@1.0.8, debug@0.7.4, rimraf@2.2.6, chalk@0.2.1, text-table@0.1.1, mime@1.2.11, async@0.2.10, mkdirp@0.3.5, isbinaryfile@0.1.9, shelljs@0.1.4, underscore.string@2.3.3, iconv-lite@0.2.11, tar@0.1.19, glob@3.2.9, lodash@1.3.1, findup-sync@0.1.2, request@2.25.0, cheerio@0.12.4, inquirer@0.3.5)

/ 7	.

/ Lees	,
http://code.tutsplus.com/tutorials/building-apps-with-the-yeoman-workflow--net-33254

/ 7	.

/ Lees	,
http://yeoman.io/gettingstarted.html

[eric@walnut angular]$ pwd
/home/eric/Devel/Web/Yeoman/gettingstarted/angular

[eric@walnut angular]$ yo angular 2>&1 | tee LOG_yo_angular.txt

Would you like to use Sass (with Compass)? (Y/n) 
Would you like to include Twitter Bootstrap? (Y/n) 
Would you like to use the Sass version of Twitter Bootstrap? (Y/n) 
Which modules would you like to include? 
angular-resource.js
angular-cookies.js
angular-sanitize.js
angular-route.js

/ see LOG_yo_angular.txt

[eric@walnut angular]$ yo angular:controller myController
   create app/scripts/controllers/mycontroller.js
   create test/spec/controllers/mycontroller.js
[eric@walnut angular]$ yo angular:directive myDirective
   create app/scripts/directives/mydirective.js
   create test/spec/directives/mydirective.js
[eric@walnut angular]$ yo angular:filter myFilter
   create app/scripts/filters/myfilter.js
   create test/spec/filters/myfilter.js
[eric@walnut angular]$ yo angular:service myService
   create app/scripts/services/myservice.js
   create test/spec/services/myservice.js

/ 7	. 

/ we lezen	,
http://yeoman.io/codelab.html

/ 7	.

$ vi app/styles/main.scss

@import 'sass-bootstrap/lib/bootstrap';


/ 7	.

$ yo webapp includes sass-bootstrap	,

/ 7	. 

$ grunt serve

/ geef http://127.0.0.1:9000/
/ OK
/ maar als we 	,
http://web/Yeoman/my-video1/app/
/ dan geen styles
/ Hoe komen de styles dus binnen met $ grunt serve	?
/ TODO

/ 7	.

/ we zien 
./app/bower_components/sass-bootstrap/examples
. 

[eric@walnut my-video1]$  ls ./app/bower_components/sass-bootstrap/examples
carousel          justified-nav      non-responsive  starter-template
grid              navbar             offcanvas       sticky-footer
jumbotron         navbar-fixed-top   screenshots     sticky-footer-navbar
jumbotron-narrow  navbar-static-top  signin          theme
[eric@walnut my-video1]$  ls ./app/bower_components/sass-bootstrap/examples/carousel/
carousel.css  index.html
/ Hoe tonen we deze	?
/ TODO

/7	. 

/ lees	,
http://www.html5rocks.com/en/tutorials/webcomponents/yeoman/

/ 7	.

/ lees	,
http://stackoverflow.com/questions/15617431/what-is-workflow-in-yeoman-to-work-with-sass-files
/ die ref naar	,
https://github.com/yeoman/grunt-usemin

/ 7	.

[eric@walnut Yeoman]$ sudo npm install generator-bootstrap -g

generator-bootstrap@0.1.6 /usr/local/lib/node_modules/generator-bootstrap
└── yeoman-generator@0.16.0 (dargs@0.1.0, diff@1.0.8, debug@0.7.4, class-extend@0.1.1, rimraf@2.2.6, text-table@0.2.0, mime@1.2.11, async@0.2.10, mkdirp@0.3.5, isbinaryfile@2.0.1, chalk@0.4.0, shelljs@0.2.6, underscore.string@2.3.3, glob@3.2.9, iconv-lite@0.2.11, findup-sync@0.1.2, lodash@2.4.1, file-utils@0.1.5, inquirer@0.4.1, cheerio@0.13.1, request@2.30.0, download@0.1.10)

[eric@walnut bootstrap]$ pwd
/home/eric/Devel/Web/Yeoman/bootstrap
[eric@walnut bootstrap]$ yo bootstrap
[?] In what format would you like the Bootstrap stylesheets? (Use arrow keys)
‣ css 
  sass 
  less 
  stylus 
/ we set -> op sass	,

bower not-cached    git://github.com/twbs/bootstrap-sass.git#v3.1.0
bower resolve       git://github.com/twbs/bootstrap-sass.git#v3.1.0
bower download      https://github.com/twbs/bootstrap-sass/archive/v3.1.0+2.tar.gz
bower extract       bootstrap-sass#v3.1.0 archive.tar.gz
bower resolved      git://github.com/twbs/bootstrap-sass.git#3.1.0+2
bower install       bootstrap-sass#3.1.0+2
bower no-json       No bower.json file to save to, use bower init to create one

bootstrap-sass#3.1.0+2 app/bower_components/bootstrap-sass

/ TODO (geen Gruntfile.js)	,

/ 7	. 

/ we hebben 
$ grunt serve

/ Als we in main.scss iets veranderen, krijgen we dat meteen te zien	,
$ vi app/styles/main.scss

body {
    padding-top: 20px; 	/ verander naar 200px	,


/ Einde YEOMAN


/ INSTALL FOUNDATION

/ lees	,
http://foundation.zurb.com/docs/sass.html

[eric@localhost Sass]$ pwd
/home/eric/Devel/Web/Sass
[eric@localhost Sass]$ sudo   npm install -g bower grunt-cli
...

/ 7	. 

/ we zijn op	,
https://github.com/zurb/foundation

Quickstart
/Install with bower	,

[eric@walnut install-foundation]$ pwd
/home/eric/Devel/Web/Sass/Foundation/install-foundation
[eric@walnut install-foundation]$ bower install  zurb/bower-foundation
bower cached        git://github.com/zurb/bower-foundation.git#5.0.2
bower validate      5.0.2 against git://github.com/zurb/bower-foundation.git#*
bower new           version for git://github.com/zurb/bower-foundation.git#*
bower resolve       git://github.com/zurb/bower-foundation.git#*
bower download      https://github.com/zurb/bower-foundation/archive/5.1.1.tar.gz
bower extract       bower-foundation#* archive.tar.gz
bower resolved      git://github.com/zurb/bower-foundation.git#5.1.1
bower not-cached    git://github.com/ftlabs/fastclick.git#~0.6.11
bower resolve       git://github.com/ftlabs/fastclick.git#~0.6.11
bower not-cached    git://github.com/mathiasbynens/jquery-placeholder.git#~2.0.7
bower resolve       git://github.com/mathiasbynens/jquery-placeholder.git#~2.0.7
bower not-cached    git://github.com/jquery/jquery.git#>= 2.0.0
bower resolve       git://github.com/jquery/jquery.git#>= 2.0.0
bower not-cached    git://github.com/carhartl/jquery-cookie.git#~1.4.0
bower resolve       git://github.com/carhartl/jquery-cookie.git#~1.4.0
bower cached        git://github.com/Modernizr/Modernizr.git#2.7.1
bower validate      2.7.1 against git://github.com/Modernizr/Modernizr.git#>= 2.6.2
bower download      https://github.com/ftlabs/fastclick/archive/v0.6.11.tar.gz
bower download      https://github.com/mathiasbynens/jquery-placeholder/archive/v2.0.7.tar.gz
bower download      https://github.com/carhartl/jquery-cookie/archive/v1.4.0.tar.gz
bower download      https://github.com/jquery/jquery/archive/2.1.0.tar.gz
bower extract       jquery-placeholder#~2.0.7 archive.tar.gz
bower resolved      git://github.com/mathiasbynens/jquery-placeholder.git#2.0.7
bower extract       jquery.cookie#~1.4.0 archive.tar.gz
bower resolved      git://github.com/carhartl/jquery-cookie.git#1.4.0
bower not-cached    git://github.com/jquery/jquery.git#>=1.2
bower resolve       git://github.com/jquery/jquery.git#>=1.2
bower download      https://github.com/jquery/jquery/archive/2.1.0.tar.gz
bower extract       fastclick#~0.6.11 archive.tar.gz
bower resolved      git://github.com/ftlabs/fastclick.git#0.6.11
bower extract       jquery#>=1.2 archive.tar.gz
bower extract       jquery#>= 2.0.0 archive.tar.gz
bower resolved      git://github.com/jquery/jquery.git#2.1.0
bower resolved      git://github.com/jquery/jquery.git#2.1.0
bower not-cached    git://github.com/jquery/sizzle.git#1.10.16
bower resolve       git://github.com/jquery/sizzle.git#1.10.16
bower download      https://github.com/jquery/sizzle/archive/1.10.16.tar.gz
bower extract       sizzle#1.10.16 archive.tar.gz
bower resolved      git://github.com/jquery/sizzle.git#1.10.16
bower install       foundation#5.1.1
bower install       modernizr#2.7.1
bower install       jquery-placeholder#2.0.7
bower install       jquery.cookie#1.4.0
bower install       fastclick#0.6.11
bower install       jquery#2.1.0
bower install       sizzle#1.10.16

foundation#5.1.1 bower_components/foundation
├── fastclick#0.6.11
├── jquery#2.1.0
├── jquery-placeholder#2.0.7
├── jquery.cookie#1.4.0
└── modernizr#2.7.1

modernizr#2.7.1 bower_components/modernizr

jquery-placeholder#2.0.7 bower_components/jquery-placeholder

jquery.cookie#1.4.0 bower_components/jquery.cookie
└── jquery#2.1.0

fastclick#0.6.11 bower_components/fastclick

jquery#2.1.0 bower_components/jquery
└── sizzle#1.10.16

sizzle#1.10.16 bower_components/sizzle

[eric@walnut install-foundation]$  ls
bower_components
[eric@walnut install-foundation]$ ls bower_components/
fastclick  foundation  jquery  jquery.cookie  jquery-placeholder  modernizr  sizzle

/ 7	.

[eric@walnut install-foundation2]$ git clone git@github.com:zurb/foundation.git
/ ERR (no rights)
/ TODO

[eric@walnut install-foundation2]$ git clone https://github.com/zurb/foundation.git
$ cd foundation
$ npm install
karma-ie-launcher@0.1.1 node_modules/karma-ie-launcher

karma-chrome-launcher@0.1.2 node_modules/karma-chrome-launcher

karma-firefox-launcher@0.1.3 node_modules/karma-firefox-launcher

karma-safari-launcher@0.1.1 node_modules/karma-safari-launcher

karma-script-launcher@0.1.0 node_modules/karma-script-launcher

karma-html2js-preprocessor@0.1.0 node_modules/karma-html2js-preprocessor

karma-jasmine@0.1.5 node_modules/karma-jasmine

grunt-contrib-concat@0.3.0 node_modules/grunt-contrib-concat

grunt-contrib-copy@0.4.1 node_modules/grunt-contrib-copy

highlight.js@7.3.0 node_modules/highlight.js

grunt-contrib-clean@0.5.0 node_modules/grunt-contrib-clean
└── rimraf@2.2.6

grunt-rsync@0.2.1 node_modules/grunt-rsync
└── rsyncwrapper@0.0.19 (lodash@0.9.2)

grunt-contrib-jst@0.5.1 node_modules/grunt-contrib-jst
├── lodash@1.0.1
└── grunt-lib-contrib@0.5.3 (zlib-browserify@0.0.1)

grunt-karma@0.6.2 node_modules/grunt-karma
└── optimist@0.6.1 (wordwrap@0.0.2, minimist@0.0.7)

grunt-newer@0.6.1 node_modules/grunt-newer
├── async@0.2.9
└── rimraf@2.2.4 (graceful-fs@2.0.2)

grunt-contrib-compress@0.5.3 node_modules/grunt-contrib-compress
├── prettysize@0.0.3
├── lazystream@0.1.0 (readable-stream@1.0.25)
└── archiver@0.4.10 (iconv-lite@0.2.11, readable-stream@1.0.25)

grunt-contrib-uglify@0.2.7 node_modules/grunt-contrib-uglify
├── grunt-lib-contrib@0.6.1 (zlib-browserify@0.0.1)
└── uglify-js@2.4.12 (uglify-to-browserify@1.0.2, async@0.2.10, optimist@0.3.7, source-map@0.1.32)

grunt@0.4.2 node_modules/grunt
├── which@1.0.5
├── dateformat@1.0.2-1.2.3
├── eventemitter2@0.4.13
├── getobject@0.1.0
├── colors@0.6.2
├── hooker@0.2.3
├── async@0.1.22
├── exit@0.1.2
├── lodash@0.9.2
├── coffee-script@1.3.3
├── underscore.string@2.2.1
├── findup-sync@0.1.2 (lodash@1.0.1)
├── iconv-lite@0.2.11
├── rimraf@2.0.3 (graceful-fs@1.1.14)
├── nopt@1.0.10 (abbrev@1.0.4)
├── minimatch@0.2.14 (sigmund@1.0.0, lru-cache@2.5.0)
├── glob@3.1.21 (inherits@1.0.0, graceful-fs@1.2.3)
└── js-yaml@2.0.5 (esprima@1.0.4, argparse@0.1.15)

grunt-contrib-watch@0.5.3 node_modules/grunt-contrib-watch
├── tiny-lr@0.0.4 (debug@0.7.4, faye-websocket@0.4.4, noptify@0.0.3, qs@0.5.6)
└── gaze@0.4.3 (globule@0.1.0)

assemble@0.4.34 node_modules/assemble
├── inflection@1.2.7
├── async@0.2.10
├── underscore.string@2.3.3
├── lodash@1.3.1
├── resolve-dep@0.1.3 (matchdep@0.1.2)
├── assemble-yaml@0.1.8 (chalk@0.2.1, globule@0.1.0, iconv-lite@0.2.11, js-yaml@2.1.3, to@0.2.9)
└── assemble-handlebars@0.2.3 (lodash@2.2.1, handlebars@1.3.0, handlebars-helpers@0.5.2)

karma-phantomjs-launcher@0.1.2 node_modules/karma-phantomjs-launcher
└── phantomjs@1.9.7-1 (which@1.0.5, rimraf@2.2.6, ncp@0.4.2, mkdirp@0.3.5, kew@0.1.7, adm-zip@0.2.1, npmconf@0.0.24)

grunt-contrib-jasmine@0.5.2 node_modules/grunt-contrib-jasmine
├── rimraf@2.1.4 (graceful-fs@1.2.3)
└── grunt-lib-phantomjs@0.4.0 (eventemitter2@0.4.13, semver@1.0.14, temporary@0.0.8, phantomjs@1.9.7-1)

jasmine-jquery@1.3.3 node_modules/jasmine-jquery
├── jasmine-node@1.13.1 (underscore@1.6.0, mkdirp@0.3.5, walkdir@0.0.7, coffee-script@1.7.1, requirejs@2.1.11, jasmine-growl-reporter@0.0.2, gaze@0.3.4, jasmine-reporters@0.2.1)
└── jsdom@0.10.1 (xmlhttprequest@1.6.0, cssom@0.3.0, nwmatcher@1.3.1, cssstyle@0.2.9, htmlparser2@3.5.0, request@2.34.0, contextify@0.1.6)

karma-browserstack-launcher@0.0.4 node_modules/karma-browserstack-launcher
├── browserstack@1.0.1
├── q@0.9.7
└── browserstacktunnel-wrapper@1.0.1 (child-daemon@0.0.2)

requirejs@2.1.11 node_modules/requirejs

karma-requirejs@0.2.1 node_modules/karma-requirejs

karma-coffee-preprocessor@0.1.3 node_modules/karma-coffee-preprocessor
└── coffee-script@1.7.1 (mkdirp@0.3.5)

karma@0.10.9 node_modules/karma
├── di@0.0.1
├── rimraf@2.1.4
├── colors@0.6.0-1
├── graceful-fs@1.2.3
├── chokidar@0.8.1
├── mime@1.2.11
├── q@0.9.7
├── minimatch@0.2.14 (sigmund@1.0.0, lru-cache@2.5.0)
├── glob@3.1.21 (inherits@1.0.0)
├── optimist@0.3.7 (wordwrap@0.0.2)
├── coffee-script@1.6.3
├── lodash@1.1.1
├── log4js@0.6.10 (semver@1.1.4, readable-stream@1.0.25, async@0.1.15)
├── http-proxy@0.10.4 (pkginfo@0.3.0, optimist@0.6.1, utile@0.2.1)
├── connect@2.8.8 (methods@0.0.1, uid2@0.0.2, cookie-signature@1.0.1, pause@0.0.1, fresh@0.2.0, debug@0.7.4, qs@0.6.5, bytes@0.2.0, buffer-crc32@0.2.1, cookie@0.1.0, formidable@1.0.14, send@0.1.4)
├── useragent@2.0.7 (lru-cache@2.2.4)
└── socket.io@0.9.16 (base64id@0.1.0, policyfile@0.0.4, redis@0.7.3, socket.io-client@0.9.16)

grunt-sass@0.6.1 node_modules/grunt-sass
├── grunt-lib-contrib@0.6.1 (zlib-browserify@0.0.1)
└── node-sass@0.6.7 (node-watch@0.3.4, colors@0.6.0-1, mkdirp@0.3.5, optimist@0.6.1)

/ installs ook karma, phantomjs	,

$ vi package.json

{
  "name": "zurb-foundation",
  "version": "5.1.1",
  "devDependencies": {
    "grunt": "~0.4.1",
    "grunt-contrib-watch": "~0.5.3",
    "grunt-contrib-jasmine": "~0.5.1",
    "grunt-sass": "~0.6.1",
    "grunt-contrib-concat": "~0.3.0",
    "assemble": "0.4.34",
    "grunt-contrib-copy": "~0.4.1",
    "grunt-contrib-clean": "~0.5.0",
    "highlight.js": "~7.3.0",
    "grunt-contrib-uglify": "~0.2.5",
    "grunt-contrib-compress": "~0.5.2",
    "grunt-newer": "~0.6.0",
    "karma": "~0.10.4",
    "karma-script-launcher": "~0.1.0",
    "karma-firefox-launcher": "~0.1.0",
    "karma-chrome-launcher": "~0.1.0",
    "karma-safari-launcher": "~0.1.1",
    "karma-ie-launcher": "~0.1.1",
    "karma-html2js-preprocessor": "~0.1.0",
    "karma-jasmine": "~0.1.3",
    "karma-phantomjs-launcher": "~0.1.0",
    "karma-browserstack-launcher": "0.0.4",
    "grunt-karma": "~0.6.2",
    "grunt-rsync": "~0.2.1",
    "grunt-contrib-jst": "~0.5.1",
    "jasmine-jquery": "~1.3.3"
  },
  "licenses": [
    {
      "type": "MIT",
      "url": "https://github.com/zurb/foundation/blob/master/LICENSE"
    }
  ]
}


[eric@walnut foundation]$ ls node_modules/
assemble                grunt-karma                  karma-firefox-launcher
grunt                   grunt-newer                  karma-html2js-preprocessor
grunt-contrib-clean     grunt-rsync                  karma-ie-launcher
grunt-contrib-compress  grunt-sass                   karma-jasmine
grunt-contrib-concat    highlight.js                 karma-phantomjs-launcher
grunt-contrib-copy      jasmine-jquery               karma-requirejs
grunt-contrib-jasmine   karma                        karma-safari-launcher
grunt-contrib-jst       karma-browserstack-launcher  karma-script-launcher
grunt-contrib-uglify    karma-chrome-launcher        requirejs
grunt-contrib-watch     karma-coffee-preprocessor

[eric@walnut foundation]$ bower install
bower not-cached    git://github.com/devbridge/jQuery-Autocomplete.git#1.2.7
bower resolve       git://github.com/devbridge/jQuery-Autocomplete.git#1.2.7
bower cached        git://github.com/jquery/jquery.git#2.1.0
bower validate      2.1.0 against git://github.com/jquery/jquery.git#>= 2.1.0
bower cached        git://github.com/Modernizr/Modernizr.git#2.7.1
bower validate      2.7.1 against git://github.com/Modernizr/Modernizr.git#>= 2.6.2
bower cached        git://github.com/ftlabs/fastclick.git#0.6.11
bower validate      0.6.11 against git://github.com/ftlabs/fastclick.git#~0.6.11
bower cached        git://github.com/carhartl/jquery-cookie.git#1.4.0
bower validate      1.4.0 against git://github.com/carhartl/jquery-cookie.git#~1.4.0
bower cached        git://github.com/mathiasbynens/jquery-placeholder.git#2.0.7
bower validate      2.0.7 against git://github.com/mathiasbynens/jquery-placeholder.git#~2.0.7
bower download      https://github.com/devbridge/jQuery-Autocomplete/archive/v1.2.7.tar.gz
bower cached        git://github.com/jquery/jquery.git#2.1.0
bower validate      2.1.0 against git://github.com/jquery/jquery.git#>=1.2
bower not-cached    git://github.com/lodash/lodash.git#~2.4.1
bower resolve       git://github.com/lodash/lodash.git#~2.4.1
bower cached        git://github.com/jquery/sizzle.git#1.10.16
bower validate      1.10.16 against git://github.com/jquery/sizzle.git#1.10.16
bower download      https://github.com/lodash/lodash/archive/2.4.1.tar.gz
bower extract       jquery.autocomplete#1.2.7 archive.tar.gz
bower resolved      git://github.com/devbridge/jQuery-Autocomplete.git#1.2.7
bower extract       lodash#~2.4.1 archive.tar.gz
bower resolved      git://github.com/lodash/lodash.git#2.4.1
bower install       fastclick#0.6.11
bower install       jquery-placeholder#2.0.7
bower install       jquery.cookie#1.4.0
bower install       modernizr#2.7.1
bower install       jquery#2.1.0
bower install       sizzle#1.10.16
bower install       jquery.autocomplete#1.2.7
bower install       lodash#2.4.1

fastclick#0.6.11 bower_components/fastclick

jquery-placeholder#2.0.7 bower_components/jquery-placeholder

jquery.cookie#1.4.0 bower_components/jquery.cookie
└── jquery#2.1.0

modernizr#2.7.1 bower_components/modernizr

jquery#2.1.0 bower_components/jquery
└── sizzle#1.10.16

sizzle#1.10.16 bower_components/sizzle

jquery.autocomplete#1.2.7 bower_components/jquery.autocomplete

lodash#2.4.1 bower_components/lodash

$ grunt build
/ TODO



/ Einde INSTALL FOUNDATION

/ FOUNDATION


[eric@walnut webdesign.tutsplus.com]$ pwd
/home/eric/Devel/Web/Sass/Foundation/webdesign.tutsplus.com


 / GRID 

/ 7	.

$ vi grid.html

   	<div class="row">
      <div class="small-12 columns">
        <h1>Welcome to Foundation</h1>
      </div>
    </div>

    <div class="row">
      <div class="small-4 columns">
        <h2>small-4 sidebar</h2>
      </div>
      <div class="small-8 columns">
        <h2>small-8 content area</h2>
      </div>
    </div>

    <div class="row">
      <div class="medium-4 columns">
        <h2>med-4 sidebar</h2>
      </div>
      <div class="medium-8 columns">
        <h2>med-8 content area</h2>
      </div>
    </div>

    <div class="row">
      <div class="large-4 columns">
        <h2>large-4 sidebar</h2>
      </div>
      <div class="large-8 columns">
        <h2>large-8 content area</h2>
      </div>
    </div>

/ als vp smal, dan zien we 
    244 @media only screen {
/ in deze @media zit alleen .small-4	, dus als een elem .large-4 heeft,	 dan geldt deze nu niet	,
/ als vp smal, 
/ dan heeft div.small-4 width 33.333 %, want 
@media only screen .small-4			/ width: 33.333 % 
@media only screen .columns 		/  
.columns												/ width: 100%
/ en heeft div.large-4 width 100%, want 
@media only screen .columns 		/  
.columns												/ width: 100%

/ als vp  large	,
/ dan heeft div.small-4 width 33.333 %, want 
@media only screen and (min-width: 64.063em) .columns   
@media only screen and (min-width: 40.063em) .columns 
@media only screen .small-4			/ width: 33.333 % 
@media only screen .columns 		/  
.columns												/ width: 100%
/ en heeft div.large-4 width 33.333%, want 
@media only screen and (min-width: 64.063em) .large-4	/ width: 33.333%
@media only screen and (min-width: 64.063em) .columns   
@media only screen and (min-width: 40.063em) .columns 
@media only screen .columns 		/  
.columns												/ width: 100%


/ we gaan in dev tools steeds op de div staan met .large-# of .small-#, of .medium-#,

$ vi stylesheets/app.css

/ Is er altijd	,
    235 .column,
    236 .columns {
    237   position: relative;
    238   padding-left: 0.9375rem;
    239   padding-right: 0.9375rem;
    240   width: 100%;
    241   float: left;
    242 }

/ vp >=small
    244 @media only screen {
    400   .column,
    401   .columns {
    402     position: relative;
    403     padding-left: 0.9375rem;
    404     padding-right: 0.9375rem;
    405     float: left;
    406   }
     427   .small-4 {
    428     position: relative;
    429     width: 33.33333%;
    430   }
    557   .column.small-centered,
    558   .columns.small-centered {
    559     position: relative;
    560     margin-left: auto;
    561     margin-right: auto;
    562     float: none !important;
    563   }
				}

/ vp >=medium	,
    579 @media only screen and (min-width: 40.063em) {
    735   .column,
    736   .columns {
    737     position: relative;
    738     padding-left: 0.9375rem;
    739     padding-right: 0.9375rem;
    740     float: left;
    741   }
    762   .medium-4 {
    763     position: relative;
    764     width: 33.33333%;
    765   }
    892   .column.medium-centered,
    893   .columns.medium-centered {
    894     position: relative;
    895     margin-left: auto;
    896     margin-right: auto;
    897     float: none !important;
    898   }
				}

/ vp >=large	,
   1068 @media only screen and (min-width: 64.063em) {
   1224   .column,
   1225   .columns {
   1226     position: relative;
   1227     padding-left: 0.9375rem;
   1228     padding-right: 0.9375rem;
   1229     float: left;
   1230   }
   1251   .large-4 {
   1252     position: relative;
   1253     width: 33.33333%;
   1254   }
				}

/ als vp >= xlarge	,
   1403 @media only screen and (min-width: 90.063em) {
   1559   .column,
   1560   .columns {
   1561     position: relative;
   1562     padding-left: 0.9375rem;
   1563     padding-right: 0.9375rem;
   1564     float: left;
   1565   }
   1586   .xlarge-4 {
   1587     position: relative;
   1588     width: 33.33333%;
   1589   }
				}

/ als vp >=xxlarge	,
   1738 @media only screen and (min-width: 120.063em) {
   1894   .column,
   1895   .columns {
   1896     position: relative;
   1897     padding-left: 0.9375rem;
   1898     padding-right: 0.9375rem;
   1899     float: left;
   1900   }
   1921   .xxlarge-4 {
   1922     position: relative;
   1923     width: 33.33333%;
   1924   }
				}

   7543 @media only screen and (orientation: landscape) {
  7708 .small-4, .medium-4, .large-4 {
   7709   background: #ccc;
   7710 }

   7208 /* Medium Displays: 641px and up */
   7209 @media only screen and (min-width: 40.063em) {
    7287 /* Large Displays: 1024px and up */
   7288 @media only screen and (min-width: 64.063em) {
    7363 /* X-Large Displays: 1441 and up */
   7364 @media only screen and (min-width: 90.063em) {
   7435 /* XX-Large Displays: 1920 and up */
   7436 @media only screen and (min-width: 120.063em) {

/ 7	.

/ lees	,
http://foundation.zurb.com/docs/components/grid.html

/ we zien dat	 deze altijd een nieuwe row geeft,
<div class="row">

/ dus we zien 2 rows	, de 2de row zit in div.small-8	  , dus is de 2de row even breed als div.small-8	,
/ TODO

<div class="row">								
  <div class="small-8 columns">8
    <div class="row">						
      <div class="small-8 columns">8 Nested
      </div>
      <div class="small-4 columns">4</div>
    </div>
  </div>
  <div class="small-4 columns">4</div>
</div>

/ en	nu zien we 3 rows	,
/ TODO

<div class="row">
  <div class="small-8 columns">8
    <div class="row">
      <div class="small-8 columns">8 Nested
        <div class="row">
          <div class="small-8 columns">8 Nested Again</div>
          <div class="small-4 columns">4</div>
        </div>
      </div>
      <div class="small-4 columns">4</div>
    </div>
  </div>
  <div class="small-4 columns">4</div>
</div>

/ 7	. 

/ we lezen ook op  over medium-push-#	, large-push-#	,
http://foundation.zurb.com/docs/components/grid.html

Using these source ordering classes, you can shift columns around between our breakpoints. This means if you place sub-navigation below main content on small displays, you have the option to position the sub-navigation on either the left or right of the page for large displays


/ 7	. 

[eric@walnut webdesign.tutsplus.com]$ vi grid1.html 

<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Foundation</title>
    <link rel="stylesheet" href="stylesheets/app.css" />
    <script src="bower_components/modernizr/modernizr.js"></script>
  </head>
  <body>

    <div class="row">
      <div class="small-12 columns">
        <h1>Welcome to Foundation</h1>
      </div>
    </div>

    <div class="row">

      <div class="small-4 columns">
        <h2>This is a sidebar</h2>
				<div class="row">
      		<div class="small-1 columns">
        		<h6>#1</h6>
					</div>
      		<div class="small-9 columns">
        		<h6>A post title</h6>
					</div>
      		<div class="small-2 columns">
        		<h6>Go</h6>
					</div>
				</div>
			</div>

      <div class="small-8 columns">
        <h2>This is the content area</h2>
    	</div>

		</div>

    <div class="row">
      <div class="small-4 columns">
        <h2>This is a sidebar</h2>
      </div>
      <div class="small-8 columns">
        <h2>This is the content area</h2>
      </div>
    </div>


    <script src="bower_components/jquery/jquery.js"></script>
    <script src="bower_components/foundation/js/foundation.min.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>

/ we zien dat de 1,9,2 columns niet naast elkaar komen	, de 2 column ligt rechtsonder	, 
/ als de de 9-column smaller maken, niet 75%, maar rond de 70% (verschilt hoe breed de vp), dan komt de 2-column er wel naast	,
/ dat is omdat als 75%, de 2-column eronder komt, en hij is float : right, dus verschijnt rechts, maar niet helemaal rechts, want ze zitten in een  
      <div class="small-4 columns">
/ en deze is 33%	, en daar komt de 2-column rechts aan	,


/ 7	.

$ vi grid2.html

    <div class="row">
      <div class="small-4 large-3 columns">
        <h2>This is a sidebar</h2>
      </div>
      <div class="small-8 large-9 columns">
        <h2>This is the content area</h2>
      </div>
    </div>

/ als vp groot, dan zien we de large-3 styles boven de small-4 styles	,
/ als vp klein, dan zien we de large-3 styles NIET en is autl de small-4 styles	de bovenste	,

/ 7	.

$ vi grid2a.html

/ small-3, small-9 blijven altijd, er komen in de css rules defaults boven, maar de 33%, 66% blijven, daar doen die default rules niets mee	,
/ anders zou het zijn als de div naast small-3 bijv ook large-4 was	, dan komt er bij large een  25% bovenop de 33%, en die 25% geldt dan	,
    <div class="row">
      <div class="small-3 columns">
        <h2>3</h2>
      </div>
      <div class="small-9 columns">
        <h2>9, last</h2>
      </div>
    </div>

    <div class="row">
      <div class="small-3 push-9 columns">
        <h2>3</h2>
      </div>
      <div class="small-9 pull-3 columns">
        <h2>9, last</h2>
      </div>
    </div>

/ we zien de 2 divs altijd andersom, de push en pull gebeuren als als vp small,	 en dat blijft zo	,
/ als je width:75% uitzet van de 2de div, we zien de <h2>9, last</h2> niet meer	,
/ TODO
    <div class="row">
      <div class="small-3 small-push-9 columns">
        <h2>3</h2>
      </div>
      <div class="small-9 small-pull-3 columns">
        <h2>9, last</h2>
      </div>
    </div>

/als vp niet large, staan ze onder elkaar, want beide zijn 100%	, 
/ als vp large, dan de 1ste div links, 33%, en de 2de div ernaast, 66%	,
/maar ze staan ook meteen omgedraaid	,
    <div class="row">
      <div class="large-3 large-push-9 columns">
        <h2>3</h2>
      </div>
      <div class="large-9 large-pull-3 columns">
        <h2>9, last</h2>
      </div>
    </div>

/als vp niet large, staan ze onder elkaar, want beide zijn 100%	, 
/ als vp large, dan de 1ste div links, 33%, en de 2de div ernaast, 66%	,
    <div class="row">
      <div class="large-3 columns">
        <h2>3</h2>
      </div>
      <div class="large-9 columns">
        <h2>9, last</h2>
      </div>
    </div>

    <div class="row">
      <div class="large-3 push-9 columns">
        <h2>3</h2>
      </div>
      <div class="large-9 pull-3 columns">
        <h2>9, last</h2>
      </div>
    </div>



/7	.

$ vi grid3.html

    <div class="row">
      <div class="small-3 push-9 columns">
        <h2>3</h2>
      </div>
      <div class="small-9 pull-3 columns">
        <h2>9, last</h2>
      </div>
    </div>

/ we zien bij het b van 640px dat
/font-size van h2 van  font-size: 1.6875rem; naar font-size: 2.3125rem; gaat	,
/ push-9 en pull-3 in actie dus 3 en 9, last wisselen	,

/ TODO

/ 7	.

/ grid3.html , met block grid	,

    <div class="row">
      <ul class="small-block-grid-2 medium-block-grid-4">
        <li><img src="../img/Field-flowers-image6.jpg"></li>
        <li><img src="../img/flowers 134.jpg"></li>
        <li><img src="../img/flowers.jpg"></li>
        <li><img src="../img/Flowers-flowers-34015066-1920-1200.jpg"></li>
      </ul>
    </div>

    <div class="row">
      <ul class="small-block-grid-2 large-block-grid-4">
        <li><img src="../img/beautiful-pink-flowers.jpg"></li>
        <li><img src="../img/Flower-Wallpaper-flowers-249398_1693_1413.jpg"></li>
        <li><img src="../img/Nature_Flowers_Single__Flowers_008337_.jpg"></li>
        <li><img src="../img/pink-flower-pink-color-26075149-1024-768.jpg"></li>
      </ul>
    </div>


/ we zien de @media queries op  de li's	, niet op de div.medium-block-grid-4 bijv	,

/ als vp medium , dan zien we  op de bovenste rij 4 foto's naast elkaar, en op de onderste rij 2	,
/ als vp medium kunnen we alleen zien medium-block-grid-# en small-block-grid-#	,
/ op de bovenste rij zijn er small-block en medium block, en de medium block staat boven de small-block	, dus de li's hebben width=25%

@media only screen and (min-width: 40.063em)
.medium-block-grid-4 > li {
width: 25%;
...
@media only screen
.small-block-grid-2 > li {
width: 50%;
...
[class*="block-grid-"] > li {
...

/ op de onderste rij hebben de li's width 50%		,

@media only screen
.small-block-grid-2 > li {
width: 50%;
padding: 0 0.625rem 1.25rem;
}
[class*="block-grid-"] > li {
display: inline



/ 7	. 

$ vi grid4.html

/ bij ons is in js/app.js	,

$(document).foundation();

/ we veranderen	,

$(document).foundation('orbit', {
  timer_speed: 5000,
  animation_speed: 500,
  bullets: true,
  stack_on_small:false
});

$vi grid4.html

    <link rel="stylesheet" href="stylesheets/app.css" />

   <div class="row">
      <ul data-orbit>
        <li>
          <img src="../img/Field-flowers-image6.jpg">
          <div class="orbit-caption">Field-flowers-image6</div>
        </li>
        <li>
          <img src="../img/flowers 134.jpg">
          <div class="orbit-caption">flowers 134</div>
        </li>
        <li>
          <img src="../img/flowers.jpg">
          <div class="orbit-caption">flowers</div>
        </li>
        <li>
          <img src="../img/Flowers-flowers-34015066-1920-1200.jpg">
          <div class="orbit-caption">Flowers-flowers-34015066-1920-1200</div>
        </li>
      </ul>
 	</div>

    <script src="bower_components/jquery/jquery.js"></script>
    <script src="bower_components/foundation/js/foundation.min.js"></script>
    <script src="bower_components/foundation/js/foundation/foundation.orbit.js"></script>
    <script src="js/app.js"></script>

/ we hebben      <ul data-orbit> in een <div class="row">
/ TODO
 

/ NAVIGATION 

http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/foundation-for-beginners-navigation/

/ 7	.

/ Section plugin

/ we hebben nav.html

/ werkt niet	,
/ TODO

/ we hebben	,
http://foundation.zurb.com/docs/v/4.3.2/components/section.html
 /TODO (hier over sections)	, 

/ op 
http://foundation.zurb.com/docs/javascript.html
/ zien we niets over sections	,

/ 7	.

/ side-nav

$ vi nav2.html

  <ul class="side-nav">
      <li class="active">
        <a href="http://www.google.com">Link 1</a>
      </li>
      <li>
        <a href="http://jquery.com">Link 2</a>
      </li>
      <li class="divider">
      </li>
      <li>
        <a href="#">Link 3</a>
      </li>
      <li>
        <a href="#">Link 3</a>
      </li>
    </ul>

/ OK

/ 7	.

/ side-nav

$ vi nav3.html

<dl class="sub-nav">
    <dt>Filter:</dt>
    <dd class="active">
      <a href="http://www.google.com">google</a>
    </dd>
    <dd>
      <a href="http://jquery.com">jquery</a>
    </dd>
    <dd>
      <a href="http://jquery.com">jquery</a>
    </dd>
    <dd>
      <a href="http://jquery.com">jquery</a>
    </dd>
   </dl>

/ OK

/ 7	.

/ pagination

$ vi nav3.html

<nav class="pagination-centered">
<ul class="pagination">
  <li class="arrow unavailable"><a href="">&laquo;</a></li>
  <li class="current"><a href="">1</a></li>
  <li><a href="">2</a></li>
  <li><a href="">3</a></li>
  <li><a href="">4</a></li>
  <li class="unavailable"><a href="">&hellip;</a></li>
  <li><a href="">12</a></li>
  <li><a href="">13</a></li>
  <li class="arrow"><a href="">&raquo;</a></li>
</ul>
</nav>

/ als je click op pijltjes, gebeurt er niets	,
/ TODO

/ TOPBAR

/ 7	. 

/ ga naar	,
http://foundation.zurb.com/docs/javascript.html

<nav class="top-bar docs-bar hide-for-small" data-topbar>
<nav class="tab-bar show-for-small" >

/we zien 2 nav's	, en bij 40.063em is de ene zichtbaar ,of de andere	,
/ de 1ste nav is met <section>, die we zien als vp breed	,
/ de 2de nav is met menu icon, als vp smal	,
/ we zien in css	,


/ op de 1ste nav (met <section>) , 
/ als vp breed, 
/ de media query valt boven de default, dus geldt hij	, dus zien we de nav, 
/ als vp small, is de media query er niet, dus zien we de nav niet	,

/* Medium Displays: 641px and up */
@media only screen and (min-width: 40.063em) {
  /* line 144, ../bower_components/foundation/scss/foundation/components/_visibility.scss */
  .hide-for-small,
  .hide-for-small-only,
  .show-for-medium,
  .show-for-medium-down,
  .show-for-medium-up,
  .show-for-medium-only,
  .hide-for-large,
  .hide-for-large-up,
  .hide-for-large-only,
  .hide-for-xlarge,
  .hide-for-xlarge-up,
  .hide-for-xlarge-only,
  .hide-for-xxlarge-up,
  .hide-for-xxlarge-only {
    display: inherit !important;
  }

/* line 43, ../bower_components/foundation/scss/foundation/components/_visibility.scss */
.hide-for-small,
.hide-for-small-only,
.hide-for-medium-down,
.show-for-medium,
.show-for-medium-up,
.show-for-medium-only,
.hide-for-large-down,
.show-for-large,
.show-for-large-up,
.show-for-large-only,
.show-for-xlarge,
.show-for-xlarge-up,
.show-for-xlarge-only,
.show-for-xxlarge-up,
.show-for-xxlarge-only {
  display: none !important;
}

/ de 2de nav (met menu icon) , 
/ als vp breed valt de media query boven de default, en we zien de nav niet	,
/ als vp smal is de media query er niet , en we zien de nav 

/* Medium Displays: 641px and up */
@media only screen and (min-width: 40.063em) {
  /* line 160, ../bower_components/foundation/scss/foundation/components/_visibility.scss */
  .show-for-small,
  .show-for-small-only,
  .hide-for-medium,
  .hide-for-medium-down,
  .hide-for-medium-up,
  .hide-for-medium-only,
  .hide-for-large-down,
  .show-for-large,
  .show-for-large-up,
  .show-for-large-only,
  .show-for-xlarge,
  .show-for-xlarge-up,
  .show-for-xlarge-only,
  .show-for-xxlarge-up,
  .show-for-xxlarge-only {
    display: none !important;
  }

/* line 27, ../bower_components/foundation/scss/foundation/components/_visibility.scss */
.show-for-small,
.show-for-small-only,
.show-for-medium-down,
.show-for-large-down,
.hide-for-medium,
.hide-for-medium-up,
.hide-for-medium-only,
.hide-for-large,
.hide-for-large-up,
.hide-for-large-only,
.hide-for-xlarge,
.hide-for-xlarge-up,
.hide-for-xlarge-only,
.hide-for-xxlarge-up,
.hide-for-xxlarge-only {
  display: inherit !important;
}


/ 7	.

$ vi topbar.html

 <nav class="top-bar">
    <ul class="title-area">
      <li class="name">
        <h1>
          <a href="http://www.google.com">Top Bar Title</a>
        </h1>
      </li>
      <li class="toggle-topbar menu-icon">
        <a href="http://jquery.com">
          <span>Menu</span>
        </a>
      </li>

    </ul>
  </nav>

/ of we menu icon zien of niet gaat anders als hierboven in de tutorial	,
/ we zien dat de 2de li als vp small display: list-item, en als vp breed, display:none	,
/ inderdaad	, de default display van li is list-item	, maar als vp breed, komt er een media query	, en zien we Menu met icon (3 streepjes ) niet	,

@media only screen and (min-width: 40.063em) {
  }
  /* line 417, ../bower_components/foundation/scss/foundation/components/_top-bar.scss */
  .top-bar .toggle-topbar {
    display: none;
  }

 
/ I 

/ de streepjes worden gemaakt met
$vi css/app.css

/* line 209, ../bower_components/foundation/scss/foundation/components/_top-bar.scss */
.top-bar .toggle-topbar.menu-icon a span {

  -webkit-box-shadow: 0 10px 0 1px white, 0 16px 0 1px white, 0 22px 0 1px white;
/ of	,
  box-shadow: 0 10px 0 1px white, 0 16px 0 1px white, 0 22px 0 1px white;


/ Als we geen <span>Menu</span>, maar alleen Menu, dan zien we het icon niet	,
/ TODO

/ 7	.

/ we oef in Web/css met 
box-shadow.html
box-shadow2.html
position.html

/we zagen hierboven font-size op h2, maar we zien ook op 
.top-bar .toggle-topbar a
/ effects woord Menu

/ 7	. 

$ vi position.html in Web/css	,

<!DOCTYPE html>
<html>
<head>
<style>

span{
	background: blue;
}

.rel{
	position: relative;
	right:0px;
	display: block;
	width: 16px;
//	height: 0px;
	box-shadow: 0px 10px 0px 1px black;
	text-indent: 48px;
//	line-height: 33px;
}
	
ul{
	list-style: none;
	margin: 0px;
	padding: 0px;
}
.container{
	position: absolute;
	right: 15px;
}
/*	-webkit-box-shadow: 0 10px 0 1px white, 0 16px 0 1px white, 0 22px 0 1px white;
	box-shadow: 0 10px 0 1px white, 0 16px 0 1px white, 0 22px 0 1px white;
	*/
</style>
</ head>
<body>

<div>
	<span class="rel">foo</span>
</div>

<!--
<div>
<ul>
	<li>
<span class="rel">bar</span>
	</li>
</ul>
</div>
-->

<!--
<div class="container">
	<div>
		<span class="rel">foo</span>
	</div>
</div>
-->
</body>
</html>

/ we hebben op de ul
	margin:0
	padding:0
/ dan maakt het niet uit of de span in een <ul><li> zit of in een <div>	,

/ er staat	,
box-shadow: 0px 10px 0px 1px black;
/ de 4de par is spread	, the extra size of the shadow	,
/ als spread=0, dan is de shadown precies even groot als de span	, en als de 1ste 2 0 zijn, valt de shadow precies onder de span	,
/ de 1ste is hor naar rechts, de 2de vert naar beneden	,
/ de spread maakt de shadow groter/kleiner dan de span, als de spread 1px , dan dijdt de shadow uit naar alle 4 de kanten	, 
/ de span heeft width 16px, als de height van de <span> 0, dan is en de spread 1, dan houden we een streep over,
/ en dat is 1 van de strepen van het icon van menu in foundation	, 

/ als height:0 en	,
  box-shadow: 0 10px 0 1px #ccc, 0 16px 0 1px #ccc, 0 22px 0 1px #ccc;
/ dan hebben we 3 shadows, onder elkaar	,
/ als we de height verhogen, 1px, 2px, ... dan worden de shadows ook hoger, 	en snel komen ze tegen elkaar aan	, bij height 4px	,

/ als we height van de span NIET set, dan is height=line-height	,
/ als we height set, dan zien we de string foo naar boven/beneden gaan als we line-height varieren	,

/ Einde I

/ 7	.

/ sections in topbar	,

/ lees ook	,
http://foundation.zurb.com/docs/components/topbar.html

/ lees	,
http://foundation.zurb.com/forum/posts/347-problem-in-drop-down-nav-bar

/ we moeten de nav ook een data-topbar geven	, dan verschijnen de sections 	,

/ we create account bij 	,
http://foundation.zurb.com/forum/signin
ericjvandervelden@gmail.com
vl$Walnoot27

/ let op data-topbar attr,	
/ als we MENU click of het icon,verschijnt er een drop down list 
Menu item
Menu item 2

/ lees	,
http://foundation.zurb.com/docs/components/topbar.html


/ er is 1 section	,

$ vi topbar2.html

  <nav class="top-bar" data-topbar>
    <ul class="title-area">
      <li class="name">
        <h1>
          <a href="#">Top Bar Title</a>
        </h1>
      </li>
      <li class="toggle-topbar menu-icon">
        <a href="#">
          <span>Menu</span>
        </a>
      </li>
    </ul>
    <section class="top-bar-section">
      <ul class="left">
        <li class="active"><a href="#">Main item</a></li>
        <li class=""><a href="#">Main item 2</a></li>
      </ul>
      <ul class="right">
        <li class="active"><a href="#">Main item 3</a></li>
        <li class="has-dropdown">
          <a href="#">Main item 4</a>
          <ul class="dropdown">
            <li class=""><li><a href="#">Main item 5</a></li>
        </li>
      </ul>
    </section>
  </nav>


/ 7	.

/ dropdown	,

/ lees	,
http://foundation.zurb.com/docs/components/dropdown.html

$ vi dropdown2.html

  <a href="#" class="button" data-dropdown="drop">Link Dropdown &raquo;</a>
  <ul id="drop" class="large f-dropdown" data-dropdown-content>
    <li><a href="#">This is a link</a></li>
    <li><a href="#">This is another</a></li>
    <li><a href="#">Yet another</a></li>
  </ul>

/ we kunnen class="large f-dropdown"  of "small f-dropdown"

/ 7	.

/ terug naar topbar2.html

/ lees	,
http://foundation.zurb.com/docs/components/topbar.html#

/ we maken veel regels in topbar2.html om te kunnen scroll	,

/ default is dat als we over Menu item 4 gaan, het menu uitklapt, we zien Menu item 5	,
/ dit kunnen we uitzetten:
  <nav class="top-bar" data-topbar data-options="is_hover:false">

/ we wrap de <nav> in <div class="fixed">	,
/ als we scroll, blijft de topbar staan	,
<div class="fixed">
  <nav class="top-bar" data-topbar data-options="is_hover:true">
...
	</nav>
</div>

/ contain-to-grid
/ TODO

/ 13	.

/ topbar3.html

/ met al die componenten	,

/ lees 	,
http://foundation.zurb.com/docs/components/topbar.html#clickable
/ en doe voorbeeld na	, bij Built in components	,








 










/ Einde FOUNDATION

/ JAVASCRIPT CLOSURE

/ See	,

http://web/jquery/rec3.html
/ zoals in angular	,

http://web/angularjs/self/closures/closure9.html
/ inh met prototype, of met closures , see crockford	,

http://web/angularjs/self/closures/closure9a.html
/ scope in angular proberen met closures	,

$ vi closure9a.html

var scope=function(s){
  var that={}
  that.parent=function(){
    return s.parent
  }
  that.n=function(){
    return s.n
  }
  return that
}

var l=null
for(var i=0;i<3;i++){
  var l=scope({parent:l,n:i})
  console.log(l.n())
  if(l.parent()!=null)console.log(l.parent().n())
  console.log(",")
}




/ Einde JAVASCRIPT CLOSURE

/ GRUNT

[eric@walnut second]$ pwd
/home/eric/Devel/Grunt/second

/ we hadden eerder 
# npm install -g grunt  
/ we doen nu	,

[root@walnut second]# npm uninstall -g grunt
unbuild grunt@0.4.2
[root@walnut second]# ls /usr/local/lib/node_modules/
bower  grunt-cli  npm

///////////////////////////////////////////////////////////////////////
/ we install grunt-cli global, en grunt alleen in het project	,

[eric@walnut second]$ pwd
/home/eric/Devel/Grunt/second

[eric@walnut second]$ cat package.json 
{
  "name": "second",
  "version": "0.0.0"
}

/ versie 0.0 is ERR	,
/ TODO

[eric@walnut second]$ npm install grunt --save-dev
[eric@walnut second]$ cat package.json 
{
  "name": "second",
  "version": "0.0.1",
  "devDependencies": {
    "grunt": "~0.4.2"
  }
}

/ --save-dev writes in devDependencies	, --save in dependencies	,

[eric@walnut second]$ npm install grunt-contrib-uglify --save-dev
[eric@walnut second]$  cat package.json 
{
  "name": "second",
  "version": "0.0.0",
  "devDependencies": {
    "grunt": "~0.4.2",
    "grunt-contrib-uglify": "~0.3.2"
  }
}

/ lees	,
http://gruntjs.com/configuring-tasks
/ we zien verschillende manieren	,


[eric@walnut second]$ ls dist/
jquery-2.0.3.js
[eric@walnut second]$ cat Gruntfile_1.js 

module.exports = function(grunt) {
  grunt.initConfig({
		jshint:{
			// TODO
			my_target:["*.js"],
			// TODO
			my_target1:"*.js",
			// compact format
			my_target2:{
				src:["*.js"]
			},
			my_target3:{
				src:"*.js"
			}
		},
    uglify:{
			// compact format
      my_target:{
        src:["dist/jquery-2.0.3.js"],
        dest:"dist/jquery-2.0.3.min.js"
      },
			// compact format
      my_target1:{
        src:"dist/jquery-2.0.3.js",
        dest:"dist/jquery-2.0.3.min.js"
      },
			// files object format
      my_target2:{
				files:{
					"dist/jquery-2.0.3.min.js":["dist/jquery-2.0.3.js"]
				}
      },
			// files object format
      my_target3:{
				files:{
					"dist/jquery-2.0.3.min.js":"dist/jquery-2.0.3.js"
				}
      }
    }
  });
      

  grunt.loadNpmTasks('grunt-contrib-uglify');
  grunt.loadNpmTasks('grunt-contrib-jshint');

  grunt.registerTask('default', ["jshint","uglify"]);

};



/ we kunnen doen	, want default doet hij eerst jshint, en dan uglify	,
$ grunt
/ we hebben eerder grunt-contrib-uglify install, loadNpmTasks betekent: load deze	,
/ maar we kunnen ook specifiek de task:target of task (en dus alle targets) geven	,

[eric@walnut second]$ grunt -gruntfile Gruntfile_1.js uglify:my_target
[eric@walnut second]$ grunt -gruntfile Gruntfile_1.js jshint uglify:my_target
[eric@walnut second]$ grunt -gruntfile Gruntfile_1.js jshint uglify



/ ook	,
[eric@walnut second]$ npm install grunt-contrib-jshint --save-dev

[eric@walnut second]$ grunt
Running "jshint:all" (jshint) task
>> 1 file lint free.

Running "uglify:dist" (uglify) task
File dist/jquery-2.0.3.min.js created.

Done, without errors.

[eric@walnut second]$  cp Gruntfile.js Gruntfile.js_1

/ 7	. 

/ we maken van jquery-2.0.3.js -> jquery-2.0.3-0.0.0.min.js	,  
/ en	,
$ vi jquery-2.0.3-0.0.0.min.js

/*! dist/jquery-2.0.3 2014-03-03 */
...

[eric@walnut second]$ pwd
/home/eric/Devel/Grunt/second

$ vi package.json

{
  "name": "jquery-2.0.3",
  "version": "0.0.0",
  "devDependencies": {
    "grunt": "~0.4.2",
    "grunt-contrib-uglify": "~0.3.2",
    "grunt-contrib-jshint": "~0.8.0"
  }
}

$ vi Gruntfile.js

module.exports = function(grunt) {
  grunt.initConfig({
		pkg:grunt.file.readJSON("package.json"),
		jshint:{
			my_target:["*.js"]
		},
    uglify:{
			options:{
				banner:"/*! <%=pkg.name%> <%=grunt.template.today(\"yyyy-mm-dd\")%> */\n"
			},
      my_target:{
        src:["src/<%=pkg.name%>.js"],
        dest:"dist/<%=pkg.name%>-<%=pkg.version%>.min.js"
      }
    }
  });
      
  grunt.loadNpmTasks('grunt-contrib-uglify');
  grunt.loadNpmTasks('grunt-contrib-jshint');

  grunt.registerTask('default', ["jshint","uglify"]);

};

[eric@walnut second]$ cp Gruntfile.js Gruntfile_2.js

/ 7	. 

/ cssmin

/ lees	,
https://github.com/gruntjs/grunt-contrib-cssmin

[eric@walnut second]$ ls
dist             Gruntfile_1.js  Gruntfile.js  package.json  stylesheets
Gruntfile_1a.js  Gruntfile_2.js  node_modules  src
[eric@walnut second]$ ls src/
jquery-2.0.3.js
[eric@walnut second]$ ls stylesheets/
bootstrap.css  foundation.css
[eric@walnut second]$ ls dist
jquery-2.0.3-0.0.0.min.js

[eric@walnut second]$ npm install grunt-contrib-cssmin --save-dev

/ we maken banner een local 	, zodat we hem in verschillen de tasks kunnen use,	 en we maken ook weer verschillende versies van targets	, 

$ vi Gruntfile.js

module.exports = function(grunt) {
  grunt.initConfig({
		pkg:grunt.file.readJSON("package.json"),
		jshint:{
			my_target:["*.js"]
		},
    uglify:{
			options:{
				banner:"<%=banner%>"
			},
      my_target:{
        src:["src/<%=pkg.name%>.js"],
        dest:"dist/<%=pkg.name%>-<%=pkg.version%>.min.js"
      }
    },
		cssmin:{
			my_target:{
				options:{
					banner:"<%=banner%>"
				},
				//src:["stylesheets/foundation.css","stylesheets/bootstrap.css"],
				src:["stylesheets/*.css"],
				dest:"dist/all.min.css"
			},
			my_target2:{
				options:{
					banner:"<%=banner%>"
				},
				files:{
			//		"dist/all2.min.css":["stylesheets/foundation.css","stylesheets/bootstrap.css"]
					"dist/all2.min.css":["stylesheets/*.css"]
				}
			}
		},	
		banner:"/*! <%=pkg.name%> <%=grunt.template.today(\"yyyy-mm-dd\")%> */\n"
  });
      

  grunt.loadNpmTasks('grunt-contrib-uglify');
  grunt.loadNpmTasks('grunt-contrib-jshint');
  grunt.loadNpmTasks('grunt-contrib-cssmin');

  grunt.registerTask('default', ["jshint","uglify","cssmin"]);

};

[eric@walnut second]$ cp Gruntfile.js Gruntfile_3.js


/ 7	.

/ imagemin

[eric@walnut second]$ npm install grunt-contrib-imagemin@0.3.0 --save-dev

/ 0.5.0 WH ERR
/ TODO

/ we zien ook bij jpg	,
/ TODO

> node lib/check.js

  optipng: downloading [===================] 100% 0.0s


✓ pre-build test passed successfully

> gifsicle@0.1.4 postinstall /home/eric/Devel/Grunt/second/node_modules/grunt-contrib-imagemin/node_modules/image-min/node_modules/gifsicle
> node lib/check.js

  gifsicle: downloading [===================] 100% 0.0s


✓ pre-build test passed successfully

> jpegtran-bin@0.2.3 postinstall /home/eric/Devel/Grunt/second/node_modules/grunt-contrib-imagemin/node_modules/image-min/node_modules/jpegtran-bin
> node lib/check.js

  jpegtran: downloading [===================] 100% 0.0s


✓ pre-build test passed successfully
grunt-contrib-imagemin@0.5.0 node_modules/grunt-contrib-imagemin
├── filesize@2.0.3
├── async@0.2.10
├── chalk@0.4.0 (has-color@0.1.4, ansi-styles@1.0.0, strip-ansi@0.1.1)
└── image-min@0.1.3 (mkdirp@0.3.5, cache-file@0.1.5, mout@0.7.1, optipng-bin@0.3.1, gifsicle@0.1.4, jpegtran-bin@0.2.3)

/ TODO (Wanneer tests called?)

/ we zien dat require in node een gewone call is	,

[eric@walnut second]$ (cd node_modules/grunt-contrib-imagemin/node_modules/image-min/node_modules/jpegtran-bin;node debug lib/check.js)
< Debugger listening on port 5858
connecting to port 5858... ok
break in lib/check.js:1
> 1 'use strict';
  2 
  3 var bin = require('./jpegtran').bin;
...

/ bij de tests spelen een rol	,
[eric@walnut second]$ find -name check.js
./node_modules/grunt-contrib-imagemin/node_modules/image-min/node_modules/jpegtran-bin/lib/check.js
[eric@walnut second]$ find -name bin-wrapper.js
./node_modules/grunt-contrib-imagemin/node_modules/image-min/node_modules/jpegtran-bin/node_modules/bin-wrapper/bin-wrapper.js
...
/ TODO

$ vi Gruntfile.js

module.exports = function(grunt) {
  grunt.initConfig({
		pkg:grunt.file.readJSON("package.json"),
		jshint:{
			my_target:["*.js"]
		},
    uglify:{
			options:{
				banner:"<%=banner%>"
			},
      my_target:{
        src:["src/<%=pkg.name%>.js"],
        dest:"dist/<%=pkg.name%>-<%=pkg.version%>.min.js"
      }
    },
		cssmin:{
			options:{
				banner:"<%=banner%>"
			},
			my_target:{
				//src:["stylesheets/foundation.css","stylesheets/bootstrap.css"],
				src:["stylesheets/*.css"],
				dest:"dist/all.min.css"
			},
			my_target2:{
				files:{
			//		"dist/all2.min.css":["stylesheets/foundation.css","stylesheets/bootstrap.css"]
					"dist/all2.min.css":["stylesheets/*.css"]
				}
			}
		},	
		imagemin:{
			options:{
				optimizationLevel:3
			},
			my_target:{
				files:{
					"dist/flowers.min.jpg":"img/flowers.jpg"	,
					"dist/screenshot.min.png":"img/screenshot.png"	,
				}
			}
		},
		banner:"/*! <%=pkg.name%> <%=grunt.template.today(\"yyyy-mm-dd\")%> */\n"
  });
      

  grunt.loadNpmTasks('grunt-contrib-uglify');
  grunt.loadNpmTasks('grunt-contrib-jshint');
  grunt.loadNpmTasks('grunt-contrib-cssmin');
  grunt.loadNpmTasks('grunt-contrib-imagemin');

  grunt.registerTask('default', ["jshint","uglify","cssmin","imagemin"]);

};


/ 7	.

[eric@walnut second]$ npm install grunt-contrib-watch --save-dev
grunt-contrib-watch@0.5.3 node_modules/grunt-contrib-watch
├── tiny-lr@0.0.4 (debug@0.7.4, faye-websocket@0.4.4, qs@0.5.6, noptify@0.0.3)
└── gaze@0.4.3 (globule@0.1.0)

$ vi Grunt.js

   jshint:{
      my_target:{
        src:["Gruntfile.js","src/**/*.js"]
      },
      my_target2:["Gruntfile.js","src/**/*.js"]
    },

    watch:{
      jshint:{
        files:["Gruntfile.js","src/**/*.js"],
        tasks:["jshint"]
      },
/ Deze zegt: als we de grunt file of een van de js files in src/  save, dan gaat hij de multi-task jshint doen	, maar dan lint hij dus alle files die daar staan, en dat zijn toevallig nu dezelfde als hier	, maar dat kunnen andere zijn	,

    watch:{
      jshint:{
        files:["Gruntfile.js","src/**/*.js"],
        tasks:["jshint"]
      }, 
      sass:{
        files:["scss/**/*.scss"],
        tasks:["sass"]
      }, 
    } ,
    sass:{
      options: {
        style: 'expanded'
      },
      my_target:{
        files:[{
          expand:true ,
          cwd:"scss",
          src:"**/*.scss" ,
          dest:"stylesheets",
          ext:".css"
        }]
      }

/ we geven cwd, want anders ontstaat er in stylesheets/ een dir sass/	,

/ 7	.




/ 7	.

/ Yeoman installs grunt-contrib-compass



/ Einde GRUNT

/ GRUNT

/ Dit hoeft allemaal NIET ,
[eric@localhost hello-world]$  npm info grunt version
0.4.2
[eric@localhost hello-world]$ grunt --version
grunt-cli v0.1.11
[eric@localhost hello-world]$  npm info grunt-cli version
0.1.11
[eric@localhost hello-world]$  npm info grunt-contrib-jshint version
0.7.2
[eric@localhost hello-world]$  npm info grunt-contrib-nodeunit version
0.2.2
[eric@localhost hello-world]$  npm info grunt-contrib-uglify version
0.2.7

/ links fs	, geef . 
$ sublime .

/ lees	,
http://gruntjs.com/getting-started

/ kijk video	,
http://www.youtube.com/watch?v=bntNYzCrzvE

/////////////////////////////////////////////////////////////
/ Doe eerst	1 keer,
$ npm install -g grunt-cli 
/ in elk proj hieronder we doen,
$ npm i grunt --save-dev

[eric@localhost getting-started]$ vi package.json
{
  "name": "getting-started",
  "version": "0.0.1"
}

/ let op: geen trailing , in de js obj	,

[eric@localhost getting-started]$ npm install grunt --save-dev 
...
grunt@0.4.2 node_modules/grunt
├── which@1.0.5
├── dateformat@1.0.2-1.2.3
├── eventemitter2@0.4.13
├── getobject@0.1.0
├── colors@0.6.2
├── hooker@0.2.3
├── async@0.1.22
├── exit@0.1.2
├── lodash@0.9.2
├── coffee-script@1.3.3
├── underscore.string@2.2.1
├── iconv-lite@0.2.11
├── findup-sync@0.1.2 (lodash@1.0.1)
├── nopt@1.0.10 (abbrev@1.0.4)
├── rimraf@2.0.3 (graceful-fs@1.1.14)
├── minimatch@0.2.12 (sigmund@1.0.0, lru-cache@2.5.0)
├── glob@3.1.21 (inherits@1.0.0, graceful-fs@1.2.3)
└── js-yaml@2.0.5 (esprima@1.0.4, argparse@0.1.15)


└── js-yaml@2.0.5 (esprima@1.0.4, argparse@0.1.15)
[eric@localhost first]$ cat package.json 
{
  "name": "getting-started",
	"version": "0.0.1",
  "devDependencies": {
    "grunt": "~0.4.2"
  }
}

[eric@localhost first]$ npm i grunt-contrib-uglify --save-dev 
npm WARN package.json getting-started@0.0.1 No description
npm WARN package.json getting-started@0.0.1 No repository field.
npm WARN package.json getting-started@0.0.1 No README data
...
grunt-contrib-uglify@0.2.7 node_modules/grunt-contrib-uglify
├── grunt-lib-contrib@0.6.1 (zlib-browserify@0.0.1)
└── uglify-js@2.4.6 (uglify-to-browserify@1.0.1, async@0.2.9, optimist@0.3.7, source-map@0.1.31)

[eric@localhost first]$  cat package.json 
{
  "name": "getting-started",
  "version": "0.0.1",
  "devDependencies": {
    "grunt": "~0.4.2",
    "grunt-contrib-uglify": "~0.2.7"
  }
}

[eric@localhost first]$ ls node_modules/
grunt  grunt-contrib-uglify

[eric@localhost first]$ npm i grunt-contrib-jshint --save-dev 
...
grunt-contrib-jshint@0.7.2 node_modules/grunt-contrib-jshint
└── jshint@2.3.0 (console-browserify@0.1.6, underscore@1.4.4, shelljs@0.1.4, minimatch@0.2.12, cli@0.4.5)


$ vi Gruntfile.js

module.exports = function(grunt) {
  grunt.initConfig({
		jshint: {
			all: ['*.js']
		},
    uglify: {
      dist: {
        src: 'js/jquery-2.0.3.js',
        dest: 'js/jquery-2.0.3.min.js'
      }
    }
  });

  grunt.loadNpmTasks('grunt-contrib-uglify');
  grunt.loadNpmTasks('grunt-contrib-jshint');

  // Default task(s).
  grunt.registerTask('default', ['jshint','uglify']);

};




[eri@clocalhost first]$ ls
Gruntfile  js  node_modules  package.json
[eric@localhost first]$ ls js/
jquery-2.0.3.js

[eric@localhost first]$ grunt
Running "jshint:all" (jshint) task
>> 1 file lint free.

Running "uglify:dist" (uglify) task
File "js/jquery-2.0.3.min.js" created.

Done, without errors.

[eric@localhost first]$ ls js
jquery-2.0.3.js  jquery-2.0.3.min.js
  
/ 7	. 

$ vi package.json

{
  "name": "jquery-2.0.3",
  "version": "0.0.1",
  "devDependencies": {
    "grunt": "~0.4.2",
    "grunt-contrib-uglify": "~0.2.7",
    "grunt-contrib-jshint": "~0.7.2"
  }
}

$ vi Gruntfile.js

module.exports = function(grunt) {
  grunt.initConfig({
		pkg:grunt.file.readJSON('package.json'),
		jshint: {
			all: ['*.js']
		},
    uglify: {
			options:{
				banner:'/*! <%= pkg.name %>' + '<%= grunt.template.today("yyyy-mm-dd") %> */\n'
      },
      dist: {
        src: 'js/<%= pkg.name %>.js',
        dest: 'js/<%= pkg.name %>.<%= pkg.version %>.min.js'
      }
    }
  });

  grunt.loadNpmTasks('grunt-contrib-uglify');
  grunt.loadNpmTasks('grunt-contrib-jshint');

  // Default task(s).
  grunt.registerTask('default', ['jshint','uglify']);
}


/ We moeten splitsen	,
        banner:'/*! <%= pkg.name %>' + '<%= grunt.template.today("yyyy-mm-dd") %> */\n'
/is het per property <%= ... %>
/ TODO

/ 7	.

/ let op : local install	,

[eric@localhost first]$ sudo npm i grunt-contrib-cssmin --save-dev
grunt-contrib-cssmin@0.7.0 /usr/local/lib/node_modules/grunt-contrib-cssmin
├── grunt-lib-contrib@0.6.1 (zlib-browserify@0.0.1)
└── clean-css@2.0.2 (commander@2.0.0)

/ we maken de banner global	,

$ vi Gruntfile.js

module.exports = function(grunt) {
  grunt.initConfig({
		pkg:grunt.file.readJSON('package.json'),
		jshint: {
			all: ['*.js']
		},
		banner:'/*! <%= pkg.name %>' + '<%= grunt.template.today("yyyy-mm-dd") %> */\n',
    uglify: {
			options:{
				banner: '<%= banner %>' 
      },
      dist: {
        src: 'js/<%= pkg.name %>.js',
        dest: 'js/<%= pkg.name %>.<%= pkg.version %>.min.js'
      }
    },
    cssmin:{
       compress:{
        options:{
          banner:'<%= banner %>'
        },
        files:{
          'css/project.min.css':['css/ie.css','css/print.css','css/screen.css','css/style.css'] 
        }
       }
    }
  });

  grunt.loadNpmTasks('grunt-contrib-uglify');
  grunt.loadNpmTasks('grunt-contrib-jshint');
  grunt.loadNpmTasks('grunt-contrib-cssmin');

  // Default task(s).
  grunt.registerTask('default', ['jshint','uglify','cssmin']);

};

/let op dat ook cssmin, anders wordt niet gedaan	, : 
  grunt.registerTask('default', ['jshint','uglify','cssmin']);

/ let op : we moeten ; use	,


/ 7	.

[eric@localhost first]$ sudo npm i grunt-contrib-imagemin --save-dev

> pngquant-bin@0.1.5 postinstall /home/eric/Devel/Grunt/first/node_modules/grunt-contrib-imagemin/node_modules/pngquant-bin
> node lib/check.js

  pngquant: downloading [===================] 100% 0.0s


✓ pre-build test passed successfully

> optipng-bin@0.3.1 postinstall /home/eric/Devel/Grunt/first/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin
> node lib/check.js

  optipng: downloading [===================] 100% 0.0s


✓ pre-build test passed successfully

> gifsicle@0.1.4 postinstall /home/eric/Devel/Grunt/first/node_modules/grunt-contrib-imagemin/node_modules/gifsicle
> node lib/check.js

  gifsicle: downloading [===================] 100% 0.0s


✓ pre-build test passed successfully

> jpegtran-bin@0.2.2 postinstall /home/eric/Devel/Grunt/first/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin
> node lib/check.js

  jpegtran: downloading [===================] 100% 0.0s


✓ pre-build test passed successfully
grunt-contrib-imagemin@0.4.0 node_modules/grunt-contrib-imagemin
├── filesize@2.0.0
├── async@0.2.9
├── chalk@0.3.0 (ansi-styles@0.2.0, has-color@0.1.1)
├── pngquant-bin@0.1.5 (chalk@0.2.1, bin-wrapper@0.1.7)
├── optipng-bin@0.3.1 (chalk@0.2.1, bin-wrapper@0.1.7)
├── gifsicle@0.1.4 (chalk@0.2.1, bin-wrapper@0.1.7)
└── jpegtran-bin@0.2.2 (chalk@0.2.1, bin-wrapper@0.1.7)

/hij kan de image files niet vinden	,

module.exports = function(grunt) {
  grunt.initConfig({
...
    imagemin:{
      dist:{
        options:{
          optimizationLevel:3
        },
        files:{
          'img/tux.min.png':'img/tux.png',
          'img/unicycle.min.jpg':'img/unicycle.jpg'
        }
      }
    }

 	grunt.loadNpmTasks('grunt-contrib-imagemin');
  grunt.registerTask('default', ['jshint','uglify','cssmin','imagemin']);

}
  
                                                                     
[eric@localhost first]$ ls -l img
total 56
-rw-rw-r--. 1 eric eric  5591 Dec 11 00:11 tux.min.png
-rw-rw-r--. 1 eric eric  5836 Dec 10 22:37 tux.png
-rw-r--r--. 1 eric eric 19806 Dec 10 22:37 unicycle.jpg
-rw-rw-r--. 1 eric eric 16528 Dec 11 00:11 unicycle.min.jpg

/ we zien geen verschil in verschillende opt levels	,
/ TODO

/ 7	.

 










/ Einde GRUNT

/ GRUNT SASS COMPASS

/ 7	.

/ lees	,
https://github.com/tschaub/grunt-newer

[eric@walnut example]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/q/example
$ vi Gruntfile.js

   watch:{
      my_target:{
        files:["Gruntfile.js","app/js/**/*.js","test/unit/**/*.js"],
        tasks:["newer:jshint","newer:uglify"]
      },

 grunt.loadNpmTasks("grunt-newer")
  grunt.registerTask('default', ["jshint","uglify","watch"]);

/ 7	.

/ met de hand	,

[eric@localhost 9]$ pwd
/home/eric/Devel/Web/Sass/sass-tutorials/leveluptuts/9
[eric@walnut 9]$  sass -w -t expanded scss/:css/
...

/ Onder compass kunnen we ook gewoon sass doen,

[eric@walnut 2]$ pwd
/home/eric/Devel/Web/Sass/compass-tutorials/leveluptuts/2
$ compass watch

/ voor compass moet de dir waar de .scss files zijn sass heten, en niet scss zoals hier	,
/ we kunnen $ compass init	, dan config.rb	, maar zonder $ compass init doet $ compass watch (in de root van de proj) het ook	, maaar we hebben dan geen sass/screen.scss, ...

/ met $ compass init pas je een bestaande proj aan zodat compass werkt, de sass, stylesheets dirs worden create, en files zoals sass/screen.scss worden added	, 

$ vi sass/screen.scss
/*
 * <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" /> */

@import "compass/reset";

@import "style";

$ vi sass/style.scss
...
/ OK,	 we zien in stylesheets/screen.css  style.scss	,
/ Maar we zien ook stylesheets/style.css, we kunnen beter sass/_style.scss	, dan zien we NIET stylesheets/style.css	,

$ vi _style.scss

@import "compass/css3/border-radius";

.box{
  @include border-radius(10px);
}

/* of zelf */

@mixin my-border-radius($radius) {
  -webkit-border-radius: $radius;
     -moz-border-radius: $radius;
      -ms-border-radius: $radius;
      -o-border-radius: $radius;
          border-radius: $radius;
}

.box{
  @include my-border-radius(20px);
}

/ Ook	,

.msg{
  padding:10px;
}
.special{
  @extend .msg;
  border:1px solid;
}

/ wordt	,

/* line 45, ../sass/_style.scss */
.msg, .special {
  padding: 10px;
} 
  
/* line 48, ../sass/_style.scss */
.special {
  border: 1px solid;
}


/7	. 

/ lees	,
http://ryanchristiani.com/getting-started-with-grunt-and-sass/


/ lees	,
https://github.com/gruntjs/grunt-contrib-sass
https://github.com/gruntjs/grunt-contrib-watch

/ grunt-cli is al installed, -g

[eric@localhost 9]$ pwd
/home/eric/Devel/Web/Sass/sass-tutorials/leveluptuts/9
$ cat package.json
{
  "name": "grunt_with_sass",
  "version": "0.0.1",
  "devDependencies": {
  }
}

[eric@localhost 9]$ npm i grunt --save-dev

$ cat package.json
{
  "name": "grunt_with_sass",
  "version": "0.0.1",
  "devDependencies": {
    "grunt": "~0.4.2"
  }
}

[eric@localhost 9]$ npm i grunt-contrib-sass --save-dev
grunt-contrib-sass@0.6.0 node_modules/grunt-contrib-sass
├── dargs@0.1.0
└── async@0.2.9

[eric@localhost 9]$ npm i grunt-contrib-watch --save-dev
grunt-contrib-watch@0.5.3 node_modules/grunt-contrib-watch
├── gaze@0.4.3 (globule@0.1.0)
└── tiny-lr@0.0.4 (debug@0.7.4, faye-websocket@0.4.4, qs@0.5.6, noptify@0.0.3)

$ cat package.json
{
  "name": "grunt_with_sass",
  "version": "0.0.1",
  "devDependencies": {
    "grunt": "~0.4.2",
    "grunt-contrib-sass": "~0.6.0",
    "grunt-contrib-watch": "~0.5.3"
  }
}

$ vi Gruntfile.js

module.exports = function(grunt) {
  grunt.initConfig({
		pkg:grunt.file.readJSON('package.json'),
    sass:{
      my_target:{
        files:[{
          expand:true,
          cwd:"scss",
          src:["**/*.scss"],
          dest:"css",
          ext:".css",
          }]
      }
    },
    watch:{
      css:{
        files:'**/*.scss',
        tasks:['sass']
      }
    }
    
  });
      
 grunt.loadNpmTasks('grunt-contrib-sass');
  grunt.loadNpmTasks('grunt-contrib-watch');
  
  // Default task(s).
  grunt.registerTask('default', ['watch']);

};

[eric@localhost 9]$ grunt -v
...
/ OK

/ 7	. 

/ compass	,

/ lees	,
https://github.com/gruntjs/grunt-contrib-compass


[eric@walnut bar]$ npm install grunt-contrib-compass --save-dev
/ maar er is geen package.json, dus dan heeft --save-dev geen zin	, 

[eric@walnut bar]$ npm init
...
$ vi package.json

{
  "name": "bar",
  "version": "0.0.0",
  "description": "",
  "main": "Gruntfile.js",
  "dependencies": {
    "grunt": "~0.4.4",
    "grunt-contrib-compass": "~0.7.2"
  },
  "devDependencies": {},

/ we set de deps onder devDependencies	,

$ vi package.json

{
  "name": "bar",
  "version": "0.0.0",
  "devDependencies": {
    "grunt": "~0.4.4",
    "grunt-contrib-compass": "~0.7.2"
  }
}

$ npm install
/ niets, alles in al installed	,

$ vi Gruntfile.js

module.exports = function(grunt) {
  grunt.initConfig({
    pkg:grunt.file.readJSON('package.json'),
    compass:{
      my_target:{
      }
    },
    watch:{
      my:{
        files:'**/*.scss',
        tasks:['compass']
      }
    }

  });
  grunt.loadNpmTasks('grunt-contrib-compass');
  grunt.loadNpmTasks('grunt-contrib-watch');
  grunt.loadNpmTasks('grunt-newer');

  // Default task(s).
  grunt.registerTask('default', ['watch']);

};

/ OK	,

/ we hebben config.rb op de standaard plaats, we hoeven NIET,
    compass:{
      my_target:{
				config:"config.rb"
      }
    },

/ we kunnen NIET	,
    watch:{
      my:{
        files:'**/*.scss',
        tasks:['newer:compass']
      }
    }
/ TODO






/ Einde GRUNT SASS COMPASS

/ SAMENVATTING GRUNT SASS COMPASS

/ Met de hand	,
$ sass -w -t expanded scss:css
$ compass watch
/ Bij compass moet de dir sass heten met de .scss files er in	,

/ grunt install we local, in /usr/local/lib/node_modules/grunt-cli is er ook een grunt, en dat is in feite grunt op de command line, maar deze calls WH de grunt die we download in het project	,

/ we maken eerst package.json , voor npm	, 

$ vi package.json
{
  "name": "...",
  "version": "0.0.1",
  "devDependencies": {
  }
}

/ dan 	,

[eric@walnut 9]$ pwd
/home/eric/Devel/Web/Sass/sass-tutorials/leveluptuts/9
$ npm i grunt --save-dev
$ npm i grunt-contrib-sass --save-dev
$ npm i grunt-contrib-watch --save-dev
[eric@walnut 9]$ vi Gruntfile.js 

module.exports = function(grunt) {
  grunt.initConfig({
    pkg:grunt.file.readJSON('package.json'),
    sass:{
      dynamic:{
        files:[{
          expand:true,
          cwd:"scss",
          src:["**/*.scss"],
          dest:"css",
          ext:".css",
          }]
      }
    },
    watch:{
      my_target:{
        files:'**/*.scss',
        tasks:['sass']
      }
    }

	});
  grunt.loadNpmTasks('grunt-contrib-sass');
  grunt.loadNpmTasks('grunt-contrib-watch');

  // Default task(s).
  grunt.registerTask('default', ['watch']);

$ grunt
...
/ hij wacht op edits in de .scss files	,

[eric@walnut 2]$ pwd
/home/eric/Devel/Web/Sass/compass-tutorials/leveluptuts/2
$ npm i grunt --save-dev
$ npm i grunt-contrib-compass --save-dev
$ npm i grunt-contrib-watch --save-dev
[eric@walnut 2]$ vi Gruntfile.js 

module.exports = function(grunt) {
  grunt.initConfig({
    pkg:grunt.file.readJSON('package.json'),
    compass:{
      dynamic:{
        files:[{
          expand:true,
          cwd:"sass",
          src:["**/*.scss"],
          dest:"stylesheets",
          ext:".css",
          }]
      }
    },
    watch:{
      my_target:{
        files:'**/*.scss',
        tasks:['compass']
      }
    }
	});
  grunt.loadNpmTasks('grunt-contrib-compass');
  grunt.loadNpmTasks('grunt-contrib-watch');

  // Default task(s).
  grunt.registerTask('default', ['watch']);

};






/ Einde SAMENVATTING GRUNT SASS COMPASS

/ TMP ANGULAR-SEED KARMA PROTRACTOR

/ 6 oct 2014	,

/ 7	.

[eric@walnut tmp]$ pwd
/home/eric/Devel/Web/angularjs/tmp
[eric@walnut tmp]$ git clone https://github.com/angular/angular-seed.git
$ cd angular-seed

[eric@walnut angular-seed]$ ./node_modules/karma/bin/karma start

/ edit een source file	,
app/view1/view1_test.js
/ we zien ...
/ TODO


/ 7	.

http://angular.github.io/protractor/#/

/ install protractor	,

[eric@walnut angular-seed]$ pwd
/home/eric/Devel/Web/angularjs/tmp/angular-seed

/ lees	,
http://karma-runner.github.io/0.12/intro/installation.html

/ lees
https://github.com/angular/protractor
/ we zien link Protractor website	,
/ lees	,
http://angular.github.io/protractor/#/

[eric@walnut angular-seed]$ sudo npm install -g protractor

[eric@walnut angular-seed]$ sudo webdriver-manager update
Updating selenium standalone
downloading https://selenium-release.storage.googleapis.com/2.43/selenium-server-standalone-2.43.1.jar...
Updating chromedriver
downloading https://chromedriver.storage.googleapis.com/2.10/chromedriver_linux64.zip...
chromedriver_2.10.zip downloaded to /usr/local/lib/node_modules/protractor/selenium/chromedriver_2.10.zip

/usr/local/lib/node_modules/protractor/node_modules/adm-zip/zipFile.js:66
            throw Utils.Errors.INVALID_FORMAT;
                              ^
Invalid or unsupported zip format. No END header found

/ Maar de jar is ook ERR	, 
/ we download met de hand	,
/ lees	,
https://code.google.com/p/selenium/
/ we zien de Downloads link	,
https://code.google.com/p/selenium/downloads/detail?name=chromedriver%20downloads.txt&can=2&q=
/ we zien de link naar	,
http://chromedriver.storage.googleapis.com/index.html,	
/ browse naar 	,
http://chromedriver.storage.googleapis.com/index.html?path=2.10/
/ download	,
-rw-rw-r--. 1 eric eric    2301804 Oct  6 19:51 chromedriver_linux64 (1).zip

/ en	,
http://www.seleniumhq.org/download/
/ we zien	: Download version 2.43.1	,
-rw-rw-r--. 1 eric eric   34932047 Oct  6 19:56 selenium-server-standalone-2.43.1.jar

/ Wat is	,
https://www.npmjs.org/package/selenium-webdriver
/ TODO

/ 2 belangrijke sites	,
https://code.google.com/p/selenium/				// WH chrome webdriver	,
http://docs.seleniumhq.org/

/ op 
http://docs.seleniumhq.org/
/ zien we de link Selenium Webdriver: http://docs.seleniumhq.org/projects/webdriver/
/ hier op zien we	ChromeDriver	,
/ TODO

[eric@walnut selenium]$ pwd
/usr/local/lib/node_modules/protractor/selenium
[eric@walnut selenium]$ sudo cp ~/Downloads/selenium-server-standalone-2.43.1.jar .
[eric@walnut selenium]$ sudo unzip ~/Downloads/chromedriver_linux64\ \(1\).zip 

/ 7	.

http://angular.github.io/protractor/#/

[eric@walnut angular-seed]$ pwd
/home/eric/Devel/Web/angularjs/tmp/angular-seed

[eric@walnut angular-seed]$ webdriver-manager start
seleniumProcess.pid: 22678
19:57:19.101 INFO - Launching a standalone server
19:57:19.329 INFO - Java: Oracle Corporation 24.65-b04
19:57:19.329 INFO - OS: Linux 3.11.9-100.fc18.x86_64 amd64
19:57:19.362 INFO - v2.43.1, with Core v2.43.1. Built from revision 5163bce
19:57:19.582 INFO - Default driver org.openqa.selenium.ie.InternetExplorerDriver registration is skipped: registration capabilities Capabilities [{platform=WINDOWS, ensureCleanSession=true, browserName=internet explorer, version=}] does not match with current platform: LINUX
19:57:19.613 INFO - RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wd/hub
19:57:19.614 INFO - Version Jetty/5.1.x
19:57:19.615 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]
19:57:19.616 INFO - Started HttpContext[/selenium-server,/selenium-server]
19:57:19.616 INFO - Started HttpContext[/,/]
19:57:19.790 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@31818dbc
19:57:19.790 INFO - Started HttpContext[/wd,/wd]
19:57:19.831 INFO - Started SocketListener on 0.0.0.0:4444
19:57:19.831 INFO - Started org.openqa.jetty.jetty.Server@3617a35c
19:57:53.699 INFO - Executing: org.openqa.selenium.remote.server.handler.GetAllSessions@23b3d342)
19:57:53.701 INFO - Done: org.openqa.selenium.remote.server.handler.GetAllSessions@23b3d342

/ open	,
http://localhost:4444/wd/hub
/ OK

/ Maar	,
[eric@walnut angular-seed]$ protractor e2e-tests/protractor.conf.js 

[eric@walnut angular-seed]$ protractor e2e-tests/protractor.conf.js 

/ als we 2.10 versie van de chromedriver	,

UnknownError: unknown error: Chrome version must be >= 33.0.1750.0
  (Driver info: chromedriver=2.10.267518,platform=Linux 3.11.9-100.fc18.x86_64 x86_64) (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 1.11 seconds
Build info: version: '2.43.1', revision: '5163bce', time: '2014-09-10 16:27:33'
System info: host: 'walnut.nuts.org', ip: '192.168.123.170', os.name: 'Linux', os.arch: 'amd64', os.version: '3.11.9-100.fc18.x86_64', java.version: '1.7.0_65'
Driver info: org.openqa.selenium.chrome.ChromeDriver
    at new bot.Error (/usr/local/lib/node_modules/protractor/node_modules/selenium-webdriver/lib/atoms/error.js:113:18)

/ we hebben 	,
Version 31.0.1650.57


/ we nemen 2.8 chromedriver	,

[eric@walnut selenium]$ pwd
/usr/local/lib/node_modules/protractor/selenium
[eric@walnut selenium]$ sudo unzip  ~/Downloads/chromedriver_linux64\ \(3\).zip  
Archive:  /home/eric/Downloads/chromedriver_linux64 (3).zip
  inflating: chromedriver            
[eric@walnut selenium]$ sudo chmod a+rx chromedriver 

/ lees	,
http://stackoverflow.com/questions/13724778/how-to-run-selenium-webdriver-test-cases-in-chrome
/ Waar we de selenium server start, moeten we /usr/local/lib/node_modules/protractor/selenium in path set	, anders vindt de selenium server de chromedriver niet	,

$ PATH=$PATH:/usr/local/lib/node_modules/protractor/selenium
$ webdriver-manager start

/ we lezen	,
http://angular.github.io/protractor/#/

[eric@walnut self]$ pwd
/home/eric/Devel/Web/angularjs/tmp/self
[eric@walnut self]$ vi todo-spec.js

describe('angularjs homepage todo list', function() {
  it('should add a todo', function() {
    browser.get('http://www.angularjs.org');

    element(by.model('todoText')).sendKeys('write a protractor test');
    element(by.css('[value="add"]')).click();

    var todoList = element.all(by.repeater('todo in todos'));
    expect(todoList.count()).toEqual(3);
    expect(todoList.get(2).getText()).toEqual('write a protractor test');
  });
});

[eric@walnut self]$ vi conf.js
exports.config = {
  seleniumAddress: 'http://localhost:4444/wd/hub',
  specs: ['todo-spec.js']
};

[eric@walnut self]$ protractor conf.js 

/ we zien een chrome komen, en daarin gebeuren allerlei acties	,
/ Deze zien we ook in het window waar de selenium server execs	,
$ webdriver-manager start

[eric@walnut self]$ protractor conf.js 
util.puts: Use console.log instead
Using the selenium server at http://localhost:4444/wd/hub
.

Finished in 7.889 seconds
1 test, 2 assertions, 0 failures

/ we herhalen	,
[eric@walnut selenium]$ pwd
/usr/local/lib/node_modules/protractor/selenium
[eric@walnut selenium]$ ls -l 
-rwxr-xr-x. 1 root root 19354520 Dec 16  2013 chromedriver
-rw-r--r--. 1 root root 34932047 Oct  6 19:57 selenium-server-standalone-2.43.1.jar

/ als we ctrl+c de selenium server 	,
^CStaying alive until the Selenium Standalone process exits
Selenium Standalone has exited with code 130



/ 7	. 

/ Wat is ook alweer	,
http://localhost:8000/app/#/view1







/ Einde TMP ANGULAR-SEED KARMA PROTRACTOR

/ ANGULAR

/ 7	. 

/ Lees	,
https://docs.angularjs.org/api/auto/service/$injector

$injector is used to retrieve object instances as defined by provider, instantiate types, invoke methods, and load modules.


/ 7	.

$CompileProvider.$inject = ['$provide', '$$sanitizeUriProvider'];
function $CompileProvider($provide, $$sanitizeUriProvider) {

   this.directive = function registerDirective(name, directiveFactory) {
    if (isString(name)) {
          var directives = [];
          if (!hasDirectives.hasOwnProperty(name)) {
        hasDirectives[name] = [];
        $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
          function($injector, $exceptionHandler) { 	/ (*)
           var directives = [];
            forEach(hasDirectives[name], function(directiveFactory, index) {
              try {
                var directive = $injector.invoke(directiveFactory);

/ name=input
/ Suffix=Directive 
/ deze fct heeft als key "inputDirectiveProvider"	,

/ Dat kunnen we ook zien in	,

  function provider(name, provider_) {
    if (isFunction(provider_) || isArray(provider_)) {
      provider_ = providerInjector.instantiate(provider_);
    }
    return providerCache[name + providerSuffix] = provider_;

 function factory(name, factoryFn) {
    return provider(name, {
      $get: factoryFn
    });
  }

/ De functie (*) heeft in zijn closure directiveFactory	, en deze is in dit geval	, 

var inputDirective = ['$browser', '$sniffer', function($browser, $sniffer) {
  return {
    restrict: 'E',
    require: '?ngModel',
    link: function(scope, element, attr, ctrl) {
      if (ctrl) {
        (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrl, $sniffer,
                                                            $browser);
      }
    }
  };

/ Dan 	,
cache[inputDirective]={
		restrict:"E",
		...
}
/ Dit is de directive	,
/////////////////////////////


/ 7	. 

/ Net zo met ng-model	, dat is ook een directive	, de factory=
var ngModelDirective = function() {
  return {
    require: ['ngModel', '^?form'],
    controller: NgModelController,
    link: function(scope, element, attr, ctrls) {
      // notify others, especially parent forms

      var modelCtrl = ctrls[0],
          formCtrl = ctrls[1] || nullFormCtrl;

      formCtrl.$addControl(modelCtrl);

      scope.$on('$destroy', function() {
        formCtrl.$removeControl(modelCtrl);
      });
    }
  };
};

/ Hierin is	,
var NgModelController = ['$scope', '$exceptionHandler', '$attrs', '$element', '$parse',
    function($scope, $exceptionHandler, $attr, $element, $parse) {
...

/ De ng-model value = de ctrl value zit tussen de view value en de model value in	, de ctrl updates beide:

  var ctrl = this;

  $scope.$watch(function ngModelWatch() {
    var value = ngModelGet($scope);

    // if scope model value and ngModel value are out of sync
    if (ctrl.$modelValue !== value) {

      var formatters = ctrl.$formatters,
          idx = formatters.length;

      ctrl.$modelValue = value;
      while(idx--) {
        value = formatters[idx](value);
      }

      if (ctrl.$viewValue !== value) {
        ctrl.$viewValue = value;
        ctrl.$render();
      }
    }


/ 7	.

/ een ctrl geeft een nieuwe scope, hij ctrls de scope	,
/ de ngmodelctrl geeft geen nieuwe scope, hij ctrl de currentscope.<model>	, bijv $rootScope.data.message	,


/ 7	.

$ vi egghead.io/10/index.html

<div ng-app="app">
  <foo></foo>
</div>

$ vi script.js

app.directive("foo",function(){
  return{
    restrict:"E",
    template:"<div>Here I am, foo</div>",
    link:function(){
      console.log("I'm working")
    }
  }
})

/ In compile fase, 	als er geen compile fct is, wordt hij set tot de link fct	,
function valueFn(value) {return function() {return value;};}
/ TODO

/ In compile fase, in applyDirectivesToNode	,
/ * 
/ De template wordt in compile fase, in applyDirectivesToNode in <foo></foo> set	,
/ Logisch: geen scope in beeld	, is DOM manip	,
/ *
            linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
/s
function valueFn(value) {return function() {return value;};}
/ Dus dan komt de link fct weer terug	,

/ 7	. 


/ compile returns inner fct publicLinkFn	, die kent compositeLinkFn uit closure scope (compositeLinkFn is in local scope van compile)	, publicLinkFn krijgt meteen in doBootstrap de root scope als arg	, en gaat alle link fcts uit directives af met de juiste scope, want ondertussen worden er ook nieuwe scopes create	,
/ compileNodes returns een inner fct compositeLinkFn	, dus die kent linkFns in closure scope (linkFns is in local scope van compileNodes)
/ applyDirectivesToNode returns een inner fct nodeLinkFn, en die kent dus postLinkFns in closure scope (postLinkFns is in local scope van applyDirectivesToNode)	, deze is 1ste fct in linkFns 

/ compile(element)(scope) in doBootstrap: compile(element)=publicLinkFn, die de 1ste compositeLinkFn in closure scope heeft	, 

publicLinkFn
	\
compositeLinkFn
	\
	linkFns=[nodeLinkFn, 			compositeLinkFn]
						\
						postLinkFns										

/ In de postLinkFns zitten de link fct uit de directives	,

/ \ betekent: heeft in closure scope	,

/ Dus compileNodes maakt een tree van link fct uit de directives, 

/ 	7. 

/ Directives	,

app.directive("name",function(){
	return {
		restrict:"A",
		template:"<div>..."
		link:function(){
			...
		}
	}
}

/ als er geen template is	, kunnen we dit afkorten tot	, 

app.directive("name",function(){
	return function(){
			...
	}
}

/ de template wordt set in de compile fase, 
/ link is fct die wordt called in link fase, dus als DOM manip done, en de scope bekend is , die deze link fct krijgt	,

/ 7	.

$ vi 15/index.html

<div ng-app="app">
  <foo fl sp str>just some text</foo>
  <br>
  <foo fl>fl</foo>
</div>


$ vi 15/script.js

app.directive("foo",function(){
  return{
    restrict:"E"
    ,scope:{}
    ,controller:["$scope",function($scope){
      $scope.ab=[]
      this.addStr=function(){
        $scope.ab.push("str") }
      this.addSp=function(){
        $scope.ab.push("sp") }
      this.addFl=function(){
        $scope.ab.push("fl") }
    }]
    ,link:function(sc,el){
      el.on("mouseenter",function(){
        el.addClass("label")
        console.log(sc.ab)
      })
    }
  }
})

app.directive("str",function(){
  return{
    require:"foo"
    ,link:function(sc,el,at,ctrl){
      ctrl.addStr()
    }
  }
})

/ we zien dat de isol scope van foo is , niet van str bijv	, 
/ dus als de link fct van str wordt called, is sc=root scope	,
/ de ctrl van foo is een inst , de ctor hebben we def in de foo dir	,

/ omdat str require: foo, is ctrl de ctrl van foo	,
//////////////////////////

/ we zien de code in 	,

      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {

           controllerInstance = $controller(controller, locals);
            elementControllers[directive.name] = controllerInstance;

              linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);

/ 7	.

/ isol scope	, 

/ no prototypical inh	,

      $new: function(isolate) {
        if (isolate) {
          child = new Scope();
          child.$root = this.$root;
        } else {
          ChildScope = function() {}; // should be anonymous; This is so that when the minifier munges the name it does not become random set of chars. This will then show up as class name in the debugger.
          ChildScope.prototype = this;
          child = new ChildScope();
          child.$id = nextUid();
        }

/ als sc = isol scope,	 is sc.__proto__===Scope.prototype	, dus sc.$new kan	,
/ als sc NIET isol, is sc.__proto__=$rootScope bijv	, die $rootScope.__proto__===Scope.prototype	, maar nu dus ook alles in $rootScope	,

/ wel is isol scope.$root=root scope.$root===root scope	,
/ TODO

/ 7	.

/ Net als in egghead.io's 15 zien we een directive api	, en andere dir's die deze call	,

/ Net als in video 15 zien we ,	
<input ng-model="data.message">
/ de input dir's link fct calls api van de ng-model dir	,
//////////////////////////////
/ zo ook WH <select ng-model=...> en <radio ng-model=...>	, 
/ wij hadden <foo str ...> , hier was het andersom: str's link fct calls api van foo dir	,

var ngModelDirective = function() {
  var dir={
    require: ['ngModel', '^?form'],
    controller: NgModelController,

var NgModelController = ['$scope', '$exceptionHandler', '$attrs', '$element', '$parse',
    function($scope, $exceptionHandler, $attr, $element, $parse) {
...
  this.$setViewValue = function(value) {
    this.$viewValue = value;
...
/ Dit is de API 	,


/ 13	.

var selectDirective = ['$compile', '$parse', function($compile,   $parse) {
    require: ['select', '?ngModel'],
          ngModelCtrl = nullModelCtrl,

    link: function(scope, element, attr, ctrls) {
    link: function(scope, element, attr, ctrls) {
      var selectCtrl = ctrls[0],
          ngModelCtrl = ctrls[1],
      function setupAsSingle(scope, selectElement, ngModelCtrl, selectCtrl) {
        ngModelCtrl.$render = function() {
          var viewValue = ngModelCtrl.$viewValue;

/ calls ng-model dir's api	,

/ 7	.

var inputDirective = ['$browser', '$sniffer', function($browser, $sniffer) {
  var dir={
    restrict: 'E',
    require: '?ngModel',
    link: function(scope, element, attr, ctrl) {
      if (ctrl) {
        (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrl, $sniffer, $browser);

var inputType = {
  'text': textInputType,
  'number': numberInputType,
  'url': urlInputType,
  'email': emailInputType,
  'radio': radioInputType,
  'checkbox': checkboxInputType,


function textInputType(scope, element, attr, ctrl, $sniffer, $browser) {

  var listener = function() {
    if (ctrl.$viewValue !== value) {
      scope.$apply(function() {
        ctrl.$setViewValue(value);


 element.on('change', listener);

  ctrl.$render = function() {
    element.val(ctrl.$isEmpty(ctrl.$viewValue) ? '' : ctrl.$viewValue);
  };

/ en	,

function numberInputType(scope, element, attr, ctrl, $sniffer, $browser) {
  textInputType(scope, element, attr, ctrl, $sniffer, $browser);

  ctrl.$parsers.push(function(value) {
    var empty = ctrl.$isEmpty(value);
...

/ 7. 	

/ we zien dat de ng-controller fct $scope var's en fcts sets	,
/ verschijnt deze ctrl ook in link fcts van dir's,  zoals de ctrl van ng-model dat doet, omdat ng-model een require   is van de dir	, ?
/ WH NIET	,
/TODO

/ 7	.

$ vi 1_2/index.html

<div ng-app="">
  <input type="text" ng-model="data.message">
  <h1>{{data.message}}</h1>
</div>

/ Let op dat we NIET ng-app="app", want dan TODO (verwacht)	,

/ per node is er een nodeLinkFn		,

/ compositeLinkFn gaat alles nodes af	, en WH door ng-controller als er is	,
            if (nodeLinkFn.scope) {
              childScope = scope.$new();

            nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);

/ nodeLinkFn gaat de dir's af	, 
            var locals = {
              $scope: directive === newIsolateScopeDirective || directive.$$isolateScope ? isolateScope : scope,
              $element: $element,
              $attrs: attrs,

            controllerInstance = $controller(controller, locals);
/s
      instance = $injector.instantiate(expression, locals);
/ In locals zit de scope	,
/s
var NgModelController = ['$scope', '$exceptionHandler', '$attrs', '$element', '$parse',
    function($scope, $exceptionHandler, $attr, $element, $parse) {
...
  var ngModelGet = $parse($attr.ngModel),
/ $attr.ngModel="data.message"

  $scope.$watch(function ngModelWatch() {
    var value = ngModelGet($scope);
...


/ Intermezzo

/ maar deze $parse was al eerder gedaan, nl. bij compile text node {{data.message}}	, deze node heeft ook een dir	, 
{ compile: function(){return value}, priority:0}

/ dit gebeurt in addTextInterpolateDirective	,
      var interpolateFn = $interpolate(text, true);
/ interpolateFn.parts=[function(self,locals){...}]	,

        directives.push({
          priority: 0,
          compile: valueFn(function textInterpolateLinkFn(scope, node) {
            var parent = node.parent(),
                bindings = parent.data('$binding') || [];
            bindings.push(interpolateFn);
            safeAddClass(parent.data('$binding', bindings), 'ng-binding');
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });

/s
$interpolate
/s
          parts.push(fn = $parse(exp = text.substring(startIndex + startSymbolLength, endIndex)));
/ Dus $parse("data.message")

/ antwoord: parts=Array[1]
		0:function(self, locals){...}
/s
  parse: function (text, json) {
    this.tokens = this.lexer.lex(text);
/ this.tokens=
tokens: Array[1]
	0: Object
		fn: function (self, locals) {

   var value = json ? this.primary() : this.statements();
/ tokens is nu Array[0], value=de function	,

/ Lexer.readIndent	,
      var getter = getterFn(ident, this.options, this.text);
/s
    var code = 'var l, fn, p;\n';
      code += 'if(s === null || s === undefined) return s;\n' +
...

/ Einde Intermezzo

/ Dan in de nodeLinkFn van node <input ...>  worden de link fct called	, die van ng-model later, maar nu die van input	,
            linkFn(
							linkFn.isolateScope ? isolateScope : scope, 
							$element, attrs, 
							linkFn.require && getControllers(linkFn.require, $element, elementControllers), 
							transcludeFn); 
/ hij krijgt de ctrls (WH op deze node) mee, dat is alleen die is def in de ng-model dir)	, 

/s
   link: function(scope, element, attr, ctrl) {
      if (ctrl) {
        (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrl, $sniffer, $browser);

/ we zijn nog steeds in 	,
        scope.$apply(function() {
          element.data('$injector', injector);
          compile(element)(scope);
        });
/ scope.$apply: doet daarna $rootScope.$digest	,
/s
           if ((watchers = current.$$watchers)) {
/er zijn er 2	, die beide een get en een fn fct hebben	, de get wordt eval en gekeken of veranderd	,
                    if ((value = watch.get(current)) !== (last = watch.last) &&
...
/s
  $scope.$watch(function ngModelWatch() {
    var value = ngModelGet($scope);
null
/ want	,
/s
(function(s,k,pw							/ s=$rootScope,	 k=undefined	,
/**/) {
var l, fn, p;
if(s === null || s === undefined) return s;
l=s;
s=((k&&k.hasOwnProperty("data"))?k:s)["data"]; 	/ NEE	, dus s=s.data -> s===undefined	,
if(s === null || s === undefined) return s;			/ return undefined 
l=s;
s=s["message"];
return s;
})

/t
$rootScope.$digest
                      watch.fn(value, ((last === initWatchVal) ? value : last), current);
/ NIETS bij ng-model watcher	,

/ dan  de volgende,	
                    if ((value = watch.get(current)) !== (last = watch.last) &&
/s
/ fn is de interpolateFn, die we hieronder zien in de $scope.watch def	,

       fn = function(context) {
          try {
            for(var i = 0, ii = length, part; i<ii; i++) {
              if (typeof (part = parts[i]) == 'function') {
                part = part(context);
/s
(function(s,k,pw
/**/) {
var l, fn, p;
if(s === null || s === undefined) return s;
l=s;
s=((k&&k.hasOwnProperty("data"))?k:s)["data"];
if(s === null || s === undefined) return s;
l=s;
s=s["message"];
return s;
})
                if (trustedContext) {
                  part = $sce.getTrusted(trustedContext, part);
                } else {
                  part = $sce.valueOf(part);
                }
                if (part === null || isUndefined(part)) {
                  part = '';
                } else if (typeof part != 'string') {
                  part = toJson(part);
                }
              }
              concat[i] = part;
            }
            return concat.join('');

/t
$digest
                      watch.fn(value, ((last === initWatchVal) ? value : last), current);
           scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
->              node[0].nodeValue = value;
/value=""

/13	. 

/ Wat gebeurt er als we de input edit?

var inputDirective = ['$browser', '$sniffer', function($browser, $sniffer) {
  var dir={
    require: '?ngModel',
    link: function(scope, element, attr, ctrl) {
        inputType.text(scope, element, attr, ctrl, $sniffer, $browser);

/ omdat require:'ngModel', is ctrl=NgModelController	,  

/ we komen in 	,
 var listener = function() {
    var value = element.val();
fo
/ we hadden "o" gegeven	, er stond al "f" in	,

    if (ctrl.$viewValue !== value) {
/ JA
      scope.$apply(function() {
        ctrl.$setViewValue(value);

/ want de link fct van de input dir	called textInputType	, en deze deed	,
        element.on('change', listener);

/ we komen dus in 	,
NgModelController.$setViewValue (angular.js:16874)
           this.$setViewValue = function(value) {
...
                    ngModelSet($scope, value);
/s
    function setter(obj, path, setValue, fullExp, options) {
/ obj=root scope, root scope.data={message:"f"}
/ path="data.message"
       var element = path.split('.'), key;

        for (var i = 0; element.length > 1; i++) {
            key = ensureSafeMemberName(element.shift(), fullExp);
/ key="data"
            var propertyObj = obj[key];
{message:"f"}
            obj = propertyObj;

       key = ensureSafeMemberName(element.shift(), fullExp);
"message"

        obj[key] = setValue;
/ obj={message:"fo"}

/ Dus de root scope wordt modified, written door ng-model's controller	, en dat is eig. wat controllers altijd doen: modify de scope	, 

/ ng-model's controller: modifies current scope, bijv root scope,	 maakt zelf geen scope	,
/ ng-controller maakt een child scope van current scope	, de controller def wij zelf en die modifies child scope,	
/ foo maakt isolate scope	, controllers writes deze scope	,


/ 7	.

/ ng-controller	,

$ vi 2/index.html

<div ng-app>
  <div ng-controller="ctrl">
...

$ vi 2/script.js

var ctrl=function($scope){
  $scope.data={message:"label"}
}

$ vi angular.js

var ngControllerDirective = [function() {
  return {
    scope: true,
    controller: '@',
    priority: 500
  };
}];

/ Die @ wordt WH vervangen door de name "ctrl" hier, dus in onze script.js staat de ctrl ctor	, net zoals NgModelController	,   

/ 17	.

$ vi 17_1/index.html

<div ng-app="app">
  <div drink flavor="cherry">
  </div>
</div>

$ vi 17_1/script.js

var app=angular.module("app",[])
app.directive("drink",function(){
  return {
    template:"<div>{{flavor}}</div>",
    link:function(scope,element,attrs,ctrl){
      scope.flavor=attrs.flavor
    }
  }
})

/ of	,

var app=angular.module("app",[])
app.directive("drink",function(){
  return {
		scope:{},
    template:"<div>{{flavor}}</div>",
    link:function(scope,element,attrs,ctrl){
      scope.flavor=attrs.flavor
    }
  }
})

/ de isol scope 's flavor wordt set met een value NIET uit de root scope, maar letterlijk, TODO
/ Hieronder in 17_3 komt de value uit de root scope	, 

/ OK

/ De scope in de link fct is de isol scope	, 
/ maar eerst wordt de link fct van de child 's dir {{flavor}} called, 	deze krijgt ook de isol scope	, logisch, want anders kent hij flavor niet	,

/ De link fct van {{flavor}} dir is	,

    function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
      if (interpolateFn) {
->      var fn=function textInterpolateLinkFn(scope, node) {
            var parent = node.parent(),
                bindings = parent.data('$binding') || [];
            bindings.push(interpolateFn);
            safeAddClass(parent.data('$binding', bindings), 'ng-binding');
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });
        }
        directives.push({
          priority: 0,
          compile: valueFn(fn)
        });

/ want de compile fct wordt compiled tot de link fct, dus fn komt weer terug	, 

/ In
->      var fn=function textInterpolateLinkFn(scope, node) {
/ is scope de isol scope	,
/ dus de watcher wordt set op de isol scope	,

/ we zien dat bij isol scope.$digest de get fct=interpolateFn wordt eval	,
    function $interpolate(text, mustHaveExpression, trustedContext) {
...
  ->    fn = function(context) {
          try {
            for(var i = 0, ii = length, part; i<ii; i++) {
              if (typeof (part = parts[i]) == 'function') {
...
/ Dit is de get fct van de watcher	,
/ de get fct van de watcher	, is interpolateFnWatchAction	,
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });

/ 7	.

$ vi 17_2/index.html
<div ng-app="app">
	<div drink flavor="strawberry"></div>


$ vi 17_2/script.js

app.directive("drink",function(){
  return {
    template:"<div>{{flavor}}</div>",
    scope:{flavor:"@"},
 
  }
})

/ Ook nu wordt isol scope.flavor set	, in link fase	,
      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
/ linkNode=<div drink ...>
        if (newIsolateScopeDirective) {
          isolateScope = scope.$new(true);

         forEach(newIsolateScopeDirective.scope, function(definition, scopeName) {
/ newIsolateScopeDirective.scope={flavor:"@"}	,
/ definition='@"
/ scopeName="flavor"

           var match = definition.match(LOCAL_REGEXP) || [],
match: Array[4]
0: "@"
1: "@"
2: ""
3: ""
index: 0
input: "@"
length: 4
                attrName = match[3] || scopeName,
flavor
/ WH als we flavor:"@flavor"	, dan is match[3]="flavor" in dit geval	,
                optional = (match[2] == '?'),
                mode = match[1], // @, =, or &
@

            switch (mode) {

              case '@':
                  isolateScope[scopeName] = $interpolate(attrs[attrName])(scope);
/ isol scope.flavor="strawberry"
/ want attrs.flavor="strawberry", en $interpolate returns fn , en de fn(scope) (see interpolate) doet niets	, 

/ Dus scope:{flavor:"@"} is inderdaad precies	,
	scope.flavor=attrs.flavor

/ 7	.

/ 17_3

<div ng-app="app">
    <input type="text" ng-model="rootFlavor">
    <div drink flavor="{{rootFlavor}}"></div>
</div>

app.directive("drink",function(){
  return {
    scope:{flavor:"@"},
    template:"<div>{{flavor}}</div>",
  }
})

/ rootFlavor is in de root scope	, en via atts.flavor komt het in de isolate scope	, dus van root scope -> isol scope	, 
/ See in 17_1, 	waar de value niet uit de root scope komt, maar er letterlijk staat	, TODO	,


/ 7	.

/ we vervangen @ door =	, en {{rootFlavor}} door rootFlavor	,

$ vi 17_4/index.html

<div ng-app="app">
    <input type="text" ng-model="rootFlavor">
    <div drink flavor="rootFlavor"></div>
</div>

$ vi 17_4/script.js

var app=angular.module("app",[])
app.directive("drink",function(){
  return {
    scope:{flavor:"="},
    template:"<div>{{flavor}}</div>",
  }
})


$ vi angular.js

    function $interpolate(text, mustHaveExpression, trustedContext) {
         parts.push(fn = $parse(exp = text.substring(startIndex + startSymbolLength, endIndex)));

    function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
        var fn=function textInterpolateLinkFn(scope, node) {
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;

/ $parse haalt value uit scope (met gen js code)	, en de watcher.fn stop deze in de #text node	,

/ 7	. 

/ 17_4_2	,

/ we vervangen
    template:"<div>{{flavor}}</div>",
/ door 
    template:'<input type="text" ng-model="flavor">', 

$ vi 17_4_2/index.html

<div ng-app="app">
    <input type="text" ng-model="rootFlavor">
    <div drink flavor="rootFlavor"></div>
</div>

$ vi 17_4_2/script.js

var app=angular.module("app",[])
app.directive("drink",function(){
  return {
    scope:{flavor:"="},
    template:'<input type="text" ng-model="flavor">',
  }
})

/ we zien 2 inputs	,
/ omdat 
    <div drink flavor="rootFlavor"></div>
/ is het zo dat als we 


/ deze is bidir naar scope	,

/ 7	.

/ scope:{"&" 
/ TODO

/ Ook: Wat is in de root scope, isolated scope	,

/ 7	. 

/ zippy is 24/	,

/ 7	.

https://egghead.io/lessons/angularjs-templateurl

/ 13	.

$ cp -a 24 24_2

/ we set het template in html	, verder niets	, en ref er naar in js met templateUrl, 

$ vi 24_2/index.html

  <script type="text/ng-template" id="zippy.html">
      <div>
        <h3 ng-click="f()"> {{title}} </h3>
        <div ng-show="v" ng-transclude>
          This will be replace by the user template  
        </div>
      </div>
  </script>

/ Extra	, de rest uit 24/index.html blijft onveranderd	,

$ vi 24_2/script.js

    templateUrl:
      'zippy.html'  ,

/ 13	. 

/ haal <script ...> weg uit index.html en content in zippy.html file	,

/ 7	.

/ $templateCache 

[eric@walnut egghead.io]$ cp -a 24_2 25

/  13	.

$ vi 25/index.html

<div ng-app="app">
  <script type="text/ng-template" id="zippy.html">
      <h3 ng-click="f()"> {{title}} </h3>
      <div ng-show="v" ng-transclude>
        This will be replace by the user template
      </div>
  </script>
  <input type="text" ng-model="model.title">
  <input type="text" ng-model="model.content">
  <zippy title="{{model.title}}">
    The content is: {{model.content}}
  </zippy>

/ Nu staat alles bij elkaar, want wat tussen <script> staat komt tussen <zippy>	, met de current content van zippy transcluded (wrapped)	, 


$ vi 25/script.js

app.directive("zippy",function($templateCache){
  console.log($templateCache.get("zippy.html"))
  return{
...
    template: $templateCache.get("zippy.html")  , 
/ of
    templateUrl: "zippy.html"	,
...

/ Let op : template, NIET templateUrl	,

/ 13	.

$ vi 25_2/index.html

/ <script> is weg	,

/ $ vi 25_2/script.js

app.run(function($templateCache){
  $templateCache.put("zippy.html",
      '<h3 ng-click="f()">'+
        '{{title}}'+
      '</h3>'+
      '<div ng-show="v" ng-transclude>'+
        'This will be replace by the user template , the scope is transclude scope, a inh scope of the root scope in this case  ,' +
      '</div>')
})

app.directive("zippy",function($templateCache){
  console.log($templateCache.get("zippy.html"))

  return{
...
    transclude:true,
    template: $templateCache.get("zippy.html")  ,
  
/ De log ziet er nu iets anders uit: 1 regel	, in 25 met new lines en indentations	, zoals we HTML geven	,

/ 7	.

/ ng-view	,

./29/index.html:	<ng-view></ng-view>

/ Lees	,
http://scotch.io/tutorials/javascript/single-page-apps-with-angularjs-routing-and-templating

/ 7	. 

/ See	,
https://docs.angularjs.org/api/ng/type/ngModel.NgModelController

/ See	,
https://docs.angularjs.org/api/ngRoute/provider/$routeProvider
/ for video https://egghead.io/lessons/angularjs-resolve	, for resolve property of the $routeProvider	,

/ 7	.

[eric@walnut angularjs]$ pwd
/home/eric/Devel/Web/angularjs
[eric@walnut angularjs]$ bower install angular#1.3.2
[eric@walnut angularjs]$ ls bower_components/angular/
angular-csp.css  angular.min.js       angular.min.js.map  package.json
angular.js       angular.min.js.gzip  bower.json          README.md

[eric@walnut angularjs]$ bower install angular-route#1.3.2
-----------------------------------------
Update available: 1.3.12 (current: 1.3.1)
Run npm update -g bower to update

[eric@walnut angularjs]$ ls bower_components/
angular  angular-route
[eric@walnut angularjs]$ ls bower_components/angular-route/
angular-route.js          .bower.json               README.md
angular-route.min.js      bower.json                
angular-route.min.js.map  package.json    

/ 7	. 

/ resolve in $routeProvider	,

/ Lees	,
http://odetocode.com/blogs/scott/archive/2014/05/20/using-resolve-in-angularjs-routes.aspx

/ 13	.

/ voorbereiding	,

/ $q.then is een promise	, 

$ vi test/q/index.html

<script src="/angularjs/bower_components/angular/angular.js"></script>
<script src="/angularjs/bower_components/angular-route/angular-route.js"></script>
<script src="script.js"></script>
</head>
<body>
<div ng-app="app">
</div>

/ $q.defer is een (deferred) task, $q.defer.promise is de beloofde task, je kunt .then erop doen	,
 

/ In 1.3.2 	,

 12930    * Creates a `Deferred` object which represents a task which will finish in the f        uture.
  12931    *
  12932    * @returns {Deferred} Returns a new instance of deferred.
  12933    */
  12934   var defer = function() {
  12935     return new Deferred();
  12936   };

  13011   Deferred.prototype = {
  13012     resolve: function(val) {

 	13162   var when = function(value, callback, errback, progressBack) {
  13163     var result = new Deferred();
  13164     result.resolve(value);
  13165     return result.promise.then(callback, errback, progressBack);
  13166   };

/ 1313	.

/ Een deferred is een task	, exec in the future	, 

$ vi test/q/index.html

<div ng-app="app">
	{{val}}
</div>

$ vi test/q/script.js

var app=angular.module("app",[])

app.run(function($rootScope,$q){
  var task=$q.defer()
  task.promise.then(function(val){
    $rootScope.val=val 
  })
  task.resolve("Foo Bar")
})

/ we zien inderdaad in het browser window	,
Foo Bar

/ 1313	. 

/ $q.when geeft een promise	,

$ vi test/q/script.js

var app=angular.module("app",[])

app.run(function($rootScope,$q){

  var promise=$q.when("Foo Bar")

  promise.then(function(val){
    $rootScope.val=val
  })
})

/ we zien
Foo Bar

/ 1313	. 

/ we kunnen ook in then een callback geven	, die krijgt dan de value	, een latere callback niet	,

  var promise=$q.when("Foo Bar",function(val){
    $rootScope.val=val													/ Foo Bar
  })

  promise.then(function(val){
    $rootScope.val=val													/ undefined
  })

/ 13

/ lees	,
http://odetocode.com/blogs/scott/archive/2014/05/20/using-resolve-in-angularjs-routes.aspx

/ 1313	.

/ we oef eerst met inject	,

$ vi test/q/index.html

<div ng-app="app">
  {{val}}
</div>

$ vi test/q/script.js

var app=angular.module("app",[])

app.factory("message",function($q){
  return $q.when("Foo Bar")
})

app.run(function($rootScope,message){
  message.then(function(val){
    $rootScope.val=val
  })
})

/ OK

/ 13

/ Lees	,
https://docs.angularjs.org/api/ngRoute/provider/$routeProvider

/ 1313

/ resolve{ name: <string> }

$ vi test/q/index.html
<div ng-app="app">
  <ng-view></ng-view>
</div>


$ vi test/q/app.html
<h1>{{name}}</h1>

$ vi test/q/script.js

var app=angular.module("app",["ngRoute"])

app.factory("message",function(){
  return "Foo Bar"
})
// of	,
app.value("message","Foo Bar")


app.config(function($routeProvider){
  $routeProvider.when("/",{
    templateUrl:"app.html",
    controller:"ctrl",
    resolve:{
      name:"message"
    }
  })
})

app.controller("ctrl",function($scope,name){
  $scope.name=name
})

/ 1313

/ Hierboven, alleen anders	,

app.factory("message",function(){
  return function(){
    return "Foo Bar"
  }
})

/ NIETS	,

/ 13

/ resolve:{name:<function>}

/ 1313

app.config(function($routeProvider){
  $routeProvider.when("/",{
    templateUrl:"app.html",
    controller:"ctrl",
    resolve:{
      name:function(){
        return "Foo Bar"
      }
    }
  })
})

app.controller("ctrl",function($scope,name){
  $scope.name=name
})

/ OK

/ 1313

app.config(function($routeProvider){
  $routeProvider.when("/",{
    templateUrl:"app.html",
    controller:"ctrl",
    resolve:{
      name:function($q){
        return $q.when("Foo Bar")
      }
    }
  })
})

app.controller("ctrl",function($scope,name){
  $scope.name=name
})

/ OK

/ 1313

/ of je maakt deze function tot service	,

app.factory("message",function($q){
  return $q.when("Foo Bar")
})

app.config(function($routeProvider){
  $routeProvider.when("/",{
    templateUrl:"app.html",
    controller:"ctrl",
    resolve:{
      name:"message"
 
    } 
  })
})

app.controller("ctrl",function($scope,name){
  $scope.name=name
})

/ 7

/ video	,
https://egghead.io/lessons/angularjs-resolve-routechangeerror

[eric@walnut route]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/test/route

/ 13	. 

/ we maken eerst	,

/ index.html

<div ng-app="app">
  <ng-view></ng-view>
</div>

/ app.html

<h1>{{name}}</h1>

$ vi script.js

var app=angular.module("app",["ngRoute"])

app.factory("message",function($q,$timeout){
  var task=$q.defer()
  $timeout(function(){
    task.resolve("Foo Bar")
  },2000)
  return task.promise
})

app.config(function($routeProvider){
  $routeProvider.when("/",{
    templateUrl:"app.html",
    controller:"ctrl",
    resolve:{
      name:"message"
 
    }
  })
})

app.controller("ctrl",function($scope,name){
  $scope.name=name

/ OK

/ als we reject	, zien we niets	,
    task.reject("Foo Bar")

/ 13

/ we zijn op	,
http://web/angularjs/egghead.io/test/route/#/
https://egghead.io/lessons/angularjs-resolve-routechangeerror
https://docs.angularjs.org/api/ngRoute/provider/$routeProvider

[eric@walnut route]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/test/route


$ vi index.html

<div ng-app="app" ng-controller="appCtrl">
  <ng-view></ng-view>
</div>

$ vi script.js

var app=angular.module("app",["ngRoute"])

app.factory("message",function($q,$timeout){
  var task=$q.defer()
  $timeout(function(){
    task.reject("Foo Bar")
  },2000)
  return task.promise
})

app.config(function($routeProvider){
  $routeProvider.when("/",{
    templateUrl:"app.html",
    controller:"viewCtrl",
    resolve:{
      name:"message"

    }
  })
})

app.controller("appCtrl",function($rootScope,$scope){
  $scope.$on("$routeChangeError",function(event,current,previous,rejection){
    console.log(event)
    console.log(current)
    console.log(previous)
    console.log(rejection)
  })
})

/ video doet	,
  $rootScope.$on("$routeChangeError",function(event,current,previous,rejection){
/ Ook OK	,
/ herinner: de $scope wordt via locals injected, net als $rootScope	injected wordt	,
/ $scope is OK hier	,

app.controller("viewCtrl",function($scope,name){
  $scope.name=name
})


/ we zien in de console	,
Object
currentScope: null
defaultPrevented: false
name: "$routeChangeError"
preventDefault: function () {
targetScope: Scope
__proto__: Object
 script.js:26

angular.extend.angular.extend
$$route: Object
loadedTemplateUrl: "app.html"
params: Object
pathParams: Object
__proto__: Object
 script.js:27

undefined script.js:28

Foo Bar script.js:29

/ 7	.  

/ video	,
https://egghead.io/lessons/angularjs-directive-for-route-handling

[eric@walnut route2]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/test/route2


/ we maken een dir	, ipv appCtrl	,

/ als de service reject, zien we de err msg	, anders niet	,

/ als de service reject, "passeert  de code de resolve prop NIET"	, dus stopt
/ TODO

$ vi index.html

<div ng-app="app" >
  <error></error>
  <ng-view></ng-view>
</div>

$ vi script.js

var app=angular.module("app",["ngRoute"])

app.factory("message",function($q,$timeout){
  var task=$q.defer()
  $timeout(function(){

    task.reject("Foo Bar")
/ of	,
    task.resolve("Foo Bar")

  },2000)
  return task.promise
})

app.config(function($routeProvider){
  $routeProvider.when("/",{
    templateUrl:"app.html",
    controller:"viewCtrl",
    resolve:{
      name:"message"
    }
  })
})

app.directive("error",function(){
  var dir={
    restrict:"E",
    template:'<div ng-show="isError" style="background:blue">Error</div>',
    link:function(scope){
      scope.$on("$routeChangeError",function(event,current,previous,rejection){
// called	, als service reject	, 

      	scope.isError=true
        console.log(event)
        console.log(current)
        console.log(previous)
        console.log(rejection)
      })
    }
  }
  return dir
})

app.controller("viewCtrl",function($scope,name){
  $scope.name=name
})

/ video injects $rootScope	, niet nodig	, scope in link fct is root scope, omdat de dir <error> daar is	,

/ omdat in de message service	, 
    task.reject("Foo Bar")
/ wordt called	,
      scope.$on("$routeChangeError",function(event,current,previous,rejection){
      	scope.isError=true

/ Nu zien we wel een previous route	,
/ TODO

Object {name: "$routeChangeError", targetScope: Scope, preventDefault: function, defaultPrevented: false, currentScope: Scope}
 script.js:30

angular.extend.angular.extend {params: Object, pathParams: Object, $$route: Object, loadedTemplateUrl: "app.html", templateUrl: "app.html"…}
$$route: Object
loadedTemplateUrl: "app.html"
params: Object
pathParams: Object
__proto__: Object
 script.js:31

angular.extend.angular.extend {params: Object, pathParams: Object, $$route: Object, locals: Object, redirectTo: "/"…}
$$route: Object
locals: Object
params: Object
pathParams: Object
__proto__: Object
 script.js:32

Foo Bar script.js:33

/ 7	.

/ video	,
https://egghead.io/lessons/angularjs-route-life-cycle

[eric@walnut route3]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/test/route3


/ we voegen toch ook de error dir toe	, want anders zien we niet als de service niet resolve, maar reject	,

$ vi index.html

<div ng-app="app" ng-controller="appCtrl"  >
  <error></error>
  <ng-view></ng-view>
</div>

$ vi app.html

<a ng-click="changeRoute()">change route</a>

$ vi new.html

<h1>{{name}}</h1>

$ vi script.js

var app=angular.module("app",["ngRoute"])

app.factory("message",function($q,$timeout){
  var task=$q.defer()
  $timeout(function(){
    task.reject("Foo Bar")
  },2000)
  return task.promise
})

app.config(function($routeProvider){
  $routeProvider.when("/",{
    templateUrl:"app.html",
    controller:"viewCtrl",
  }).when("/new",{
    templateUrl:"new.html",
    controller:"newCtrl",
    resolve:{
      name:"message"
    }
  })
})

app.directive("error",function(){
  var dir={
    restrict:"E",
    template:'<div ng-show="isError" style="background:blue">Error</div>',
    link:function(scope){
      scope.$on("$routeChangeError",function(event,current,previous,rejection){
        scope.isError=true
      })
    }
  }
  return dir
})

app.controller("appCtrl",function($scope,$route,$location){
  $scope.$on("$routeChangeStart",function(event,current,previous,resolve){
    console.log("Start")
    console.log($scope,$route,$location);
  })
  $scope.$on("$routeChangeSuccess",function(event,current,previous,resolve){
    console.log("Success")
    console.log($scope,$route,$location);
  })
})

app.controller("viewCtrl",function($scope,$route,$location){
  $scope.changeRoute=function(){
    console.log($scope)
    $location.path("/new")
  }
})

app.controller("newCtrl",function($scope,name,$template){
  $scope.name=name
  console.log($scope,name,$template);
})


/ 7	.

https://egghead.io/lessons/angularjs-components-and-containers

/ HIER HIER









/ Einde ANGULAR

/ ANGULAR EGGHEAD



/ Einde ANGULAR EGGHEAD

/ OPEN	

/home/eric/Devel/Web/angularjs
/home/eric/Devel/Web/angularjs/egghead.io
/home/eric/Devel/Web/angularjs/DevGuide/conceptual
/home/eric/Devel/Web/angularjs/tmp/angular-seed
[eric@walnut angular-seed]$ protractor e2e-tests/protractor.conf.js  
/home/eric/Devel/Web/angularjs/tmp/self
/home/eric/Devel/Web/angularjs/DevGuide/q
/home/eric/Devel/Web/angularjs/DevGuide/directive
/home/eric/Devel/Java/JBoss/quickstarts-luna/jboss-as-helloworld
/home/eric/Devel/Java/JBoss/jboss-developer-jboss-eap-quickstarts-332a018/helloworld-rs
/home/eric/Devel/Java/JBoss/jboss-wfk-quickstarts-2.6.0.Final/kitchensink-angularjs
/home/eric/Devel/Java/JBoss/jboss-developer-jboss-eap-quickstarts-332a018/greeter_my3
/home/eric/Devel/Java/JBoss/jboss-developer-jboss-eap-quickstarts-332a018
[standalone@localhost:9999 /]
/home/eric/Devel/Java/JBoss/jboss-as-7.1.1.Final
[eric@walnut JBoss]$ git clone  https://github.com/wildfly/wildfly.git

/home/eric/Devel/Java/JBoss/my/my-second-cdi-ctrl-dao-6
/home/eric/Devel/Java/JBoss/my
/home/eric/Devel/Java/JBoss/my/my-second-cdi-my-is-random
/home/eric/Devel/Java/Concurrency

/home/eric/Devel/Java/JBoss/jboss-developer-jboss-eap-quickstarts-332a018/greeter

/home/eric/Devel/Eclipse/jbdevstudio
/home/eric/Devel/Eclipse/JBossTools3
/home/eric/Devel/Eclipse/Android2
/home/eric/Devel/Java/H2
[eric@walnut H2]$ java -cp h2-1.4.178.jar org.h2.tools.Shell
[eric@walnut H2]java -cp h2-1.4.178.jar org.h2.tools.Server -tcp
TCP server running at tcp://192.168.123.170:9092 (only local connections)
[eric@walnut my-second-jsf]$ psql -U foo foo

/home/eric/Devel/Java/ejb-book/workbook/ex16_1
/home/eric/Devel/Java/ejb-book/workbook/ex11_4
/home/eric/Devel/Java/ejb-book/workbook/ex11_1
/home/eric/Devel/Java/seam-book/examples/helloworld
/home/eric/Devel/Java/hibernate-book2/caveatemptor-jpa-061211
/home/eric/Devel/Java/JBoss/my/my-second-jsf




/ Einde OPEN

/ WISKUNDE BOEKEN

jurgen neukirch, algebraic number theory, bhp 199, 
algebraic geometry and arithmetic curves, qing li, bjx 202
james w anderson, hyperbolic geometry, bta 199	,
/ Einde WISKUNDE BOEKEN

/ YEOMAN

/ See	,
https://github.com/intesso/connect-livereload

/ video	 AngularJS	,
Yeoman
Grunt
Bower
Karma

/ 7	.

/video
https://www.youtube.com/watch?v=iUQ1fvdO9GY







/ Einde YEOMAN

/ BUILD ANGULAR

/ See laptop_linux/LOG_2_dec_2012.txt over GIT SERVER	,

/ ga naar 
https://github.com/angular/angular.js

/ lees	,
http://docs.angularjs.org/misc/contribute

[eric@localhost angularjs]$ pwd
/home/eric/Devel/Web/angularjs
[eric@localhost angularjs]$ git clone https://github.com/angular/angular.js.git
[eric@localhost angularjs]$ cd angular.js/
[eric@localhost angular.js]$ git remote add upstream https://github.com/angular/angular.js.git
[eric@localhost angular.js]$   npm install | tee LOG_npm_install.txt

karma-script-launcher@0.1.0 node_modules/karma-script-launcher

karma-chrome-launcher@0.1.1 node_modules/karma-chrome-launcher

karma-firefox-launcher@0.1.2 node_modules/karma-firefox-launcher

grunt-merge-conflict@0.0.2 node_modules/grunt-merge-conflict

grunt-ddescribe-iit@0.0.3 node_modules/grunt-ddescribe-iit

grunt-jasmine-node@0.1.0 node_modules/grunt-jasmine-node

marked@0.2.9 node_modules/marked

karma-jasmine@0.1.4 node_modules/karma-jasmine

q@0.9.7 node_modules/q

grunt-contrib-copy@0.4.1 node_modules/grunt-contrib-copy

semver@2.1.0 node_modules/semver

rewire@1.1.3 node_modules/rewire

shelljs@0.2.6 node_modules/shelljs

browserstacktunnel-wrapper@1.1.1 node_modules/browserstacktunnel-wrapper

yaml-js@0.0.8 node_modules/yaml-js

karma-ng-scenario@0.1.0 node_modules/karma-ng-scenario

lodash@2.1.0 node_modules/lodash

grunt-shell@0.4.0 node_modules/grunt-shell
└── stripcolorcodes@0.1.0

karma-junit-reporter@0.2.1 node_modules/karma-junit-reporter
└── xmlbuilder@0.4.2

karma-browserstack-launcher@0.0.7 node_modules/karma-browserstack-launcher
└── browserstack@1.0.0

grunt-parallel@0.3.1 node_modules/grunt-parallel
├── lpad@0.1.0
└── q@0.8.12

grunt-contrib-clean@0.5.0 node_modules/grunt-contrib-clean
└── rimraf@2.2.5

qq@0.3.5 node_modules/qq
└── q@0.8.4

grunt-contrib-jshint@0.7.2 node_modules/grunt-contrib-jshint
└── jshint@2.3.0 (console-browserify@0.1.6, minimatch@0.2.12, underscore@1.4.4, shelljs@0.1.4, cli@0.4.5)

grunt@0.4.2 node_modules/grunt
├── which@1.0.5
├── dateformat@1.0.2-1.2.3
├── eventemitter2@0.4.13
├── getobject@0.1.0
├── colors@0.6.2
├── hooker@0.2.3
├── async@0.1.22
├── exit@0.1.2
├── lodash@0.9.2
├── coffee-script@1.3.3
├── underscore.string@2.2.1
├── iconv-lite@0.2.11
├── rimraf@2.0.3 (graceful-fs@1.1.14)
├── nopt@1.0.10 (abbrev@1.0.4)
├── findup-sync@0.1.2 (lodash@1.0.1)
├── minimatch@0.2.12 (sigmund@1.0.0, lru-cache@2.5.0)
├── glob@3.1.21 (inherits@1.0.0, graceful-fs@1.2.3)
└── js-yaml@2.0.5 (esprima@1.0.4, argparse@0.1.15)

grunt-contrib-connect@0.5.0 node_modules/grunt-contrib-connect
├── connect-livereload@0.2.0
├── open@0.0.4
└── connect@2.7.11 (fresh@0.1.0, cookie-signature@1.0.1, pause@0.0.1, qs@0.6.5, bytes@0.2.0, debug@0.7.4, buffer-crc32@0.2.1, cookie@0.0.5, formidable@1.0.14, send@0.1.1)

q-fs@0.1.36 node_modules/q-fs
├── q-io@0.0.18
├── fs-boot@0.0.9
└── q@0.8.12

jasmine-node@1.11.0 node_modules/jasmine-node
├── underscore@1.5.2
├── mkdirp@0.3.5
├── walkdir@0.0.7
├── coffee-script@1.6.3
├── requirejs@2.1.9
├── jasmine-reporters@0.2.1
├── jasmine-growl-reporter@0.0.2 (growl@1.7.0)
└── gaze@0.3.4 (minimatch@0.2.12, fileset@0.1.5)

grunt-contrib-compress@0.5.3 node_modules/grunt-contrib-compress
├── prettysize@0.0.3
├── lazystream@0.1.0 (readable-stream@1.0.17)
└── archiver@0.4.10 (iconv-lite@0.2.11, readable-stream@1.0.17)

promises-aplus-tests@1.3.2 node_modules/promises-aplus-tests
├── underscore@1.4.4
├── mocha@1.11.0 (debug@0.7.4, growl@1.7.0, commander@0.6.1, mkdirp@0.3.5, diff@1.0.2, ms@0.3.0, glob@3.2.1, jade@0.26.3)
└── sinon@1.7.3 (buster-format@0.5.6)

karma-sauce-launcher@0.1.5 node_modules/karma-sauce-launcher
├── saucelabs@0.1.1
├── sauce-connect-launcher@0.1.11 (async@0.2.9, adm-zip@0.4.3, lodash@1.3.1)
└── wd@0.1.5 (vargs@0.1.0, async@0.2.9, lodash@1.3.1, archiver@0.4.10, request@2.21.0)

bower@1.2.8 node_modules/bower
├── junk@0.2.2
├── stringify-object@0.1.7
├── abbrev@1.0.4
├── which@1.0.5
├── chmodr@0.1.0
├── osenv@0.0.3
├── graceful-fs@2.0.1
├── archy@0.0.2
├── rimraf@2.2.5
├── open@0.0.4
├── bower-logger@0.2.1
├── p-throttler@0.0.1
├── bower-endpoint-parser@0.2.1
├── lru-cache@2.3.1
├── nopt@2.1.2
├── retry@0.6.0
├── mkdirp@0.3.5
├── tmp@0.0.23
├── fstream@0.1.25 (inherits@2.0.1)
├── fstream-ignore@0.0.7 (inherits@2.0.1, minimatch@0.2.12)
├── glob@3.2.7 (inherits@2.0.1, minimatch@0.2.12)
├── mout@0.7.1
├── chalk@0.2.1 (has-color@0.1.1, ansi-styles@0.2.0)
├── request-progress@0.3.1 (throttleit@0.0.2)
├── bower-json@0.4.0 (deep-extend@0.2.6, intersect@0.0.3)
├── sudo-block@0.2.1 (chalk@0.1.1)
├── tar@0.1.19 (inherits@2.0.1, block-stream@0.0.7)
├── cardinal@0.4.2 (ansicolors@0.2.1, redeyed@0.4.2)
├── promptly@0.2.0 (read@1.0.5)
├── bower-config@0.5.0 (mout@0.6.0, optimist@0.6.0)
├── bower-registry-client@0.1.5 (request-replay@0.2.0, async@0.2.9, bower-config@0.4.5)
├── decompress-zip@0.0.3 (mkpath@0.1.0, touch@0.0.2, readable-stream@1.1.9, binary@0.3.0)
├── update-notifier@0.1.7 (configstore@0.1.6)
├── inquirer@0.3.5 (mute-stream@0.0.3, async@0.2.9, lodash@1.2.1, cli-color@0.2.3)
├── request@2.27.0 (json-stringify-safe@5.0.0, forever-agent@0.5.0, aws-sign@0.3.0, qs@0.6.6, tunnel-agent@0.3.0, oauth-sign@0.3.0, cookie-jar@0.3.0, node-uuid@1.4.1, mime@1.2.11, http-signature@0.10.0, form-data@0.1.2, hawk@1.0.0)
└── handlebars@1.0.12 (optimist@0.3.7, uglify-js@2.3.6)

karma-html2js-preprocessor@0.1.0 node_modules/karma-html2js-preprocessor

requirejs@2.1.9 node_modules/requirejs

karma-requirejs@0.2.0 node_modules/karma-requirejs

karma-coffee-preprocessor@0.1.1 node_modules/karma-coffee-preprocessor
└── coffee-script@1.6.3

karma-phantomjs-launcher@0.1.1 node_modules/karma-phantomjs-launcher
└── phantomjs@1.9.2-5 (which@1.0.5, rimraf@2.2.5, kew@0.1.7, ncp@0.4.2, mkdirp@0.3.5, adm-zip@0.2.1, npmconf@0.0.24)

karma@0.11.9 node_modules/karma
├── di@0.0.1
├── rimraf@2.1.4
├── colors@0.6.0-1
├── graceful-fs@1.2.3
├── mime@1.2.11
├── chokidar@0.7.1
├── minimatch@0.2.12 (sigmund@1.0.0, lru-cache@2.5.0)
├── glob@3.1.21 (inherits@1.0.0)
├── coffee-script@1.6.3
├── optimist@0.3.7 (wordwrap@0.0.2)
├── lodash@1.1.1
├── useragent@2.0.7 (lru-cache@2.2.4)
├── connect@2.8.8 (methods@0.0.1, uid2@0.0.2, cookie-signature@1.0.1, pause@0.0.1, fresh@0.2.0, qs@0.6.5, debug@0.7.4, bytes@0.2.0, buffer-crc32@0.2.1, cookie@0.1.0, send@0.1.4, formidable@1.0.14)
├── log4js@0.6.9 (semver@1.1.4, async@0.1.15, readable-stream@1.0.17)
├── http-proxy@0.10.3 (pkginfo@0.2.3, utile@0.1.7)
└── socket.io@0.9.16 (base64id@0.1.0, policyfile@0.0.4, redis@0.7.3, socket.io-client@0.9.16)

$ npm -g list
/we zien bower erbij	,

[eric@localhost angular.js]$ bower install | tee LOG_bower.txt

[eric@localhost angular.js]$  bower list
bower check-new     Checking for new versions of the project dependencies..
AngularJS /home/eric/Devel/Web/angularjs/angular.js
├── bootstrap#e-tag:51ba48cd2
├── closure-compiler
├── components-font-awesome#3.1.0 (latest is 4.0.3)
├── google-code-prettify#1.0.0 (latest is 1.0.1)
├── jquery#1.10.2 (latest is 2.0.3)
├── lunr.js#0.4.0 (latest is 0.4.3)
└── ng-closure-runner#e-tag:e2dabb7f2
[eric@localhost angular.js]$ ls bower_components/
bootstrap         components-font-awesome  jquery   ng-closure-runner
closure-compiler  google-code-prettify     lunr.js

[eric@localhost angular.js]$ cat bower.json
{
  "name": "AngularJS",
  "devDependencies": {
    "jquery": "1.10.2",
    "lunr.js": "0.4.0",
    "google-code-prettify": "1.0.0",
    "components-font-awesome": "3.1.0",
    "bootstrap": "https://raw.github.com/twbs/bootstrap/v2.0.2/docs/assets/bootstrap.zip",
    "closure-compiler": "https://closure-compiler.googlecode.com/files/compiler-20130603.zip",
    "ng-closure-runner": "https://raw.github.com/angular/ng-closure-runner/v0.2.2/assets/ng-closure-runner.zip"
  }
}

[eric@localhost angular.js]$ grunt package | tee LOG_grunt_package.txt

$ grunt webserver
http://localhost:8000/
/ OK

[eric@localhost angular.js]$  grunt test:unit
/ OK
/ we zien steeds chrome in een apart window started	,

[eric@localhost angular.js]$  grunt test:e2e







/ Einde BUILD ANGULAR

/ DOCS ANGULAR	

/  7	.

/ lees	,
http://docs.angularjs.org/guide/dev_guide.services.injecting_controllers

[eric@walnut self]$ pwd
/home/eric/Devel/Web/angularjs/self

/ De html is steeds hetzelfde	,

[eric@walnut self]$ vi inj/index.html 

<!doctype html>
<html ng-app="MyServiceModule">
  <head>
    <script src="/jquery/jquery-1.9.1.js"></script>
    <script src="/angularjs/angular.js/build/angular.js"></script>
    <script src="script.js"></script>
  </head>
  <body>
    <div ng-controller="myController">
      <p>Let's try this simple notify service, injected into the controller...</p>
      <input ng-init="message='test'" ng-model="message" >
      <button ng-click="callNotify(message);">NOTIFY</button>
      <p>(you have to click 3 times to see an alert)</p>
    </div>
  </body>
</html>


/ we hebben in inj de 1ste versie,  en inj1	,inj2
/ ze kunnen alle 3	,

[eric@walnut self]$ vi inj/script.js 

angular.
 module('MyServiceModule', []).
 factory('notify', ['$window', function(win) {
    var msgs = [];
    return function(msg) {
      msgs.push(msg);
      if (msgs.length == 3) {
        win.alert(msgs.join("\n"));
        msgs = [];
      }
    };
  }]);

function myController(scope, notifyService) {
  scope.callNotify = function(msg) {
    notifyService(msg);
  };
}
 myController.$inject = ['$scope','notify']

$ vi inj1/script.js

angular.
 module('MyServiceModule', []).
 factory('notify', ['$window', function(win) {
    var msgs = [];
    return function(msg) {
      msgs.push(msg);
      if (msgs.length == 3) {
        win.alert(msgs.join("\n"));
        msgs = [];
      }
    };
  }]).
  controller("myController",["$scope","notify",function(scope, notifyService) {
    scope.callNotify = function(msg) {
      notifyService(msg);
    }
  }])

$ vi inj2/script.js

angular.
 module('MyServiceModule', []).
 factory('notify', function($window) {
    var msgs = [];
    return function(msg) {
      msgs.push(msg);
      if (msgs.length == 3) {
        $window.alert(msgs.join("\n"));
        msgs = [];
      }
    };
  });

function myController($scope, notify) {
  $scope.callNotify = function(msg) {
    notify(msg);
  };
}



/ Einde DOCS ANGULAR	

/ VIDEOS ANGULAR

/ video 40, 41

/ we maken in 40/script.js uit video 40,41 bij elkaar	,

$ vi index.html

<div ng-app="app">
  <div ng-controller="ctrl">
  <h1>{{title}}</h1>
  </div>
</div>


app.config(function($provide){
  $provide.provider("game",function (){
    return {
      type:function(val){
        type=val
      },
      $get:function(){
        return{
          title:type+"craft"
        }
      }
    }
  })
})
app.config(function(gameProvider){
  gameProvider.type("War")
})
angular.injector(["app"]).invoke(function(game){
  console.log("on console: "+game.title)
})
app.controller("ctrl",function($scope,game){
    $scope.title=game.title
})

/ we zien  Warcraft in HTML en we zien de console log	,

/ we moeten de app.controller achter de angular.injector set, 
/ anders	err in de angular.injector line	, 
Uncaught Error: [$injector:modulerr] Failed to instantiate module app due to:
Error: [$injector:unpr] Unknown provider: $controllerProvider
http://errors.angularjs.org/1.2.5/$injector/unpr?p0=%24controllerProvider
    at http://web/angularjs/angular.js/build/angular.js:78:12
    at http://web/angularjs/angular.js/build/angular.js:3519:19
    at Object.getService [as get] (http://web/angularjs/angular.js/build/angular.js:3646:39)
    at http://web/angularjs/angular.js/build/angular.js:3600:45
    at Array.forEach (native)
    at forEach (http://web/angularjs/angular.js/build/angular.js:300:11)
    at loadModules (http://web/angularjs/angular.js/build/angular.js:3589:5)
    at Object.createInjector [as injector] (http://web/angularjs/angular.js/build/angular.js:3529:11)
    at http://web/angularjs/egghead.io/40/script.js:67:9
http://errors.angularjs.org/1.2.5/$injector/modulerr?p0=app&p1=Error%3A%20%…20at%20http%3A%2F%2Fweb%2Fangularjs%2Fegghead.io%2F40%2Fscript.js%3A67%3A9 angular.js:78
/ TODO

/ Wat ook kan 	,

app.config(function($provide){
  $provide.provider("game",function (){
    return {
      type:function(val){
        type=val
      },
      $get:function(){
        return{
          title:type+"craft"
        }
      }
    }
  })
})
app.config(function(gameProvider){
  gameProvider.type("War")
})

//of	,
/*
angular.injector(["app"]).invoke(function(game){
  console.log("on console: "+game.title)
})
app.controller("ctrl",function($scope,game){
    $scope.title=game.title
})
*/
// of,
app.controller("ctrl",function($scope,$injector){
  $injector.invoke(function(game){
    $scope.title=game.title
    console.log("on console: "+game.title)
  })
})



/ Einde VIDEOS ANGULAR

/ ANGULAR BACKBONE EMBER

/ lees	 over dirty checking	,
http://blog.bguiz.com/post/57373805814/accessors-vs-dirty-checking-in-javascript-frameworks
/ link to video	,
https://www.youtube.com/watch?v=VO--VXFJnmE

/ Daar over Polymer's MDV	,
/ lees	,
https://groups.google.com/forum/#!msg/polymer-dev/4RSYaKmbtEk/uYnY3900wpIJ

/ lees	,
http://www.polymer-project.org/



/ Einde ANGULAR BACKBONE EMBER

/ DEBUG ANGULAR

/ we hebben rm b's	,
5167
3539
3548
5167

1871


/ 7	.

  function loadModules(modulesToLoad){
    forEach(modulesToLoad, function(module) {
module="ngLocale"
           var invokeArgs = invokeQueue[i],
                provider = providerInjector.get(invokeArgs[0]);
/ return $cache.$provide	,
            provider[invokeArgs[1]].apply(provider, invokeArgs[2]);
/ Deze zal $locale:new Constructor, met __proto__===$LocaleProvider.prototype write in providerCache, naast $injector, $provide	,
/ Dit is $provide.provider als in video 40	,
app.config(function($provide){
  $provide.provider("game",function (){
    return {
      type:function(val){
        type=val
      },
      $get:function(){
        return{
          title:type+"craft"
        }
      }
    }
  })
})
/ hier is de provider "game",function(){...},	 nu "$locale", function $LocaleProvider(){...} 

invokeArgs: Array[3]
0: "$provide"
1: "provider"
2: Arguments[2]
	0: "$locale"
	1: function $LocaleProvider(){

providerCache
$injector: Object
	annotate: function annotate(fn) {
	get: function getService(serviceName) {
	has: function (name) {
	instantiate: function instantiate(Type, locals) {
	invoke: function invoke(fn, self, locals){
	__proto__: Object
$provide: Object
	constant: function (key, value) {
	decorator: function decorator(serviceName, decorFn) {
	factory: function (key, value) {
	provider: function (key, value) {
	service: function (key, value) {
	value: function (key, value) {
	__proto__: Object
	__proto__: Object

provider===providerCache.$provide
true

/c 
/ de .provider fct van $provide	, ($provide is van de providerCache, heeft ook $injector)	,
  function provider(name, provider_) {
      provider_ = providerInjector.instantiate(provider_);
provider_=function $LocaleProvider
/c
/ instantiate is ook van de $injector, net als get, invoke	,
    function instantiate(Type, locals) {
      var Constructor = function() {},
      Constructor.prototype = (isArray(Type) ? Type[Type.length - 1] : Type).prototype;
/ Dus function $LocaleProvider's prototype	,

      instance = new Constructor();
      returnedValue = invoke(Type, instance, locals);
/c
    function invoke(fn, self, locals){
      var args = [],
          $inject = annotate(fn),
[]
      return fn.apply(self, args);
/c
function $LocaleProvider(){
->  this.$get = function() {

/t
      returnedValue = invoke(Type, instance, locals);
returnedValue===undefined
true
/ maar het is instance={$get, ...}

/t
 function provider(name, provider_) {
    assertNotHasOwnProperty(name, 'service');
    if (isFunction(provider_) || isArray(provider_)) {
      provider_ = providerInjector.instantiate(provider_);
/ D
provider_: Constructor
$get: function () {
__proto__: $LocaleProvider

    return providerCache[name + providerSuffix] = provider_;
providerCache: Object
$injector: Object
$localeProvider: Constructor
$provide: Object
__proto__: Object

/t
function loadModules(modulesToLoad){
    forEach(modulesToLoad, function(module) {
...
          for(invokeQueue = moduleFn._invokeQueue, i = 0, ii = invokeQueue.length; i < ii; i++) {
/ moduleFn.name="ng", was net de afh "ngLocale"	,

            var invokeArgs = invokeQueue[i],
                provider = providerInjector.get(invokeArgs[0]);
invokeArgs: Array[3]
0: "$injector"
1: "invoke"
2: Arguments[1]
0: Array[2]
	0: "$provide"
	1: function ngModule($provide) {

/ nu van providerCache niet $provide zoals net, maar $injector	,
/ zonet $provide.provider	, nu $injector.invoke	,

            provider[invokeArgs[1]].apply(provider, invokeArgs[2]);
/c
    function invoke(fn, self, locals){
      var args = [],
          $inject = annotate(fn),
["$provide"]
      for(i = 0, length = $inject.length; i < length; i++) {
        key = $inject[i];
$provide
        args.push(
          locals && locals.hasOwnProperty(key)
          ? locals[key]
          : getService(key)
/ $cache.$provide, net als boven	,
/ Dus als we ["$provide",function(_){...}] wat we altijd doen	, dat lookup hij met key "$provide" in providerCache , dat is die provider met factory, provider fct	, en dat wordt inderdaad het arg, niet de _	, in 	,

      return fn.apply(self, args);
fn=function ngModule
self=undefined
args=$provide provider uit providerCache
this=$injector uit providerCache, we zijn in $injector.invoke	,
/c
  angularModule('ng', ['ngLocale'], ['$provide',
    function ngModule($provide) {
      // $$sanitizeUriProvider needs to be before $compileProvider as it is used by it.
->      $provide.provider({
        $$sanitizeUri: $$SanitizeUriProvider
      });
      $provide.provider('$compile', $CompileProvider).
        directive({
            a: htmlAnchorDirective, 
...
      $provide.provider({
        $controller: $ControllerProvider,
...

/t
 function loadModules(modulesToLoad){
    var runBlocks = [], moduleFn, invokeQueue, i, ii;
    forEach(modulesToLoad, function(module) {
/ module="ng"
/D
/ module="$provide", function
        } else if (isArray(module)) {
/ JA
            runBlocks.push(providerInjector.invoke(module));
/c
    modules.unshift(['$provide', function($provide) {
->      $provide.value('$rootElement', element);
    }]);
/ we hebben zojuist WH set	, 
$rootElementProvider: Object
/ in	,

providerCache: Object
$$sanitizeUriProvider: Constructor
$anchorScrollProvider: Constructor
$animateProvider: Constructor
$browserProvider: Constructor
$cacheFactoryProvider: Constructor
$compileProvider: Constructor
$controllerProvider: Constructor
$documentProvider: Constructor
$exceptionHandlerProvider: Constructor
$filterProvider: Constructor
$httpBackendProvider: Constructor
$httpProvider: Constructor
$injector: Object																/ instanceCache heeft ook	, 
$interpolateProvider: Constructor
$intervalProvider: Constructor
$localeProvider: Constructor
$locationProvider: Constructor
$logProvider: Constructor
$parseProvider: Constructor
$provide: Object
$qProvider: Constructor
$rootElementProvider: Object
$rootScopeProvider: Constructor
$sceDelegateProvider: Constructor
$sceProvider: Constructor
$snifferProvider: Constructor
$templateCacheProvider: Constructor
$timeoutProvider: Constructor
$windowProvider: Constructor
aDirectiveProvider: Object
currencyFilterProvider: Object
dateFilterProvider: Object
filterFilterProvider: Object
formDirectiveProvider: Object
inputDirectiveProvider: Object
jsonFilterProvider: Object
limitToFilterProvider: Object
lowercaseFilterProvider: Object
ngBindDirectiveProvider: Object
ngBindHtmlDirectiveProvider: Object
ngBindTemplateDirectiveProvider: Object
ngBlurDirectiveProvider: Object
ngChangeDirectiveProvider: Object
ngCheckedDirectiveProvider: Object
ngClassDirectiveProvider: Object
ngClassEvenDirectiveProvider: Object
ngClassOddDirectiveProvider: Object
ngClickDirectiveProvider: Object
ngCloakDirectiveProvider: Object
ngControllerDirectiveProvider: Object
ngCopyDirectiveProvider: Object
ngCutDirectiveProvider: Object
ngDblclickDirectiveProvider: Object
ngDisabledDirectiveProvider: Object
ngFocusDirectiveProvider: Object
ngFormDirectiveProvider: Object
ngHideDirectiveProvider: Object
ngHrefDirectiveProvider: Object
ngIfDirectiveProvider: Object
ngIncludeDirectiveProvider: Object
ngInitDirectiveProvider: Object
ngKeydownDirectiveProvider: Object
ngKeypressDirectiveProvider: Object
ngKeyupDirectiveProvider: Object
ngListDirectiveProvider: Object
ngModelDirectiveProvider: Object
ngMousedownDirectiveProvider: Object
ngMouseenterDirectiveProvider: Object
ngMouseleaveDirectiveProvider: Object
ngMousemoveDirectiveProvider: Object
ngMouseoutDirectiveProvider: Object
ngMouseoverDirectiveProvider: Object
ngMouseupDirectiveProvider: Object
ngNonBindableDirectiveProvider: Object
ngOpenDirectiveProvider: Object
ngOptionsDirectiveProvider: Object
ngPasteDirectiveProvider: Object
ngPluralizeDirectiveProvider: Object
ngReadonlyDirectiveProvider: Object
ngRepeatDirectiveProvider: Object
ngRequiredDirectiveProvider: Object
ngSelectedDirectiveProvider: Object
ngShowDirectiveProvider: Object
ngSrcDirectiveProvider: Object
ngSrcsetDirectiveProvider: Object
ngStyleDirectiveProvider: Object
ngSubmitDirectiveProvider: Object
ngSwitchDefaultDirectiveProvider: Object
ngSwitchDirectiveProvider: Object
ngSwitchWhenDirectiveProvider: Object
ngTranscludeDirectiveProvider: Object
ngValueDirectiveProvider: Object
numberFilterProvider: Object
optionDirectiveProvider: Object
orderByFilterProvider: Object
requiredDirectiveProvider: Object
scriptDirectiveProvider: Object
selectDirectiveProvider: Object
styleDirectiveProvider: Object
textareaDirectiveProvider: Object
uppercaseFilterProvider: Object
__proto__: Object


/ volgende	,
 function loadModules(modulesToLoad){
    forEach(modulesToLoad, function(module) {
module="app"
/ geen invokeQueue	,

/t
function createInjector(modulesToLoad) {
  return instanceInjector;
instanceCache: Object
	$injector: Object
	__proto__: Object

/t
function bootstrap(element, modules) {
    var injector = createInjector(modules);
/ D
    injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate',
       function(scope, element, compile, injector, animate) {
        scope.$apply(function() {
          element.data('$injector', injector);
          compile(element)(scope);
        });
      }]
    );
/ INJECTION
/ Hier zien we injection	, de annots worden resolved, en worden de args vna de function	, 
/ Dus de injection zien we bij injector.invoke	, de function wordt invoked, maar alvorens worden eerst de deps, args, annots resolved en injected	,

/ injector is de instanceCache.$injector, en de instanceCache heeft niets	, dus hij gaat eerst de annotations resolve, maar er is niets	,

function getService(serviceName) {
      if (cache.hasOwnProperty(serviceName)) {
/ NEE
        return cache[serviceName];
/ NIET
      } else {
        try {
          path.unshift(serviceName);
["$rootScope"]
          cache[serviceName] = INSTANTIATING;
          return cache[serviceName] = factory(serviceName);
/s
function createInjector(modulesToLoad) {
     instanceInjector = (instanceCache.$injector =
          createInternalInjector(instanceCache, function(servicename) {
->            var provider = providerInjector.get(servicename + providerSuffix);
$rootScopeProvider is er, in providerCache	,
            return instanceInjector.invoke(provider.$get, provider);
/ nu gaan we wat er in de provider.$get staat doen, 
/s
   function invoke(fn, self, locals){
          $inject = annotate(fn),
$inject: Array[4]
0: "$injector"
1: "$exceptionHandler"
2: "$parse"
3: "$browser"
      for(i = 0, length = $inject.length; i < length; i++) {
        key = $inject[i];
        args.push(
          locals && locals.hasOwnProperty(key)
          ? locals[key]
          : getService(key)

/ we zien hieronder dat hij in providerCache eerst "$exceptionHandler" probeert, is er niet, en daarna $exceptionHandlerProvider, die er wel is	,

/s
 function createInternalInjector(cache, factory) {
    function getService(serviceName) {
->    if (cache.hasOwnProperty(serviceName)) {
serviceName="$exceptionHandler"
/ NEE
        return cache[serviceName];
      } else {
 /JA
          path.unshift(serviceName);
          cache[serviceName] = INSTANTIATING;
          return cache[serviceName] = factory(serviceName);
/s
function createInjector(modulesToLoad) {
      instanceInjector = (instanceCache.$injector =
          createInternalInjector(instanceCache, function(servicename) {
      ->      var provider = providerInjector.get(servicename + providerSuffix);

  function createInternalInjector(cache, factory) {
    function getService(serviceName) {
      if (cache.hasOwnProperty(serviceName)) {
serviceName=$exceptionHandlerProvider
/ JA
        return cache[serviceName];

/ Daarna	,
function createInjector(modulesToLoad) {
      instanceInjector = (instanceCache.$injector =
          createInternalInjector(instanceCache, function(servicename) {
            var provider = providerInjector.get(servicename + providerSuffix);
$exceptionHandlerProvider
/ D
            return instanceInjector.invoke(provider.$get, provider);
provider.$get={
"$log"
function($log){...}
/ injection dus	,

/ later, 
           var provider = providerInjector.get(servicename + providerSuffix);
/ $windowProvider	,
            return instanceInjector.invoke(provider.$get, provider);
/c
      return fn.apply(self, args);
/c
function valueFn(value) {
	return function() {
		return value;
	};
}

/t
         return cache[serviceName] = factory(serviceName);
        } finally {
          path.shift();
cache: Object
$exceptionHandler: Object		/ leeg obj	,
$injector: Object
$log: Object								/ leeg obj	,
$rootScope: Object					/ leeg obj	,
$window: Window
/ we zien de van eerdere TODO 

/ dan	,
           var provider = providerInjector.get(servicename + providerSuffix);
$logProvider
            return instanceInjector.invoke(provider.$get, provider);
provider.$get=
Array[2]
0: "$window"
1: function ($window){
 
/ dan	,
        return cache[serviceName] = factory(serviceName);
        } finally {
          path.shift();

instanceCache: Object
$exceptionHandler: Object
$injector: Object
$log: Object							/ niet leeg meer, is resolved	,
$rootScope: Object
$window: Window

/ later, 
/ we komen in 
    Scope.prototype = {
->      constructor: Scope,
    var $rootScope = new Scope();
/c
    function Scope() {
      this.$id = nextUid();




/ 7	.
 
name="input"	,

        $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
          function($injector, $exceptionHandler) {
            var directives = [];
            forEach(hasDirectives[name], function(directiveFactory, index) {
              try {
                var directive = $injector.invoke(directiveFactory);
                if (isFunction(directive)) {
                  directive = { compile: valueFn(directive) };
                } else if (!directive.compile && directive.link) {
->                  directive.compile = valueFn(directive.link);
                }
                directive.priority = directive.priority || 0;


function valueFn(value) {return function() {return value;};}

/ bij -> wordt de value directive.link de de outer fct set in de scope van de inner	, en directive.compile is de inner fct, die in z'n closure scope de directive.link fct heeft	,

/ 7	.

/ attr ngModel,


        

function $CompileProvider($provide, $$sanitizeUriProvider) {
  this.directive = function registerDirective(name, directiveFactory) {
    assertNotHasOwnProperty(name, 'directive');
    if (isString(name)) {
      assertArg(directiveFactory, 'directiveFactory');
      if (!hasDirectives.hasOwnProperty(name)) {
        hasDirectives[name] = [];
->        $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
          function($injector, $exceptionHandler) {
            var directives = [];
 ->           forEach(hasDirectives[name], function(directiveFactory, index) {
              try {
  ->              var directive = $injector.invoke(directiveFactory);
...
                } else if (!directive.compile && directive.link) {
                  directive.compile = valueFn(directive.link);


name="ngModel"
var ngModelDirective = function() {	/ 166665
  return {
    require: ['ngModel', '^?form'],
    controller: NgModelController,
    link: function(scope, element, attr, ctrls) {
...

/ directive wordt dit obj die hier wordt return	,

/ directive.compile wordt weer die inner fct	, met de link fct hierboven als value in zijn closure scope	, 
function valueFn(value) {return function() {return value;};}




/ Einde DEBUG ANGULAR

/ DEBUG ANGULAR

/ 7. 	$provider, $injector def 	,

  3502 function createInjector(modulesToLoad) {
   3503   var INSTANTIATING = {},
   3504       providerSuffix = 'Provider',
   3505       path = [],
   3506       loadedModules = new HashMap(),
   3507       providerCache = {
   3508         $provide: {
   3509             provider: supportObject(provider),
   3510             factory: supportObject(factory),
   3511             service: supportObject(service),
   3512             value: supportObject(value),
   3513             constant: supportObject(constant),
   3514             decorator: decorator
   3515           }
   3516       },
   3517       providerInjector = (providerCache.$injector =
   3518           createInternalInjector(providerCache, function() {
   3519             throw $injectorMinErr('unpr', "Unknown provider: {0}", path.        join(' <- '));


  3521       instanceCache = {},
   3522       instanceInjector = (instanceCache.$injector =
   3523           createInternalInjector(instanceCache, function(servicename) {
   3524             var provider = providerInjector.get(servicename + providerSu        ffix);
   3525             return instanceInjector.invoke(provider.$get, provider);
   3526           }));
 
/ De fcts provider, factory, ...  staan eronder,	

  3547   function provider(name, provider_) {
   3548     assertNotHasOwnProperty(name, 'service');

/ 7	.

$ vi 40/script.js

var app=angular.module("app",[])

app.factory("game",function(){
  return {
    title:"Starcraft"
  }
})
app.controller("ctrl",function($scope,game){
    $scope.title=game.title
})

/ Dit geeft in de invokeQueue van de app module 2 entries	,

invokeQueue: Array[2]
0: Array[3]
	0: "$provide"					
	1: "factory"
	2: Arguments[2]
		0: "game"
		1: function (){
1: Array[3]
	0: "$controllerProvider"
	1: "register"
	2: Arguments[2]
		0: "ctrl"
		1: function ($scope,game){

/ 1ste: in providerCache is de $provide service, is een obj met invoke fct bijv; $provide.factory maakt in dezelfde providerCache een entry	,
gameProvider:{
	$get:function(){
		  return {
    		title:"Starcraft"
  		}
	}
}
/ providerCache is in de scope van de fct	,
function createInjector(modulesToLoad) {

/ 2de. in de providerCache is $controllerProvider service, die de .register fct heeft	, 
  this.register = function(name, constructor) {
      controllers[name] = constructor;
name="ctrl"
constructor=function($scope,game){
    $scope.title=game.title
}

/ 7	.

578 veranderen	,

/7	. 

/ we debug http://web/angularjs/egghead.io/3/	, en we geven r in 1ste text input	,
/ we komen in	,
Lexer.readIdent.token.fn.extend.assign (angular.js:9557)
NgModelController.$setViewValue (angular.js:16585)
(anonymous function) (angular.js:15882)
$get.Scope.$eval (angular.js:11726)
$get.Scope.$apply (angular.js:11826)
listener (angular.js:15881)
jQuery.event.dispatch (jquery-1.9.1.js:3074)
jQuery.event.add.elemData.handle (jquery-1.9.1.js:2750)

/ calls	,
function setter(obj, path, setValue, fullExp, options) {
obj: Scope
path: "data.message"
  var element = path.split('.'), key;
  for (var i = 0; element.length > 1; i++) {
/ 1 for loop	, want hij process tot de laatste	, dus tot en met de laatste .	,
    key = ensureSafeMemberName(element.shift(), fullExp);
"data
    var propertyObj = obj[key];
undefined
   if (!propertyObj) {
      propertyObj = {};
      obj[key] = propertyObj;
    obj = propertyObj;
/ Is niet meer de scope	, maar scope's data	,
	}
  key = ensureSafeMemberName(element.shift(), fullExp);
"element"
  obj[key] = setValue;
"r"
  return setValue;

/t
NgModelController.$setViewValue (VM1049 angular.js:16586)
      ngModelSet($scope, value);
/ $scope.data.message="r"	,
      forEach(this.$viewChangeListeners, function(listener) {
/ Geen	,
        try {
          listener();

/t
     $apply: function(expr) {
          return this.$eval(expr);
/D
        } finally {
            $rootScope.$digest();


/ 7	.

/ we zijn in egghead's 3/	,

/ via	,
setter (angular.js:10085)

Lexer.readIdent.token.fn.extend.assign (angular.js:9557)
        assign: function(self, value) {
          return setter(self, ident, value, parser.text, parser.options);

NgModelController.$setViewValue (angular.js:16585)
      ngModelSet($scope, value);

(anonymous function) (angular.js:15882)
    scope.$apply(function() {
        ctrl.$setViewValue(value);

$get.Scope.$eval (angular.js:11726)
$get.Scope.$apply (angular.js:11826)
listener (angular.js:15881)
jQuery.event.dispatch (jquery-1.9.1.js:3074)
jQuery.event.add.elemData.handle (jquery-1.9.1.js:2750)


function setter(obj, path, setValue, fullExp, options) {
/ 1
  var element = path.split('.'), key;
  for (var i = 0; element.length > 1; i++) {
    key = ensureSafeMemberName(element.shift(), fullExp);
/ 2
    var propertyObj = obj[key];
/ 3
    if (!propertyObj) {
      propertyObj = {};
      obj[key] = propertyObj;
    }
    obj = propertyObj;
  }
  key = ensureSafeMemberName(element.shift(), fullExp);
/4
  obj[key] = setValue;
5
  return setValue;
}

/ 13	.

/ we hebben in alle scopes ng-model="data.message"

/ we geven in bovenste text field r	,
/ 1 obj=scope=root scope 
/ 2 key="data"	,
/ 3	. propertyObj=undefined, dus wordt eronder create, dus scope.data={}	, en obj=deze {}	,
/ er is geen volgende loop, want we hebben maar 1 punt	,
/ 4. key="message", en {} -> {message:"r"} wordt set	,	

/ vervolgens geven we in 2de text field s, dus daarin staat nu "rs"	,
/ 1 obj=scope=child scope 
/ 2 key="data"	,
/ 3	. propertyObj={message:"r"} uit prototyped root scope	,
/ er is geen volgende loop, want we hebben maar 1 punt	,
/ 4. key="message", en {message:"r"} -> {message:"rs"} wordt update,	
/ dan weer $digest vanaf de root scope, want dat is altijd, en wordt de view update, dus de text field , en de text {{data.message}} uit de root scope	, en daarna ook de child scopes	,

/ 13	. 

/ we hebben in alle scopes ng-model="message"

/ we geven in bovenste text field r	,
/ 1 obj=scope=root scope 
/ 2 key="message"	,
/ 3	. er is geen for loop	, 
/ 4. key="message", en root scope.message="r" wordt set 

/ vervolgens geven we in 2de text field s, dus daarin staat nu "rs"	,
/ 1 obj=scope=child scope 
/ 2 key="message"	,
/ 3 er is geen loop, want we hebben geen punt	,
/ 4. key="message", en er is geen child scope.message, maar wel in root scope	, nu wordt deze laatste shadow door in child scope.message="rs"  set
/ dan weer $digest vanaf de root scope, want dat is altijd, en wordt de view update, dus de text field , en de text {{message}} uit elk van de scopes parsed	,

/ 7	.

$ vi 1/index.html

<div ng-app>
  <h1>{{2+3}}</h1>
</div>

/ OK

/ 7	.

function angularInit(element, bootstrap) {
  var elements = [element],
      appElement,
      module,
      names = ['ng:app', 'ng-app', 'x-ng-app', 'data-ng-app'],

  function append(element) {
    element && elements.push(element);
  }

  forEach(names, function(name) {
    names[name] = true;
    append(document.getElementById(name));
    name = name.replace(':', '\\:');
    if (element.querySelectorAll) {
      forEach(element.querySelectorAll('.' + name), append);
      forEach(element.querySelectorAll('.' + name + '\\:'), append);
      forEach(element.querySelectorAll('[' + name + ']'), append);
    }
  });

/ in elements is doc en de div waar ng-app een attr is	, 
/ dan	,

  forEach(elements, function(element) {
    if (!appElement) {
/ JA
...
      } else {
        forEach(element.attributes, function(attr) {
          if (!appElement && names[attr.name]) {
            appElement = element;
            module = attr.value;
          }

/ appElement=de div met de ng-app attr	, module="" bij ons	,

  if (appElement) {
/ JA
    bootstrap(appElement, module ? [module] : []);

/ als er geen ng-app attr is,	 gebeurt er dus niets	,

/ 7	.

/ als ng-model="message", shadows een child scope's message altijd die van de parent,
/ als ng-model="data.message", shadows een child scope's data obj alleen die van de parent, als de data obj van de parent er nog niet was	, als het data obj van de parent er al is, pakt hij die	, 

/ dus in een scope moet altijd data.message staan, want dan write  in parent's scope.data	, dus is data op 1 plaats	, 
/ het is wel zo dat data er moet zijn in de parent scope	, anders maakt de child scope zelf een data (shadows die van de scope)	, en schrijft daarin message	,

/ scope is de model	,
/ lees	,
http://docs.angularjs.org/guide/scope
/ dat zien we ook: als we 
  <div ng-controller="ctrl">
    <input type="text" ng-model="data.message">
/ dan staat data in de scope , dus scope.data 	, en = root scope.data 
/ dus de directive heet ng-model, en data komt in scope	, dus dat is de model	,


_o={}
Object {}
_p={}
Object {}
_o.__proto__=_p
Object {}

_p.name="eric"
"eric"
_o.name
"eric"

/ als _p.obj er is, en _o.obj={} is NIET, dan is _o.obj die van _p, en met _o.obj.age=13 write je _p.obj	, 
_p.obj={}
Object {}
_p.obj.name="saskia"
"saskia"
_o.obj
Object {name: "saskia"}
_o.obj.age=13
13
_p.obj.age
13

/ shadow een string	,
_p.name="joyce"
"joyce"
_o.name
"joyce"
_o.name="angela"
"angela"
_o.name
"angela"
_p.name
"joyce"

/ shadow een object	,
 _o.obj={}
Object {}
_p.obj
Object {name: "saskia", age: 13}
_o.obj.name="angela"
"angela"
_o.obj
Object {name: "angela"}
_p.obj
Object {name: "saskia", age: 13}

/7	. 

/ html , css -> compiled to DOM , een browser ding (een tree van objs), en dit is wat ziet	,  
/ DOM = view	

/ 7	.

/ als we een char geven in text input,	 dan wordt scope=model write	, 
/ dan $digest call op de root scope=root model	,
/ de scope=model heeft $watch fcts	, die update de view=DOM	via directives, zoals  {{data.message}} (data is in de scope	, 

/ 7	. 

/ het gaat zo	,

/ in 1/ we geven g in de text input	, waar al ef in stond	,

 var listener = function() {
    var value = element.val();
/ haalt value uit de DOM=view	,

    if (ctrl.$viewValue !== value) {
/ JA
      scope.$apply(function() {
        ctrl.$setViewValue(value);
/ $apply calls straks ook in z'n finally $rootScope.digest	,

/ de ctrl heeft een view value (value uit de DOM) en een model value en die gaat naar de model	,


 this.$setViewValue = function(value) {
    this.$viewValue = value;
...
    if (this.$modelValue !== value) {
      this.$modelValue = value;
      ngModelSet($scope, value);
/ s
function setter(obj, path, setValue, fullExp, options) {
  var element = path.split('.'), key;
  for (var i = 0; element.length > 1; i++) {
    key = ensureSafeMemberName(element.shift(), fullExp);
    var propertyObj = obj[key];
    if (!propertyObj) {
      propertyObj = {};
      obj[key] = propertyObj;
    }
...
  key = ensureSafeMemberName(element.shift(), fullExp);
  obj[key] = setValue;
  return setValue;

/t
     $apply: function(expr) {
          return this.$eval(expr);
/ D
            $rootScope.$digest();
/ s
/ de root scope heeft watchers
            if ((watchers = current.$$watchers)) {
                    if ((value = watch.get(current)) !== (last = watch.last) &&
/s
  $scope.$watch(function ngModelWatch() {
    var value = ngModelGet($scope);
   // if scope model value and ngModel value are out of sync
/ TODO
    if (ctrl.$modelValue !== value) {
/ NEE	, want we hebben de root scope's text input juist de g gegeven, dus hij is triviaal OK al	,
...
        ctrl.$viewValue = value;
        ctrl.$render();

/ volgende,	
                    if ((value = watch.get(current)) !== (last = watch.last) &&
/ JA, "efg"	,
                      watch.fn(value, ((last === initWatchVal) ? value : last), current);
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
/ node is text node, waar eerst {{data.element}} in strond, nu "efg"	,

/ 7	.

$ vi 1/index.html

<div ng-app>
  <input type="text" ng-model="data.message">
  <h1>{{data.message}}</h1>
</div>

/ bij compile	,
  <input type="text" ng-model="data.message">

/ we zien	,

var inputDirective = ['$browser', '$sniffer', function($browser, $sniffer) {
  return {
    restrict: 'E',
    require: '?ngModel',
    link: function(scope, element, attr, ctrl) {
      if (ctrl) {
        (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrl, $sniffer,
                                                            $browser);
      }
    }
  };
}];



/ we komen in	,

var ngModelDirective = function() {
  return {
    require: ['ngModel', '^?form'],
    controller: NgModelController,
    link: function(scope, element, attr, ctrls) {
      // notify others, especially parent forms

 ->     var modelCtrl = ctrls[0],
          formCtrl = ctrls[1] || nullFormCtrl;

      formCtrl.$addControl(modelCtrl);

      scope.$on('$destroy', function() {
        formCtrl.$removeControl(modelCtrl);
      });
    }
  };
};

/ modelCtrl is een Constructor inst	, die WH cp heeft $setValidity fct	, 
/ het is niet zo dat bijv de $setValidity fct via __proto__ 	,
/ TODO
var NgModelController = ['$scope', '$exceptionHandler', '$attrs', '$element', '$parse',
    function($scope, $exceptionHandler, $attr, $element, $parse) {
...
  this.$setValidity = function(validationErrorKey, isValid) {

/ de formCtrl zien we 	,

/* global -nullFormCtrl */
var nullFormCtrl = {
  $addControl: noop,
  $removeControl: noop,
  $setValidity: noop,
  $setDirty: noop,
  $setPristine: noop
};

/ 7	. 

[eric@walnut angularjs]$ cp -a angular.js/ angular.js_cp
/ voor als we niet alle b's willen in angular.js	, maar in ons eigen script	,

/ 7	.

$ vi 1/index.html

<div ng-app>
  <input type="text" ng-model="data.message">
  <h1>{{data.message}}</h1>
</div>

<script src="/jquery/jquery-1.9.1.js"></script>
<script src="/angularjs/angular.js_cp/build/angular.js"></script>
...
<script src="script.js"></script>

/ we set onze scripts achter de html die de DOM geeft, 	toch moeten we wait for DOMContentLoaded	,

$ vi angular.js
...
  jqLite(document).ready(function() {
    angularInit(document, bootstrap);
 
$ vi scripts.js

$(document).ready(function(){
var e=angular.element("[ng-app]")
var sc=e.scope()
...

/ TODO

/ Na DOMContentLoaded is e.scope() OK, de rootscope	,


/ 7	.

$ vi 1/index.html

<div ng-app>
  <input type="text" ng-model="data.message">
  <h1>{{data.message}}</h1>
</div>

$ vi 1/script.js

$(document).ready(function(){
var e=angular.element("[ng-app]")
var sc=e.scope()
sc.data={message:"foo"}
sc.$digest()
})

/ we zien de input en de h1 updated met foo	,

/ de watch fct  op {{}} is er al	, dat heeft $watch al gedaan	, in de link fase	, 
/ dus we moeten alleen $digest op de scope te call	,

      $digest: function() {
...
                    if ((value = watch.get(current)) !== (last = watch.last) &&
 ...

/ al eerder was	scope.$watch exec in	,
    function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
      if (interpolateFn) {
        directives.push({
          priority: 0,
          compile: valueFn(function textInterpolateLinkFn(scope, node) {
            var parent = node.parent(),
                bindings = parent.data('$binding') || [];
            bindings.push(interpolateFn);
            safeAddClass(parent.data('$binding', bindings), 'ng-binding');
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });

/ $watch is een service en watch.get(current) is dan de function interpolateFnWatchAction, dus die wordt called	,

/ 7	.

$ vi 1/index.html

<div ng-app>
  <input type="text" ng-model="data.message">
  <h1>{{data.message}}</h1>
</div>

$ vi 2/index.html

<div ng-app>
  <div ng-controller="ctrl">
    <h1>{{data.message}}</h1>
  </div>
</div>

/ ng-model en ng-controller geven beide controllers	,

/ we doen eerst 1	,

/ de compile fct gaat eerst directives maken	,

  <input type="text" ng-model="data.message">

/ Deze regel geeft 2 directives, <input ...> en attr ng-model	,



var inputDirective = ['$browser', '$sniffer', function($browser, $sniffer) {
  return {
    restrict: 'E',
    require: '?ngModel',
    link: function(scope, element, attr, ctrl) {
      if (ctrl) {
        (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrl, $sniffer,
                                                            $browser);
      }
    }
  };
}];

var ngModelDirective = function() {
  return {
    require: ['ngModel', '^?form'],
    controller: NgModelController,
    link: function(scope, element, attr, ctrls) {
      // notify others, especially parent forms

      var modelCtrl = ctrls[0],
          formCtrl = ctrls[1] || nullFormCtrl;

      formCtrl.$addControl(modelCtrl);

      scope.$on('$destroy', function() {
        formCtrl.$removeControl(modelCtrl);
      });
    }
  };
};

/ 7	

function bootstrap(element, modules) {
  var doBootstrap = function() {
...
    injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate', function(scope, element, compile, injector, animate) {
        scope.$apply(function() {
...
->          compile(element)(scope);
        });

/ element is bij ons $("[ng-app]")
/ compile(element) returns 
      return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
...
/ compile maakt directives uit de template, en haalt de link fcts eruit, en set deze in de postLinkFns van elke applyDirectivesToNode	,
/ en wordt door (scope) ook weer meteen called	,

/ 7	. 

    function compile($compileNodes, transcludeFn, maxPriority, ignoreDirective,
                        previousCompileContext) {

/ doet 2 dingen	, maakt de (parent) link fct	, en  returns publicLinkFn, die ook meteen straks wordt called	,

     var compositeLinkFn = compileNodes($compileNodes, transcludeFn, $compileNodes, maxPriority, ignoreDirective, previousCompileContext);

      return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
...
       if (compositeLinkFn) compositeLinkFn(scope, $linkNode, $linkNode);

/ dan 	,

/ 7	.

    function compileNodes(nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective, previousCompileContext) {

        directives = collectDirectives(nodeList[i], [], attrs, i === 0 ? maxPriority : undefined, ignoreDirective);

        nodeLinkFn = (directives.length) ? applyDirectivesToNode(directives, nodeList[i], attrs, transcludeFn, $rootElement, null, [], [], previousCompileContext) : null;

       childLinkFn = (nodeLinkFn && nodeLinkFn.terminal || !nodeList[i].childNodes || !nodeList[i].childNodes.length) ? null : compileNodes(nodeList[i].childNodes, nodeLinkFn ? nodeLinkFn.transclude : transcludeFn);
 

/ collectDirectives maakt directives uit regels, deze regels geeft er 2	,
  <input type="text" ng-model="data.message">

/ een directive heeft een link fct	, en een compile fct	, de link fct zit in de compile fct's closure, via value, want de compile fct doet: return value	,
/ applyDirectivesToNode calles de compile fct uit de directive, en stores de link fct die de compile fct geeft in postLinkFns, en returns nodeLinkFn	,

/ er is 1 nodeLinkFn per regel, en er zijn wellicht meerder link fcts in postLinkFns	,

    function applyDirectivesToNode(directives, compileNode, templateAttrs, transcludeFn, jqCollection, originalReplaceDirective, preLinkFns, postLinkFns, previousCompileContext) {
...
/ push link fcts van  directives in postLinkFns	,

		return nodeLinkFn

/ hierachter gaat applyDirectivesToNode verder, meer als namespace, defines inner fcts, en heeft postLinkFns als local, die dus daarmee in de closure scope van de inner fct zit	, bijv nodeLinkFn kent dan postLinkFns, die bestaat uit links fcts in directivis , die zelf door applyDirectivesToNode zijn push

      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
...

    for(i = 0, ii = preLinkFns.length; i < ii; i++) {
            linkFn = preLinkFns[i];
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs, linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);

        childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn);

      for(i = postLinkFns.length - 1; i >= 0; i--) {
            linkFn = postLinkFns[i];
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs, linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);

/ 7	.

/ de regel	,
  <h1>{{data.message}}</h1>

/ h1 geeft zelf geen directives, maar z'n #text child wel	,

/ de dir gaat anders als bij de 2 hierboven	, 

    function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
      if (interpolateFn) {
->        directives.push({
          priority: 0,
->        compile: valueFn(function textInterpolateLinkFn(scope, node) {
            var parent = node.parent(),
                bindings = parent.data('$binding') || [];
            bindings.push(interpolateFn);
            safeAddClass(parent.data('$binding', bindings), 'ng-binding');
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });
          })
        });

/ we zijn bij directives.push, maar we zien dat de valueFn ook wordt exec	,
/ TODO

/ we zien	,

directives: Array[1]
	0: Object
		compile: function () {return value;}
		priority: 0 
...
/ een directive heeft een link fct	, en een compile fct	, de link fct zit in de compile fct's closure, via value, want de compile fct doet: return value	,
/ applyDirectivesToNode calles de compile fct uit de directive, en stores de link fct die de compile fct geeft in postLinkFns, en returns nodeLinkFn	,

/ het zit zo	, 

/ we zien de call	,
->        compile: valueFn(function textInterpolateLinkFn(scope, node) {

/ ergens anders,	

function valueFn(value) {
	return function() {
		return value;
	};
}
/ dus in de outer fct valueFn is value=function textInterpolateLinkFn, en omdat de inner fct wordt return, in compile prop van de dir , blijft value live	,

/ 7	.

/ we hebben de code rond applyDirectivesToNode nagebootst in	,

$ vi closure.html

var dir1={
  link:function(){
    console.log(this)
  }
}
var dir2={
  link:function(){
    console.log(this)
  }
}

var apply=function(dir,fns){
  dir.link.id=id++
  fns.push(dir.link)
  linkFn.id=id++
  return linkFn
  function linkFn(){
    fns[0]()
  }
}

var id=1
var fn=apply(dir1,[])
fn()
var fn2=apply(dir2,[])
fn2()

/ we use 
  function linkFn(){
    fns[0]()
  }
/ ipv
  var linkFn=function(){
    fns[0]()
  }
/ omdat we dan deze achter 
	return linkFn
/ kunnen set	,

/ er wordt 2 keer en linkFn def	, en deze hebben verschillende closures, dus verschillende arrays fns	,
/ dat zien we ook in de code van angular	,

 /er is maar 1 apply 	,

/ 7	. 

[eric@walnut closures]$ pwd
/home/eric/Devel/Web/angularjs/self/closures
$ vi closures4.html

/ inh via closures	, want o zit in de closure van p	,
/ vergl met prototype inh in het block eronder	,

/ MORGEN 
/ we zien p niet in de closure, o wel	,
/ TODO

/ HIER HIER


/ 7	.

/ Intermezzo

/ we zien ook dat	,

      instanceInjector = (instanceCache.$injector =
          createInternalInjector(instanceCache, function(servicename) {
            var provider = providerInjector.get(servicename + providerSuffix);
->            return instanceInjector.invoke(provider.$get, provider);
          }));

   this.directive = function registerDirective(name, directiveFactory) {
    assertNotHasOwnProperty(name, 'directive');
    if (isString(name)) {
      assertArg(directiveFactory, 'directiveFactory');
      if (!hasDirectives.hasOwnProperty(name)) {
        hasDirectives[name] = [];
        $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
->        function($injector, $exceptionHandler) {
            var directives = [];

/ $provide is een ook een service, en $provide.factory heeft eerder  provider.$get create, en die wordt nu called	,

/ TODO

/ Einde Intermezzo

/ 7	. 

      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
...
            controllerInstance = $controller(controller, locals);

/ $controller=function $ControllerProvider() {
  this.$get = ['$injector', '$window', function($injector, $window) {
    return function(expression, locals) {
      instance = $injector.instantiate(expression, locals);

/ 7	. 

/ we gaan weer terug naar create providers	,



function bootstrap(element, modules) {
  var doBootstrap = function() {
...
->1   modules.unshift(['$provide', function($provide) {
  ->3    $provide.value('$rootElement', element);
    }]);

  ->2  var injector = createInjector(modules);

function createInjector(modulesToLoad) {
  forEach(loadModules(modulesToLoad), function(fn) { instanceInjector.invoke(fn || noop); });
/ we doen eerst loadModules(modulesToLoad)	, de providers, directives worden created	, omdat loadModules(modulesToLoad)=undefined, ...
/ TODO

/ via 2 wordt 3 called	,

function provider(name, provider_) {
    if (isFunction(provider_) || isArray(provider_)) {
      provider_ = providerInjector.instantiate(provider_);
    }
...
    return providerCache[name + providerSuffix] = provider_;
  }

  function factory(name, factoryFn) { 
		return provider(name, { $get: factoryFn }); 
	}

  function service(name, constructor) {
    return factory(name, ['$injector', function($injector) {
      return $injector.instantiate(constructor);
    }]);
  }

  function value(name, val) { 
		return factory(name, valueFn(val)); 
	}

function valueFn(value) {
	return function() {
		return value;
	};
}

/ dus 
$rootElement:provider_={
	$get:function(){
		return value
	}
}
/ deze anonymous fct is een fct obj, net gemaakt (valueFn geeft steeds een nieuwe fct)	, dit is een obj en heeft een obj bij zich waarin staat value: $([ng-app])	, deze zien we niet, maar is er wel	,

/ we waren in 
function bootstrap(element, modules) {
...
   var injector = createInjector(modules);
/ D
    injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate', function(scope, element, compile, injector, animate) {
       function(scope, element, compile, injector, animate) {
        scope.$apply(function() {
          element.data('$injector', injector);
          compile(element)(scope);
        });
      }]
/ eerst worden $rootScope, $rootElement, ... resolved	,
/ dat gaat zo	,

function createInternalInjector(cache, factory) {

    function getService(serviceName) {
...
    ->2      return cache[serviceName] = factory(serviceName);

    function invoke(fn, self, locals){
          $inject = annotate(fn),
      for(i = 0, length = $inject.length; i < length; i++) {
        key = $inject[i];
...
  ->1        : getService(key)

/ we zien dat factory in closure van getService, want is arg closure fct	, createInternalInjector
/ al eerder 	,
function createInjector(modulesToLoad) {
...
      instanceInjector = (instanceCache.$injector =
          createInternalInjector(instanceCache, function(servicename) {
      ->3      var provider = providerInjector.get(servicename + providerSuffix);
       ->4     return instanceInjector.invoke(provider.$get, provider);
          }));
/ we zien dus dat factory deze anon fct is	,

/ we zien dat steeds van elke provider de $get fct wordt called,	

/ servicename="$rootScope", de provider is er al	, en gaat 4 doen	,
/ we komen in	,

function $RootScopeProvider(){
  this.$get = ['$injector', '$exceptionHandler', '$parse', '$browser',
      function( $injector,   $exceptionHandler,   $parse,   $browser) {
...
   var $rootScope = new Scope();
    return $rootScope;

/ Bij $rootElement is er geen $RootElementProvider of zoiets,	het ging via de valueFn fct	,
/we komen weer in de factory fct	,
          createInternalInjector(instanceCache, function(servicename) {
->            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);

/ provider.$get=function(){return value})
/ we zien in de closure value=$([ng-app])
/ in de instance cache zien we nu de entries	,
$rootScope: Scope
$rootElement: jQuery.init	

/ 7	.

/ we hebben een lange lijst van directive providers gemaakt, 

  angularModule('ng', ['ngLocale'], ['$provide',
    function ngModule($provide) {
...
      $provide.provider('$compile', $CompileProvider).
        directive({
            a: htmlAnchorDirective,
            input: inputDirective,
...
/ input is hier key, inputDirective is het 2de arg van $CompileProvider.directive	, en die heet 

/ maar blijkbaar is de directive nog niet gemaakt, dat gaan we nu doen	,

          addDirective(directives,
              directiveNormalize(nodeName_(node).toLowerCase()), 'E', maxPriority, ignoreDirective);
/ c
        for(var directive, directives = $injector.get(name + Suffix),
/c
    function getService(serviceName) {
...
          return cache[serviceName] = factory(serviceName);
/c
        createInternalInjector(instanceCache, function(servicename) {
            var provider = providerInjector.get(servicename + providerSuffix);
/ is er wel	,
 ->           return instanceInjector.invoke(provider.$get, provider);
/c
function $CompileProvider($provide, $$sanitizeUriProvider) {
...
   this.directive = function registerDirective(name, directiveFactory) {
...
        $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
          function($injector, $exceptionHandler) {
 ->           var directives = [];
            forEach(hasDirectives[name], function(directiveFactory, index) {
              try {
                var directive = $injector.invoke(directiveFactory);
 
/ $provide.factory creates inderdaad een obj met een $get als key	, 	,

  function factory(name, factoryFn) { return provider(name, { $get: factoryFn }); }

/ en we zien de factoryFn hier bij ->	,

/ onthoud: provider.$get is de fct die 2de arg is van $provider.factory	,
 

/ 7	.


function compileNodes(nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective, previousCompileContext) {
...
        nodeLinkFn = (directives.length)
            ? applyDirectivesToNode(directives, nodeList[i], attrs, transcludeFn, $rootElement, null, [], [], previousCompileContext) : null;

/ elke keer in een call op applyDirectivesToNode wordt er een nodeLinkFn create, want er staat in	,

      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {

/ ook andere fcts worden create	,
/ we zien hier de [], [] als args van applyDirectivesToNode, dat worden preLinkFns en postLnkFns	, dus bij iedere call wordt er een nodeLinkFn (fct obj) create, die in z'n closure scope een postLnkFns heeft, steeds ook weer een andere	,

/ 7

/ we zien ook weer, linkFns is local in compileNodes, en wordt bepaald in compileNodes, maar compileNodes heeft inner fcts zoals 

    function compileNodes(nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective, previousCompileContext) {
      var linkFns = [],
...
				directives = collectDirectives(nodeList[i], [], attrs, i === 0 ? maxPriority : undefined, ignoreDirective); 
        nodeLinkFn = (directives.length)
            ? applyDirectivesToNode(directives, nodeList[i], attrs, transcludeFn, $rootElement, null, [], [], previousCompileContext) : null;
...
      return linkFnFound ? compositeLinkFn : null;

      function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) {
         nodeLinkFn = linkFns[i++];
          childLinkFn = linkFns[i++];
/ die linkFns dus in hun closure hebben, en use	,

/ we zien dat in compileNodes directives echt een local is	, die niet in een closure van inner fcts is	, 
/ directives worden eerst create door collectDirectives, maar dan worden de link fcts eruit gehaald, en deze komen in linkFns door applyDirectivesToNode,  ze worden used door inner fct compositeLinkFn	, die linkFns in closure heeft	,

/ applyDirectivesToNode is geen inner fct van compileNodes, maar heeft zelf wel inner fcts, zoals 
      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
/ applyDirectivesToNode heeft postLnkFns als local en is voor nodeLinkFn in de closure, en nodeLinkFn uses postLnkFns	,
/ applyDirectivesToNode  returns nodeLinkFn (iedere call op applyDirectivesToNode geeeft weer een nieuwe nodeLinkFn)	, en zo wordt deze fct later weer bereikt	,

/ 7	. 

[eric@walnut angularjs]$ vi self/structure_angular.js 

function $CompileProvider($provide, $$sanitizeUriProvider) {
   this.directive = function registerDirective(name, directiveFactory) {

  this.aHrefSanitizationWhitelist = function(regexp) {

  this.imgSrcSanitizationWhitelist = function(regexp) {

  this.$get = [ '$injector', '$interpolate', '$exceptionHandler', '$http', '$templateCache', '$parse', '$controller', '$rootScope', '$document', '$sce', '$animate', '$$sanitizeUri', function($injector,   $interpolate,   $exceptionHandler,   $http,   $templateCache,   $parse, $controller,   $rootScope,   $document,   $sce,   $animate,   $$sanitizeUri) {

    return compile;

    function compile($compileNodes, transcludeFn, maxPriority, ignoreDirective, previousCompileContext) {

   function safeAddClass($element, className) {

    function compileNodes(nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective, previousCompileContext) {
      return linkFnFound ? compositeLinkFn : null;

      function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) {
    }

    function createBoundTranscludeFn(scope, transcludeFn) {

    function groupScan(node, attrStart, attrEnd) {

    function groupElementsLinkFnWrapper(linkFn, attrStart, attrEnd) {

    function applyDirectivesToNode(directives, compileNode, templateAttrs, transcludeFn, jqCollection, originalReplaceDirective, preLinkFns, postLinkFns, previousCompileContext) {
      return nodeLinkFn;

      function addLinkFns(pre, post, attrStart, attrEnd) {

      function getControllers(require, $element, elementControllers) {

      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {

    }

    function markDirectivesAsIsolate(directives) {

    function addDirective(tDirectives, name, location, maxPriority, ignoreDirective, startAttrName, endAttrName) {

    function mergeTemplateAttributes(dst, src) {

    function compileTemplateUrl(directives, $compileNode, tAttrs,
        $rootElement, childTranscludeFn, preLinkFns, postLinkFns, previousCompileContext) {

    function byPriority(a, b) {

    function assertNoDuplicate(what, previousDirective, directive, element) {

    function addTextInterpolateDirective(directives, text) {

    function getTrustedContext(node, attrNormalizedName) {

    function addAttrInterpolateDirective(node, directives, value, name) {

    function replaceWith($rootElement, elementsToRemove, newNode) {

    function cloneAndAnnotateFn(fn, annotation) {
  }];
}

/ 7	.

function bootstrap(element, modules) {
  var doBootstrap = function() {
    injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate', function(scope, element, compile, injector, animate) {
        scope.$apply(function() {
          element.data('$injector', injector);
          compile(element)(scope);
       
/ Dus $compile wordt eerst resolved	,
/ via	,
            return instanceInjector.invoke(provider.$get, provider);
/c
function $CompileProvider($provide, $$sanitizeUriProvider) {
  this.$get = [ '$injector', '$interpolate', '$exceptionHandler', '$http', '$templateCache', '$parse', '$controller', '$rootScope', '$document', '$sce', '$animate', '$$sanitizeUri', function($injector,   $interpolate,   $exceptionHandler,   $http,   $templateCache,   $parse, $controller,   $rootScope,   $document,   $sce,   $animate,   $$sanitizeUri) {
/ voordat deze wordt invoke, moet eerst bijv $controller wordt resolved	,
/c
function $ControllerProvider() {
  this.$get = ['$injector', '$window', function($injector, $window) {
->   return function(expression, locals) {
/ = $controller	,
/ deze fct zal later	,
      instance = $injector.instantiate(expression, locals);
/ creates een ctrl, (allemaal zo? TODO)
/dus $controller is net als $watch een fct die controllers, watches maakt	, 'n service	,
  
/ 7.

var ngModelDirective = function() {
  return {
    controller: NgModelController,
/ TODO (Wat betekent dit)
    link: function(scope, element, attr, ctrls) {
/ TODO (wat doet deze link fct)

/ <input ...>'s model (TODO) heeft een ctrl, ngModelController, omdat input een ng-model="data.message" attr heeft	, deze ctrl installs de watcher via de $watch call	, WH als na compile	, de link fct execs	,
/ TODO

/ Wanneer? (TODO)	,
function $ControllerProvider() {
  this.$get = ['$injector', '$window', function($injector, $window) {
    return function(expression, locals) {
      instance = $injector.instantiate(expression, locals);
/ creates de ctlr	,
/ calls	,
var NgModelController = ['$scope', '$exceptionHandler', '$attrs', '$element', '$parse', function($scope, $exceptionHandler, $attr, $element, $parse) {
...
  $scope.$watch(function ngModelWatch() {					/ data binding	,
    var value = ngModelGet($scope);					/ scope.message.data	,
...
       ctrl.$render();											/ updates <input   >	,

/ $watch installs de watcher	,
/ later , via $digest 	,  wordt de watcher called	,

      $digest: function() {
                    if ((value = watch.get(current)) !== (last = watch.last) &&
/ watch.get is de fct hierboven	, dus de value wordt uit scope.data.message gelezen, en de input wordt update	,
                      watch.fn(value, ((last === initWatchVal) ? value : last), current);
/ void	,

/ 7	.

/ dan de text {{message.data}} 	, 

    function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
      if (interpolateFn) {
        directives.push({
          priority: 0,
          compile: valueFn(function textInterpolateLinkFn(scope, node) {
            var parent = node.parent(),
                bindings = parent.data('$binding') || [];
            bindings.push(interpolateFn);
            safeAddClass(parent.data('$binding', bindings), 'ng-binding');
/ data binding	,
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });
          })
        });
      }
    } 
 
/ bij compile wordt de link fct set	, dat is textInterpolateLinkFn, en daarna exec de link fcts,	 en wordt scope.$watch called,	
/ de scope wordt nu niet resolved, dat is dat $scope wordt lookup in de cache	,
/ TODO

/ in $digest	,
                    if ((value = watch.get(current)) ... 
    function $interpolate(text, mustHaveExpression, trustedContext) {
       fn = function(context) { 																	/ watch.get 	,
                part = part(context); 
/ value	,

                      watch.fn(value, ((last === initWatchVal) ? value : last), current);
/ dat is de function interpolateFnWatchAction(value) hierboven	, 

/ 7	.

/ als we type in input	, 

var inputDirective = ['$browser', '$sniffer', function($browser, $sniffer) {
  return {
    link: function(scope, element, attr, ctrl) {
      if (ctrl) {
        (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrl, $sniffer, $browser);
      }
/ Geen ctrl	,
/ TODO
/ we zien een ctrl als arg	, 
/ TODO
function textInputType(scope, element, attr, ctrl, $sniffer, $browser) {

  var listener = function() {
    var value = element.val();
      scope.$apply(function() {
        ctrl.$setViewValue(value);
   
  element.on('change', listener);

/ hierna wordt $digest called	,


/ 7	. 

/ in 2/index.html	,

  <div ng-controller="ctrl">
    <input type="text" ng-model="data.message">
    <h1>{{data.message}}</h1>
  </div>

function bootstrap(element, modules) {
  var doBootstrap = function() {
...
    var injector = createInjector(modules);
/c
      $provide.provider('$compile', $CompileProvider).
        directive({
            a: htmlAnchorDirective,
...
     $provide.provider({
        $controller: $ControllerProvider,
...
/ $compile bijv NIET	,

/ In detail	,
/ 13	.
     $provide.provider('$compile', $CompileProvider)
/c
function $CompileProvider($provide, $$sanitizeUriProvider) {
/this=Constructor

   this.directive = function registerDirective(name, directiveFactory) {
...
/this=Constructor

  this.$get = [ '$injector', '$interpolate', '$exceptionHandler', '$http', '$templateCache', '$parse', '$controller', '$rootScope', '$document', '$sce', '$animate', '$$sanitizeUri', function($injector,   $interpolate,   $exceptionHandler,   $http,   $templateCache,   $parse, $controller,   $rootScope,   $document,   $sce,   $animate,   $$sanitizeUri) {
...
/this=Constructor

/ 13	.

      $provide.provider({
        $anchorScroll: $AnchorScrollProvider,
...
        $controller: $ControllerProvider,
...
/ we gaan maken Constructor obj, met $ControllerProvider.$get fct, onder key "$controllerProvider"	, $controller bestaat niet	,
/c
      provider_ = providerInjector.instantiate(provider_);
/ provider_=ControllerProvider (arg)
/c
function $ControllerProvider() {
/ Deze fct wordt called, 	en de $get fct wordt set	,
  this.$get = ['$injector', '$window', function($injector, $window) {
/this=Constructor
/ Dus er is 'n obj create, en krijgt fct $get, het is alsof je 
{$get:...}	, maar de __proto__===$ControllerProvider.prototype	,
/ TODO( is niets bijzonders)

/ later,	

function bootstrap(element, modules) {
  var doBootstrap = function() {
...
   injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate', function(scope, element, compile, injector, animate) {
        scope.$apply(function() {
          element.data('$injector', injector);
->        compile(element)(scope);
        });

/ eerst $rootScope	,
/ er is een $RootScopeProvider fct, met een $get fct	, we hebben eerder een Constructor obj create, die deze $get fct kreeg	, 
/ we komen in	,
          : getService(key)
/c 
          return cache[serviceName] = factory(serviceName);
/c
    ->      var provider = providerInjector.get(servicename + providerSuffix);
    ->      return instanceInjector.invoke(provider.$get, provider);

/ In angular.js	,

function $RootScopeProvider(){
  this.digestTtl = function(value) {

  this.$get = ['$injector', '$exceptionHandler', '$parse', '$browser',
      function( $injector,   $exceptionHandler,   $parse,   $browser) {

    function Scope() {

    Scope.prototype = {
      constructor: Scope,

      $new: function(isolate) {

      $watch: function(watchExp, listener, objectEquality) {

      $watchCollection: function(obj, listener) {

      $digest: function() {

      $destroy: function() {

      $eval: function(expr, locals) {

      $evalAsync: function(expr) {

      $$postDigest : function(fn) {

      $apply: function(expr) {

      $on: function(name, listener) {

      $emit: function(name, args) {

      $broadcast: function(name, args) {
    };

->    var $rootScope = new Scope();

    return $rootScope;

    function beginPhase(phase) {

    function clearPhase() {

    function compileToFn(exp, name) {

    function initWatchVal() {}
  }];
}

/ in de instance cache is nu $rootScope	,

/ dan $rootElement	,

/ eerder was	,
function bootstrap(element, modules) {
  var doBootstrap = function() {
    element = jqLite(element);
    modules.unshift(['$provide', function($provide) {
      $provide.value('$rootElement', element);
    }]);
/ Dat betekent dat loadModules ...
/ TODO
/ Er is geen $RootElementProvider fct	, zoals $RootScopeProvider	,

/later,	
     instanceInjector = (instanceCache.$injector =
          createInternalInjector(instanceCache, function(servicename) {
->          var provider = providerInjector.get(servicename + providerSuffix);
->          return instanceInjector.invoke(provider.$get, provider);
/ we zien de closure	,
providerCache
	$rootElementProvider: Object
		$get: function () {return value;}
/ en value is in de closure	, en dat zien we hierboven, = element =$("[ng-app]")	,
/ we zien het aan	,

  function provider(name, provider_) {
    if (isFunction(provider_) || isArray(provider_)) {
      provider_ = providerInjector.instantiate(provider_);
...
    return providerCache[name + providerSuffix] = provider_;

  function factory(name, factoryFn) { return provider(name, { $get: factoryFn }); }

  function value(name, val) { return factory(name, valueFn(val)); }

function valueFn(value) {return function() {return value;};}

/ dan nu $compile	,

/ we waren in	doBootstrap	,
    injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate',
/ c
          : getService(key)
/ key="$compile"
/c
          return cache[serviceName] = factory(serviceName);
/c
/ we komen weer in	,
     instanceInjector = (instanceCache.$injector =
          createInternalInjector(instanceCache, function(servicename) {
 ->           var provider = providerInjector.get(servicename + providerSuffix);
/ "$compileProvider" met Constructor obj, met $get fct= is er	,  
            return instanceInjector.invoke(provider.$get, provider);
/ deze anon fct is factory	,
/ TODO

/ Er is een $CompileProvider fct	, met 'n $get fct	,

function $CompileProvider($provide, $$sanitizeUriProvider) {
   this.directive = function registerDirective(name, directiveFactory) {
...
  this.$get = [
            '$injector', '$interpolate', '$exceptionHandler', '$http', '$templateCache', '$parse', '$controller', '$rootScope', '$document', '$sce', '$animate', '$$sanitizeUri', function($injector,   $interpolate,   $exceptionHandler,   $http,   $templateCache,   $parse, $controller,   $rootScope,   $document,   $sce,   $animate,   $$sanitizeUri) {
...
    return compile;

/ we zien dat ook eerst $controller wordt create	,

   function getService(serviceName) {
...
          return cache[serviceName] = factory(serviceName);
/c
     instanceInjector = (instanceCache.$injector =
          createInternalInjector(instanceCache, function(servicename) {
            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
/c
function $ControllerProvider() {
  this.$get = ['$injector', '$window', function($injector, $window) {
->    return function(expression, locals) {
     		instance = $injector.instantiate(expression, locals);
/ Deze fct is $controller	,

/Dus $controller=$ControllerProvider.$get(...) dus .$get invoked	,
/ we write $ControllerProvider.$get, maar dat is niet waar	,

/ als alle args zijn resolved	, komen we in	,
$CompileProvider.$inject = ['$provide', '$$sanitizeUriProvider'];
function $CompileProvider($provide, $$sanitizeUriProvider) {
  this.$get = [ '$injector', '$interpolate', '$exceptionHandler', '$http', '$templateCache', '$parse', '$controller', '$rootScope', '$document', '$sce', '$animate', '$$sanitizeUri', function($injector,   $interpolate,   $exceptionHandler,   $http,   $templateCache,   $parse, $controller,   $rootScope,   $document,   $sce,   $animate,   $$sanitizeUri) {
-> 	...
/ this = Constructor	, die $get fct heeft,	waar we nu in zijn	,

    return compile;

/ $compile is $CompileProvider.$get(...), dus $get invoked	,
/ we write $CompileProvider.$get, maar dat is niet waar	,

/ t
/ doBootstrap	,

   injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate',
       function(scope, element, compile, injector, animate) {
        scope.$apply(function() {
          element.data('$injector', injector);
->          compile(element)(scope);


/ we komen op template line	,
  <div ng-controller="ctrl">

/ compile is inner fct van $CompileProvider.$get	, TODO, dus heeft compile bijv $controller in closure scope	,

    function compile($compileNodes, transcludeFn, maxPriority, ignoreDirective,
                        previousCompileContext) {
     var compositeLinkFn = compileNodes(...
     return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
/ de top link fct, en deze wordt hierboven meteen called,	 als hij create is	,

/ in compileNodes 	,
              addDirective(directives, nName, 'A', maxPriority, ignoreDirective, attrStartName, attrEndName);
/c
        for(var directive, directives = $injector.get(name + Suffix),
ngControllerDirective	,
/c
            return instanceInjector.invoke(provider.$get, provider);
/ provider=ngControllerDirectiveProvider	,

/ NB. we hebben al create $controller, = (ahw) $ControllerProvider.$get	, maar nu hebben we ngControllerDirectiveProvider	,
/ de $get fct in deze dir prov is create door $provide.factory	,

/ c
function $CompileProvider($provide, $$sanitizeUriProvider) {
   this.directive = function registerDirective(name, directiveFactory) {
        $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
          function($injector, $exceptionHandler) {
/ deze fct is .$get fct van veel providers	, dat is wat factory doet	,
              try {
->                var directive = $injector.invoke(directiveFactory);
/c
var ngControllerDirective = [function() {
->  return {
    scope: true,
    controller: '@',
    priority: 500
  };
}];

/ we zien scope: true,	 
/ we zien controller:...
/ TODO
/ krijgt geen compile fct	,

/ Daarna

   function applyDirectivesToNode(directives, compileNo...
/ nodeLinkFn is inner fct,	dus bij iedere call op applyDirectivesToNode wordt er een nodeLinkFn create, een fct obj, 

      nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;
/ JA
/ TODO (newScopeDirective)

	return nodeLinkFn

/ nodeLinkFn calls	 de $controller service	,
            controllerInstance = $controller(controller, locals);

/ 13	. 

/ dan de input regel in het template, 
    <input type="text" ng-model="data.message">

/ deze geeft 2 directives, 1 op het elem en 1 op 't attr	,
/ dat is ook wat collectDirectives doet	, 

    function collectDirectives(node, directives, attrs, maxPriority, ignoreDirective) {
          addDirective(directives, directiveNormalize(nodeName_(node).toLowerCase()), 'E', maxPriority, ignoreDirective);

          // iterate over the attributes
          for (var attr, name, nName, ngAttrName, value, nAttrs = node.attributes, j = 0, jj = nAttrs && nAttrs.length; j < jj; j++) {

/ addDirective calls	,
        for(var directive, directives = $injector.get(name + Suffix),
/ en $injector.get is set als	,
  function createInternalInjector(cache, factory) {
->    function getService(serviceName) {

/ getService calls	,
          return cache[serviceName] = factory(serviceName);
/ en factory is	eerder set in de closure,

      instanceInjector = (instanceCache.$injector =
          createInternalInjector(instanceCache, function(servicename) {
->          var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
          }));

/ provider is is altijd 
{$get: function bij -> hieronder} 
/ maar het verschil is de directiveFactory in in hasDirectives onder de name wordt stored	, 

   this.directive = function registerDirective(name, directiveFactory) {
      if (!hasDirectives.hasOwnProperty(name)) {
        hasDirectives[name] = [];
        $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
->        function($injector, $exceptionHandler) {
            var directives = [];
            forEach(hasDirectives[name], function(directiveFactory, index) {
              try {
                var directive = $injector.invoke(directiveFactory);
...
              }
            });
            return directives;
          }]);
      }
      hasDirectives[name].push(directiveFactory);

/ eerder was	,
      $provide.provider('$compile', $CompileProvider)
/ $CompileProvider is een fct, en $provide.provider pakt de name "$compile" en set daar "Provider" tegenaan	,
/ providerCache.$compileProvider, 'n Constructor inst	, heeft .directive fct	, en 
        .directive({
            input: inputDirective,

/ inputDirective is een fct	,
var inputDirective = ['$browser', '$sniffer', function($browser, $sniffer) {
  return {
    restrict: 'E',
    require: '?ngModel',
    link: function(scope, element, attr, ctrl) {
      if (ctrl) {
        (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrl, $sniffer,
                                                            $browser);
      }
    }
  };
}];


/ Suffix="Provider" in de closure van .directive, $provide.factory maakt providercache.inputDirectiveProvider = {$get: function bij -> hierboven}	,
/ .directive sets in hasDirectives "input":inputDirective , de hasDirectives is in de closure van onze fct met ->	, voor als hij wordt called	,

/ dat was eerder, maar nu	,

/ wordt getService("inputDirective") called, calls	,
            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);

/ en het staat hier gewoon: de provider "inputDirectiveProvider"'s $get fct wordt invoked	, 
                var directive = $injector.invoke(directiveFactory);

/c
var inputDirective = ['$browser', '$sniffer', function($browser, $sniffer) {
-> return {
    restrict: 'E',
    require: '?ngModel',
    link: function(scope, element, attr, ctrl) {
      if (ctrl) {
        (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrl, $sniffer,
                                                            $browser);
      }
    }
  };
}];

/ herinner	,
/ getService calls	,
          return cache[serviceName] = factory(serviceName);
/ dus het obj {restrict:"E",...} wordt onder "inputDirective" set in de instanceCache	,

//////////////////////////////////////////////////////////////

/ 0

/ creates providerCache.$provide
/ creates providerCache.$injector 
/ creates instanceCache.$injector 

function createInjector(modulesToLoad) {
  var INSTANTIATING = {},
      providerSuffix = 'Provider',
      path = [],
      loadedModules = new HashMap(),
      providerCache = {
        $provide: {
            provider: supportObject(provider),
            factory: supportObject(factory),
            service: supportObject(service),
            value: supportObject(value),
            constant: supportObject(constant),
            decorator: decorator
          }
      },
      providerInjector = (providerCache.$injector =
          createInternalInjector(providerCache, function() {
            throw $injectorMinErr('unpr', "Unknown provider: {0}", path.join(' <- '));
          })),
      instanceCache = {},
      instanceInjector = (instanceCache.$injector =
          createInternalInjector(instanceCache, function(servicename) {
            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
          }));

  function createInternalInjector(cache, factory) {

    function getService(serviceName) {
        return cache[serviceName];
      } else {
          return cache[serviceName] = factory(serviceName);

    function invoke(fn, self, locals){
          $inject = annotate(fn),
      for(i = 0, length = $inject.length; i < length; i++) {
        key = $inject[i];
        args.push(
          : getService(key)
...

    return {
      invoke: invoke,
      instantiate: instantiate,
      get: getService,
      annotate: annotate,

/ Dus 
providerCache.$injector={
      invoke: invoke,
      instantiate: instantiate,
      get: getService,
      annotate: annotate,

instanceCache.$injector={
      invoke: invoke,
      instantiate: instantiate,
      get: getService,
      annotate: annotate,

/ we zien steeds 2 fct objs invoke en invoke, verschillend, ze hebben andere closure scopes	, providerCache.invoke heeft providerCache in z'n closure scope, niet omdat hij providerCache.invoke is maar omdat deze fct inner fct is van createInternalInjector	, en die in z'n local scope de cache=providerCache heeft,	

/ 0a

  angularModule('ng', ['ngLocale'], ['$provide',
    function ngModule($provide) {

/angularModule sets deze ['$provide', function ngModule] op de queue WH
/ TODO

/ hoe wordt $provide di	?

/ nu process die queue	,

 function loadModules(modulesToLoad){
                provider = providerInjector.get(invokeArgs[0]);

invokeArgs[0]="$injector"	, deze .get=getService heeft providerCache in closure scope, dus pakt hij providerCache.$injector, maar in dit geval is dat providerInjector zelf	,
/ dus provider=providerInjector	,
/ $injector en $provider zijn objs van fct, $compile, $controller zijn fcts	,

            provider[invokeArgs[1]].apply(provider, invokeArgs[2]);
/ invokeArgs[1]=invoke
/ invokeArgs[2]=["$provide",function ngModule]	,
/c
   function invoke(fn, self, locals){
/ we komen in invoke fct met cache=providerCache in closure scope	, en invoke doet altijd eerst di	,
          $inject = annotate(fn),
["$provide"]
        args.push(
          : getService(key)
/ $provide is als in providerCache,	 

/ we zien dat de juiste invoke, dus of providerInjector's  of instanceInjector's invoke ,
/ maar als invoke factory calls (factory komt uit closure scope, net als cache), dan kan het alleen instanceInjector.invoke zijn geweest, want	providerInjector.getService heeft factory in closure scope, en deze is een err fct	,

      providerInjector = (providerCache.$injector =
          createInternalInjector(providerCache, function() {
            throw $injectorMinErr('unpr', "Unknown provider: {0}", path.join(' <- '));
 
/ hier gaat het goed, want hij inject $provide, en deze is in cache=providerCache


/ providerInjector is 'n obj met fcts die providerCache in hun closure scope hebben	,

/ 13

/dan	,

       var doBootstrap = function() {
            var injector = createInjector(modules);
/ D
/ Dit is de instanceInjector	,

            injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate', 
                function(scope, element, compile, injector, animate) {
                    scope.$apply(function() {
                        element.data('$injector', injector);
                        compile(element)(scope);
                    });
                }]
            );

/ Hoe di	?

/ we komen in instanceInjector.invoke, deze heeft cache=instanceCache in scope, en factory=fct bij ->
     instanceInjector = (instanceCache.$injector =
          createInternalInjector(instanceCache, function(servicename) {
->            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
          }));

/ di
/ de di komen allen uit de instanceCache	, want instanceInjector.invoke heeft deze cache in closure scope	,
/ instanceInjector.invoke ziet de 5 te doen injections, en zegt: is in instanceCache? Als niet call instanceInjector.getService , deze heeft factory in scope,	 en factory("$compile") bijv is called	, 
/ bij -> is servicename="$compile", dan getService("$compileProvider") called, 	met providerCache in scope	, provider={$get:[annotations,function ...]}	,
/ dan instanceInjector.invoke, die de instanceCache heeft, daaruit worden de annotaties resolved, en als ze er niet zijn, in set	, dat is wat getService doet	,

/ de resolved annotatie wordt set in args in instanceProvider.invoke	, en daarna
	fn.apply(self,args)
/ dus we zien inderdaad de di	,

/ 13	.

/ onthoud: $provide.factory, $provide.provider, ... maken providers	,

   function addDirective(tDirectives, name, location, maxPriority, ignoreDirective, startAttrName, endAttrName) {
        for (var directive, directives = $injector.get(name + Suffix), 
/ name="ngController", Suffix="Directive"	,
/ $injector was di	, in closure scope	, en is dus instanceCache.$injector	,

/ $injector.get=instanceInjector.getService	,
/c
    return cache[serviceName] = factory(serviceName);
/serviceName="ngControllerDirective"
/c
       createInternalInjector(instanceCache, function(servicename) {
 ->           var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
 
/ we zien de cache,factory in de closure scope van instanceInjector.getService	,
/ pakt eerst de provider , in providerCache, achter key="ngControllerDirectiveProvider"	, dit is een {$get:function ...}	, deze fct heeft annotaties , 
/ dan komen we in 	,

       this.directive = function registerDirective(name, directiveFactory) {
/ this="$compileProvider"	,
                    $provide.factory(name + Suffix, ['$injector', '$exceptionHandler', 
                        function($injector, $exceptionHandler) {
/ $get fct van de "ngControllerDirectiveProvider"	,

                            forEach(hasDirectives[name], function(directiveFactory, index) { 
                                    var directive = $injector.invoke(directiveFactory);

/ name="ngController"	, hasDirectives[name] is fct	, die al eerder	,

     $provide.provider('$compile', $CompileProvider).
        directive({
            input: inputDirective,
            ngController: ngControllerDirective,

/ en er is	,

var ngControllerDirective = [function() {
  return {
    scope: true,
    controller: '@',
    priority: 500
  };
}];

/ SAMENVATTING

/ di 

/ push

  angularModule('ng', ['ngLocale'], ['$provide',
		function ngModule($provide) {
      $provide.provider('$compile', $CompileProvider).
        directive({
            ngController: ngControllerDirective,
...
     $provide.provider({
        $controller: $ControllerProvider,
... 

/ process

  function loadModules(modulesToLoad){
          for(invokeQueue = moduleFn._invokeQueue, i = 0, ii = invokeQueue.length; i < ii; i++) {
            var invokeArgs = invokeQueue[i],
                provider = providerInjector.get(invokeArgs[0]);
            provider[invokeArgs[1]].apply(provider, invokeArgs[2]);

/ invokeArgs=["$injector", "invoke",["$provide",function ngModule]]
/ provider=providerInjector=providerCache.$injector	

/ in ngModule wordt $provide di	door providerCache.$injector.invoke, $provide wordt gevonden in providerCache, dus is providerCache.$provide	,
/ $provide is de enigste ... die providerCache.$injector.invoke kan di	,

/ in ngModule worden 3 providers create	, de "ngControllerProvider" in de .directive fct met $provide.factory	,

/ herinner	,
  function provider(name, provider_) {
    if (isFunction(provider_) || isArray(provider_)) {
      provider_ = providerInjector.instantiate(provider_);
		}
    return providerCache[name + providerSuffix] = provider_;
  }

/ "$compileProvider" wordt create	,
      $provide.provider('$compile', $CompileProvider).
/ providerInjector.instantiate providerInjector.invoke  de constructor $CompileProvider	, result: "$compileProvider":{directive:function ..., $get:[annotations, function ...]}

/ dan wordt "ngControllerDirectiveProvider" create	,
/ in .directive staat $provide, deze komt uit de closure en was di bij call op "$compileProvider"'s constructor $CompileProvider	, 
/ in .directive staat $provide.factory, die de provider maakt	, result: "ngControllerDirectiveProvider":{$get:[annotations, function ...]}

/ dan wordt "$controllerProvider" create	, result: {$get:[annotations,function ...],register: function ...}

/ later	,

/ we gaan oa. de "$compile" en "$controller" services in instanceCache create	,

           var injector = createInjector(modules);
/D
/ injector=instanceInjector.$injector	,
            injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate', function(scope, element, compile, injector, animate) {
                    scope.$apply(function() {
                        element.data('$injector', injector);
                        compile(element)(scope);
                    });
                }]
/ Dus $rootScope, ... worden di vanuit instanceCache, en worden create als ze er nog niet inzitten	,
/ instanceInjector.invoke calls instanceInjector.get	,
  function createInternalInjector(cache, factory) {
  	function getService(serviceName) {
          return cache[serviceName] = factory(serviceName);
/ en we zagen eerder dat factory set is in	,
      instanceInjector = (instanceCache.$injector =
          createInternalInjector(instanceCache, function(servicename) {
            var provider = providerInjector.get(servicename + providerSuffix);
/ de provider	,
            return instanceInjector.invoke(provider.$get, provider);
/ de service	,
          }));

/ als servicename="$compile", wordt provider=providerCache.$compileProvider 	, en wordt de $get fct called ,die de compile fct returns	, die in z'n closure scope alle annotaties heeft van de provider.$get, en die annotaties staan op $get precies voor inner fcts zoals compile	,
/ Zo ook de "$controller" service, de "$controllerProvider"'s $get fct wordt called, en geeft 'n function	, die de annotaties van $get in z'n closure scope heeft,/ "$controller" is een van de annotaties van "$compileProvider"'s $get, dus de $controller service is in de closure scope van $compile	,
 	

/ via compile	, 

                function addDirective(tDirectives, name, location, maxPriority, ignoreDirective, startAttrName, endAttrName) {
                        for (var directive, directives = $injector.get(name + Suffix), 
/ name="ngController", Suffix="Directive"
/ Dus 'n directive "ngControllerDirective" moet worden create	,
/ $injector was eerder di in de closure scope van de $compile fct	, en $injector.get call factory	,
         function(servicename) {
            var provider = providerInjector.get(servicename + providerSuffix);
/ servicename + providerSuffix="ngControllerDirectiveProvider"	,
            return instanceInjector.invoke(provider.$get, provider);

/ de $compileProvider heeft 'n $get fct, die de $compile service geeft, en een directive fct, die DirectiveProviders geeft	, en een van deze wordt nu invoke	,

        this.directive = function registerDirective(name, directiveFactory) {
/ this="$compileProvider"
                    $provide.factory(name + Suffix, ['$injector', '$exceptionHandler', function($injector, $exceptionHandler) {
/ (*)
           forEach(hasDirectives[name], function(directiveFactory, index) {
            	var directive = $injector.invoke(directiveFactory);

/ eerder was $compileProvider.directive fct called, met name="ngController", directiveFactory=ControllerDirective, die dus in de closure scope van $ngControllerDirectiveProvider.$get fct	, dat de fct bij (*) is	,
/ nu wordt deze $get fct invoke	, en calls	,
    var ngControllerDirective = [function() {
            return {
                scope: true,
                controller: '@',
                priority: 500
            };
        }];

/ Dus in instanceCache wordt insert 
"ngControllerDirective":{
	scope: true,
 	controller: '@',
 	priority: 500
}

///////////////
/ Dus de $compile service => $ngControllerDirective

/ Want we zijn in 	,

           injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate', function(scope, element, compile, injector, animate) {
                    scope.$apply(function() {
                        element.data('$injector', injector);
->                      compile(element)(scope);
/  = $compile($rootElement)($rootScope)	,

/ calls compileNodes, addDirective, en er is insert in instanceCache	, 
"ngControllerDirective": {
	scope: true,
 	controller: '@',
 	priority: 500
}

/ Einde SAMENVATTING

/ 7	.

/ template	,
$ vi 2/index.html 

<div ng-app>
  <div ng-controller="ctrl">
    <input type="text" ng-model="data.message">
    <h1>{{data.message}}</h1>
  </div>
</div>

/ template line  	,
  <div ng-controller="ctrl">
/ geeft	 in instanceCache	,
"ngControllerDirective": {
	scope: true,
 	controller: '@',
 	priority: 500
}

/ template line  	,
    <input type="text" ng-model="data.message">
/ geeft	 in instanceCache	,

"inputDirective": {
compile: function () {return value;}
index: 0
link: function (scope, element, attr, ctrl) {
name: "input"
priority: 0
require: "?ngModel"
restrict: "E"
},
"ngModelDirective":{
compile: function () {return value;}
controller: [annotations, function ...] 
index: 0
link: function (scope, element, attr, ctrls) {
name: "ngModel"
priority: 0
require: Array[2]
restrict: "A"
}

/ template line {{data.message}}
?interpolateDirective			:{
compile: function () {return value;}
}

/ 7	.

compile=publicLinkFn
	compositeLinkFn<-
	compileNodes : linkFns=[null,compositeLinkFn]
<div ng-app>
		childLinkFn=compositeLinkFn<- 
			compileNodes: linkFns=[nodeLinkFn,compositeLinkFn]
 	<div ng-controller="ctrl">
ngControllerDirective
				nodeLinkFn <-
					applyDirectivesToNode: postLinkFns=[]
				childLinkFn=compositeLinkFn <-
					compileNodes: linkFns=[nodeLinkFns,null,null,compositeLinkFn]
    <input type="text" ng-model="data.message">
inputDirective
ngModelDirective
						nodeLinkFn <-
							applyDirectivesToNode: postLinkFns[inputDirective->link,ngModelDirective->link]

    <h1>
						childLinkFn=compositeLinkFn<-
							compileNodes:linkFn=[nodeLinkFn,null]	
			{{data.message}}
?interpolateDirective			
								nodeLinkFn<-
									applyDirectivesToNode: postLinkFns=[?interpolateDirective.link]


/ 7	.

/ we hebben recursie en closures in rec2.html	,

(function(){

var g=function(n){
		var h=function(){
			console.log(n)
		}
		var i=(n===0)?
			function(){}
			:g(n-1)
		return function (){ 
			h()
			i() 
		}
		
}

var k=g(2)
k()

})()

/uiteindelijk gaat het erom om h() steeds te exec, i zorgt ervoor dat h called voor n-1	,


/ 7	.

           injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate', function(scope, element, compile, injector, animate) {
                    scope.$apply(function() {
                        element.data('$injector', injector);
->                      compile(element)(scope);
                                         ^   
/ $compile($rootElement)=publicLinkFn	, en wordt nu meteen exec	,

      function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) {
 / scope = root scope, nodeList =div.ng-scope,

/ Intermezzo

   function compileNodes(nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective, previousCompileContext) {
    var linkFns = [],
		nodeLinkFn = (directives.length) ? applyDirectivesToNode(directives, nodeList[i], attrs, transcludeFn, $rootElement, null, [], [], previousCompileContext)
    linkFns.push(nodeLinkFn);
    return linkFnFound ? compositeLinkFn : null;
    function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) 
   }

		function applyDirectivesToNode(directives, compileNode, templateAttrs, transcludeFn, jqCollection, originalReplaceDirective, preLinkFns, postLinkFns, previousCompileContext) {

    	nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;
      return nodeLinkFn;
      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {

    }


/ Einde Intermezzo

           if (nodeLinkFn.scope) {
              childScope = scope.$new();

/ we komen in nodeLinkFn, die inner fct is van applyDirectivesToNode	, die controllerDirectives heeft	,
/ nodeLinkFn haalt attrs uit directive	,

	controller = directive.controller;
  if (controller == '@') {
 		controller = attrs[directive.name];
"ctrl"
  controllerInstance = $controller(controller, locals);
  
/ $controller was di in de closure scope van de instanceCache.$compile 	, want $controller is in de local scope van $compileProvider.$get	, en dat is waar de $get fct voor dient	,

/ $controller is de fct die $controllerProvider.$get returns	,
               return function(expression, locals) {
/ expression="ctrl"
/ locals={
$attrs: $get.Attributes
$element: jQuery.fn.jQuery.init
$scope: $get.Scope.$new.ChildScope
$transclude: undefined                      
}
/ deze worden meegegeven straks aan invoke voor di, en hij doet locals(key) of getService(key)
/ deze locals komen dus uit de directive	,

                       match = expression.match(CNTRL_REG), 
                        constructor = match[1], 
"ctrl"

expression = controllers.hasOwnProperty(constructor) 
                        ? controllers[constructor] 
->                        : getter(locals.$scope, constructor, true) || getter($window, constructor, true);
     
/ $window.ctrl is er	,
var ctrl=function($scope){
  $scope.data={message:"label"}
}
/ =expression	,

                    instance = $injector.instantiate(expression, locals);
/s
      returnedValue = invoke(Type, instance, locals);
/s
          $inject = annotate(fn),
/ Ook zonder ["$scope",function($scope){...}], maar alleen function($scope){...}, di hij toch $scope	,
        args.push(
          locals && locals.hasOwnProperty(key)
->          ? locals[key]
          : getService(key) 			/ NIET	,
/ locals komen uit de directive	,

      return fn.apply(self, args);
/s
var ctrl=function($scope){
	$scope.data={message:"label"}

/ $scope is de child scope	,
/ NgModelController doet ook 	,
	this....=...
/ dat doen we niet hier	,

/t 
      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
            controllerInstance = $controller(controller, locals);
/ D
        childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn);
/ we gaan verder de DOM in	, we hebben nu <div ng-controller... > gedaan	,
/ s
      function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) {
              nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);
/s
      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
          forEach(controllerDirectives, function(directive) {
/ Dit expl van nodeLinkFn, die in bijbehorend expl van  applyDirectivesToNode is , heeft controllerDirectives= [ ngModel-directive]	,




/ daarna komen  in de controllerDirective "ngModel"	,
/ de controller attr is nu een fct, geen string "ctrl", 	

                                controllerInstance = $controller(controller, locals);
/c
                   instance = $injector.instantiate(expression, locals);
 / invokes de fct	,
/ $injector=instanceCache.$injector, want $compilerProvider.$get werd door factory called,	 
            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
/ c
    var NgModelController = ['$scope', '$exceptionHandler', '$attrs', '$element', '$parse', 
        function($scope, $exceptionHandler, $attr, $element, $parse) {
/ $scope wordt di	, WH 
    function invoke(fn, self, locals){
        args.push(
          locals && locals.hasOwnProperty(key)
->        ? locals[key]
          : getService(key)
/ $scope is de childScope	,

            this.$viewValue = Number.NaN;
...
            var ngModelGet = $parse($attr.ngModel), 
$attr.ngModel="data.message"
            ngModelSet = ngModelGet.assign;

	readIndent:
           } else {
                var getter = getterFn(ident, this.options, this.text);
                token.fn = extend(function(self, locals) { 
/ ngModelGet
                    return (getter(self, locals));
                }, {
                    assign: function(self, value) {
/ ngModelSet
                        return setter(self, ident, value, parser.text, parser.options);
/ TODO


            // model -> value
            var ctrl = this;
            
            $scope.$watch(function ngModelWatch() {
/ $scope is childScope	,
/c
                    $watch: function(watchExp, listener, objectEquality) {
/creates watcher	,
 $watch: function(watchExp, listener, objectEquality) {
                        var scope = this, 
                        get = compileToFn(watchExp, 'watch'), 
                        array = scope.$$watchers, 
                        watcher = {
                            fn: listener,
                            last: initWatchVal,
                            get: get,
                            exp: watchExp,
                            eq: !!objectEquality
                        };
/ dus get en exp zijn beide de callback die ngModelWatch heet in de $scope.$watch call	,

/////////////////////////////////
/ ng-controller en ng-model geven beide een controller	, passeren dezelfde code	,
/ de ctor's 
var ctrl=function($scope){
  $scope.data={message:"label"}
}
/ en NgModelController zijn hele andere fcts	, NgModelController installs een watcher	,

/ Intermezzo

/ in compositeLinkFn is linkFns[] uit compileNodes	, daarin zit een nodeLinkFn	, en deze heeft bijv controllerDirectives in z'n closure scope, nl uit applyDirectivesToNode	, dus applyDirectivesToNode wordt called, er wordt 'n fct obj applyDirectivesToNode create, en die maakt een nodeLinkFn obj, die wordt saved in linkFns[]	, maar dan blijft ook dat fct obj van applyDirectivesToNode saved	, 
/ In de scope van nodeLinkFn zit ook postLinkFns	, dat zijn er bij de <input ...> 2	, ngModelDirective.link, inputDirective.link	,
/ we zien zoiets voor ons	,

compositeLinkFn
	\
		\					applyDirectivesToNode
			\					/
				\			/	
				nodeLinkFn

/ Einde Intermezzo

/ we process de <input ...>	, 
/ er is geen childLinkFn in nodeLinkFn	(is 1ste param van nodeLinkFn),

        // POSTLINKING
        for(i = postLinkFns.length - 1; i >= 0; i--) {
          try {
            linkFn = postLinkFns[i];
/ link fct in ngModelDirective	,

            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);
/ 

/ de inputDirective.link fct calls 
function textInputType(scope, element, attr, ctrl, $sniffer, $browser) {
...

/ dan de {{data.message}}

/ de directive.link fct is textInterpolateLinkFn	,

    function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
      if (interpolateFn) {
        directives.push({
          priority: 0,
          compile: valueFn(function textInterpolateLinkFn(scope, node) {
->          var parent = node.parent(),
                bindings = parent.data('$binding') || [];
            bindings.push(interpolateFn);
            safeAddClass(parent.data('$binding', bindings), 'ng-binding');
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });

/ er wordt weer een watcher create	,

/ eerder was interpolateFn=
        fn = function(context) {
          try {
            for(var i = 0, ii = length, part; i<ii; i++) {
              if (typeof (part = parts[i]) == 'function') {
                part = part(context);
/ data.message
              concat[i] = part;
            return concat.join('');

/ hierna heeft scope 2 watchers 	,
scope.$$watchers=[
	{fn: noop	, exp=get=ngModelWatch}				/ ngModelWatch updates de input	 met value uit model, want door eerst ngModelGet call	,
	{fn: function interpolateFnWatchAction(value) , exp=get=interpolateFn}

/ Dan $digest	, 
/ die gaat de scopes af en gaat in elke scope  de watchers	 af	, 

        do { // "traverse the scopes" loop
            if ((watchers = current.$$watchers)) {
/ c
	ctrl=this
 $scope.$watch(function ngModelWatch() {
->    var value = ngModelGet($scope);
"label"

    // if scope model value and ngModel value are out of sync
    if (ctrl.$modelValue !== value) {

      ctrl.$modelValue = value;

      if (ctrl.$viewValue !== value) {
        ctrl.$viewValue = value;
        ctrl.$render();
      }

/ ctrl=ngModel controller	

/ SAMENVATTING 

      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
 
           controller = directive.controller;
            if (controller == '@') {
              controller = attrs[directive.name];
            }
            controllerInstance = $controller(controller, locals);

       childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn);

            linkFn = postLinkFns[i];
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);



/ 7	

/ 13	,

/ de view=DOM	,
var inputDirective = ['$browser', '$sniffer', function($browser, $sniffer) {
  return {
    link: function(scope, element, attr, ctrl) {
        (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrl, $sniffer, $browser);
/= 
function textInputType(scope, element, attr, ctrl, $sniffer, $browser) {

 	var listener = function() {
    var value = element.val();
    if (ctrl.$viewValue !== value) {
      scope.$apply(function() {
        ctrl.$setViewValue(value); 			/ DOM -> ctrl, model 
      });
    }
  element.on('change', listener);

  ctrl.$render = function() { 		/ ctrl, model->DOM, called in watcher op model

    element.val(ctrl.$isEmpty(ctrl.$viewValue) ? '' : ctrl.$viewValue);
  };

/ 13	,

/ nieuw scope=model	,
var ngControllerDirective = [
  return {
    scope: true,
    controller: '@',
}
=
/ @ Wordt vervangen door onze	,
var ctrl=function($scope){
  $scope.data={message:"label"}

/ 13	,

/ zie als de model	, = scope	, als 1 van de models, 
var ngModelDirective = function() {
  return {
    controller: NgModelController,

/ ctrl van de model=child scope	,
var NgModelController = ['$scope', '$exceptionHandler', '$attrs', '$element', '$parse', function($scope, $exceptionHandler, $attr, $element, $parse) {

  * Called when the view needs to be updated. It is expected that the user of the ng-model directive will implement this method.  */
  this.$render = noop;
/ we zien de impl in de input directive	,

  this.$setViewValue = function(value) { / DOM=view -> ctrl,model=scope
...
  var ctrl = this;
  $scope.$watch(function ngModelWatch() { 				/ model -> DOM
		        ctrl.$render();
/ $watch sets $scope.watcher={get:function ngModelWatch, fn:...TODO} , dus een watcher op de model	,
/ $watch sets $scope.watcher={get:function , ...} , dus een watcher op de model	,

/ hoe lang bestaat $scope?
/ TODO 
/ omdat $scope bestaat en dus de fct ngModelWatch, bestaat de closure fct NgModelController ook 	, dus ctrl=this indertijd ook	, dus daarom kent ngModelWatch ctrl	,

/ 13	,

function $InterpolateProvider() {
  this.$get = ['$parse', '$exceptionHandler', '$sce', function($parse, $exceptionHandler, $sce) {
    function $interpolate(text, mustHaveExpression, trustedContext) {
        fn = function(context) {
                part = part(context);
        return fn;
    return $interpolate;
  }];

function $CompileProvider($provide, $$sanitizeUriProvider) {
  this.$get = [ '$injector', '$interpolate', '$exceptionHandler', '$http', '$templateCache', '$parse', '$controller', '$rootScope', '$document', '$sce', '$animate', '$$sanitizeUri', function($injector,   $interpolate,   $exceptionHandler,   $http,   $templateCache,   $parse, $controller,   $rootScope,   $document,   $sce,   $animate,   $$sanitizeUri) { 

   function addAttrInterpolateDirective(node, directives, value, name) {
      var interpolateFn = $interpolate(text, true);
/ fn fct hierboven, met part	,
        directives.push({
/ "InterpolateDirective" 
          priority: 0,
          compile: valueFn(function textInterpolateLinkFn(scope, node) {
/= 'n postLinkFn
            var parent = node.parent(),
                bindings = parent.data('$binding') || [];
            bindings.push(interpolateFn);
            safeAddClass(parent.data('$binding', bindings), 'ng-binding');
            scope.$watch(interpolateFn, 				/ watcher.get
							function interpolateFnWatchAction(value) {	/ watcher.fn
              	node[0].nodeValue = value;
            });

/ de model watcher doet de view update via ctrl.render in de get fct	, 
/ de interpolate watcher doet in get model in part opvragen , en in fn update view	,
/ TODO

/ de "interpolateDirective" heeft een compile fct, geen link fct, de inputDirective heeft een  link fct, maar dan wordt er altijd een compile fct create, die deze link fct geeft, 
compile:function(value){
	 


/ 7	.


function $ControllerProvider() {
 this.$get = ['$injector', '$window', function($injector, $window) {
    return function(expression, locals) {
/ $controller
     instance = $injector.instantiate(expression, locals);




/ Einde SAMENVATTING 

/ 7	.

$ vi 3a/index.html

<div ng-app="">
  <input type="text" ng-model="data.message">
  <div ng-controller="ctrl">
    <input type="text" ng-model="data.message">
  </div>
  <div ng-controller="ctrl2">
    <input type="text" ng-model="data.message">
  </div>

</div>

/ we set een b in de listener fct, die inner fct is van textInputType	,

/ we edit de  

/ 7	.

/ SAMENVATTING

$ vi 3a/index.hmtl

<div ng-app="">
  <input type="text" ng-model="data.message">
  <input type="text" ng-model="data.message">
  <div ng-controller="ctrl">
    <input type="text" ng-model="data.message">
  </div>
</div>

/ 77	.

    function compileNodes(nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective, previousCompileContext) {
     var linkFns = [],
        nodeLinkFn = applyDirectivesToNode(directives, ...
        childLinkFn = compileNodes(nodeList[i].childNodes,
      return linkFnFound ? compositeLinkFn : null;
      function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) 

/ compileNodes heeft in elke local scope een nodeList: text,div,text,div,text,div,text en maakt linkFns=[null,null,function compositeLinkFn/nodeLinkFn, ...] 
/ en returns een compositeLinkFn fct obj	,met linkFns in closure fct scope	 (de closure fct is deze compileNode's  local scope	)	, 
/ maar deze compositeLinkFn staat ook in net zo'n linkFns[], nl die in die compileNodes's local scope met de nodeList waarin de parent elem staat, die als children onze nodeList heeft,	 

/ in compile	,

      var compositeLinkFn =
              compileNodes($compileNodes, transcludeFn, $compileNodes,
                           maxPriority, ignoreDirective, previousCompileContext);
      return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){

/ compositeLinkFn is returned door compileNodes, heeft daardoor access tot linkFns	,
/ nodeLinkFn is returned door applyDirectivesToNode, en daar door heeft nodeLinkFn access in closure fct scope tot postLinkFns	,

  var doBootstrap = function() {
   injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate', function(scope, element, compile, injector, animate) {
        scope.$apply(function() {
          element.data('$injector', injector);
          compile(element)
/ D
publicLink
						(scope);
 
/ Nu komt ineens de scope om de hoek kijken	, voor het eerst	, en het is de root scope	,
/ publicLink calls	,
     function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) {
 
          nodeLinkFn = linkFns[i++];
          childLinkFn = linkFns[i++];  / = (een andere )compositeLinkFn, met een andere scope	,
/ calls beide	, als ze er zijn	,


/ Einde SAMENVATTING

/ SAMENVATTING

/ het 2de arg van compositeLinkFn is altijd een list van nodes (childnodes)	,
/ eerst zet hij de scope	, dan call nodeLinkFn, en dan childLinkFn=compositeLinkFn altijd	,
/ in z'n closure scope (een van de scopes van compileNodes) is linkFns[]	, deze bestaat uit null, nodeLinkFn en compositeLinkFn, en loopt parallel met 2de arg	: voor iedere node 2 entries	,
/ de linkFns[] in nodeLinkFn komen uit de closure scope van applyDirectivesToNode	, voor ieder node werd applyDirectivesToNode called, dus iedere nodeLinkFn heeft eigen postLinkFns in closure scope (iedere call van applyDirectivesToNode heeft een eigen local scope)	,

/ 7	.

/ scope in angular is DOM-scope	, niet JavaScript-scope, waar we altijd mee te maken hebben	,
/ scope in angular is model	, waar de data in terecht komt	,

function bootstrap(element, modules) {
  var doBootstrap = function() {
    var injector = createInjector(modules);
/ D
    injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate', function(scope, element, compile, injector, animate) {
        scope.$apply(function() {
          element.data('$injector', injector);
-> 1         compile(element)(scope);

/ eerder was door $RootScopeProvider.$get $rootScope create	,

/ Dan 	,

    function compile($compileNodes, transcludeFn, maxPriority, ignoreDirective, previousCompileContext) {
      return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
-> 2       if (compositeLinkFn) compositeLinkFn(scope, $linkNode, $linkNode);

/  bij ->1 compile(element)=function publicLinkFn	,wordt called, met arg scope=$rootScope	, dus bij 2 krijgt compositeLinkFn deze ook mee	, 
/ het 2de arg van compositeLinkFn is altijd een list van child nodes, de bijbehorende linkFns[] is in de closure scope van compositeLinkFn, nl uit de scope van compileNodes, die die toen had	,

/ dan	,

     function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) {

        for(i = 0, n = 0, ii = linkFns.length; i < ii; n++) {
          node = stableNodeList[n];
          nodeLinkFn = linkFns[i++];
          childLinkFn = linkFns[i++];

          if (nodeLinkFn) {
            if (nodeLinkFn.scope) {
              childScope = scope.$new();
            } else {
              childScope = scope;

              nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);
/ het 1ste arg is childLinkFn: nodeLinkFn zal deze childLinkFn call tussen preLinkFns en postLinkFns in	,

      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
          forEach(controllerDirectives, function(directive) {
/ ngModel
/ de input directive heeft geen controller attr, de ngModelDirective wel	,

            var locals = {
              $scope: directive === newIsolateScopeDirective || directive.$$isolateScope ? isolateScope : scope,

            controller = directive.controller;
            controllerInstance = $controller(controller, locals);
/ $controller is fct returned door $ControllerProvider.$get	,
/c
      instance = $injector.instantiate(expression, locals);

/ expression=function NgModelController	, is een ctor en gewoon een fct, maakt fcts , die de dubbele binding doen	, 
/ $setViewValue	, die value uit DOM elem -> model (scope)	,
/ modelWatch	, die van model -> DOM elem	,

/ hoe krijgt de scope	?
/ er staat	,
var NgModelController = ['$scope', '$exceptionHandler', '$attrs', '$element', '$parse', function($scope, $exceptionHandler, $attr, $element, $parse) {
  $scope.$watch(function ngModelWatch() {
    var value = ngModelGet($scope);

/ $scope moet di	, $scope komt uit locals hierboven,	 en niet uit de instanceCachee, want invoke doet	,
        args.push(
          locals && locals.hasOwnProperty(key)
->          ? locals[key]
          : getService(key)

/ Ook $attrs en $element komen uit locals	,

/ de fcts	,
/ de link fct van de input directive sets listener op DOM element	, die	,
   if (ctrl.$viewValue !== value) {
      scope.$apply(function() {
        ctrl.$setViewValue(value);

/ het staat er gewoon: scope.$apply, en scope is model	,
/ TODO (Scope.prototype.$apply)	,

/ de link fct van de input directive zegt ook wat de $render fct van de scope controller, ngModel	, moet doen	,
 ctrl.$render = function() {
    element.val(ctrl.$isEmpty(ctrl.$viewValue) ? '' : ctrl.$viewValue);
 
/ Wat doet NgModelController	?
/ Het is een ctor, maar ook gewoon een fct	,

  this.$render = noop;
/ Klopt, de input directive's link fct zegt wat deze fct moet doen	, 

/ value uit DOM input -> scope
 this.$setViewValue = function(value) {
    this.$viewValue = value;
    if (this.$modelValue !== value) {
      this.$modelValue = value;
      ngModelSet($scope, value);

/ scope value -> DOM elem,	 scope.$watch wordt called in scope.$digest, 
  var ctrl = this;
  $scope.$watch(function ngModelWatch() {
    var value = ngModelGet($scope);
      if (ctrl.$viewValue !== value) {
        ctrl.$viewValue = value;
        ctrl.$render();

/ 13	,

/ als we 2 inputs hebben in dezelfde scope, zijn er 2 scope ctlrs, die in dezelfde scope write/get (dubbele binding)	,

/ 13	. 

/ de model directive heeft attr controller, is OK, maar heeft ook een link fct	, die is TODO
/ de input directive heeft een link fct, die is OK	, set dubbele binding op	,

/ 13	.
/ t in nodeLinkFn	

           controllerInstance = $controller(controller, locals);
           elementControllers[directive.name] = controllerInstance;

/ onze model controller is voor de link fcts uit de directives, ze worden saved in de local elementControllers van nodeLinkFn, en gegeven aan de link fct hieronder	, samen met de scope	, dan wordt in de link fct van input directive de dubbele binding create	,	

       childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn);

       for(i = postLinkFns.length - 1; i >= 0; i--) {
            linkFn = postLinkFns[i];
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);

/ 13	. 

function textInputType(scope, element, attr, ctrl, $sniffer, $browser) {
   var listener = function() {
     scope.$apply(function() {
        ctrl.$setViewValue(value);


/ textInputType is in feite de link fct van de input dir, en die krijgt de scope mee vanuit nodeLinkFn, die de scope krijgt van compositeLinkFn	, die de scope bepaalt van iedere node uit de list ( compositeLinkFn heeft list van (child) nodes, en bijbehorende linkFns[]	,  

 /we zien dat de scope die is meegegeven blijft alive in de closure scope van listener ( die wordt register met .on op het element)	,

/ 13. 

/ t in compositeLinkFn, met de list van (children) nodes	,

 <div ng-controller="ctrl">

            if (nodeLinkFn.scope) {
/ JA
              childScope = scope.$new();
           } else {
/ NEE
              childScope = scope;

/ Bij volgende elem uit deze node list (niet de children van deze node)	, zal straks childScope= een ander nieuwe scope, of de huidige scope  , en zo is deze nieuwe scope uit beeld	,

              nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);
/ het 1ste arg is childLinkFn: nodeLinkFn zal deze childLinkFn call tussen preLinkFns en postLinkFns in	,

            controller = directive.controller;
            if (controller == '@') {
/ JA, bij ng-controller	,
              controller = attrs[directive.name];
/ "ctrl" bij ons	, dus nu geen fct, NgModelController zoals bij de scope controller	, 

/ en 	,
/ nodeLinkfct is in applyDirectivesToNode	 (en heeft dus bijv postLinkFn)	, maar applyDirectivesToNode is het die nodeLinkFn.scope set	,

       if (directiveValue = directive.scope) {
          newScopeDirective = newScopeDirective || directive;
     nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;

/ en 
var ngControllerDirective = [function() {
  return {
    scope: true,
    controller: '@',
 
/ dus als we ng-controller als attr, wordt er een new scope create	, 

/t
              nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);
            controllerInstance = $controller(controller, locals);
controller="ctrl"
        expression =
            : getter(locals.$scope, constructor, true) || getter($window, constructor, true);
/ hij kan in de child scope zitten of een global?
/ TODO
/ expression=fct die we zelf program	,
      instance = $injector.instantiate(expression, locals);
->var ctrl=function($scope){
  $scope.fct=function(){
    var b=false
    return "fct"
  }
/ en invoke 	,
      return fn.apply(self, args);
/ self is ngcontroller:new Constructor, blijft hier leeg, maar de 1ste child scope krijgt fct als prop	,

/ we zijn nog in nodeLinkFn van deze div	,
 <div ng-controller="ctrl">
    <input type="text" ng-model="data.message">
  </div>
/ maar er is ook een childLinkFn='n compositeLinkFn fct obj	, met een local scope en closure scope (een van de local scopes van compileNodes, waarin de linkFns[] is die parallel loopt aan list van (child) nodes	, hier 3 : text, input, text	,

        childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn);

/ 7	.

/ parse ng-model="data.message" en {{data.message}}	,

/ In 1/index.html	,

  <h1>{{data.message}}</h1>

/ readIdent betekent read identifier

/ in compileNodes	, nodeList is list van (child) nodes	, is text,input,text,h1,text , maar h1 heeft geen directives	, heeft 1 child	, calls	, 
/ compileNodes	, nodeList is list van (child) nodes	, is alleen text	, {data.message}},  calls	,
/ collectDirectives	,
     var nodeType = node.nodeType,	
		switch(nodeType){
        case 3: /* Text Node */
          addTextInterpolateDirective(directives, node.nodeValue);
/c
    function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
/c
          parts.push(fn = $parse(exp = text.substring(startIndex + startSymbolLength, endIndex)));
/c
/ we komen in een anon fct, returned door $ParseProvider.$get	,
          var lexer = new Lexer($parseOptions);
          var parser = new Parser(lexer, $filter, $parseOptions);
          parsedExpression = parser.parse(exp, false);
exp="data.message"	,
/c
Parser.prototype = {
  parse: function (text, json) {
    this.tokens = this.lexer.lex(text);
/c
Lexer.prototype = {
  lex: function (text) {
      } else if (this.isIdent(this.ch)) {
        this.readIdent();
/c
  readIdent: function() {
    } else {
      var getter = getterFn(ident, this.options, this.text);
ident="data.message"
     }, {
        assign: function(self, value) {
          return setter(self, ident, value, parser.text, parser.options);
        }
      });
/ setter is een helper fct, is al klaar, getter moet created door getterFn	,
/c
function getterFn(path, options, fullExp) {
  } else {
    var code = 'var l, fn, p;\n';
...
code: "var l, fn, p;↵if(s === null || s === undefined) return s;↵l=s;↵s=((k&&k.hasOwnProperty("data"))?k:s)["data"];↵if(s === null || s === undefined) return s;↵l=s;↵s=s["message"];↵return s;"

    var evaledFnGetter = new Function('s', 'k', 'pw', code); // s=scope, k=locals, pw=promiseWarning
/ code is een string, de body van wat een fct moet worden	, deze fct maken we hier, we geven eerst de args	,
  
    fn = function(scope, locals) {
      return evaledFnGetter(scope, locals, promiseWarning);
    };
  return fn;
/ dit wordt getter 	,

/t
  readIdent: function() {
      var getter = getterFn(ident, this.options, this.text);
/D
/ getter=
    function(scope, locals) {
      return evaledFnGetter(scope, locals, promiseWarning);
    };

      token.fn = extend(function(self, locals) {
        return (getter(self, locals));
      }, {
        assign: function(self, value) {
          return setter(self, ident, value, parser.text, parser.options);
        }
      });
/ D

	this.tokens.push(token)


/t

Lexer.prototype = {
  constructor: Lexer,

  lex: function (text) {
    this.tokens = [];
        this.readIdent();
/ D
    return this.tokens;

/t
Parser.prototype = {
  parse: function (text, json) {
    this.tokens = this.lexer.lex(text);
Array[1]

    var value = json ? this.primary() : this.statements();
/ token.fn hierboven , en tokens[] is leeg	, want	,
/c
  statements: function() {
    var statements = [];
    statements.push(this.filterChain());
/c
  filterChain: function() {
    var left = this.expression();
/c
...
  primary: function () {
      var token = this.expect();
      primary = token.fn;
/c
 expect: function(e1, e2, e3, e4){
      this.tokens.shift();
/ Haalt 'm van de tokens[] af	,
      return token;

/ t 
    statements.push(this.filterChain());
/ statements=[token.fn]
	return statements[0]

/t
Parser.prototype = {
  parse: function (text, json) {
    var value = json ? this.primary() : this.statements();
/D
/ token.fn fct
	return value

/t
function $ParseProvider() {
 this.$get = ['$filter', '$sniffer', '$log', function($filter, $sniffer, $log) {
    return function(exp) {
         parsedExpression = parser.parse(exp, false);
/ token.fn fct	,
	return parsedExpression

/ t
    function $interpolate(text, mustHaveExpression, trustedContext) {
          parts.push(fn = $parse(exp = text.substring(startIndex + startSymbolLength, endIndex)));

        fn = function(context) {
...
                part = part(context);
...
        fn.parts = parts;
		return fn

/t
    function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
/D
/ interpolateFn is 
        fn = function(context) {
...
                part = part(context);
/en heeft .parts, en parts[0]=token.fn boven	,

     if (interpolateFn) {
        directives.push({
          priority: 0,
          compile: valueFn(function textInterpolateLinkFn(scope, node) {
/Hier komen we later	,
            var parent = node.parent(),
                bindings = parent.data('$binding') || [];
            bindings.push(interpolateFn);
            safeAddClass(parent.data('$binding', bindings), 'ng-binding');
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
/s
      $watch: function(watchExp, listener, objectEquality) {
        var scope = this,
            get = compileToFn(watchExp, 'watch'),
            array = scope.$$watchers,
            watcher = {
              fn: listener,
              last: initWatchVal,
              get: get,
              exp: watchExp,
              eq: !!objectEquality
            };
/ Dus interpolateFn wordt watcher.get	, en watcher.fn=interpolateFnWatchAction	,
 en deze fcts worden later bij scope.$digest called,	

        array = scope.$$watchers = [];
        array.unshift(watcher);

/ later tijdens process compiled 	, 

var NgModelController = ['$scope', '$exceptionHandler', '$attrs', '$element', '$parse',
    function($scope, $exceptionHandler, $attr, $element, $parse) {
  var ngModelGet = $parse($attr.ngModel),
      ngModelSet = ngModelGet.assign;

/ SAMENVATTING

/ In compile, compileNodes, in collectDirectives, in addTextInterpolateDirective	, in $interpolate
     token.fn = extend(function(self, locals) {
        return (getter(self, locals));
/ getter=
  fn = function(scope, locals) {
      return evaledFnGetter(scope, locals, promiseWarning);
    };
/evaledFnGetter=function, die code de gen string was	,

/ In link fct create, in compositeLinkFn	, in NgModelController ,
  var ngModelGet = $parse($attr.ngModel),
$attr.ngModel="data.message"
/ $interpolate calls ook $parse	,
/s
function $ParseProvider
  this.$get = ['$filter', '$sniffer', '$log', function($filter, $sniffer, $log) {
    return function(exp) {		/ = $parse	,

      switch (typeof exp) {
        case 'string':
          if (cache.hasOwnProperty(exp)) {
/ JA, via $interpolateFn	,
            return cache[exp];
/ cache["data.message"]=function(self, locals) {
        return (getter(self, locals));
}

/ we keren terug naar	,
Lexer.prototype.readIdent
    token.fn = extend(function(self, locals) {
        return (getter(self, locals));
      }, {
        assign: function(self, value) {
          return setter(self, ident, value, parser.text, parser.options);


/ Einde SAMENVATTING

/ 7	.

/ we geven een char in de text field	,

function textInputType(scope, element, attr, ctrl, $sniffer, $browser) {
  var listener = function() {
    var value = element.val();
   if (ctrl.$viewValue !== value) {
      scope.$apply(function() {
        ctrl.$setViewValue(value);

/ wat is scope.$apply	? Hij calls de fct	,
/ we moeten inderdaad in de scope write	,
/c
          return this.$eval(expr);
/c
        return $parse(expr)(this, locals);
/c
function $ParseProvider
  this.$get = ['$filter', '$sniffer', '$log', function($filter, $sniffer, $log) {
   return function(exp) {
      switch (typeof exp) {
       case 'function':
          return exp;
/ =
function() {
        ctrl.$setViewValue(value);

/ en dan wordt deze fct exec	,




/ Einde SAMENVATTING


                 








 






/ Einde DEBUG ANGULAR

/ DEBUG ANGULAR SERVICE & DI

$ vi 4a/index.html

<div ng-app="app">
  <div ng-controller="ctrl">
    <input type="text" ng-model="data.message">
    <h1>{{data.message}}</h1>
  </div>
  <div ng-controller="ctrl2">
    <input type="text" ng-model="data.message">
    <h1>{{data.message}}</h1>
  </div>
</div>

$ vi 4a/script.js

var app=angular.module("app",[])
app.factory("Data",function(){
  return{message:"I'm from a service"}
})
var ctrl=function($scope,Data){
  $scope.data=Data
}
var ctrl2=function($scope,Data){
  $scope.data=Data
}

/ er zijn 2 factory fct	,
providerCache.$provide.factory
...

/ 7	.

var app=angular.module("app",[])

function setupModuleLoader(window) {
 return ensure(angular, 'module', function() {
    var modules = {};
/ ngLocal, ng
    return function module(name, requires, configFn) { /=angular.module fct	,
->      return ensure(modules, name, function() {
name="app"
        var moduleInstance = {
...
        };
        return  moduleInstance;
/ app

/ in de scope var modules is nu ngLocal, ng, app	,

app.factory("Data",function(){
	return{message:"I'm from a service"}

/ 7	.
/ SAMENVATTING 

/ 1
app.factory("Data",function(){
	return{message:"I'm from a service"}
})

/ alle module fct, zoals .factory, .provide zijn posts op module._invokeQueue
/ loadModules processes deze queue	,


function createInjector(modulesToLoad) {

     providerCache = {
        $provide: {
            provider: supportObject(provider),
            factory: supportObject(factory),
...

/ 3	.
  function factory(name, factoryFn) { return provider(name, { $get: factoryFn }); }
/ factory maakt direct de provider met een $get fct, alleen zonder di's,	 dus geen $injector.instantiate	,
 function provider(name, provider_) { 	/ provider_ is een ctor	, {this.$get=function(){...}}
	if(provider_ is function)
      provider_ = providerInjector.instantiate(provider_);

/ 2
  function loadModules(modulesToLoad){
          for(invokeQueue = moduleFn._invokeQueue, i = 0, ii = invokeQueue.length; i < ii; i++) {
            var invokeArgs = invokeQueue[i],
{"$provide","factory",Arguments("Data",function(){...})
/ result van onze app.factory("Data",function(){...})

                provider = providerInjector.get(invokeArgs[0]);
/ resolve	,
$provide obj	, let op invokeArgs[0] is een string, "$provide"	,
/ de fcts van providerInjector halen de cache uit z'n closure scope ; dat is JS, en het is dus niet zo dat omdat de inj ook providerCache.$injector is en dat dan via this de cache gevonden wordt	, 
/ want er is gedaan	,
     providerInjector = (providerCache.$injector =
          createInternalInjector(providerCache, function() {
...
  function createInternalInjector(cache, factory) {
    function getService(serviceName) {
...
    return {							/ providerInjector	,	 = providerCache.$injector	,
      get: getService,
...
/ NB. providerCache.$provide was direct def, 


            provider[invokeArgs[1]].apply(provider, invokeArgs[2]);
$provide.factory op "Data", function(){...}


/ providerInjector == providerCache.$injector

/ providerCache.$provide  heeft provider, factory fcts	; ze maken providers, 	 dat zijn objs met een $get, provider heeft als arg een ctor=function(){this.$get=...}, factory maakt de provider obj direct	, 

/ de $get fct heeft allerlei annot, die later, niet hier, door de $injector.invoke worden di in de local scope van $get, en dus die in de closure scope zijn van inner fcts	,
/ providerCache.$injector heeft invoke, getService fcts; invoke di de annots	, en en invokes $get fct van de provider	, 

/ 13	.

		$provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
         function($injector, $exceptionHandler) {

/ de provider fct kan ook args hebben , use dan []	,


/ Einde SAMENVATTING 

/ we deden	,
app.factory("Data",function(){
	return{message:"I'm from a service"}

/ providerCache.$provide.factory maakt een provider onder key "DataProvider" in de providerCache	, 
{$get:function(){
	  return{message:"I'm from a service"}
}

/ t
function bootstrap(element, modules) {
  var doBootstrap = function() {
    var injector = createInjector(modules);
///////////////////////////////
/ returns instanceInjector, 
/ calls loadModules op alle modules	, die alle providers create	,

/ ook	,
function createInjector(modulesToLoad) {
     instanceInjector = (instanceCache.$injector =
          createInternalInjector(instanceCache, function(servicename) {
            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);

/ het 2de arg van createInternalInjector is de factory, deze wordt called in instanceCache.$injector.getService	, als de service nog niet in de instanceCache	,

/ 7	.

   var injector = createInjector(modules);
    injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate', function(scope, element, compile, injector, animate) {
        scope.$apply(function() {
          element.data('$injector', injector);
          compile(element)(scope);

/ de providers van $rootScope , ... zijn er , $rootScope, ... nog niet	,


/ 7	.

/ In compile, link fase, wordt in nodeLinkFn op
  <div ng-controller="ctrl">
 / de controller create	,

          forEach(controllerDirectives, function(directive) {
            var locals = {
              $scope: ...
							...
            }, controllerInstance;
            controllerInstance = $controller(controller, locals);
/c
      instance = $injector.instantiate(expression, locals);
expression=function($scope,Data){
  $scope.data=Data
}
/ dus eerst moeten $scope en  Data di	,
/ er staat in de code	,
var ctrl=function($scope,Data){
/ de fct invoke wordt called, want er moet een controller obj create, 
  function invoke(fn, self, locals){
          $inject = annotate(fn),
$inject: Array[2]
0: "$scope"
1: "Data"
/ Dus annotate maakt 2 string , waaronder "Data"	, daamee wordt de key "DataProvider" gemaakt voor in de providerCache	,

/ $injector.instantiate heeft cache, factory in closure scope	,
  function createInternalInjector(cache, factory) {
    function instantiate(Type, locals) {

/ "$scope" is in locals	,
/ "Data" moet resolved	, via $injector.getService	,
  function createInternalInjector(cache, factory) {
    function getService(serviceName) { 
          return cache[serviceName] = factory(serviceName);
/ (*)
/ via closure scope is de factory	,
            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
/ provider is 
{
		$get:function(){
	  	return{message:"I'm from a service"}
		}
}
/ Dus wordt {message:"I'm from a service"} wordt return	,
/ dan terug bij (*)	in getService: instanceCache["Data"]={message:"I'm from a service"}
/ maar dan terug in invoke	,

        args.push(
          locals && locals.hasOwnProperty(key)
          ? locals[key]
          : getService(key)
        )
      	return fn.apply(self, args);
/ args=[child scope, {message:"I'm from a service"}

/ Dus getService geeft resolved obj aan invoke, die hem in args set, maar getService set ook achter key "Data" in instanceCache	,

/ Dan wordt called de controller ctor,	
var ctrl=function($scope,Data){
	$scope.data=Data
}
/ Het is niet echt een ctor, dus de controller, het Constructor obj krijgt geen attrs via this	, het side effect is dat in $scope  data attr wordt set	,


/ 7	.

/ we zien bij compile, compile fase	, dat de dir's compile fct wordt exec, en dat het result de link fct is die in linkFns[] komt	,

    function applyDirectivesToNode(directives, compileNode, templateAttrs, transcludeFn, jqCollection, originalReplaceDirective, preLinkFns, postLinkFns, previousCompileContext) { 
       } else if (directive.compile) {
            linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
              addLinkFns(null, linkFn, attrStart, attrEnd);

/ Dit zien we bijv bij {{data.message}}	,
/ de compile fase ziet de {{ en maakt die getterFn fct	, met die code waarin data en message voorkomen	,


/ de link fct is dus	textInterpolateLinkFn , want dat is het result van exec de compile fct	,

    function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
        directives.push({
          priority: 0,
          compile: valueFn(function textInterpolateLinkFn(scope, node) {
            var parent = node.parent(),
                bindings = parent.data('$binding') || [];
            bindings.push(interpolateFn);
            safeAddClass(parent.data('$binding', bindings), 'ng-binding');
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });

/ we zien ook dat scope.$watch wordt called, met get en fn fcts als args	, en zo werkt het dus: $digest calls alle watchers, en de text {{data.message}} wordt vervangen door iets anders,	evt ""	, maar hier door "I'm from a service"	, want de controller ctor had set	, 
	scope.data={message:"I'm from a service"} 
/ en dat pakt de code in de getterFn fct 	,

/ 7	.

/ SAMENVATTING

 <div ng-controller="ctrl">
    <input type="text" ng-model="data.message">
    <h1>{{data.message}}</h1>

/ steeds in een nodeLinkFn (bij de node)	,
/ nodeLinkFn maakt eerst ctrl's , en daarna calls linkFn's, want deze krijgen eventueel de ctrl's mee	,
/ op de 1ste is een ngControllerDirective en wordt een controller create,  en link fct uses controller eig niet TODO
/ op de 2de is er een ngModelDirective en wordt een controller create, en daarna de  fct ? , en is er een inputDirective en wordt vervolgens  de link fct textInputType called (die de controller meekrijgt),
/ op de 3de is er een interpolate directive, en wordt de link fct textInterpolateLinkFn called	,

      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
          forEach(controllerDirectives, function(directive) {
            var locals = {
              $scope: directive === newIsolateScopeDirective || directive.$$isolateScope ? isolateScope : scope,
              $element: $element,
              $attrs: attrs,
              $transclude: transcludeFn
            }, controllerInstance;
            controller = directive.controller;
            if (controller == '@') {
              controller = attrs[directive.name];
            }
            controllerInstance = $controller(controller, locals);
            elementControllers[directive.name] = controllerInstance;
...
            linkFn = postLinkFns[i];
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);
/ getControllers is de ctrl die zojuist is create	,



var ngModelDirective = function() {	
  return {
    require: ['ngModel', '^?form'],
    controller: NgModelController,
    link: function(scope, element, attr, ctrls) {

var ngControllerDirective = [function() {
  return {
    scope: true,
    controller: '@',			/ later "ctrl"/ "ctrl2"	,
    priority: 500
  };
}];

var inputDirective = ['$browser', '$sniffer', function($browser, $sniffer) {
  return {
    link: function(scope, element, attr, ctrl) {
        (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrl, $sniffer, $browser);
/=
function textInputType(scope, element, attr, ctrl, $sniffer, $browser) {
  var listener = function() {
 		scope.$apply(function() {
        ctrl.$setViewValue(value);
	}
	element.on('change', listener);
	ctrl.$render = function() {
    element.val(ctrl.$isEmpty(ctrl.$viewValue) ? '' : ctrl.$viewValue);
  };
/ ctrl.render wordt called in ngModelWatch	, def in NgModelController	, 
/ WH hier def omdat element wordt gevonden in closure scope	,

/ called in link fase van compile	, in nodeLinkFn, 
var NgModelController = ['$scope', '$exceptionHandler', '$attrs', '$element', '$parse', function($scope, $exceptionHandler, $attr, $element, $parse) {
...
  this.$setViewValue = function(value) {
      ngModelSet($scope, value);
	}
  var ctrl = this;
  $scope.$watch(function ngModelWatch() {	/ update me (DOM elem, input, haalt render uit de closure scope =local scope textInputType	, hierboven )
        ctrl.$render();


   function addTextInterpolateDirective(directives, text) {
          compile: valueFn(function textInterpolateLinkFn(scope, node) {
...
/ called in link fase van compile	,
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
			/ update me (dit DOM elem, text, haalt uit closure scope = local scope van textInterpolateLinkFn)
              node[0].nodeValue = value;

/ input dir: DOM elem input->model
/ model dir in input , interpolate dir in text: model-> DOM elem, input/text

/ Einde SAMENVATTING

/ 7	.

/ annotate	,

/ we hebben	,
var ctrl=function($scope,Data){
  $scope.data=Data
}
/ Hoe naar "$scope","Data"	?


    function invoke(fn, self, locals){
      var args = [],
          $inject = annotate(fn),
$inject=["$scope","Data"]

/ Hoe doet annotate dat? Met regexps	,

     if (fn.length) {
2
        fnText = fn.toString().replace(STRIP_COMMENTS, '');
fnText: "function ($scope,Data){↵	$scope.data=Data↵}"
        argDecl = fnText.match(FN_ARGS);
FN_ARGS: /^function\s*[^\(]*\(\s*([^\)]*)\)/m
argDecl: Array[2]
0: "function ($scope,Data)"
1: "$scope,Data"
index: 0

/ oef	,
"function foo(bar,baz)".match(/^function\s*[^(]*\(\s*([^)]*)\)/)
["function foo(bar,baz)", "bar,baz"]
/ In FN_ARGS staat ook nog \ in [], 
/ TODO

       forEach(argDecl[1].split(FN_ARG_SPLIT), function(arg){
/ arg="$scope"/"Data"
          arg.replace(FN_ARG, function(all, underscore, name){
            $inject.push(name);
/ name="$scope"/"Data"
          });

FN_ARG_SPLIT: /,/
FN_ARG: /^\s*(_?)(\S+?)\1\s*$/
/ TODO

/ Einde DEBUG ANGULAR SERVICE & DI

/ DEBUG ANGULAR SCOPE FCT 
/ 7	. 

/ eerst scope fct	,

$ vi 5a.html

<div ng-app="app">
  <div ng-controller="ctrl">
    <input type="text" ng-model="data.message">
  </div>
  <div ng-controller="ctrl2">
    <h1>{{reverseMessage()}}</h1>
  </div>
</div>

$ vi 5a/script.js

var app=angular.module("app",[])
app.factory("Data",function(){
  return{message:"I'm from a service"}
})
var ctrl=function($scope,Data){
  $scope.data=Data
}
var ctrl2=function($scope,Data){
  $scope.data=Data
  $scope.reverseMessage=function(){
    return $scope.data.message.split("").reverse().join("")
  }
}

/ we zien in de text input 
I'm from a service

/ we zien in de text
ecivres a morf m'I

/ 7	.

/ Debug	,

    function $interpolate(text, mustHaveExpression, trustedContext) {
          parts.push(fn = $parse(exp = text.substring(startIndex + startSymbolLength, endIndex)));
/s
...
/ we komen in Lexer.prototype.readIdent	,
 readIdent: function() { 

 lex: function (text) {
    while (this.index < this.text.length) {
        this.readIdent();

/ in deze while loop leest hij reversedMessage	, 
/ in de volgende while loop ()	, 

    } else {
      var getter = getterFn(ident, this.options, this.text);
ident="reverseMessage"

/ gaat weer code maken	,

code: "var l, fn, p;↵if(s === null || s === undefined) return s;↵l=s;↵s=((k&&k.hasOwnProperty("reverseMessage"))?k:s)["reverseMessage"];↵return s;"

var l, fn, p
if(s === null || s === undefined) return s
l=s
s=((k&&k.hasOwnProperty("reverseMessage"))?k:s)["reverseMessage"]
return s

    var evaledFnGetter = new Function('s', 'k', 'pw', code); // s=scope, k=locals, pw=promiseWarning
    fn = function(scope, locals) {
      return evaledFnGetter(scope, locals, promiseWarning);
    };
		return fn

/t
    while (this.index < this.text.length) {
/ volgende while loop	,
      this.ch = this.text.charAt(this.index);
(
      } else if (this.is('(){}[].,;:?')) {
        this.tokens.push({
          index: this.index,
          text: this.ch,
          json: (this.was(':[,') && this.is('{[')) || this.is('}]:,')
        });
/ volgende while loop	,
      this.ch = this.text.charAt(this.index);
)
      } else if (this.is('(){}[].,;:?')) {
        this.tokens.push({
          index: this.index,
          text: this.ch,
          json: (this.was(':[,') && this.is('{[')) || this.is('}]:,')
        });

this.
tokens: Array[3]
0: Object
fn: function (self, locals) {
index: 0
text: "reverseMessage"
__proto__: Object
1: Object
index: 14
json: false
text: "("
__proto__: Object
2: Object
index: 15
json: false
text: ")"	

/t
Parser.prototype = {
  parse: function (text, json) {
   var value = json ? this.primary() : this.statements();
/ via statements toch in
  primary: function () {
    } else {
      var token = this.expect();
/ fn=
function (self, locals) {
        return (getter(self, locals));
      }
      primary = token.fn;

    while ((next = this.expect('(', '[', '.'))) {
      if (next.text === '(') {
        primary = this.functionCall(primary, context);
/s
  functionCall: function(fn, contextGetter) {
    var parser = this;
    return function(scope, locals) {
/ (*)
     var fnPtr = fn(scope, locals, context) || noop;
/ fn  in closure scope	, 

/t
        primary = this.functionCall(primary, context);
/ D

/t
  statements: function() {
    var statements = [];
        statements.push(this.filterChain());
/D
        return (statements.length === 1)
            ? statements[0]
/ t
Parser.prototype = {
  parse: function (text, json) {
    var value = json ? this.primary() : this.statements();
/ D
    return value;

/t
function $ParseProvider() {
  this.$get = ['$filter', '$sniffer', '$log', function($filter, $sniffer, $log) {
    return function(exp) {
/= $parse

         parsedExpression = parser.parse(exp, false);
/D
          return parsedExpression;

/t
   function $interpolate(text, mustHaveExpression, trustedContext) {
          parts.push(fn = $parse(exp = text.substring(startIndex + startSymbolLength, endIndex)));
/ D
        fn = function(context) {
          try {
            for(var i = 0, ii = length, part; i<ii; i++) {
              if (typeof (part = parts[i]) == 'function') {
                part = part(context);
					...
				return fn

/t
    function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
/ D
        directives.push({
          compile: valueFn(function textInterpolateLinkFn(scope, node) {
...
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });
    
/ 7	.   

/ de link fct van de interpolate dir had een watcher set on de scope	,

      $digest: function() {

         traverseScopesLoop:
          do { // "traverse the scopes" loop
            if ((watchers = current.$$watchers)) {
                  watch = watchers[length];
                    if ((value = watch.get(current)) !== (last = watch.last) &&
/ calls fn	,
/s
function $InterpolateProvider() {
  this.$get = ['$parse', '$exceptionHandler', '$sce', function($parse, $exceptionHandler, $sce) {
    function $interpolate(text, mustHaveExpression, trustedContext) {
->     fn = function(context) {
          try {
            for(var i = 0, ii = length, part; i<ii; i++) {
              if (typeof (part = parts[i]) == 'function') {
  ->              part = part(context);
/ s
Parser.prototype = {
->  functionCall: function(fn, contextGetter) {
      var context = contextGetter ? contextGetter(scope, locals) : scope;
scope
      var fnPtr = fn(scope, locals, context) || noop;
/s
      token.fn = extend(function(self, locals) {
        return (getter(self, locals));
/s
...
(function(s,k,pw
/**/) {
var l, fn, p;
if(s === null || s === undefined) return s;
l=s;
s=((k&&k.hasOwnProperty("reverseMessage"))?k:s)["reverseMessage"];
return s;
/ =
function(){
    return $scope.data.message.split("").reverse().join("")
  }

})

/t
      var fnPtr = fn(scope, locals, context) || noop;
/ D
function(){
    return $scope.data.message.split("").reverse().join("")
  }

     var v = fnPtr.apply
            ? fnPtr.apply(context, args)
/s
	$scope.reverseMessage=function(){
->		return $scope.data.message.split("").reverse().join("")

/ 7	. 

/ $ vi 5a.html

<div ng-app="app">
  <div ng-controller="ctrl">
    <input type="text" ng-model="data.message">
  </div>
  <div ng-controller="ctrl2">
    <h1>{{reverseMessage2(data.message)}}</h1>
  </div>

</div>

$ vi 5a/script.js

app.controller("ctrl2",function($scope,Data){
  $scope.data=Data
  $scope.reverseMessage2=function(m){
    return m.split("").reverse().join("")
  }
})

/ we komen in	,
Parser.prototype = {
  parse: function (text, json) {
text: "reverseMessage2(data.message)"

    this.tokens = this.lexer.lex(text);
tokens: Array[4]

0: Object
fn: function (self, locals) {
index: 0
text: "reverseMessage2"

1: Object
index: 15
json: false
text: "("

2: Object
fn: function (self, locals) {
index: 16
text: "data.message"

3: Object
index: 28
json: false
text: ")"

    var value = json ? this.primary() : this.statements();
this: Parser
/s
...
  primary: function () {
      var token = this.expect();
/s
  expect: function(e1, e2, e3, e4){
    var token = this.peek(e1, e2, e3, e4);
    this.tokens.shift();

/t
  primary: function () {
      var token = this.expect();
/ D
token: Object
fn: function (self, locals) {
	return (getter(self, locals));
}
text: "reverseMessage2"

      primary = token.fn;
    while ((next = this.expect('(', '[', '.'))) {
/s
 expect: function(e1, e2, e3, e4){
    var token = this.peek(e1, e2, e3, e4);
/ Klopt	, het 2de token.text="("	,
    this.tokens.shift();

/t
  primary: function () {
    while ((next = this.expect('(', '[', '.'))) {
/D
      if (next.text === '(') {
/ JA
        primary = this.functionCall(primary, context);
/s
  functionCall: function(fn, contextGetter) {
    var argsFn = [];
    if (this.peekToken().text !== ')') {
/ JA
      do {
        argsFn.push(this.expression());
      } while (this.expect(','));
/s
  expression: function() {
...
/ beginnen helemaal opnieuw	,
...
/s
  primary: function () {
      var token = this.expect();
/s
  expect: function(e1, e2, e3, e4){
    var token = this.peek(e1, e2, e3, e4);
    this.tokens.shift();
token: Object
fn: function (self, locals) {
index: 16
text: "data.message"

/t
  primary: function () {
      var token = this.expect();
/ D
      primary = token.fn;
    while ((next = this.expect('(', '[', '.'))) {
/ NEE
	    return primary;

...
/t
  functionCall: function(fn, contextGetter) {
    var argsFn = [];
    if (this.peekToken().text !== ')') {
      do {
        argsFn.push(this.expression());
/ D
      } while (this.expect(','));
/s
  expect: function(e1, e2, e3, e4){
    var token = this.peek(e1, e2, e3, e4);
false 
/ want het token wat er nog is is "(", geen ","	,

/t
  functionCall: function(fn, contextGetter) {
/ Dus geen while loop meer	,
    this.consume(')');
   var parser = this;
    return function(scope, locals) {
/ (*)

/t
  filterChain: function() {
    var left = this.expression();
/ D
/ fct (*)	,

/t
  statements: function() {
    var statements = [];
        statements.push(this.filterChain());
/ D
        return (statements.length === 1)
            ? statements[0]

/t
Parser.prototype = {
  parse: function (text, json) {
   var value = json ? this.primary() : this.statements();
/ D
/ fct bij (*)	,

/t
/ in $parse	, is $ParseProvider.$get(...)	,
         var lexer = new Lexer($parseOptions);
          var parser = new Parser(lexer, $filter, $parseOptions);
          parsedExpression = parser.parse(exp, false);
          return parsedExpression;

/t
   function $interpolate(text, mustHaveExpression, trustedContext) {
          parts.push(fn = $parse(exp = text.substring(startIndex + startSymbolLength, endIndex)));
/D
/ fct bij (*)

        fn = function(context) {
...
                part = part(context);

				return fn

/ Later, 
	            $rootScope.$digest();
/dus scope=model->DOM 
/s
          do { // "traverse the scopes" loop
            if ((watchers = current.$$watchers)) {
/ current is een scope=model, en watcher : scope->DOM
              while (length--) {
                  watch = watchers[length];
                    if ((value = watch.get(current)) !== (last = watch.last) &&
/ current is child scope	,
/s
    function $interpolate(text, mustHaveExpression, trustedContext) {
        fn = function(context) {
                part = part(context);
/ = (*) fct, 	is parsed result van "reversedMessage2(data.message)"	,
				return fn
/ = (**)

   function addTextInterpolateDirective(directives, text) { 
      var interpolateFn = $interpolate(text, true);
/ = (**)
...
         scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });
          })
/ Dus (**) wordt de get fct van de watcher op een scope	,  in dit geval een child scope	,
/ Maar (**) calls (*)	,
   var argsFn = [];
    var parser = this;
    return function(scope, locals) {						/ (*)
      for (var i = 0; i < argsFn.length; i++) {
        args.push(argsFn[i](scope, locals));
      }
["I'm from a service"]
      var fnPtr = fn(scope, locals, context) || noop;
function (m){
		return m.split("").reverse().join("")
	}
/ Beide gaan via zo'n gen code 	,

            ? fnPtr.apply(context, args)
/s
app.controller("ctrl2",function($scope,Data){
	$scope.data=Data
	$scope.reverseMessage2=function(m){
->		return m.split("").reverse().join("")
	}


/ Einde DEBUG ANGULAR SCOPE FCT 

/ DEBUG ANGULAR FILTER 

/ 7	.

/ we herhalen injection	,

/ 13

/ angular.js code	,

function factory(name, factoryFn) { 
	return provider(name, { $get: factoryFn }); 
}
/ In dit geval is { $get: factoryFn } de provider	,

/ Hieronder doen we	,
app.factory("Data",function(){
  return {message:"I'm from a service"}
})
/ $provide.factory heeft dezelfde args (blijkbaar) als app.factory	, dus 
name="Data"
factoryFn=function(){
  return {message:"I'm from a service"}
}
/ Dus de "DataProvider" wordt	,
{$get:function(){
	  return{message:"I'm from a service"}
}

/ 13	.

/ onze code	,

app.factory("Data",function(){
  return {message:"I'm from a service"}
})
.controller("ctrl",function($scope,Data){
  $scope.data=Data
})

/ angular.js code	,

    function invoke(fn, self, locals){
      var args = [],
          $inject = annotate(fn),
/ calls fn.toString, en met regexps returns ["$scope","Data"]	,

      for(i = 0, length = $inject.length; i < length; i++) {
        key = $inject[i];
        args.push(
          locals && locals.hasOwnProperty(key)
          ? locals[key]
          : getService(key)
/ Hieronder zien dat getService("Data")={message:"I'm from a service"}, die dus in de args komt 	, dus zo injected	, en dan wordt	,

      return fn.apply(self, args);

/ uitleg getService	:

  function createInternalInjector(cache, factory) {
    function getService(serviceName) {
          return cache[serviceName] = factory(serviceName);
/ factory=function(servicename) {
            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
/ de provider achter "DataProvider" =	{$get:function(){
	  return{message:"I'm from a service"}
}
/ dan wordt $get called,	 en is result: {message:"I'm from a service"}, en deze komt in args van fn die wordt apply hierboven	,

jannyvandervelden-poot
vl$Walnoot27
127465467


/ 7	.

Parser.prototype = {
  parse: function (text, json) {
text="data.message|reverse"

 


/ Einde DEBUG ANGULAR FILTER 

/ DEBUG ANGULAR VIEW

/ we zien	,
[eric@walnut angular-seed]$ pwd
/home/eric/Devel/Web/angularjs/angular-seed


[eric@walnut 29]$  pwd
/home/eric/Devel/Web/angularjs/egghead.io/29
[eric@walnut 29]$ vi index.html 

<div ng-app="app">
  <ng-view></ng-view>
</div>

<script src="/angularjs/angular.js_cp/build/angular.js"></script>
<script src="/angularjs/angular.js_cp/build/angular-route.js"></script>

[eric@walnut 29]$ vi script.js 

!function(){

var app=angular.module("app",["ngRoute"])

app.config(function($routeProvider){
  $routeProvider.when("/",{
    templateUrl:"app.html"  ,
    controller:"ctrl"
  })
})

app.controller("ctrl",function($scope){
    $scope.model={
      message:"This is my app!!"
    }
})

}()

/ TODO ( met $ yo requirejs of $ yo angular)




/ Einde DEBUG ANGULAR VIEW

/ ANGULAR

/ 7	.

/ een ctrl controls a scope=model	, vandaar als je een ctrl create, en een nieuwe (child) scope wordt create	,
app.controller(...

/ we kunnen ook	,
app.directive("foo",function(){
  return{
    restrict:"E"
    ,scope:{}
    ,controller:["$scope",function(scope){
...
/ Kun je ook een controller def zonder een isolated scope	?
/ TODO

/ 7	.

/ Lees	,
http://docs.angularjs.org/guide/directive

/ we zien in dit voorbeeld	,

/ index.html

<div ng-controller="NaomiCtrl">
    <my-customer></my-customer>
  </div>
  <hr>
  <div ng-controller="IgorCtrl">
    <my-customer></my-customer>
  </div>

/my-customer.html

Name: {{customer.name}} Address: {{customer.address}}

/ script	,

angular.module('docsScopeProblemExample', [])
    .controller('NaomiCtrl', function($scope) {
      $scope.customer = {
        name: 'Naomi',
        address: '1600 Amphitheatre'
      };
    })
    .controller('IgorCtrl', function($scope) {
      $scope.customer = {
        name: 'Igor',
        address: '123 Somewhere'
      };
    })
    .directive('myCustomer', function() {
      return {
        restrict: 'E',
        templateUrl: 'my-customer.html'
      };
    });

/ een dir heeft als je niets doet de parent scope, bijv de root scope	,
/ als je directives aparte scopes wilt laten hebben , kun je aparte controllers create, zoals hierboven	, 
/ dan zal customer in my-customer.html steeds een andere zijn	,

/ maar je kunt ook de controller een isolate scope geven	,

/ 7	.

/ Ga naar	bootstrap met angular components ipv jQuery components	,
http://angular-ui.github.io/bootstrap/

/ lees	,
http://angular-ui.github.io/


/ Einde ANGULAR

/ DRUPAL ANGULAR

/ 7	.

/ kijk naar	,
http://www.youtube.com/watch?v=c-05Y4q9EnA

/ services module	,
/ TODO

/ 7	.

/ lees	drupal bootstrap theme, angular	,
https://drupal.org/node/2201779

/ lees	drupal, angular, phonegap	,
https://groups.drupal.org/node/328183



/ Einde DRUPAL ANGULAR

/ ANGULAR DIRECTIVES

/ lees	,

http://docs.angularjs.org/guide/directive

/ 7	.

 <div ng-controller="Ctrl">
    <div my-customer></div>
  </div>

 angular.module('docsSimpleDirective', [])
    .controller('Ctrl', function($scope) {
      $scope.customer = {
        name: 'Naomi',
        address: '1600 Amphitheatre'
      };
    })
    .directive('myCustomer', function() {
      return {
        template: 'Name: {{customer.name}} Address: {{customer.address}}'
      };
    });

/ Hoe werkt dit , we zien div.my-customer in div.ng-controller, daardoor scope in myCustomer = die van Ctrl?
/ TODO

/ 7	.

/ video 16 : $scope en scope 	,

/ 7	.



/ Einde ANGULAR DIRECTIVES

/ DEBUG ANGULAR DIRECTIVES

/ 7	.

/ wat is scope van dir als deze in div met controller	?

[eric@walnut directive]$  pwd
/home/eric/Devel/Web/angularjs/DevGuide/directive

$ vi index.html

<div ng-app="directive">
<div ng-controller="Ctrl">
    <div my-customer></div>
  </div>
</div>

angular.module('directive', [])
    .controller('Ctrl', function($scope) {
      $scope.customer = {
        name: 'Naomi',
        address: '1600 Amphitheatre'
      };
    })
/ Hier maak je een controller tijdens de link fase, al worden er tijdens de compile fase ook een directive create	, met scope:true, voor de link fase

    .controller('Ctrl2', function($scope) {
      $scope.customer = {
        name: 'Eric J.',
        address: 'Walnoot 27'
      };
    })

    .directive('myCustomer', function() {
      return {
        template: 'Name: {{customer.name}} Address: {{customer.address}}'
      };
    });
/ Hier maak je een directive, tijdens de compile fase	, en wordt dit template een child in de DOM van de .my-customer node	,
/ we zien binding (1-way: model->view) in de directive: {{customer.name}} en {{customer.address}}

/ die ctrl fcts worden invoke (dus de $scope wordt inj) in de link fase (van compile)	, het zijn ctors	, je maakt een Constructor inst	, en dat is de controller	, 
/ tijdens de compile fase (van compile) worden er 4 directives create, 2 ngControllerDirectives	, 1 myCustomerDirective en 1 interpolate directive	,  dus de directive fct hierboven wordt tijdens compile fase called	, 

/ in dit voorbeeld zien we de ctrls niet echt in actie, alleen dat er een nieuw scope wordt create waarover hij ctrl is	,

/ 13	. 

      $provide.provider('$compile', $CompileProvider).
/s
      provider_ = providerInjector.instantiate(provider_);
/s
function $CompileProvider($provide, $$sanitizeUriProvider) {
this=Constructor

  var hasDirectives = {},
   this.directive = function registerDirective(name, directiveFactory) {
      if (!hasDirectives.hasOwnProperty(name)) {
...
  this.$get = [...
}

/t
    return providerCache[name + providerSuffix] = provider_;
/ name="$compile"
/ Dus $compileProvider is een obj met directive fct en $get fct , en hasDirectives in hun closure scope	,

/ providers zijn objs	, met 'n $get fct	,


      


/ 13	.

/ we zien op de invoke queue van de "directive" module 3 entries	,

/ REGISTRATION SERVICES

/ Intermezzo

app3.factory("Data",function(){
  return {
    length:1,
    message:"Foo bar"
  }
})
app3.controller("ctrl",["$scope","Data",function($scope,Data){
	$scope.data=Data
}])

/ dan op invokeQueue	,


0: Array[3]
0: "$provide"
1: "factory"
2: Arguments[2]
0: "Data"
1: function (){

1: Array[3]
0: "$controllerProvider"
1: "register"
2: Arguments[2]
0: "ctrl"
1: Array[3]


/ In loadModules	,
         for(invokeQueue = moduleFn._invokeQueue, i = 0, ii = invokeQueue.length; i < ii; i++) {
            var invokeArgs = invokeQueue[i],
               provider = providerInjector.get(invokeArgs[0]);
            provider[invokeArgs[1]].apply(provider, invokeArgs[2]);


/ Einde Intermezzo

[eric@walnut directive]$  pwd
/home/eric/Devel/Web/angularjs/DevGuide/directive/directive

$ vi script.js

angular.module('directive', [])
    .controller('Ctrl', function($scope) {
      $scope.customer = {
        name: 'Naomi',
        address: '1600 Amphitheatre'
      };
    })
    .controller('Ctrl2', function($scope) {
      $scope.customer = {
        name: 'Eric J.',
        address: 'Walnoot 27'
      };
    })
    .directive('myCustomer', function() {
      return {
        template: 'Name: {{customer.name}} Address: {{customer.address}}'
      };
    });


/ In loadModules	,
         for(invokeQueue = moduleFn._invokeQueue, i = 0, ii = invokeQueue.length; i < ii; i++) {
            var invokeArgs = invokeQueue[i],
               provider = providerInjector.get(invokeArgs[0]);
            provider[invokeArgs[1]].apply(provider, invokeArgs[2]);


/op de invokeQueue zien we de objs	,

0: Array[3]
0: "$controllerProvider"
1: "register"
2: Arguments[2]
0: "Ctrl"
1: function ($scope) {
/ in loadModules	,
function $ControllerProvider() {
  var controllers = {},
  this.register = function(name, constructor) {
->      controllers[name] = constructor;
/name="Ctrl"

1: Array[3]
0: "$controllerProvider"
1: "register"
2: Arguments[2]
0: "Ctrl2"
1: function ($scope) {

2: Array[3]									
0: "$compileProvider"
1: "directive"
2: Arguments[2]
0: "myCustomer"
1: function () {
/ in loadModules	,
function $CompileProvider($provide, $$sanitizeUriProvider) {
  var hasDirectives = {},
  this.directive = function registerDirective(name, directiveFactory) {
        hasDirectives[name] = [];
        $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
          function($injector, $exceptionHandler) {
/ = $get fct van de provider
...
/ register bijv "ngControllerDirectiveProvider" in de providerCache met 'n obj met deze anon fct hierboven als $get	,
      }
      hasDirectives[name].push(directiveFactory);
/ ook een reg	,


/ we zien dat de reg niets met nodes van doen heeft,	 

/ de compile fase van compile, compileNodes calls collectDirectives	, hij is dan op een node	,


app.directive('myCustomer', function() {...
	app.directive -> register: myCustomerDirective, factory creates myCustomerDirectiveProvider	,

  <div ng-controller="Ctrl">
compile -> addDirective: 
        for(var directive, directives = $injector.get(name + Suffix),
"ngControllerDirective"
/s
          return cache[serviceName] = factory(serviceName);
"ngControllerDirective"
/s
            var provider = providerInjector.get(servicename + providerSuffix);
"ngControllerDirectiveDirective"
            return instanceInjector.invoke(provider.$get, provider);
/ dus	,
resolve ngControllerDirective	, is er niet , de ngControllerDirectiveProvider.$get wordt invoke, we komen op 5174	, invokes	 de factory,

       $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
/name+Suffix="ngControllerDirective"	,
/ creates provider	, we waren hier eerder, bij app.register hierboven

          function($injector, $exceptionHandler) {
/ = provider.$get	, eerder in loadModules (provider=ngControllerDirectiveProvider)
/ we zijn hier nu	,
            var directives = [];
            forEach(hasDirectives[name], function(directiveFactory, index) {
/ name="ngController"
              try {
                var directive = $injector.invoke(directiveFactory);
/ wordt called, de factory zit in hasDirectives	,
 /= 
var ngControllerDirective = [function() {
  return {
    scope: true,
    controller: '@',
    priority: 500
  };
}];
/ dit is de controller directive, niet de controller zelf	,
/ De ngControllerDirectiveProvider.$get zegt dus: ga naar de def van de ngControllerDirective	,
                directive.name = directive.name || name;
"ngController"
                directive.require = directive.require || (directive.controller && directive.name);
"ngController"

/ uiteindelijk	,
{
controller: "@"
index: 0
name: "ngController"
priority: 500
require: "ngController"
restrict: "A"
scope: true
}
/ dan applyDirectivesToNode : 
        if (directiveValue = directive.scope) {
 JA
          newScopeDirective = newScopeDirective || directive;

       	directiveName = directive.name;
"ngController"
				controllerDirectives[directiveName] = directive	,

      	nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;
true

    <div my-customer></div>
compile -> addDirective: resolve myCustomerDirective	, is er niet , de myCustomerDirectiveProvider.$get wordt invoke, we komen op 5174	, invokes	 de directiveFactory	,
function() {
      return {
        template: 'Name: {{customer.name}} Address: {{customer.address}}'
      };
    }
/ Dus directive={template:...}
/ dan applyDirectivesToNode : directiveValue=directive.template	, $compileNode.html(directiveValue)	,
/ node.my-customer heeft een child, en meteen wordt op 5534 compileNodes called op deze child , 
/ Dus omdat er template staat in de directive, wordt in de compile fase er een node create, die child wordt van de .mycustomer node	,
/ deze  dir heeft alleen de template prop	, deze dir speelt dus alleen tijdens de compile fase een rol (in applyDirectivesToNode)	, als hij scope, controller had, dan speelde deze dir tijdens link fase ook een rol TODO 

/ de controller dir heeft scope:true, en controller:"Ctrl", en er wordt in de linf fase een scope create, en een controller	,
/ straks gaan we een dir maken met scope, en controller en dan zal deze dir ook een rol spelen in link fase	,

/ in deze text child is er de binding {{customer.name}} , dus wordt addTextInterpolateDirective called,	er wordt een directive create, met maar 1 prop: compile fct	, dan applyDirectivesToNode	, dit is de 1ste dir die een linkFn geeft	, dit is nu de enigste dir met een compile (link) fct	,

   function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
/ fct fn die de parts resolves	, en is daarmee de get fct van de watcher op de scope , die tijdens de link fase wordt set als de scope bekend is 

        directives.push({
/ create tijden compile fase	,

          compile: valueFn(function textInterpolateLinkFn(scope, node) {
/ called in link fase	,

            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
/ called in scope.$digest	,

              node[0].nodeValue = value;
            });
          })
        });

/ deze interpolate directive={compile:...}, en in applyDirectivesToNode calls comile()=link fct, en wordt in linkFns set	,


/ een binding is altijd een binding tussen model en view	, kan 1-way of 2-way zijn	,

/ dan de link fase	,

   injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate',
       function(scope, element, compile, injector, animate) {
        scope.$apply(function() {
          element.data('$injector', injector);
          compile(element)(scope);
                           ^^^^^
/ uit closure scope: compile is resolved tot $rootScope	,
/ scope wordt steeds meegegeven	, zodat in closure scope in van inner fcts	,
      function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) {
        for(i = 0, n = 0, ii = linkFns.length; i < ii; n++) {
          nodeLinkFn = linkFns[i++];
          childLinkFn = linkFns[i++];
          if (nodeLinkFn) {
            if (nodeLinkFn.scope) {
              childScope = scope.$new();
/dan,	
              nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);
/node =div.ng-controller	,
/ dan	,
function nodeLinkFn
       if (controllerDirectives) {
          forEach(controllerDirectives, function(directive) {
            var locals = {
              $scope: directive === newIsolateScopeDirective || directive.$$isolateScope ? isolateScope : scope,
              $element: $element,
              $attrs: attrs,
              $transclude: transcludeFn
            }, controllerInstance;

            controller = directive.controller;
            if (controller == '@') {       
/ JA
              controller = attrs[directive.name];
"Ctrl"
            controllerInstance = $controller(controller, locals);
/c
/ $controller=$ControllerProvider.$get(...)	,
    return function(expression, locals) {
      if(isString(expression)) {
        expression = controllers.hasOwnProperty(constructor)
            ? controllers[constructor]
/ constructor="Ctrl"
/ Dus "Ctrl" is een lookup key	,
expression=function ($scope) {
      $scope.customer = {
        name: 'Naomi',
        address: '1600 Amphitheatre'
      };
}

      instance = $injector.instantiate(expression, locals);
/ in locals zit de child scope	, expression is:
function($scope) {
      $scope.customer = {
        name: 'Eric J.',
        address: 'Walnoot 27'
      };
    }
/ deze fct wordt invoke, dus $scope wordt resolved,	maar dat is heel simpel want hij zit in locals	,
/ this =Constructor inst, niet de directive-{scope:true, ...}	,
/////////////
/ het verschil is dat {scope:true,...} de directive is (van de controller), en de Constructor inst de controller zelf	,

/ applyDirectivesToNode heeft eerder set	,
controllerDirectives[directiveName] = directive	,
nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;

/t nodeLinkFn, 
            controllerInstance = $controller(controller, locals);
            elementControllers[directive.name] = controllerInstance;

/ Intermezzo

/ elementControllers is een local van nodeLinkFn	, worden used in de postLinkFn	,
           linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);

/ Einde Intermezzo

            

/ dan	 nodeLinkFn calls	,
        childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn);
/ = compositeLinkFn	,
          if (nodeLinkFn) {
            if (nodeLinkFn.scope) {
/ NEE
            } else {
              childScope = scope;
/ dan	,
           } else {
              nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);

/ in nodeLinkFn	,
/ geen controller directives	,

/ deze heeft ook een child in de list	,
        childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn);
/ = compositeLinkFn	,
          if (nodeLinkFn) {
            if (nodeLinkFn.scope) {
/ NEE
            } else {
              childScope = scope;
/ dan	,
           } else {
              nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);
/ c
/ heeft linkFn uit de directive, de directive objs zijn WH tmp objs, voor in de 1ste compile fase	,
/ de scope wordt steeds meegegeven als param, en zit zo dus steeds in de closure scope van inner fcts,	 en daardoor: 
          compile: valueFn(function textInterpolateLinkFn(scope, node) {
/ krijgt ook scope mee	,

            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });
          })
/ binding: model->view	,

/ einde link fase van compile	,

/ alleen de link fct in de {{...}}-dir  heeft  scope.watch  called, en dus de binding model->view set	,

/ 13	. 

/ we waren in	,

        scope.$apply(function() {
          element.data('$injector', injector);
          compile(element)(scope);
        });
/ dat is	,

    injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate', function(scope, element, compile, injector, animate) {
     $apply: function(expr) {
        try {
          return this.$eval(expr); / compile	, done
            $rootScope.$digest(); 	/ nu	,

/s
      $digest: function() {
            next, current, target = this
/ target = $rootScope	,

        do { // "while dirty" loop
          dirty = false;
          current = target;
          do { // "traverse the scopes" loop
            if ((watchers = current.$$watchers)) {
/ $rootScope heeft geen 
          } while ((current = next));

          do { // "traverse the scopes" loop
            if ((watchers = current.$$watchers)) {
/ child scope wel	, we komen in 	,
    function $interpolate(text, mustHaveExpression, trustedContext) {
        fn = function(context) {
            for(var i = 0, ii = length, part; i<ii; i++) {
              if (typeof (part = parts[i]) == 'function') {
/ als part="Name:" , dan meteen naar concat,   
                part = part(context);  
/ als part gen code, resolve	, -> string, dan naar concat	,

              concat[i] = part;
/ array van strings,	 allemaal resolved	,

/t
                    if ((value = watch.get(current)) !== (last = watch.last) &&
/ D
value: "Name: Naomi Address: 1600 Amphitheatr...
                      watch.fn(value, ((last === initWatchVal) ? value : last), current);
/ s
       scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
/ binding : model->view
/ we zien dat 
Name: {{customer.name}} Address: {{customer.address}}
/ vervangen door 
Name: Naomi Address: 1600 Amphitheatre


         } while ((current = next));


/ Einde DEBUG ANGULAR DIRECTIVES

/ DEBUG ANGULAR DIRECTIVES

/ see DEBUG ANGULAR DIRECTIVES hierboven	,

/ 7	.

/ we zien dir defs	,

/ In de directive provider	,
function $CompileProvider($provide, $$sanitizeUriProvider) {
   this.directive = function registerDirective(name, directiveFactory) {

        $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
/ factory van de directive provider

          function($injector, $exceptionHandler) {
/ directive provider's $get
            var directives = [];
            forEach(hasDirectives[name], function(directiveFactory, index) {
              try {
                var directive = $injector.invoke(directiveFactory);

/ applyDirectives uses ze	,

/ hieronder zien we de directiveFactory's	,

$ vi build/angular.js

var inputDirective = ['$browser', '$sniffer', function($browser, $sniffer) {
  return {
    restrict: 'E',
    require: '?ngModel',
    link: function(scope, element, attr, ctrl) {
      if (ctrl) {
        (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrl, $sniffer,
                                                            $browser);
      }
    }
  };

var ngModelDirective = function() {
  return {
    require: ['ngModel', '^?form'],
    controller: NgModelController,
    link: function(scope, element, attr, ctrls) {
...

var ngControllerDirective = [function() {
  return {
    scope: true,
    controller: '@', 					/ wordt attrs[directive.name]="Ctrl", want we hadden ng-controller="Ctrl", en zo vindt fct (die we zelf hebben program) uit script.js	,
    priority: 500
  };
}];

$ vi script.js

    .directive('myCustomer', function() {
      return {
        template: "Name: {{customer.name}}"
      };
    });

$ vi build/angular.js

    function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
        directives.push({
          priority: 0,
          compile: valueFn(function textInterpolateLinkFn(scope, node) {
            var parent = node.parent(),
... 

/ applyDirectivesToNode uses ze	,
/ Waarom zijn er directive providers, worden ze injected ?
/ TODO


/ 7	.


/ we set er een input bij	,
/ en laten script onveranderd	,

[eric@walnut directive]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/directive/directive
[eric@walnut directive]$ vi index.html 

<div ng-app="directive">
  <div ng-controller="Ctrl">
    <input type="text" ng-model="customer.name">
    <div my-customer></div>
  </div>
</div>

$ vi script.js

angular.module('directive', [])
    .controller('Ctrl', function($scope) {
      $scope.customer = {
        name: 'Naomi',
        address: '1600 Amphitheatre'
      };
    })
    .directive('myCustomer', function() {
      return {
        template: "Name: {{customer.name}}"
      };
    });

/ we zien dat Naomi in de input verschijnt (model->view), en als we input veranderen, verandert het model (view->model) en daardoor ook weer de text (model->view)	, (en de input, maar die verandert identiek)	,

/ 7	.

/ debug	,

    <input type="text" ng-model="customer.name">
/ in compileNodes, collectDirectives, 
/ addDirective : inputDirective, we komen op 5174, we komen in de directiveFactory,	
var inputDirective = ['$browser', '$sniffer', function($browser, $sniffer) {
  return {
    restrict: 'E',
    require: '?ngModel',
    link: function(scope, element, attr, ctrl) {
      if (ctrl) {
        (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrl, $sniffer,
                                                            $browser);
      }
    }
  };
}];
/ uiteindelijk	,
directive: { 
compile: function () {return value;}
index: 0
link: function (scope, element, attr, ctrl) {
name: "input"
priority: 0
require: "?ngModel"
restrict: "E"
}

/ dan de ngModelDirective	, we komen op 5174	, de directiveFactory is	,
var ngModelDirective = function() {
  return {
    require: ['ngModel', '^?form'],
    controller: NgModelController,
    link: function(scope, element, attr, ctrls) {
...
    }
  };
};

/ SAMENVATTING

    function compileNodes(nodeList, ... 
/ 1313
      var linkFns = [],
/ loopt gelijk aan nodeList	, er komen nodeLinkFn's op	die een node meekrijgen, en compositeLinkFns, die de (child) nodes meekrijgen	,
/ nodeLinkFn is inner fct van applyDirectivesToNode, zodat elementControllers en postLinkFns in scope	, en compositeLinkFn is inner fct van compileNodes, zodat linkFns in scope	,
     function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn)
/ inner fct
/ 1313
        directives = collectDirectives(nodeList[i], [], attrs, ... 
				/ calls addDirective, 	die
       		for(var directive, directives = $injector.get(name + Suffix),
/ 1313
       nodeLinkFn = applyDirectivesToNode(directives,...
/ applyDirectivesToNode krijgt de directives 	,

    function applyDirectivesToNode(directives, postLinkFns,...
			var newScopeDirective, controllerDirectives
			function nodeLinkFn(childLinkFn, ...
			/inner fct
/ 77
	        if (directiveValue = directive.scope) {
          newScopeDirective = newScopeDirective || directive;
/ 77
	       if (!directive.templateUrl && directive.controller) {
          controllerDirectives[directiveName] = directive;
/ 77
       if (directive.template) {
            $compileNode.html(directiveValue);
/ 77
        } else if (directive.compile) {
              addLinkFns(null, linkFn, attrStart, attrEnd);
/ 77
      nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;
      return nodeLinkFn;

/t in compileNodes,	
/ 1313
        linkFns.push(nodeLinkFn);
        linkFns.push(childLinkFn); / = compositeLinkFn	,
			      return compositeLinkFn 

/ in de link fase wordt door publicLinkFn de 1ste ... compositeLinkFn called, en recursie volgt,	
 
/ De inner fct van compileNodes,	
      function compositeLinkFn(scope, nodeList,
       for(i = 0, n = 0, ii = linkFns.length; i < ii; n++) {
          nodeLinkFn = linkFns[i++]; 
/ heeft in closure scope	,
/ 77
            if (nodeLinkFn.scope) {
              childScope = scope.$new();
/ 77
              nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTran
/ is inner fct van applyDirectivesToNode	,

/ De inner fct van applyDirectivesToNode	,
      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
/ 77
	          forEach(controllerDirectives, function(directive) {
/ heeft in closure scope	,
            var locals = {
              $scope: ... 
              $element: $element,
              $attrs: attrs,
              $transclude: transcludeFn
           controller = directive.controller;
            if (controller == '@') {
              controller = attrs[directive.name];
            }
            controllerInstance = $controller(controller, locals);
/ 77
        childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn);
/ 77
            linkFn = postLinkFns[i];
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);

  
/ 7	.

/ in loadModules, ng, wordt called	,

    function ngModule($provide) {
      $provide.provider('$compile', $CompileProvider).
        directive({
          input: inputDirective,
          ngModel: ngModelDirective,
          ngController: ngControllerDirective,
 
/= key ,factory fct

/ factory fct,	
var inputDirective = ['$browser', '$sniffer', function($browser, $sniffer) {
  return {
    link: function(scope, element, attr, ctrl) {
      if (ctrl) {
        (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrl, $sniffer, $browser);


/ In ons script doen we dit ook	,

    .directive('myCustomer', function() {
      return {
        template: "Name: {{customer.name}}"
      };
/ factory fct	,

/ Dit gens op de module's _invokeQueue	,
2: Array[3]									
0: "$compileProvider"
1: "directive"
2: Arguments[2]
0: "myCustomer"
1: function () {

/ we komen in beide gevallen dus in	,
function $CompileProvider($provide, $$sanitizeUriProvider) {
   this.directive = function registerDirective(name, directiveFactory) {
       $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
          function($injector, $exceptionHandler) {
/= directory provider.$get
           var directives = [];
            forEach(hasDirectives[name], function(directiveFactory, index) {
              try {
                var directive = $injector.invoke(directiveFactory);

/ directory provider.$get is called in 	,
    function addDirective(tDirectives, name, ... 
      if (hasDirectives.hasOwnProperty(name)) {
        for(var directive, directives = $injector.get(name + Suffix),
 


/ 7	.

/ in ons script ,	

    .controller('Ctrl', function($scope) {
      $scope.customer = {
        name: 'Naomi',
        address: '1600 Amphitheatre'
      };
    })
/ Dat geeft	,
1: Array[3]
0: "$controllerProvider"
1: "register"
2: Arguments[2]
0: "Ctrl"
1: function ($scope) {

/ in loadModules, app's _invokeQueue process	,
function $ControllerProvider() {
  var controllers = {},
  this.register = function(name, constructor) {
    } else {
      controllers[name] = constructor;
 

/ eerder, zie hierboven	,
var ngControllerDirective = [function() {
  return {
    scope: true,
    controller: '@',
    priority: 500
  };
}];
var ngModelDirective = function() {
  return {
    require: ['ngModel', '^?form'],
    controller: NgModelController,

/ in function nodeLinkFn	,
            controller = directive.controller;
            if (controller == '@') {
/ JA, bij onze 	,
              controller = attrs[directive.name];
/ string "Ctrl", 
/ of fct NgModelController	,
            }
            controllerInstance = $controller(controller, locals);
/ $controller=$ControllerProvider.$get(...)=
   return function(expression, locals) {
      if(isString(expression)) {
        expression = controllers.hasOwnProperty(constructor)
            ? controllers[constructor]
/ onze fct	,
    function($scope) {
      $scope.customer = {
        name: 'Naomi',
        address: '1600 Amphitheatre'
      };
/ of NgModelController fct	,

      instance = $injector.instantiate(expression, locals);

/ 7	.

/ $ControllerProvider.$get geeft de $contoller service	,
/ $CompileProvider.$get geeft de $compile service	,

/ 7	.

    <input type="text" ng-model="customer.name">

/ de ng-model controller doet de 2-way binding	, de input dir's link fct zegt wat de ctrl moet doen bij model->view	,
/ de input dir's link fct calls ctrl.$setViewValue, bij Enter op de input	,

/ de inputDirective's link fct , in feite 
function textInputType(scope, element, attr, ctrl, $sniffer, $browser) {

  element.on('change', listener);
 var listener = function() {
    var value = element.val();
      scope.$apply(function() {
        ctrl.$setViewValue(value);
      });
/ en	,
    Scope.prototype = {
    $apply: function(expr) {
          return this.$eval(expr);
            $rootScope.$digest();

  ctrl.$render = function() {
    element.val(ctrl.$isEmpty(ctrl.$viewValue) ? '' : ctrl.$viewValue);

/ de NgModelController fct	,
  this.$setViewValue = function(value) {
       ngModelSet($scope, value);

  $scope.$watch(function ngModelWatch() {
    var value = ngModelGet($scope);

       ctrl.$render();


  
/ Einde SAMENVATTING

/ de inputDirective heeft link fct -> linkFns	,

/ de ngModelDirective heeft controller attr	,
          controllerDirectives[directiveName] = directive;
/ maar GEEN scope:true	, zoals de ngControllerDirective	,
/ en heeft een link fct -> linkFns	,

      nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;
false

/ dan de link fase	,

/ we zien dat in childLinkFn=compositeLinkFn, die een nodeList (van child nodes) process	, voor iedere nodeLinkFn de scope wordt bepaald	, 

/ per node is er een nodeLinkFn	,

/ de nodeLinkFn van de .ng-controller krijgt een nieuwe scope mee	,

/ we komen in nodeLinkFn van de input	,
/ hij heeft een scope mee	, die was voor de .ng-controller create	, 
/ er is inderdaad een controller directive,	 ngModelDirective	,
          forEach(controllerDirectives, function(directive) {
            var locals = {
              $scope: ... : scope,
...
           controller = directive.controller;
           if (controller == '@') {
/ JA, bij ng-controller
/ NEE, bij ng-model, =NgModelController fct	,
              controller = attrs[directive.name];
/ "Ctrl" bij ng-controller	,
            }

            controllerInstance = $controller(controller, locals);
/c
      instance = $injector.instantiate(expression, locals);
/invokes	,
ar NgModelController = ['$scope', '$exceptionHandler', '$attrs', '$element', '$parse', function($scope, $exceptionHandler, $attr, $element, $parse) {

 var ngModelGet = $parse($attr.ngModel),
      ngModelSet = ngModelGet.assign;
/ NB. dit is de binding op model="customer.name" uit de scope	, dus ngModelGet is die gen code en die is zo gen dat hij kijkt alleen naar customer.name in de scope	,

 this.$setViewValue = function(value) {
      ngModelSet($scope, value);
	}
  var ctrl = this;

  $scope.$watch(function ngModelWatch() {
    var value = ngModelGet($scope);
       ctrl.$render();
	}
/	precies wat de scope.$watch doet in de link fct van de interpolate dir	,
}

/t
            elementControllers[directive.name] = controllerInstance;

//////////////////////
/ In nodeLinkFn is	
          forEach(controllerDirectives, function(directive) {
/ de controller directives	, uit de closure applyDirectivesToNode's scope	,
/ en
            elementControllers[directive.name] = controllerInstance;
/ de controllers	,
/ deze controllers zijn 4de arg van de postLinkFns hieronder	, en worden used in bijv de link fct van de input elem	,  deze fct is feitenlijk textInputType fct	, die als we op het input elem Enter click, ctrl.$setViewValue calls	, en hij defs ctrl.render	. ctrl=ng-model ctrl, en de NgModelController fct (cd ctor in feite van de ctrl) calls scope.$watch, die ctrl.render calls	, 


/ dan komt deze nodeLinkFn bij de postLinkFns, 	en de link fct uit de inputDirective is er daar 1 van	,
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);
/ getControllers = ng-model controller, want linkFn.require="ngModel" en deze controller is op dit elem, input 	,
/ we komen in	,
var inputDirective = ['$browser', '$sniffer', function($browser, $sniffer) {
  return {
...
    link: function(scope, element, attr, ctrl) {
->      if (ctrl) {
        (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrl, $sniffer,...
/s
function textInputType(scope, element, attr, ctrl, $sniffer, $browser) {

	var listener = function() {
    var value = element.val();
      scope.$apply(function() {
        ctrl.$setViewValue(value);
	}
  element.on('change', listener);

  ctrl.$render = function() {
    element.val(ctrl.$isEmpty(ctrl.$viewValue) ? '' : ctrl.$viewValue);
  };
	/ see ook scope.$watch in de link fct van de interpolate dir	,
}

/ we zien dat de $setViewValue  van de ng-model ctrl en de link fct van de input dir samenwerken	,

 /in de postLinkFns op de input zit ook de link fct van de ng-model dir	, maar die  doet niets	,
/ TODO

/ Nogmaals: als we in input een string geven, en Enter, dan (omdat link fct van de input dir change listener heeft set ) change event => ng-model ctrl's $setViewValue called, die door ng-model="customer.name", scope.customer.name write	,
/ als de model customer.name changes, dan in scope.$digest via watcher (ng-model's ctrl heeft deze set)	, wordt de input set, model ->view	,
/ de link fct van de interpolate dir doet hetzelfde met wat daar de model is, en dat is ook scope's customer.name	,


/ 7	.

/ In de link fase van compile wordt een tree van nodeLinkFn called	, dus hij gaat de nodes af	, compositeLinkFn heeft de scope set op de nodeLinkFn	, hij maakt evt controllers (ng-model ctrl), en calls evt childLinkFn, en  calls evt linkFns	,
/ de link fcts of de ng-model ctrl fct sets scope.$watch	,

/ de ng-controller's ctrl doet tot nu toe niets , er wordt alleen een nieuwe scope create, maar dat doet deze ctrl fct zelf niet	,


/ Einde DEBUG ANGULAR DIRECTIVES

/ DEBUG ANGULAR DIRECTIVES


/ Einde DEBUG ANGULAR DIRECTIVES


/ ANGULAR TODO

/ video 16

http://web/angularjs/DevGuide/directive/directive/: parse

http://scotch.io/tutorials/javascript/single-page-apps-with-angularjs-routing-and-templating
/ click view demo
/ rechtsboven: "sign in with Github	, dit is oauth	,



/ Einde ANGULAR TODO

/ ANGULAR SINGLE PAGE APPLICATION

/ lees
http://scotch.io/tutorials/javascript/single-page-apps-with-angularjs-routing-and-templating
/ en click View Demo	,
/ click x rechtsboven, en click " Animating Your Angular Single Page App"	, click ook daar "View Demo"	,



/ Einde ANGULAR SINGLE PAGE APPLICATION

/ ANGULAR REPLACES JQUERY

/ lees	,
http://paulhammant.com/2012/03/03/replacing-jquery-with-angular/

/ lees	,
https://github.com/angular-ui/bootstrap/tree/master/src

/ lees	,
http://joshdmiller.github.io/ng-boilerplate/#/home

/lees	text slides in	,
https://www.exratione.com/2013/09/replacing-jqueryslidedown-with-nganimate-in-angularjs-120/




/ Einde ANGULAR REPLACES JQUERY


/ DEBUG ANGULAR ISOLATE SCOPE 

[eric@walnut isolatedscope]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/directive/isolatedscope

$ vi index.html

   <div ng-controller="Ctrl">
      <my-customer info="naomi"></my-customer>
      <hr>
      <my-customer info="igor"></my-customer>
	</div>

$ vi script.js

angular.module('docsIsolateScopeDirective', [])
  .controller('Ctrl', function($scope) {
    $scope.naomi = { name: 'Naomi', address: '1600 Amphitheatre' };
    $scope.igor = { name: 'Igor', address: '123 Somewhere' };
  })
  .directive('myCustomer', function() {
    return {
      restrict: 'E',
      scope: {
        customerInfo: '=info'
      },
      templateUrl: 'my-customer-iso.html'
    };
  });

$ vi my-customer-iso.html 

Name: {{customerInfo.name}} Address: {{customerInfo.address}}

/ 7	.

   function ngModule($provide) {
      $provide.provider('$compile', $CompileProvider).
        directive({
            ngController: ngControllerDirective,
/name, directiveFactory

var ngControllerDirective = [function() {
  return {
    scope: true,
    controller: '@',
    priority: 500
  };
}];

/ in de providerCache zit onder de key "ngControllerDirectiveProvider"	,

function $CompileProvider($provide, $$sanitizeUriProvider) {
   this.directive = function registerDirective(name, directiveFactory) {
      if (!hasDirectives.hasOwnProperty(name)) {
        hasDirectives[name] = [];
/name="ngController"
        $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
/ name+Suffix="ngControllerDirective"
          function($injector, $exceptionHandler) {
                var directive = $injector.invoke(directiveFactory);
/ factory sets "Provider" achter de key, dus in de providerCache staat achter "ngControllerDirectiveProvider" een obj {$get:deze function hier}  

/ Later in addDirective	,
        for(var directive, directives = $injector.get(name + Suffix),
/ name+Suffix="ngControllerDirective"
/ Dan komen we in "ngControllerDirectiveProvider"'s $get fct	, die	,
                var directive = $injector.invoke(directiveFactory);

/ applyDirectiveToNode sets
	nodeLinkFn.scope=true
	return nodeLinkFn
/ en compositeLinkFn does	,
         nodeLinkFn = linkFns[i++];
            if (nodeLinkFn.scope) {
              childScope = scope.$new();

/ 7	.

      <my-customer info="naomi"></my-customer>

  .directive('myCustomer', function() {
    return {
      restrict: 'E',
      scope: {
        customerInfo: '=info'
      },
      templateUrl: 'my-customer-iso.html'
    };
  });

/ Dan is er een "myCustomerDirectiveProvider" entry, met {$get:function ...}	,

function $CompileProvider($provide, $$sanitizeUriProvider) {
   this.directive = function registerDirective(name, directiveFactory) {
        $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
          function($injector, $exceptionHandler) {
/= $get
                var directive = $injector.invoke(directiveFactory);
//////////////////////////
/ Hier worden alle providers van directives create	,
/ het is {$get:function die hier boven staat}
/ dit obj en deze $get function is steeds een nieuwe, met in de closure scope name, directiveFactory, die wij zelf in script def	,
name, directiveFactory= 'myCustomer', function() {
    return {
      restrict: 'E',
      scope: {
        customerInfo: '=info'
      },
      templateUrl: 'my-customer-iso.html'
    };
/ NB. er is maar 1 function registerDirective, maar die krijgt bij iedere call steeds een nieuwe scope, en die blijft bewaard als closure scope van de dir provider's $get fct	,


/7	.

/ later, we zijn in 	,
   function addDirective(tDirectives, name,...
        for(var directive, directives = $injector.get(name + Suffix),
/s
           var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
/s
                var directive = $injector.invoke(directiveFactory);
{
restrict: "E"
scope: { 
customerInfo: "=info"
}
templateUrl: "my-customer-iso.html"
} 

/ 7	.

/ in providerCache	,
key="myCustomerDirectiveProvider", 
key="ngControllerDirectiveProvider", 
/ created in $CompileDirective, register	, factory	,

/ in instanceCache staan 
key="myCustomerDirective", 
/ def in script.js
key="ngControllerDirective", 
/ def in angular.js	,

/ 7	.

      <my-customer info="naomi"></my-customer>

/ info is geen directive	, want in ons script (of angular.js) hebben we NIET	,
	.directive("info",function(){
/ zodat er geen entry met key="info" in hasDirectives komt (local van $CompileProvider, en in closure scope van addDirective	,

/ we komen in applyDirectivesToNode	,

        if (directiveValue = directive.scope) {
          newScopeDirective = newScopeDirective || directive;

        if (directive.templateUrl) {
          templateDirective = directive;

          nodeLinkFn = compileTemplateUrl(directives.splice(i, directives.length - i), $compileNode, templateAttrs, jqCollection, childTranscludeFn, preLinkFns, postLinkFns, {
                controllerDirectives: controllerDirectives,
undefined
                newIsolateScopeDirective: newIsolateScopeDirective,
undefined
                templateDirective: templateDirective,
                nonTlbTranscludeDirective: nonTlbTranscludeDirective
undefined
              });
/s
    function compileTemplateUrl(directives, $compileNode, tAttrs,
        $rootElement, childTranscludeFn, preLinkFns, postLinkFns, previousCompileContext) {

         origAsyncDirective = directives.shift(),
directives=[]
          templateUrl = (isFunction(origAsyncDirective.templateUrl))
              ? origAsyncDirective.templateUrl($compileNode, tAttrs)
              : origAsyncDirective.templateUrl;
templateUrl: "my-customer-iso.html"

      $http.get($sce.getTrustedResourceUrl(templateUrl), {cache: $templateCache}).
/s
    forEach(SCE_CONTEXTS, function (enumValue, name) {
      var lName = lowercase(name);
      sce[camelCase("get_trusted_" + lName)] = function (value) {
->        return getTrusted(enumValue, value);
/s
    function getTrusted(type, maybeTrusted) {
type: "resourceUrl"
maybeTrusted: "my-customer-iso.html"

     var constructor = (byType.hasOwnProperty(type) ? byType[type] : null);
constructor: function TrustedValueHolderType(trustedValue) {

      if (type === SCE_CONTEXTS.RESOURCE_URL) {
        if (isResourceUrlAllowedByPolicy(maybeTrusted)) {
/s
    function isResourceUrlAllowedByPolicy(url) {
      var parsedUrl = urlResolve(url.toString());
{
hash: ""
host: "web"
hostname: "web"
href: "http://web/angularjs/DevGuide/directive/isolatedscope/my-customer-iso.html"
pathname: "/angularjs/DevGuide/directive/isolatedscope/my-customer-iso.html"
port: ""
protocol: "http"
search: ""
}

    for (i = 0, n = resourceUrlWhitelist.length; i < n; i++) {
        if (matchUrl(resourceUrlWhitelist[i], parsedUrl)) {
/ JA
resourceUrlWhitelist: Array[1]
0: "self"
          allowed = true;
          break;

/t
      $http.get($sce.getTrustedResourceUrl(templateUrl), {cache: $templateCache}).

/ Intermezzo

  angularModule('ng', ['ngLocale'], ['$provide',
    function ngModule($provide) {
      $provide.provider({
        $controller: $ControllerProvider,
        $http: $HttpProvider,
        $sce: $SceProvider,
        $templateCache: $TemplateCacheProvider,
/ def	, 
function $TemplateCacheProvider() {
  this.$get = ['$cacheFactory', function($cacheFactory) {
    return $cacheFactory('templates');
  }];
}


/ Einde Intermezzo

/s
   function createShortMethods(names) {
      forEach(arguments, function(name) {
        $http[name] = function(url, config) {
          return $http(extend(config || {}, {
    ->        method: name,
            url: url
          }));
        };
      });
    }
/s
function $HttpProvider() {
 var defaults = this.defaults = {
    // transform incoming response data
    transformResponse: [function(data) {
...
  // transform outgoing request data
    transformRequest: [function(d) {
...
   // default headers
    headers: {
...
   xsrfCookieName: 'XSRF-TOKEN',
    xsrfHeaderName: 'X-XSRF-TOKEN'
  };


    function $http(requestConfig) {
requestConfig: { 
cache: { 
...
}
method: "get"
url: "my-customer-iso.html" 
}

     var config = {
        transformRequest: defaults.transformRequest,
        transformResponse: defaults.transformResponse
      };

      var headers = mergeHeaders(requestConfig);
{
Accept: "application/json, text/plain, */*"
}

      var xsrfValue = urlIsSameOrigin(config.url)
          ? $browser.cookies()[config.xsrfCookieName || defaults.xsrfCookieName]
/s
function Browser(window, document, $log, $sniffer) {
...
/t
undefined

      var serverRequest = function(config) {
...

      var chain = [serverRequest, undefined];
      var promise = $q.when(config);
/s
  self.cookies = function(name, value) {





/ Einde DEBUG ANGULAR ISOLATE SCOPE 

/ ANGULAR Q 

[eric@walnut example]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/q/example

/ 7 	.	

[eric@walnut example]$ cat package.json 
{
  "name": "example",
  "version": "0.0.0",
  "devDependencies": {
    "grunt": "~0.4.2",
    "grunt-contrib-uglify": "~0.3.2",
    "grunt-contrib-jshint": "~0.8.0",
    "grunt-contrib-watch": "^0.5.3"
  }
}
/ vergeet niet de laatste entry geen , erachter	,
/ in js mag dat wel	,

$ npm install
/ installeert ze allemaal	,

/ Lees	,
http://www.jshint.com/docs/options/

$ vi Gruntfile.js

module.exports = function(grunt) {
  grunt.initConfig({
    pkg:grunt.file.readJSON("package.json"),
    banner:"/*! <%=pkg.name%> <%=grunt.template.today(\"yyyy-mm-dd\")%> */\n",
    jshint:{
      options:{
				asi:true	,
      },
      my_target:{
        src:["Gruntfile.js","src/**/*.js"]
      },
    },
    uglify:{
      options:{
        banner:"<%=banner%>"
      },
      my_target:{
        src:["src/**/*.js"],
        dest:"dist/<%=pkg.name%>-<%=pkg.version%>.min.js"
      }
    },
    watch:{
      jshint:{
        files:["Gruntfile.js","src/**/*.js"],
        tasks:["jshint","uglify"]
      },
    } ,
  });
  grunt.loadNpmTasks('grunt-contrib-jshint');
  grunt.loadNpmTasks('grunt-contrib-uglify');
  grunt.loadNpmTasks('grunt-contrib-watch');

  grunt.registerTask('default', ["jshint","uglify","watch"]);

};

/ de jshint option werkt NIET	,
        smarttabs:true,

/ als we een file hebben cp, doe dan	,
:%s/^I/ /g

$ vi index.html

    <div ng-controller="Ctrl">
      <h1>{{notif.message}}</h1>
      <h1>{{result.message}}</h1>
    </div>

$ vi script.js

(function(){

angular.module('app', [])
.controller('Ctrl', ["$scope","$q",function(scope,q) {

  var promise = asyncGreet('Robin Hood')
   promise.then(function(message) {
     scope.result={message:"Success: " + message}
   }, function(message) {
     scope.result={message:"Failed: " + message}
   }, function(message) {
     scope.notif={message:"Got notification: " + message}
   })

  function asyncGreet(name) {
     var deferred = q.defer()
 
     setTimeout(function() {
       //scope.$apply(function() {
         deferred.notify('About to greet ' + name + '.')
 
         if (okToGreet(name)) {
           deferred.resolve('Hello, ' + name + '!')
         } else {
           deferred.reject('Greeting ' + name + ' is not allowed.')
         }
       //})
     }, 1000)

     return deferred.promise
   }

  function okToGreet(){return true}


  }])

})()

/ Vraag :moeten we scope.$apply doen in asyncGreet	?
/ NEE
/ want na 1 sec komen we in	,

  self.defer = function(fn, delay) {
    var timeoutId;
    outstandingRequestCount++;
    timeoutId = setTimeout(function() {
      delete pendingDeferIds[timeoutId];
->      completeOutstandingRequest(fn);
    }, delay || 0);

  function completeOutstandingRequest(fn) {
    try {
->      fn.apply(null, sliceArgs(arguments, 1));

      $evalAsync: function(expr) {
        // if we are outside of an $digest loop and this is the first time we are scheduling async
        // task also schedule async auto-flush
        if (!$rootScope.$$phase && !$rootScope.$$asyncQueue.length) {
          $browser.defer(function() {
            if ($rootScope.$$asyncQueue.length) {
->              $rootScope.$digest();
            }

      $digest: function() {
->        var watch, value, last,
            watchers,

/ ERICJ




/ 7	.

   grunt.event.on('watch', function(action, filepath) {
        grunt.config(['uglify', 'build', 'src'], filepath);
    });
/ of	,
grunt.event.on('watch', function(action, filepath, target) {

    grunt.config('uglify.build.files.src', new Array(filepath) );

    // eventually you might want to change your destination file name
    var destFilePath = filepath.replace(/(.+)\.js$/, 'js-min/$1.js');
    grunt.config('uglify.build.files.dest', destFilePath);
});
/ TODO

/ 7	.

[eric@walnut 15]$ (cd ..;grep factory $(find -maxdepth 2 -name "*.js" ))
./4/script.js:app.factory("Data",function(){
./5/script.js:app.factory("Data",function(){
...
/ use $(find ...) en niet <(find ...)	, want dan krijg je een file met een lijstn van js files,	 en hij grep in deze file	,



/ Einde ANGULAR Q 

/ ANGULAR TEST FACTORY KARMA 

[eric@walnut example]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/q/example
[eric@walnut example]$ npm install grunt-karma --save-dev

$ vi node_modules/grunt-karma/package.json

  "dependencies": {
    "optimist": "~0.6.1",
    "lodash": "~2.4.1"
  },
  "devDependencies": {
    "grunt": "~0.4.3",
    "expect.js": "~0.2.0",
    "grunt-release": "~0.5.1",
    "grunt-contrib-watch": "~0.2.0",
    "grunt-conventional-changelog": "~0.0.12",
    "karma-mocha": "~0.1.1",
    "karma": "~0.12.0",
    "karma-firefox-launcher": "~0.1.3",
    "karma-chrome-launcher": "~0.1.2"
  },
  "peerDependencies": {
    "grunt": "0.4.x",
    "karma": "~0.12.0"
  },

/ we zien inderdaad dat grunt en karma ook zijn install	, dus de peerDependencies	,
/ maar de devDependencies niet	, 
/ de dependencies zijn in grunt-karma/node_modules	,

/ In karma zien we geen peerDependencies	, wel in eerdere installs (global, in yeoman, )
/ De devDependencies in karma zijn niet installed	, zoals karma-chrome-launcher	,  klopt	, we install karma alleen, we gaan karma niet bestuderen, dus de devDependencies van onze (root) module, example,  worden wel install	,

/ lees	,
http://karma-runner.github.io/0.10/about/migration.html

 



/ Voorlopig nog direct	,

/ 7	

/ op para	,

[eric@walnut angularjs]$ pwd
/home/eric/Devel/Web/angularjs
[eric@walnut angularjs]$ ls
angular-phonecat  angular-seed      

/in angular-phonecat e2e met karma	, in angular-seed met protractor	,

[eric@walnut angular-seed]$ pwd
/home/eric/Devel/Web/angularjs/angular-seed

[eric@walnut angular-seed]$ ls node_modules/protractor/selenium/
chromedriver                           selenium-server-standalone-2.39.0.jar
chromedriver_2.8.zip    

[eric@walnut angular-seed]$ ./scripts/e2e-test.sh 

Updating WebDriver
./scripts
-------------------------------------------------------------------
Updating selenium standalone
downloading https://selenium.googlecode.com/files/selenium-server-standalone-2.39.0.jar...
Updating chromedriver
downloading https://chromedriver.storage.googleapis.com/2.8/chromedriver_linux64.zip...
chromedriver_2.8.zip downloaded to /home/eric/Devel/Web/angularjs/angular-seed/node_modules/protractor/selenium/chromedriver_2.8.zip
selenium-server-standalone-2.39.0.jar downloaded to /home/eric/Devel/Web/angularjs/angular-seed/node_modules/protractor/selenium/selenium-server-standalone-2.39.0.jar

Starting Protractor tests
./scripts
-------------------------------------------------------------------
util.puts: Use console.log instead
Starting selenium standalone server...
util.puts: Use console.log instead
Selenium standalone server started at http://192.168.123.170:53727/wd/hub
./scripts/e2e-test.sh: line 18: 23909 Segmentation fault      (core dumped) $BASE_DIR/../node_modules/protractor/bin/protractor $BASE_DIR/../config/protractor-conf.js $*

/ TODO

/ 7	.

/ E2E

/ 13	.

[eric@walnut angular-phonecat]$  sudo npm install -g karma-ng-scenario
/ moest	,

/ lees	,
http://stackoverflow.com/questions/17025210/node-js-karma-end-to-end-testing-failed-to-proxy-app-index-html-error-connec

/ Doe 2 dingen	,
[eric@walnut angular-phonecat]$ ./scripts/web-server.js 
...
[eric@walnut angular-phonecat]$ ./scripts/e2e-test.sh 
/ OK, we een chrome en de 7 tests worden gedaan	, en chrome sluit	,

[eric@walnut angular-phonecat]$ ./scripts/test.sh 
/ OK een chrome verschijnt	, en we kunnen files edit, app/js/filters.js of test/unit/filterSpec.js	, 

/ 13	.

/ In angular.js zelf gaat het anders: browserstack	,
$ grunt test:e2e

/ 13	.

/ In angular-seed	, ERR	,

/ 13	.

[eric@walnut angular-phonecat]$ sudo npm install -g protractor
/usr/local/bin/protractor -> /usr/local/lib/node_modules/protractor/bin/protractor
/usr/local/bin/webdriver-manager -> /usr/local/lib/node_modules/protractor/bin/webdriver-manager
protractor@0.20.1 /usr/local/lib/node_modules/protractor
├── q@1.0.0
├── saucelabs@0.1.1
├── minijasminenode@0.2.7
├── adm-zip@0.4.4
├── optimist@0.6.1 (minimist@0.0.8, wordwrap@0.0.2)
├── glob@3.2.9 (inherits@2.0.1, minimatch@0.2.14)
└── selenium-webdriver@2.40.0

[eric@walnut angular-phonecat]$ sudo webdriver-manager update
Updating selenium standalone
downloading http://selenium-release.storage.googleapis.com/2.40/selenium-server-standalone-2.40.0.jar...
Updating chromedriver
downloading https://chromedriver.storage.googleapis.com/2.9/chromedriver_linux64.zip...
chromedriver_2.9.zip downloaded to /usr/local/lib/node_modules/protractor/selenium/chromedriver_2.9.zip
selenium-server-standalone-2.40.0.jar downloaded to /usr/local/lib/node_modules/protractor/selenium/selenium-server-standalone-2.40.0.jar

[eric@walnut angular-phonecat]$ sudo webdriver-manager start
seleniumProcess.pid: 11583
Mar 26, 2014 11:53:54 AM org.openqa.grid.selenium.GridLauncher main
INFO: Launching a standalone server
Setting system property webdriver.chrome.driver to /usr/local/lib/node_modules/protractor/selenium/chromedriver
11:53:54.222 INFO - Java: Oracle Corporation 24.45-b08
11:53:54.223 INFO - OS: Linux 3.11.4-101.fc18.x86_64 amd64
11:53:54.232 INFO - v2.40.0, with Core v2.40.0. Built from revision fbe29a9
11:53:54.280 INFO - Default driver org.openqa.selenium.ie.InternetExplorerDriver registration is skipped: registration capabilities Capabilities [{platform=WINDOWS, ensureCleanSession=true, browserName=internet explorer, version=}] does not match with current platform: LINUX
11:53:54.336 INFO - RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wd/hub
11:53:54.337 INFO - Version Jetty/5.1.x
11:53:54.338 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]
11:53:54.338 INFO - Started HttpContext[/selenium-server,/selenium-server]
11:53:54.339 INFO - Started HttpContext[/,/]
11:53:54.356 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@3b25b88c
11:53:54.357 INFO - Started HttpContext[/wd,/wd]
11:53:54.360 INFO - Started SocketListener on 0.0.0.0:4444
11:53:54.360 INFO - Started org.openqa.jetty.jetty.Server@48778a5d

/ 	7	.

[eric@walnut reference]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/reference

$ vi test/e2e/ngmodel.js

describe("ngmodel",function(){
it('should check ng-model', function() {
   browser().navigateTo('app/ngmodel.html');
   input('data.message').enter('Carlos Santana');
   expect(binding('data.message')).not().toEqual('Carlos Boozer');
});
})

$ vi app/ngmodel.html

<!doctype html>
<html >
<head>
<script src="lib/angular.js"></script>
</head>
<body>

<div ng-app="">
  <input type="text" ng-model="data.message">
  <h1>{{data.message}}</h1>
</div>

</body>
</html>

[eric@walnut reference]$ vi config/karma-e2e.conf.js 

module.exports = function(config){
    config.set({

    basePath : '../',

    files : [
        'test/e2e/**/*.js'
    ],

    autoWatch :true, 																	// !

    browsers : ['Chrome'],

    frameworks: ['ng-scenario'],

    singleRun : false,																// !

    proxies : {
      '/': 'http://localhost:8000/'
    },

    plugins : [
            'karma-junit-reporter',										// allen global
            'karma-chrome-launcher',
            'karma-firefox-launcher',
            'karma-jasmine',
            'karma-ng-scenario'
            ],

    junitReporter : {
      outputFile: 'test_out/e2e.xml',
      suite: 'e2e'
    }


})}

[eric@walnut reference]$ ./scripts/web-server.js 
[eric@walnut reference]$ karma start config/karma-e2e.conf.js 



/ we hoeven geen angular-scenario.js te install	, hij vindt de global	,
/ WH in karma-ng-scenario	, in /usr/local/lib/modules	, 

/ waar je de webserver start,	 is de doc root	, en daar kan hij niet uit	, dat kan apache ook niet	,
/ als we	,
[eric@walnut app]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/reference/app
$ ../script/web-server.js
/ dan is app/ de doc root	, dus dan moeten we,	
$ vi ngmodel.js
   browser().navigateTo('ngmodel.html');
/ Daarom moeten we ook angular.js install, we kunnen niet naar ../../angular.js/build/angular.js ref	,


/ we hoeven in karma-e2e.conf geen angular.js op te geven, dat doen we in ngmodel.html	,

/ we moeten 
<script src="lib/angular.js"></script>
/ want hij kijkt rel tov waar hij (ngmodel.html) is	, in /app dus	, 
/ Dus ook OK	,
<script src="../app/lib/angular.js"></script>
<script src="/app/lib/angular.js"></script>
/ ERR is	,
<script src="app/lib/angular.js"></script>
/ want er is geen /app/app/lib/angular.js

/ {{count}} moet voor scenario tussen tags	, bijv <h1>{{count}}</h1>

/ see angular.js's test/ngScenario/e2e/widgets-scenario.js en test/ngScenario/e2e/widgets.html voor een voorbeeld	,

/ 7	.

[eric@walnut reference]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/reference
[eric@walnut reference]$ cp /usr/local/lib/node_modules/protractor/referenceConf.js  config/
[eric@walnut reference]$ vi config/myConf.js 

   seleniumAddress: 'http://localhost:4444/wd/hub',
  specs: [
   // 'spec/*_spec.js',
    "../test/protractor/**/*.js"
  ],

$ vi test/protractor/ngclick.js

describe("ngclick",function(){

it('should check ng-click', function() {
  expect(element(by.binding('count')).getText()).toMatch('0');
  element(by.css('button')).click();
  expect(element(by.binding('count')).getText()).toMatch('1');
});
 
})

[eric@walnut reference]$ sudo webdriver-manager start
seleniumProcess.pid: 28214
Mar 26, 2014 8:17:25 PM org.openqa.grid.selenium.GridLauncher main
INFO: Launching a standalone server
Setting system property webdriver.chrome.driver to /usr/local/lib/node_modules/protractor/selenium/chromedriver
20:17:25.241 INFO - Java: Oracle Corporation 24.45-b08
20:17:25.241 INFO - OS: Linux 3.11.4-101.fc18.x86_64 amd64
20:17:25.251 INFO - v2.40.0, with Core v2.40.0. Built from revision fbe29a9
20:17:25.299 INFO - Default driver org.openqa.selenium.ie.InternetExplorerDriver registration is skipped: registration capabilities Capabilities [{platform=WINDOWS, ensureCleanSession=true, browserName=internet explorer, version=}] does not match with current platform: LINUX
20:17:25.355 INFO - RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wd/hub
20:17:25.356 INFO - Version Jetty/5.1.x
20:17:25.357 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]
20:17:25.358 INFO - Started HttpContext[/selenium-server,/selenium-server]
20:17:25.358 INFO - Started HttpContext[/,/]
20:17:25.376 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@29770daa
20:17:25.376 INFO - Started HttpContext[/wd,/wd]
20:17:25.379 INFO - Started SocketListener on 0.0.0.0:4444
20:17:25.380 INFO - Started org.openqa.jetty.jetty.Server@48778a5d

$ vi config/myConf.js

   seleniumAddress: 'http://localhost:4444/wd/hub',
  specs: [
    "../test/protractor/**/*.js"
  ],
/ TODO

[eric@walnut reference]$ protractor config/myConf.js 
/ TODO

/ see	,
https://egghead.io/lessons/angularjs-getting-started-with-protractor






/ Einde E2E


/ 7	.

/ op para	,

[eric@para angular-seed]$ pwd
/home/eric/Devel/Web/angularjs/angular-seed
$ npm install
/ OK

$ ./scripts/test.sh
/ OK, chrome verschijnt	,

$ vi app/js/filters.js
:w 
/ we zien in test.sh window 	,

INFO [watcher]: Changed file "/home/eric/Devel/Web/angularjs/angular-seed/app/js/filters.js".
Chrome 23.0.1271 (Linux): Executed 5 of 5 SUCCESS (0.354 secs / 0.022 secs)

/ 7	.

[eric@para angular-phonecat]$ pwd
/home/eric/Devel/Web/angularjs/angular-phonecat

$ vi package.json
    "karma-requirejs": "~0.1.0",

$ npm install
...
npm ERR! peerinvalid Peer karma@0.10.10 wants karma-requirejs@~0.2.0

/ lees	,
http://stackoverflow.com/questions/19455019/npm-err-peerinvalid-the-package-generator-karma-does-not-satisfy-its-siblings-p

[eric@para angular-phonecat]$ grep karma-requirejs  $(find -name package.json )
$ vi ./node_modules/karma/package.json
 "peerDependencies": {
    "karma-requirejs": "~0.2.0",

/ Dus 
$ vi package.json
    "karma-requirejs": "~0.2.0",

$ npm install
/ OK

[eric@para angular-phonecat]$ vi config/karma.conf.js 
   files : [
      'app/lib/angular/angular.js',
      'app/lib/angular/angular-*.js',
      'app/js/**/*.js',
      'test/unit/**/*.js'
    ],

$ ./scripts/test.sh

Starting Karma Server (http://karma-runner.github.io)
-------------------------------------------------------------------
INFO [karma]: Karma v0.10.10 server started at http://localhost:9876/
INFO [launcher]: Starting browser Chrome
INFO [Chrome 23.0.1271 (Linux)]: Connected on socket nRSxFNylfFajbwz4--25
Chrome 23.0.1271 (Linux): Executed 4 of 4 SUCCESS (0.261 secs / 0.051 secs)


$ vi app/js/filters.js
:w

/ we zien in  test-window	,

INFO [watcher]: Removed file "/home/eric/Devel/Web/angularjs/angular-phonecat/app/js/filters.js".
INFO [watcher]: Added file "/home/eric/Devel/Web/angularjs/angular-phonecat/app/js/filters.js".
Chrome 23.0.1271 (Linux): Executed 4 of 4 SUCCESS (0.483 secs / 0.044 secs)

/ 7	.

/ we kunnen dus altijd geven de package.json files in angular-seed en angular-phonecat karma en karma-chrome-launcher, ... install	,

/ in angular-phonecat' README.md 	,
`sudo npm install -g karma karma-jasmine karma-chrome-launcher

/ maar eerder hoefden we alleen	,
$ sudo npm install -g karma	,
/ we zien in karma/package.json geen peerDependencies meer	,
/ Lees	,
http://blog.nodejs.org/2013/02/07/peer-dependencies/

/ maar we kunnen altijd local	, als er een goede package.json is	, 
$ npm install

/ 7	. 

/ set up karma in eigen proj	,

/ we hebben karma global	, en ook karma-jasmine	,

/ als we karma ook local hebben , omdat we deden	,
$ npm install grunt-karma	--save-dev
/ dan als we doen	,
[eric@walnut example]$ karma start config/karma.conf.js 
/ dan zoekt hij karma-jasmine ook local	,
/ we moeten dus karma NIET local ook	,

/ Let op in de karma.conf.js moet in files angular eerst, 	dan onze eigen js en tests	,
/ ook moeten we angular-scenario.js exclude	,

    files: [
      "app/lib/angular/angular.js",
      'app/js/**/*.js',
      'test/unit/**/*.js',
    ],


    // list of files to exclude
    exclude : [
      'app/lib/angular/angular-scenario.js'
    ],

/ moeten we grunt-karma , want karma doet al auto watch	,
/ TODO

/ 7	.

/ lees	,
http://docs.angularjs.org/guide/controller
Testing Controllers

/ lees	,
http://stackoverflow.com/questions/13334749/testing-service-in-angular-returns-module-is-not-defined

/ we moeten angular-mocks.js include	,

/ anders kent hij in de test de fct module niet	,

$ vi karma.conf.js

    // list of files / patterns to load in the browser
    files: [
      "app/lib/angular/angular.js",
      "app/lib/angular/angular-mocks.js",
      'app/js/**/*.js',
      'test/unit/**/*.js',
    ],

$ vi app/js/script2.js

(function(){

var app2=angular.module("app2",[])
.controller("ctrl",function($scope){
  $scope.data={length:1,message:"bar"}
})


})()
 

$ vi test/unit/script2.js

describe('suite', function() {
 
    var $scope
 
    beforeEach(module('app2'))
 
    beforeEach(inject(function($rootScope, $controller) {
      $scope = $rootScope.$new()
      $controller('ctrl', {$scope: $scope})
    }))
 
    it('spec', function() {
      expect($scope.data.length).toBe(1)
    })
 
    it('spec2', function() {
      expect($scope.data.message).toBe("bar")
    })
})

/ OK

/ 7	.

/ we kunnen in karma.conf.js	, 

    files: [
//      "app/lib/angular/angular.js",
//      "app/lib/angular/angular-mocks.js",
/ of	,
      "../../../angular.js_cp/build/angular.js",
      "../../../angular.js_cp/build/angular-mocks.js",
      'app/js/**/*.js',
      'test/unit/**/*.js',
    ],

/ ze moeten bij elkaar	,

/ 7	.

/ lees	,
http://docs.angularjs.org/guide/services

/ we zien een unit test voor een factory	,

[eric@walnut example]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/q/example

$ vi index4.html

<div ng-app="app4">
  <div id="simple" ng-controller="ctrl">
    <p>Let's try this simple notify service, injected into the controller...</p>
    <input ng-init="message='test'" ng-model="message" >
    <button ng-click="callNotify(message);">NOTIFY</button>
    <p>(you have to click 3 times to see an alert)</p>
  </div>
</div>


$ vi app/js/script4.js

angular.module('app4', []).
  controller('ctrl', ['$scope','notify', function ($scope, notify) {
    $scope.callNotify = function(msg) {
      notify(msg)
    }
  }]).
 factory('notify', ['$window', function(win) {
    var msgs = []
    return function(msg) {
      msgs.push(msg)
      if (msgs.length == 3) {
        win.alert(msgs.join("\n"))
        msgs = []
      }
    }
  }])

/ 7	.

beforeEach( module('app4'))

beforeEach(function() {
  mock = {
    alert: jasmine.createSpy()
};

module(function($provide) {
	$provide.value('$window', mock);
});

/ de fct module registers de module , sets in modules	,

/ WH wordt "$windowProvider" vervangen hierboven	,

 inject(function($injector) {
    notify = $injector.get('notify');
  });
/ het arg van inject is in inject blockFns	,
    var blockFns = Array.prototype.slice.call(arguments, 0);

/ in angular.js pakt angularInit uit ng-app="app4" de "app4" string, hier doet module dat	, 
/ in angular.js sets doBootstrap de "ng" string erbij, en een module die maar uit 1 fct bestaat: die "$rootElementProvider" creates	, en die de injector maakt,	 hier sets inject de "ng" en "ngMock" strings erbij en maakt de injector	,

$ vi angular-mocks.js

angular.module('ngMock', ['ng']).provider({
  $browser: angular.mock.$BrowserProvider,
  $exceptionHandler: angular.mock.$ExceptionHandlerProvider,
  $log: angular.mock.$LogProvider,
  $interval: angular.mock.$IntervalProvider,
  $httpBackend: angular.mock.$HttpBackendProvider,
  $rootElement: angular.mock.$RootElementProvider
}).config(['$provide', function($provide) {
  $provide.decorator('$timeout', angular.mock.$TimeoutDecorator);
}]);

/ dus ook hier "$rootElementProvider"	,

/ 77	.

ddescribe('suite4', function() {

var mock, notify;

beforeEach(function() {
debugger
  mock = {
    alert: jasmine.createSpy()
};

/ mock is een local in de anon fct van ddescribe, en zit dus in de anon fct van beforeEarch's closure scope	, niet in de global scope dus	,

/ 77	.

 	module(function($provide) {
    $provide.value('$window', mock);
  });
	// 1ste arg "$window" is voor de name van de provider, "$windowProvider"  ,
  inject(function($injector) {
    notify = $injector.get('notify');
  });
/ inject calls createInjector, met modules app4,ng,ngMock en deze hier	die uit 1 fct bestaat (die een provider creates), uit angular code weten we dat deze fct wordt invoke: createInjector calls loadModules met al deze modules, en we zien 	,
        } else if (isFunction(module)) {
            runBlocks.push(providerInjector.invoke(module));

/ daarna inject invokes de arg fct	,
         injector.invoke(blockFns[i] || angular.noop, this);
/ $injector is makkelijk di, is de instanceInjector	, en deze heeft de factory in zijn closure scope	, 
            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);

/ dan: $injector.get	, die invokes "notifyProvider.$get"	,	maar die is gemaakt in ons script	,

 factory('notify', ['$window', function(win) {
/ = "notifyProvider"'s $get fct	,
    var msgs = []
    return function(msg) {
      msgs.push(msg)
      if (msgs.length == 3) {
        win.alert(msgs.join("\n"))
        msgs = []
      }
    }
  }])

/ dan wordt $window di	, dus wordt "$windowProvider"'s $get invoke	,die geeft 
mock={    
	alert: jasmine.createSpy()
};
/ dat is 'n obj met 1 fct erin	,

/ dan 
notify=function(msg) {
        msgs.push(msg)
         if (msgs.length == 3) {
           win.alert(msgs.join("\n"))
          msgs = []
         }
     }


/ dan 1ste spec	,

  notify('one');
/ dan  wordt inderdaad msgs.push("one"), en win.alert ("one\n") called, 	maar dit is een mock fct	,
  notify('two');
/ dan  wordt inderdaad msgs.push("two"), en win.alert ("one\ntwo\n") called, 	maar dit is een mock fct	,

/ 7.

/ De specs zijn	,

it('should not alert first two notifications', function() {
debugger
  notify('one');
  notify('two');

  expect(mock.alert).not.toHaveBeenCalled();
});

it('should alert all after third notification', function() {
  notify('one');
  notify('two');
  notify('three');

  expect(mock.alert).toHaveBeenCalledWith("one\ntwo\nthree");
});



/ Einde ANGULAR TEST FACTORY KARMA

/ ANGULAR RUN

/ we willen window.alert	, we hoeven geen elem te manage, dus we hoeven geen controller te create	, we use de run fct	,

[eric@walnut example]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/q/example

$ vi app/js/script6.js

angular.module('app6', [])

  .factory('alert', function($window) {
    return function(text) {
      $window.alert(text);
    }
  })

  .value('salutation', 'Hello')

  .factory('greet', function(alert, salutation) {
    return function(name) {
      alert(salutation + ' ' + name + '!');
    }
  })
  .run(function(greet){
    greet("foo")
  })

$ vi index6.html

<div ng-app="app6">
</div>

/ OK

/ als we	,
  .run(function($scope,greet){
    $scope.greet=greet("foo")
  })
/ dan ERR: Unknown provider: $scopeProvider
/ TODO 

/ Eest	,
  .run(function(greet){
    greet("foo")
  })
/ c
          run: function(block) {
            runBlocks.push(block);
/ adds anon fct aan "app6"'s _runBlocks	, dus hierop staat de fct	,
  function(greet){
    greet("foo")
  }

/ createInjector calls loadModules, en app6's _invokeQueue heeft 3 entries: 2 $provide.factory's en 1 $provide.value: dit zijn fcts die een provider maken (en reg in providerCache)	, 
/ iedere module (createInjector heeft als args modules: "ng", een fct die wordt invoke, die een provider creates, en "app6" (en die elk requires) , heeft ook een _runBlocks , en deze worden verzameld door loadModulesin runBlocks	, en returned	,

/ dan komen we in, in createInjector	,
 forEach(loadModules(modulesToLoad), function(fn) {
->    instanceInjector.invoke(fn || noop);
  });
/ hier staat: loadModules(modulesToLoad) is het array runBlocks en die gaat hij nu allemaal af	, hij invokes	,
  function(greet){
    greet("foo")
  }
/ de injector gaat hem invoke	,


/ Einde ANGULAR 

/ ANGULAR TEST FACTORY VALUE

/ see ook test/unit/script6a_spec.js

/ see ook test/unit/script6b_spec.js


/ In angular app maakt je 1 keer een injector, in tests maak je voor/in elke spec een injector (in een beforeEach)	,

[eric@walnut example]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/q/example
$ vi app/js/script6.js


var app6=angular.module('app6', [])

app6.factory('alert', function($window) {
    return function(text) {
      $window.alert(text);
    }
  })

app6.value('salutation', 'Hello')

app6.factory('greet', function(alert, salutation) {
    return function(name) {
      alert(salutation + ' ' + name + '!');
    }
  })
app6.run(function(greet){
    greet("foo")
  })

$ vi test/unit/script6_spec.js

ddescribe("suite6",function(){

var win,salutation

beforeEach(module("app6"))

beforeEach(function(){
  win={
    alert:jasmine.createSpy()
  }
  module(function($provide){
    $provide.value("$window",win)
  })
  inject(function($injector){
    salutation=$injector.get("salutation")
    alert=$injector.get("alert")
    greet=$injector.get("greet")
  })
})

it("salutation",function(){
  expect(salutation).toBe("Hello")
})
it("alert",function(){
  var msg="Foo bar"
  alert(msg)
  expect(win.alert).toHaveBeenCalled()
  expect(win.alert).toHaveBeenCalledWith(msg)
  expect(win.alert.callCount).toBe(2)
})
it("greet",function(){
  var msg="Baz gee"
  greet(msg)
  expect(win.alert).toHaveBeenCalled()
  expect(win.alert).toHaveBeenCalledWith("Hello"+" "+msg+"!")
  expect(win.alert.callCount).toBe(2)
})

/ Inderdaad	,
  expect(win.alert.callCount).toBe(2)
/ want iedere spec creates een injector	, en deze calls 	,

  forEach(loadModules(modulesToLoad), function(fn) {
->    instanceInjector.invoke(fn || noop);

/ hier staat: als alle modules zijn loaded (dwz. providers zijn create)	, pas dan exec de fcts op de _runBlocks van alle modules	, dus niet permodule: load module, exec _runBlock fcts op die module	,

/ en loadModules(modulesToLoad) returns runBlocks, een local van loadModules, die verzamelt alle module's _runBlocks fcts (modules die worden loaded), en door de app6.run call in het script wordt deze fct als runBlock fct register	, en 
function(greet){
    greet("foo")
}
/ en wordt dus later in createInjector called , bij -> hierboven	,  
/ greet=function(name) {
      alert(salutation + ' ' + name + '!');
    }
/ en alert=function(text) {
      $window.alert(text);
    }
/ waar $window={
    alert:jasmine.createSpy()
  }

/ in de spec, 	
  alert(msg)
  expect(win.alert).toHaveBeenCalled()
/ we moeten win use in win.alert en kunnen geen $window.alert, want de spec kan $window niet di, resolve, 
/ alert heet $window in closure scope	, want	,

/ def,
app6.factory('alert', function($window) {
    return function(text) {
/=alert fct hieronder,	
      $window.alert(text);
    }

beforeEach(function(){
    alert=$injector.get("alert")
alert is fct,	 "alert" is service name	,
/ alles is di	, resolved	, dus $window=win={alert: ...}	,

/ dus in spec kunnen we alert gewoon call, want alles is al resolved	,
dus wordt win.alert called	,

/ 7	.

/ we zien ook	,
app6.value('salutation', 'Hello')
/ ivp
salutation="Hello"

/ we zien	,
app6.factory('alert', function($window) {
    return function(text) {
      $window.alert(text);
    }
  })



/ Einde ANGULAR TEST FACTORY VALUE

/ ANGULAR TEST FACTORY VALUE

/ 7	.

/ we kunnen 2 keer achter elkaar inject in een spec	, hij calls angular.injector maar 1 keer	,

[eric@walnut example]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/q/example

$ vi test/unit/script6b_spec.js

beforeEach(function(){
  inject(function($injector){					// 1ste blockFn
    greet=$injector.get("greet")
  })
})
it("greet",inject(function($window){ // 2de blockFn
...

$ vi angular-mocks.js

  window.inject = angular.mock.inject = function() {
      var injector = currentSpec.$injector;
      if (!injector) {
        injector = currentSpec.$injector = angular.injector(modules);

/ modules zijn create in module	,

/ dan calls inject blockFns	, in de 1ste inject en in de 2de	,

/ angular.injector calls ook blockFns, die waren return door loadModules	, deze zijn of door ons met app6.run erop set, of in loadModules	,
       } else if (isFunction(module)) {
            runBlocks.push(providerInjector.invoke(module));
        } else if (isArray(module)) {
            runBlocks.push(providerInjector.invoke(module));

/ doBootstrap doet dat bijv	, 
    modules.unshift(['$provide', function($provide) {
      $provide.value('$rootElement', element);
    }]);
    var injector = createInjector(modules);

/ maar $provide.value returns undefined	, 

/ 7	.

/ in de test use we module	, wat is de tegenhanger in angular	?
/ zoals doBootstrap het doet	,
/ TODO

/ we deden in script6.js	,
angular.module(function($provide){
  $provide.value("foo","Foo")
},[])
/ Zinloos	, 
/ TODO

/ in een test reg je met module een provider	,

  module(function($provide){
    $provide.value("$window",{
      alert:jasmine.createSpy()
    })
  })

/ en dat is wat in doBootstrap ook gebeurt	,

/ wat in doBootstrap	,
    modules.unshift(['$provide', function($provide) {
      $provide.value('$rootElement', element);
    }]);
/ dat komen we in  loadModules	,
       } else if (isArray(module)) {
            runBlocks.push(providerInjector.invoke(module));

/ 77	.

/ Dit is zinloos,	
$ vi app/js/script6.js

angular.module("",[],function($provide){
  $provide.value("foo","Foo")
})

$ vi test/unit/script6b_spec.js

it("greet",inject(function($window,foo){
/ er is geen fooProvider	,


/ Einde ANGULAR TEST FACTORY VALUE

/ ANGULAR MODULES

/ Lees	,
http://docs.angularjs.org/guide/module

[eric@walnut example]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/q/example

/ NB 
/ ng-app="xmpl"	, niet bijv "xmpl.service"	,

$ vi index8.html

<div ng-app="xmpl"> 
  {{ greeting }}!
	<div ng-controller="XmplController">
  	{{ greeting }}!
	</div>
</div>

$ vi app/js/script8.js

angular.module('xmpl.service', []).
  value('greeter', {
    salutation: 'Hello',
    localize: function(localization) {
      this.salutation = localization.salutation;
    },
    greet: function(name) {
      return this.salutation + ' ' + name + '!';
    }
  }).
  value('user', {
    load: function(name) {
      this.name = name;
    }
  });

angular.module('xmpl.directive', []);

angular.module('xmpl.filter', []);

var xmpl=angular.module('xmpl', ['xmpl.service', 'xmpl.directive', 'xmpl.filter'])
xmpl.run(function(greeter, user,$rootScope) {
    // This is effectively part of the main method initialization code
    greeter.localize({
      salutation: 'Bonjour'
    });
    user.load('World');
    $rootScope.greeting=greeter.greet(user.name)
});

var XmplController = function($scope, greeter, user) {
  $scope.greeting = greeter.greet(user.name);
};


/ We zien keer	,
Bonjour World

/ De 1ste keer is logisch	, 
/ De 2de keer: de runBlock fcts exec na loadModules, voor compile	, en greeter en user zijn resolved , en set in instanceCache,  en dan di, 
/ en compile maakt de controller, en dan wordt greeter , user di, maar deze worden uit instanceCache gehaald door $provide.getService	, en niet worden ze resolve, door de greeterProvider.$get , en userProvider.$get  te call	,

/ Einde ANGULAR MODULES

/ ANGULAR MODULES

$ vi app/js/script6.js

angular.module("foo",[],function($provide){
  $provide.value("foo","Foo")
})
/ deze anon fct komt op foo's invokeQueue, niet op runBlocks	, want	,

$ vi angular.js

/ 13	.

    return function module(name, requires, configFn) {
/= angular.module

      return ensure(modules, name, function() {

        var config = invokeLater('$injector', 'invoke');
///////////
/ Dit wordt de $injector uit de providerCache	, see hieronder	,

        if (configFn) {
          config(configFn);

        function invokeLater(provider, method, insertMethod) {
          return function() {
            invokeQueue[insertMethod || 'push']([provider, method, arguments]);

/ 13

  function loadModules(modulesToLoad){

          for(invokeQueue = moduleFn._invokeQueue, i = 0, ii = invokeQueue.length; i < ii; i++) {
            var invokeArgs = invokeQueue[i],
                provider = providerInjector.get(invokeArgs[0]);
            provider[invokeArgs[1]].apply(provider, invokeArgs[2])

/ hier zien we dat als we met app6.config een fct op de invokeQueue hebben set, invokeArgs[0]="$injector", en dat is dus die uit providerCache	,

/ dus hij gaat doen	,  (gaat "fooProvider" maken in providerCache)
providerInjector.invoke(["$provide",function($provide){
  	$provide.value("foo","Foo")
}])	,

/ 7	.

$ vi index6.html

<div ng-app="app6">
<h1>{{foo}}</h1>
</div>

$ vi app/js//script6.js

angular.module("foo",[],function($provide){
  $provide.value("foo","Foo")
})
var app6=angular.module('app6', ["foo"])

app6.factory('alert', function($window) {
    return function(text) {
      $window.alert(text);
    }
  })

app6.value('salutation', 'Hello')

app6.factory('greet', function(alert, salutation) {
    return function(name) {
      alert(salutation + ' ' + name + '!');
    }
  })
app6.run(function(greet,foo,$rootScope){
    greet(foo)  
    $rootScope.foo=foo
  })

/ als we {{foo}} willen, dan moeten we foo wel in root scope set	,

/ In 	,
angular.module("foo",[],function($provide){
  $provide.value("foo","Foo")
})
/ komt deze fct op de invoke queue van foo	,

/ 7	. 

/ we kunnen net als in doBootstrap een "module" maken, dat 1 fct is (die het create van een provider calls)	,

$ vi index6.html

<div ng-app="app6">
	<h1>{{foo}}</h1>
	<h1>{{bar}}</h1>
</div>

$ vi app/js//script6.js

var app6=angular.module('app6', [
  ["$provide",function($provide){
    $provide.value("foo","Foo")
  }],
  ["$provide",function($provide){
    $provide.value("bar","Bar")}]
])

app6.factory('alert', function($window) {
    return function(text) {
      $window.alert(text);
    }
  })

app6.value('salutation', 'Hello')

app6.factory('greet', function(alert, salutation) {
    return function(name) {
      alert(salutation + ' ' + name + '!');
    }
  })
app6.run(function(greet,foo,$rootScope,bar){
    greet(foo+bar)
    $rootScope.foo=foo
    $rootScope.bar=bar
  })

/ we zien op de alert window Hello FooBar
/ In de DOM zien we 
Foo
Bar

/ we komen in loadModules	,

        } else if (isFunction(module)) {
            runBlocks.push(providerInjector.invoke(module));
        } else if (isArray(module)) {
->            runBlocks.push(providerInjector.invoke(module));

/ het verschil is dat vallen in de 1ste als we
function($provide){
	$provide.value("foo","Foo")
}
/ en in de 2de als we 	
["$provide",function($provide){
	$provide.value("foo","Foo")
}]


/ 7	. 

/ we kunnen	,

$ vi app/js/script6.js

app6.factory('alert', function($window) {
    return function(text) {
      $window.alert(text);
    }
})
app6.config(function($provide){
  $provide.value("salutation","Hello")
  $provide.factory('greet', function(alert, salutation) {
    return function(name) {
      alert(salutation + ' ' + name + '!');
    }
  })
})

/ we zien bij app6.config een extra fct ertussen	, om $provide te di	,
/ app6.factory doet dat nl zelf	,

$ vi angular.js

         factory: invokeLater('$provide', 'factory'),

/ 7	.






/ Einde ANGULAR MODULES


/ ANGULAR PROMISE 

/ 7	.

[eric@walnut example]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/q/example
[eric@walnut example]$ vi index7.html 

  <body ng-app="app7">
  {{msg}}
  </body>

[eric@walnut example]$ vi app/js/script7.js

var app7=angular.module("app7",[])

app7.run(["$q","$rootScope",function($q,$rootScope){
  var defer=$q.defer()
  var msg="Foo"
  defer.promise.then(function(){
    alert(msg)
  })
  $rootScope.msg=msg
  defer.resolve()
}])

/OK	, we zien de alert, en we zien de msg in de DOM 	,

/ want in createInjector,	
  forEach(loadModules(modulesToLoad), function(fn) {
    instanceInjector.invoke(fn || noop);
  });
/ dus nadat alle modules zijn loaded (dwz de providers zijn created)	, worden de runBlocks fct invoke	, want loadModules returns de verz van alle module's _runBlocks	,

/ Einde ANGULAR PROMISE 

/ ANGULAR TEST 

/ 7	.

/ angular.forEach

/ we kunnen een test run, zonder module	,

$ vi test/unit/ng_misc.js

ddescribe("ng_misc",function(){

var person,log

beforeEach(function(){
  person={name:"eric j",gender:"male"}
  log=[]
debugger
  angular.forEach(person,function(prop,key){
    this.push(key+": "+prop)
  },log)
})
it("forEach",function(){
  expect(log).toEqual(["name: eric j","gender: male"])
})

/ het laatste arg van angular.forEach, log,  is context,  we hadden ipv this ook log kunnen write (en context arg log weglaten)	, 

/we komen in	,

function forEach(obj, iterator, context) {
  var key;
  if (obj) {
    if (isFunction(obj)){
/ NEE
   } else if (obj.forEach && obj.forEach !== forEach) {
/ NEE
    } else if (isArrayLike(obj)) {
/ NEE
    } else {
/ JA
      for (key in obj) {
        if (obj.hasOwnProperty(key)) {
          iterator.call(context, obj[key], key);


/ Einde ANGULAR TEST 

/ DEBUG ANGULAR PROMISE

/ 7	.

/ lees	,
https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise

The Promise interface represents a proxy for a value not necessarily known at its creation time. It allows you to associate handlers to an asynchronous action's eventual success or failure. This lets asynchronous methods return values like synchronous methods: instead of the final value, the asynchronous method returns a promise of having a value at some point in the future.

A promise can become either fulfilled with a value, or rejected with a reason. When either of these happens, the associated handlers queued up by a promise's then method are called.

/ je krijgt geen value, maar een belofte, en op deze belofte maak je handlers	,

/ .resolve zouden we .fulfill kunnen noemen	( hij voldoet nu aan de belofte), want	,

      resolve: function(val) {
          value = ref(val);
                value.then(callback[0], callback[1], callback[2]);

///////////////////
/ eerst zet we de handlers op de belofte van de value (promise.then), maar nu is de value zeker	, dus worden de handlers op de value set	,
/ geef de value val aan een van de handlers (die achter promise.then staan)	,

/ pending=nog niet resolved	, belofte voldaan is, value bekend is	,  

/ .resolve wordt pas called als de value er is	, .resolve geeft de value aan de handlers (achter then), die called worden	,

/ defer().promise.then en defer().resolve  hebben beide pending in closure scope,	 
/ promise.then sets handlers op pending, en .resolve (value is er , want dan wordt resolve called, en dus maakt .resolve pending=undefined, want de value is er, is niet meer pending)	, haalt ze van pending af	, en geeft ze value	( of geeft de handlers aan value	)

/ de defer().promise geeft de mog. om handlers op de pending te set, .resolve (called als de value bekend) zal ze eraf halen, en zal ze de value geven	,


/ 7	. 

/ in script_a.js	,

     $timeout(function() {
         result.notify('About to greet ' + name + '.')
           result.resolve('Hello, ' + name + '!')
     }, 1000)

/ we komen in	,

  self.defer = function(fn, delay) {
    timeoutId = setTimeout(function() {
->      completeOutstandingRequest(fn);
    }, delay || 0);
/ c
  function completeOutstandingRequest(fn) {
->      fn.apply(null, sliceArgs(arguments, 1));
/c
function $TimeoutProvider() {
  this.$get = ['$rootScope', '$browser', '$q', '$exceptionHandler',
       function($rootScope,   $browser,   $q,   $exceptionHandler) {

    function timeout(fn, delay, invokeApply) {
      timeoutId = $browser.defer(function() {
->        if (!skipApply) $rootScope.$apply();
      }, delay);

/ Dus wordt er toch $rootScope.$apply() waardoor de asyncQueue wordt process	,

/ 7	.

/ Hoe een $timeout unit test?

$ vi app/js/script_a.js

     $timeout(function() {
         result.notify('About to greet ' + name + '.')
         if (okToGreet(name)) {
           result.resolve('Hello, ' + name + '!')
         } else {
           result.reject('Greeting ' + name + ' is not allowed.')
         }
     }, 1000)

$ vi test/ng/script_a_spec.js

  var promise=greet("Robin Hood")
  var promise2=promise.then(function(value){
    alert(value)
  })
  $timeout.flush()
//  $rootScope.$apply()

/ Als we GEEN $timeout in script, moeten we $rootScope.$apply() in de test	,
/ maar als we WEL $timeout in script, moeten we $timeout.flush(), en hoeft NIET $rootScope.$apply(), want deze wordt al called	,

  $timeout.flush()
/c
  $delegate.flush = function(delay) {
->    $browser.defer.flush(delay);
/c
  self.defer.flush = function(delay) {
    while (self.deferredFns.length && self.deferredFns[0].time <= self.defer.now) {
->      self.deferredFns.shift().fn();
/c
    function timeout(fn, delay, invokeApply) {
      timeoutId = $browser.defer(function() {
->        if (!skipApply) $rootScope.$apply();

/ 7	.

/ in 	,
  var when = function(value, callback, errback, progressback) {

		result=defer()

    nextTick(function() {
->      ref(value).then(function(value) {
        result.resolve(ref(value).then(wrappedCallback, wrappedErrback, wrappedProgressback));
		return result.promise

/  bij ->	, meteen wordt ref(value).then called (want de value is er al), iets wat .resolve doet	, dus we zien dat .resolve wordt overgeslagen	,
/ value={url:..., ... } bij .$http	,
/ dan result.resolve	, dat is voor sendRequest die zich als handler op de promise heeft reg	,
/ bij ons is 2de arg van when undefined, en daarom is 
ref(value).then(function(value)
/=
ref(value).then(wrappedCallback, wrappedErrback, wrappedProgressback)
/ dus wordt 2 keer gedaan	,




/ 7	.

[eric@walnut example]$  pwd
/home/eric/Devel/Web/angularjs/DevGuide/q/example

$ vi app/js/script7.js
$ vi app/js/script7a.js
$ vi app/js/script7b.js
$ vi test/unit/script7b_spec.js
$ vi test/unit/script7b2_spec.js
$ vi app/js/script7c.js							/ $q.when
$ vi test/unit/script7c_spec.js

/ 7	.

/ test/unit/script7b2_spec.js zonder $window.alert	,
/ we zien	,

it("promise",inject(function(promise,$rootScope,msg,resolved){
  var response
  var promise2=promise.then(function(value){
->    response=value
    return(msg+", "+value)
  })
  $rootScope.$apply()
  expect(response).toBe(resolved)
}

/ we moeten 
  $rootScope.$apply()
/ zodat de asyncQueue wordt process	, en dus dat we in -> komen	, 
/ we moeten de .then handler voor de $rootScope.apply() def	,
/ dus ook OK is	,

it("promise_",inject(function(promise,$rootScope,msg,resolved){
  var response,response2
  var promise2=promise.then(function(value){
    response=value
    return(msg+", "+value)
  })
  var promise3=promise2.then(function(value){
    response2=value
    return(msg+", "+value)
  })
  $rootScope.$apply()
  expect(response).toBe(resolved)
  expect(response2).toBe(msg+", "+resolved)
}))

/ .then creates a async value en promise erop en wraps de handler in de resolve van deze value en set deze op pending , 	de oorspronkelijke .resolve pakt deze handler en calls de handler met de value,   
/ TODO
/ keten 
/ TODO

/ 7	.

/ $q.when

/ see app/js/script7c.js	, test/unit/script7c_spec.js	,

/ 7	.

/ de runBlocks fcts worden processed in	,
  forEach(loadModules(modulesToLoad), function(fn) {
    instanceInjector.invoke(fn || noop);

/ want loadModules verzamelt de fcts uit alle module's _runBlocks	, 

/ NB

/ In test doe	,

  var promise2=promise.then(function(value){
    var msg2=msg+", "+value
    alert(msg2)
    return(msg2)
  })
///////////////////////////
  $rootScope.$apply()
///////////////////////////


/ 7	.

/ als we	,
  $rootScope.$evalAsync(
    result.resolve("resolved value")
	)
/ dan wordt 
    result.resolve("resolved value")
/ meteen called,	 en omdat deze undefined return	, wordt er undefined op de root scope's asyncQueue set	,
/ we doen daarom	,
  $rootScope.$evalAsync(function(){
    result.resolve("resolved value")
	})
/ dan vindt er geen call plaats, en wordt deze fct op de asyncQueue set	,

/ 7	.

promise.then: maak ook een result, met een promise erop	, de result wordt (door resolve ) de then-fct exec op de value uit de 1ste result ,	




/ Einde DEBUG ANGULAR PROMISE 

/ ANGULAR HTTP

/ 7	.

[eric@walnut example]$ karma start config/karma.conf.js 

/ Kan ook via grunt?
/ TODO

/ 7	.

[eric@walnut example]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/q/example
[eric@walnut example]$ vi app/js/script9.js 

var app9=angular.module("app9",[])

app9.run(["$http","$rootScope",function($http,$rootScope){

  $http({
    method:"GET",
    url:"/jquery/aj3.php"
  })
  .then(function(value){
    $rootScope.data=value.data
    $rootScope.status=value.status
    $rootScope.headers=value.headers
    $rootScope.config=value.config
  })

}])

$ vi index9.html

<div ng-app="app9">
  {{ data}}
  <br>
  {{ status}}
  <br>
  {{ headers}}
  <br>
  {{ config}}
</div>

/ 7	.

$ vi angular.js

      var serverRequest = function(config) {
         return sendReq(config, reqData, headers).then(transformResponse, transformResponse);

    function sendReq(config, reqData, reqHeaders) {
      var deferred = $q.defer(),
          promise = deferred.promise,
...
      promise.then(removePendingReq, removePendingReq);

/ we zien chain 	, removePendingReq wordt 't eerst called	,
/TODO

/c
     function transformResponse(response) {
response: Object
config: Object
	headers: Object
	method: "GET"
	transformRequest: Array[1]
	transformResponse: Array[1]
	url: "/jquery/aj3.php"
data: "This is a result.↵"
headers: function (name) {
status: 200

/ daarna in	, bij ->	,
	$http({
		method:"GET",
		url:"/jquery/aj3.php"
	})
	.then(function(value){
->		$rootScope.data=value.data
		$rootScope.status=value.status
		$rootScope.headers=value.headers
		$rootScope.config=value.config
	})



/ 7	.

/ Voordat in 	,
      var serverRequest = function(config) {

/ ergens is val 'n promise en dan is ref(val)=val=promise, en wordt in	,
      promise: {
        then: function(callback, errback, progressback) { nu=nu
         } else {
->            value.then(wrappedCallback, wrappedErrback, wrappedProgressback);
/ de promise's then called, en niet de then in de obj die ref geeft	,

/ 7	.

/ MORGEN	,
http://docs.angularjs.org/api/ngMock/service/$httpBackend
/ script9




/ Einde ANGULAR HTTP

/ ANGULAR DIRECTIVES

/ video 15	,

$ vi script.js

app.directive("foo",function(){
  return{
    restrict:"E"
    ,controller:["$scope",function($scope){ 	// ctor	op Constructor inst	,
      $scope.ab=[]
      this.addStr=function(){
        $scope.ab.push("str") }
...
    }]
    ,link:function(sc,el){
      el.on("mouseenter",function(){
        el.addClass("label")
        console.log(sc.ab)
      })

/ is als	,

var ngModelDirective = function() {
  return {
    require: ['ngModel', '^?form'],
    controller: NgModelController,
    link: function(scope, element, attr, ctrls) {
...
/ TODO

/ Dit waren de directives	,
/ applyDirectivesToNode(directives,compileNode,... maakt 1 nodeLinkFn	, en process alle directives in deze compileNode: is het een controller directive	, en verz alle link fns	,

/ in nodeLinkFn 	,
         forEach(controllerDirectives, function(directive) {
           var locals = {
              $scope: ... ? isolateScope : scope,
							$element: $element,
              $attrs: attrs,
              $transclude: transcludeFn 

            controller = directive.controller;
            controllerInstance = $controller(controller, locals);
/c
      instance = $injector.instantiate(expression, locals);
/ expression is ctor hierboven	, de controller prop uit de dir	,
/c
      instance = new Constructor();
      returnedValue = invoke(Type, instance, locals)
/c
          $inject = annotate(fn),
      for(i = 0, length = $inject.length; i < length; i++) {
        key = $inject[i];
/ we hebben maar 1 annot	, "$scope", en deze haalt hij uit locals	,
        args.push(
          locals && locals.hasOwnProperty(key)
          ? locals[key]
          : getService(key)
/ Dus de volgorde waarin we de annot geven of de args van de fct maakt niet uit	, hij zoekt ze op in locals of calls getService	, dus di	,

/ daarna in nodeLinkFn	,

       for(i = postLinkFns.length - 1; i >= 0; i--) {
          try {
            linkFn = postLinkFns[i];
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs, linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);
/ we zien precies dezelfde scope als waarin de controller zal write, alleen had hij daar het label (key) $scope	,  

/ getControllers(require="foo",<foo ...>, {foo:ctrl}) calls	,
            value = elementControllers[require];
/ de ctrl  van hierboven	,

/ we komen in	,
app.directive("str",function(){
	return{
		require:"foo"
		,link:function(sc,el,at,ctrl){ 
->			ctrl.addStr() 
		}
/ c
		,controller:["$scope",function($scope){
			$scope.ab=[]
			this.addStr=function(){
->				$scope.ab.push("str") }

/ 7	. 

/ .directive maakt een provider met $provide.factory, 

app.directive("foo",function(){
  return{
    restrict:"E"
//    ,scope:{}
    ,controller:["$scope",function($scope){
      $scope.ab=[]
      this.addStr=function(){
        $scope.ab.push("str") }
      this.addSp=function(){
        $scope.ab.push("sp") }
      this.addFl=function(){
        $scope.ab.push("fl") }
    }]
    ,link:function(sc,el){
      el.on("mouseenter",function(){
        el.addClass("label")
        console.log(sc.ab)
      })
    }
  }
})
/ =
/ invokeLater $compileProvider.directive("foo",function(){...})
	                                               ^^^
																									factory fct

/ maakt "fooDirectiveProvider"	, met $provide.factory
/ en de .$get fct daarvan invoke de factory fct	, dat is de anon fct hierboven	, dat is het enigste wat deze dir provider doet	,

/ 7	.


/ compileNodes calls applyDirectivesToNode, deze  heeft local controllerDirectives, en maakt een innner fct nodeLinkFn  , de local scope wordt closure scope van de nodeLinkFn, die dus bewaard blijft, en de volgende  call op applyDirectivesToNode zal een nieuwe closure scope voor een nieuwe nodeLinkFn maken	,
/ dus controllerDirectives is per node	,
/ applyDirectivesToNode return nodeLinkFn die hij heeft create	,

  var ngControllerDirective = [function() {
   	return {
      scope: true,
     	controller: '@',
      priority: 500
   	};
   }];

/ applyDirectivesToNode doet	,
        if (directiveValue = directive.scope) {
          newScopeDirective = newScopeDirective || directive;
      nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;
		return nodeLinkFn

/ doBootstrap calls	,
          $compile($rootElement)($rootScope);
/ compositeLinkFn doet	,  

            if (nodeLinkFn.scope) {
              childScope = scope.$new();
            } else {
              childScope = scope;

              nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);

/ nodeLinkFn heeft closure scope van applyDirectivesToNode	, 
        if (controllerDirectives) {
          forEach(controllerDirectives, function(directive) {
            var locals = {
              $scope: directive === newIsolateScopeDirective || directive.$$isolateScope ? isolateScope : scope,
              $element: $element,
              $attrs: attrs,
              $transclude: transcludeFn
            }, controllerInstance;

           controller = directive.controller;
            controllerInstance = $controller(controller, locals);
            elementControllers[directive.name] = controllerInstance;

            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs, linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);

/ getControllers(linkFn.require, $element, elementControllers) use key linkFn.require om te zoeken in elementControllers	,

/ 7	.

<h1>{{data.message}}</h1>

/ compileNodes calls collectDirectives	,
        case 3: /* Text Node */
          addTextInterpolateDirective(directives, node.nodeValue);
/c
    function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
/ $interpolate=$InterpolateProvider.$get()=function die ook $interpolate heet	,
/c
          parts.push(fn = $parse(exp = text.substring(startIndex + startSymbolLength, endIndex)));

parts: Array[1]
0: function (self, locals) {
/ =
Lexer.prototype.readIdent
     var getter = getterFn(ident, this.options, this.text);
      token.fn = extend(function(self, locals) {
        return (getter(self, locals));
/ haalt value uit scope's data.message
/ Dit wordt de .get fct van de watch, en de watch.fn is	de 2de,
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;

/ want	,

function $ParseProvider() {
  this.$get = ['$filter', '$sniffer', '$log', function($filter, $sniffer, $log) {
    return function(exp) {				/= $parse
      switch (typeof exp) {
        case 'string':
          var lexer = new Lexer($parseOptions);
          var parser = new Parser(lexer, $filter, $parseOptions);
          parsedExpression = parser.parse(exp, false);
/c

Parser.prototype = {
  parse: function (text, json) {
    this.tokens = this.lexer.lex(text);
/c
  readIdent: function() {
       var getter = getterFn(ident, this.options, this.text);
/c
function getterFn(path, options, fullExp) {
  } else {
    var code = 'var l, fn, p;\n';
    forEach(pathKeys, function(key, index) {
      ensureSafeMemberName(key, fullExp);
      code += 'if(s === null || s === undefined) return s;\n' +
              'l=s;\n' +
              's='+ (index
                      // we simply dereference 's' on any .dot notation
                      ? 's'
                      // but if we are first then we check locals first, and if so read it first
                      : '((k&&k.hasOwnProperty("' + key + '"))?k:s)') + '["' + key + '"]' + ';\n' +
              (options.unwrapPromises
                ? 'if (s && s.then) {\n' +
                  ' pw("' + fullExp.replace(/(["\r\n])/g, '\\$1') + '");\n' +
                  ' if (!("$$v" in s)) {\n' +
                    ' p=s;\n' +
                    ' p.$$v = undefined;\n' +
                    ' p.then(function(v) {p.$$v=v;});\n' +
                    '}\n' +
                  ' s=s.$$v\n' +
                '}\n'
                : '');
    });
    code += 'return s;';

    /* jshint -W054 */
    var evaledFnGetter = new Function('s', 'k', 'pw', code); // s=scope, k=locals, pw=promiseWarning
    /* jshint +W054 */
    fn = function(scope, locals) {
      return evaledFnGetter(scope, locals, promiseWarning);
  return fn;

/t
      var getter = getterFn(ident, this.options, this.text);
/ D
    token.fn = extend(function(self, locals) {
        return (getter(self, locals));

/ 2 staps raket	,

/t
    this.tokens = this.lexer.lex(text);
/ D
{fn:function(self, locals) {
        return (getter(self, locals));
}}

    var value = json ? this.primary() : this.statements();
function(self, locals) {
        return (getter(self, locals));
}

	return value
/ deze fct 	,

/t
         parsedExpression = parser.parse(exp, false);
/D
	return parsedExpression

/t
          parts.push(fn = $parse(exp = text.substring(startIndex + startSymbolLength, endIndex)));
/ D
/ parts=[function(self,locals){
	return getter(self,locals)
}

/ Einde ANGULAR DIRECTIVES

/ ANGULAR NG-CONTROLLER

/ 7	.

/ Lees	,
https://code.angularjs.org/1.2.16/docs/api/ng/directive/ngController

Model — The Model is scope properties; scopes are attached to the DOM where scope properties are accessed through bindings.
/ we kunnen een scope dus vergl met een Java obj: data, die hier models heten, en fcts,	
Controller — The ngController directive specifies a Controller class; the class contains business logic behind the application to decorate the scope with functions and values
View — The template (HTML with data bindings) that is rendered into the View.

/ see	,
http://web/angularjs/APIReference/ng/directive/ngController/

/ 7	.

/ video 15 begon met eig een verkeer voorbeeld	,

 <div ng-controller="ctrl">
    <foo fl >just some text</foo>
    <br>
    <foo sp>just another text</foo>
  </div>

app.directive("foo",function(){
  return{
    restrict:"E"
    ,controller:["$scope",function($scope){
      $scope.ab=[]
...
/ fooDirective is een controller dir	, en deze kun je maar 1 keer use in een scope, 	want we zien de ctrl's ctor, en deze wordt 2 keer called,	 want er wordt 2 keer een ctrl create	, in 2 nodeLinkFns	,
            controllerInstance = $controller(controller, locals);
/c
      instance = $injector.instantiate(expression, locals);

/ maar geef de dir een isolate scope,	 dan wordt er in beide nodeLinkFns een isol scope create	, die komt in locals	, en de ctrls ctor krijgen een aparte scope	,



/ Einde ANGULAR NG-CONTROLLER

/ ANGULAR INTERPOLATE

    function $interpolate(text, mustHaveExpression, trustedContext) {
          parts.push(fn = $parse(exp = text.substring(startIndex + startSymbolLength, endIndex)));

        fn = function(context) {
            for(var i = 0, ii = length, part; i<ii; i++) {
                part = part(context);
        return fn;

  parse: function (text, json) {
    this.tokens = this.lexer.lex(text);
    var value = json ? this.primary() : this.statements();
/ primary returns token.fn	, uiteindelijk de gen code	, die de model geeft	,

    this.tokens = this.lexer.lex(text);
/c
  readIdent: function() {

     var getter = getterFn(ident, this.options, this.text);
      token.fn = extend(function(self, locals) {
        return (getter(self, locals));
      }, {
        assign: function(self, value) {
          return setter(self, ident, value, parser.text, parser.options);
        }
      });
    this.tokens.push(token);


function getterFn(path, options, fullExp) {
    var evaledFnGetter = new Function('s', 'k', 'pw', code); // s=scope, k=locals, pw=promiseWarning
    fn = function(scope, locals) {
      return evaledFnGetter(scope, locals, promiseWarning);
    };
  	return fn;

/ evaledFnGetter is gen code	, die de model geeft	,
/ $interpolate is uiteindelijk de fn fct, die alle parts afloopt	, (dat is de betekenis van de fn fct)	, 



/ Einde ANGULAR INTERPOLATE

/ ANGULAR COMPILE

/ Lees op	,
https://docs.angularjs.org/api/ng/service/$compile
/ over alles wat we in .directive write	,

/ bijv require	,
/ bijv @ in isol scope	,

/ 7	.

/ bijv in 15b	,

$CompileProvider
  this.directive = function registerDirective(name, directiveFactory) {
        $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
/ creates flDirectoryProvider
          function($injector, $exceptionHandler) {
                var directive = $injector.invoke(directiveFactory);
/ creates flDirectory	,
                directive.require = directive.require || (directive.controller && directive.name);
/ als flDirectory een controller dir, dan komt er aut	
	require:"fl"

      function addLinkFns(pre, post, attrStart, attrEnd) {
          post.require = directive.require;
          if (newIsolateScopeDirective === directive || directive.$$isolateScope) {
            post = cloneAndAnnotateFn(post, {isolateScope: true});
          }
          postLinkFns.push(post);


   function cloneAndAnnotateFn(fn, annotation) {
      return extend(function() { return fn.apply(null, arguments); }, fn, annotation);
    }
/c
function extend(dst) {
  var h = dst.$$hashKey;
  forEach(arguments, function(obj){

/ er zijn 3 arguments	,
function() { return fn.apply(null, arguments); }
fn
annotation
/ fn=link fct van de foo dir	,

    if (obj !== dst) {
/ 1ste false	,
/ 2de true	, 
/ 3de true	,
      forEach(obj, function(value, key){
/ 2de, fn heeft key value="require", "foo	'	,
/ 3de, obj key="isolateScope":"true"
        dst[key] = value;
      });
    }
  });
/ Dus 
function() { return fn.apply(null, arguments); }
/ krijgt	,
"require":"foo"	,
"isolateScope":"true"

/dan in link fase	,

            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);

/ de link fn heeft isolateScope:true	,
function() { return fn.apply(null, arguments); }

/c
     function getControllers(require, $element, elementControllers) {
/require="foo"	,
          if (elementControllers && retrievalMethod === 'data') {
            value = elementControllers[require];
          return value;
/de ctrl	,

/ we komen dan in de link fct van de foo dir	,


/ bijv 15b in egghead	,

app.directive("foo",function(){
  return{
    restrict:"E"
    ,scope:{}
    ,controller:["$scope",function($scope){
      $scope.ab=[]
      this.addFl=function(){
        $scope.ab.push("fl") }
    }]
    ,link:function(sc,el){
...

app.directive("fl",function(){
  return{
    require:"foo"
    ,link:function(sc,el,at,ctrl){
      ctrl.addFl()

/ alleen de link fct van de foo dir krijgt de isol scope inj	, fl heeft geen isol scope	, dus sc is bijv de root scope	,

/ er is 1 foo dir	, maar er zijn 2 nodes met deze dir	, dus we komen 2 keer in	,
applyDirectivesToNode	,
            if (isObject(directiveValue)) {
              newIsolateScopeDirective = directive;
...
            addLinkFns(null, linkFn, attrStart, attrEnd);

/c
      function addLinkFns(pre, post, attrStart, attrEnd) {
          post.require = directive.require;
          if (newIsolateScopeDirective === directive || directive.$$isolateScope) {
            post = cloneAndAnnotateFn(post, {isolateScope: true});



/ 7	. 

/ 15c	,

/ we wilden de ctrl in een aparte dir 	, maar de isolate scope moet dan ook in die dir	,
/ toch hoeft dit niet	, see 15b2	, maar toch dit hieronder kan ook	,
/ maar dan kent de foo dir's link fct de isolate scope niet	 (net als de fl en de sp dir deze niet kennen)	, 
/ daarom set we alles in de ctrl dir zelf	, ipv in de isol scope, en hebben we de isol scope NIET eens	,
/ we hebben 2 ctrl dirs, omdat we in HTML doen	,
    <foo fl ctrl >just some text</foo>
    <br>
    <foo sp ctrl>just another text</foo>

$ vi 15c/index.html

<div ng-app="app">
    <foo fl ctrl >just some text</foo>
    <br>
    <foo sp ctrl>just another text</foo>
  </div>
</div>

 
$ vi 15c/script.js

var app=angular.module("app",[])

app.directive("foo",function(){
	return{
		restrict:"E",
		require:"ctrl",
		link:function(scope,elem,attrs,ctrl){
			elem.on("mouseenter",function(){
				console.log(ctrl.ab)
			})
		}
	}
})

app.directive("ctrl",function(){
	return{
		controller:function(){
			this.ab=[]
			this.addFl=function(){ 
				this.ab.push("fl") }
			this.addSp=function(){ 
				this.ab.push("sp") }
	
		}
	}
})

app.directive("fl",function(){
	return{
		require:"ctrl"
		,link:function(sc,el,at,ctrl){ 
			ctrl.addFl() 
		}
	}
})
app.directive("sp",function(){
	return{
		require:"ctrl"
		,link:function(sc,el,at,ctrl){ 
			ctrl.addSp() 
		}
	}
})

/ 7	. 

/ 15b2

$ vi script.js

var app=angular.module("app",[])

app.directive("foo",function(){
	return{
		restrict:"E"
		,scope:{}
		,controller:["$scope",function($scope){
			$scope.ab=[]
			$scope.addFl=function(){ 
				$scope.ab.push("fl") }
			$scope.addSp=function(){ 
				$scope.ab.push("sp") }
	
		}]
		,link:function(sc,el){
			el.on("mouseenter",function(){
				console.log(sc.ab)
			})
		}
	}
})

app.directive("fl",function(){
	return{
		require:"foo",
		$$isolateScope:true,
		link:function(scope){
			scope.addFl() 
		}
	}
})
app.directive("sp",function(){
	return{
		require:"foo",
		$$isolateScope:true,
		link:function(scope){
			scope.addSp() 
		}
	}
})

/ Nu zijn in alle link fcts scope de isolated scope	,

/ 7	.

$ vi 16_2/index.html

<kid info="{{clean}}"></kid>
<kid info="{{homework}}"></kid>

$ vi 16_2/script.js

app.run(["$rootScope",function($rootScope){
  $rootScope.clean="Clean your room"
  $rootScope.homework="Do your homework"
}])
app.directive("kid",function(){
  return {
    restrict:"E",
    template:"<div>{{chore}}</div>",
    scope:{chore:"@info"},
  }
})



/ we komen in	,
    function collectDirectives(node, directives, attrs, maxPriority, ignoreDirective) {     
              addAttrInterpolateDirective(node, directives, value, nName);
/c
      directives.push({
        priority: 100,
        compile: function() {
            return {
              pre: function attrInterpolatePreLinkFn(scope, element, attr) {
                var $$observers = (attr.$$observers || (attr.$$observers = {}));

/ later in applyDirectivesToNode	,
         forEach(newIsolateScopeDirective.scope, function(definition, scopeName) {
/ definition="@info"
/ scopeName="chore" 

           var match = definition.match(LOCAL_REGEXP) || [],
                attrName = match[3] || scopeName,
/ "info"

              case '@':
                attrs.$observe(attrName, function(value) {
                  isolateScope[scopeName] = value;
                });
                attrs.$$observers[attrName].$$scope = scope;
/ attrName="info"
/ scope is de root scope, want daar zijn clean en homework models	, 

              if( attrs[attrName] ) {
                  isolateScope[scopeName] = $interpolate(attrs[attrName])(scope);
/ attrs[attrName="info"]="{{clean}}" 
/ 2-staps raket, je past meteen de fn fct doe	,
/ {{clean}} was al parsed, $interpolate haalt de gen code die de model leest, uit een cache	,

/ Dus wat er gebeurt is	,
//////////////////
	isolateScope.chore=$rootScope.clean="Clean your room"	,

/ Dus {{clean}}=$rootScope.clean	,





/ Einde ANGULAR COMPILE

/ ANGULAR CONTROLLER

  <input type="text" ng-model="data.message">
/ ng-model is een controller dir	, en de input dir staat op dezelfde node als de controller dir, en see nodeLinkFn: daardoor wordt input dir's link fct called met de ctrl	 uit de ng-model dir	,

/ de NgModelController heeft data en fcts. $setViewValue is zo'n fct	, en $render	,
  this.$setViewValue = function(value) {
      ngModelSet($scope, value);


function textInputType(scope, element, attr, ctrl, $sniffer, $browser) is de link fct van de input dir	, en die zegt de ctrl wat hij moet doen	,
     scope.$apply(function() {
        ctrl.$setViewValue(value);
      });
/ deze fct  wordt called, en daarna $scope.$$watchers's .get en .fn worden called	,
 



/ Einde ANGULAR CONTROLLER

/ ANGULAR ISOLATE SCOPE

/ 7	. 

/ Lees over &, @	in isolated scope	,
https://docs.angularjs.org/api/ng/service/$compile


/7	. 

      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {

        	var elementControllers
          forEach(controllerDirectives, function(directive) {
            var locals = {
              $scope: directive === newIsolateScopeDirective || directive.$$isolateScope ? isolateScope : scope,
              $element: $element,
              $attrs: attrs,
              $transclude: transcludeFn
            }, controllerInstance;
            controllerInstance = $controller(controller, locals);
            elementControllers[directive.name] = controllerInstance;

/ in 15a is inderdaad locals.$scope een isol scope	, en de ctrl ctor die create wordt krijgt deze inj	,  bijv	,
   ,controller:["$scope",function($scope){
      $scope.ab=[]
      this.addFl=function(){
        $scope.ab.push("fl") }
    }]

/ 7	. 

      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
        var elementControllers
        forEach(controllerDirectives, function(directive) {
           elementControllers[directive.name] = controllerInstance;
        }
        for(i = postLinkFns.length - 1; i >= 0; i--) {
            linkFn = postLinkFns[i];
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);


/ Hieronder heeft de foo node 1 directive met een controller	, deze komt in elementControllers	array, dit array is dus per node	,
/ er zijn ook link fn , per node ook , uit verschillende dirs	, deze kunnen allemaal bij elementControllers, dus we kunnen elke link fct uit dir zo 	,
	function fct(scope,elem,attrs,ctrls)
/ scope is hier niet de isol scope, maar bijv de root scope	,




/ 7	. 

/ code

[eric@walnut egghead.io]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/15a

<div ng-app="app">
  <foo fl >just some text</foo>
  <br>
</div>

app.directive("foo",function(){ 	// ctor	,
  return{
    restrict:"E"
    ,scope:{}
    ,controller:["$scope",function($scope){
      $scope.ab=[]
      this.addFl=function(){			/ (**)
        $scope.ab.push("fl") }
    }]
    ,link:function(sc,el){
      el.on("mouseenter",function(){
        el.addClass("label")
        console.log(sc.ab)
      })
    }
  }
})
app.directive("fl",function(){
  return{
    require:"foo"
    ,link:function(sc,el,at,ctrl){ 			/ (*)
      ctrl.addFl()
    }
  }
})

/ NB. als we mouseenter  het foo elem, dan toont hij alleen maar wat al eerder is gedaan	, 
/ in nodeLinkFn	, (dus in de link fase)	,
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs, linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);
/ Dus wordt (*) called	, en komen we in de controller's addFl, waar   "fl" wordt add aan isolated scope's ab

/ NB. in de directive fl is de scope de root scope	, in de foo directive de isolated scope	, maar hier geeft dat niet	,

/ NB. bij de fl dir require:"foo"	, anders vindt hij de ctrl niet (in elementControllers[]	, 
/ maar bij foo dir zien we deze niet	,  maar hij komt er wel, want	,
/ als er een controller is in de directive, is eerder in de dir provider	,
      directive.require = ... || (directive.controller && directive.name);
/ bij foo is dat zo en we hoeven zelf dus niet	,
	require:"foo"	,

/ 7	. 

/ compile

/ de "fooDirectiveProvider" doet	,
               var directive = $injector.invoke(directiveFactory);
/ directiveFactory is de ctor hierboven	,
                directive.require = directive.require || (directive.controller && directive.name);
"foo"
/ want later zoekt nodeLinkFn in elementControllers [] naar key "foo" als hij call linkFn	,

/ applyDirectiveToNode doet	,

       if (directiveValue = directive.scope) {
          newScopeDirective = newScopeDirective || directive;
/ de hele dir	,
              newIsolateScopeDirective = directive;

/ nodeLinkFn heeft newIsolateScopeDirective in closure scope,	see hieronder	,

      if (!directive.templateUrl && directive.controller) {
          controllerDirectives[directiveName] = directive;

            linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
/ gewoon de link fct	,
              addLinkFns(null, linkFn, attrStart, attrEnd);
/ see (*)

      nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;
false
////////////////////////////////////////////////////////
/ want er staat 
	scope:{}
/ en NIET	,
	scope:true

/ (*)
     function addLinkFns(pre, post, attrStart, attrEnd) {
          if (newIsolateScopeDirective === directive || directive.$$isolateScope) {
/ JA, bij foo dir	,
          post.require = directive.require;
/ als er een controller is in de directive, is eerder in de dir provider	,
      directive.require = ... || (directive.controller && directive.name);
/ bij foo is dat zo en we hoeven zelf dus niet	,
	require:"foo"	,

          post = cloneAndAnnotateFn(post, {isolateScope: true});
/c
    function cloneAndAnnotateFn(fn, annotation) {
      return extend(function() { 											 / (*) 
				return fn.apply(null, arguments); 
			}, fn, annotation);
    }
/ Als straks  de anon fct (*) called	, dan vindt hij fn in closure scope	, en arguments worden doorgegeven	,

/ en heeft props van fn en annotation ook	,
require:"foo"	 					/ van fn	,
isolatedScope:true			/ van annotation	,

/ 7	.

/ link	,

     function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) {
          if (nodeLinkFn) {
            if (nodeLinkFn.scope) {
/ NEE
            } else {
              childScope = scope;

              nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);
/ c
      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
       if (newIsolateScopeDirective) {
          isolateScope = scope.$new(true);
/c
      $new: function(isolate) {
        var ChildScope,
            child;

        if (isolate) {
/ JA
          child = new Scope();
/ c
      this.$id = nextUid();
3

          child.$root = this.$root;
/ this is de root scope	,


       child.$parent = this;
/ altijd	, isolated of niet	, 
/ this is root scope	,

/t
     function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
          forEach(newIsolateScopeDirective.scope, function(definition, scopeName) {
/ NEE, we hadden newIsolateScopeDirective.scope={}

/ dan	,
          forEach(controllerDirectives, function(directive) {
            var locals = {
              $scope: directive === newIsolateScopeDirective || directive.$$isolateScope ? isolateScope : scope,
              $element: $element,
              $attrs: attrs,
              $transclude: transcludeFn
            }
/ nu : isolateScope	,
/ (scope is de root scope)

            controllerInstance = $controller(controller, locals);
/c
      instance = $injector.instantiate(expression, locals);
 /dat is 	,
    ,controller:["$scope",function($scope){
      $scope.ab=[]
      this.addFl=function(){
        $scope.ab.push("fl") }
    }]
/ we zien dat als hij di $scope, hij in locals de isolated scope vindt	,

/ we komen in	,
		,controller:["$scope",function($scope){
			$scope.ab=[]
			this.addFl=function(){ 
				$scope.ab.push("fl") }
		}]
/ en $scope is de isolated scope	,

/ dan in nodeLinkFn	,

            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs, linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);
/ c
/ linkFn=(*)
    function cloneAndAnnotateFn(fn, annotation) {
          return extend(function() {  					/ (*)
   ->         return fn.apply(null, arguments); 
          }, fn, annotation);

/we komen in	,
		,link:function(sc,el){
			el.on("mouseenter",function(){
				el.addClass("label")
				console.log(sc.ab)
			})
/ sc is isolated scope	,
/ arguments=
[

Scope
$$asyncQueue: Array[0]
$$childHead: null
$$childTail: null
$$destroyed: false
$$isolateBindings: Object
$$listeners: Object
$$nextSibling: null
$$phase: null
$$postDigestQueue: Array[0]
$$prevSibling: null
$$watchers: null
$id: "003"
$parent: Scope
$root: Scope
ab: Array[0]
this: Scope
__proto__: Scope

QLite[1]
0: foo.ng-isolate-scope
length: 1
__proto__: Object[0]

 
$get.Attributes
$$element: JQLite[1]
$attr: Object
fl: "fl"
__proto__: Object
fl: ""
__proto__: Object

Constructor
addFl: function (){
__proto__: Object

undefined

/ Einde ANGULAR ISOLATE SCOPE

/ ANGULAR CONTROLLERS

/ 7	.

/ doe ng-controller na met my-controller	,

/ 13,

[eric@walnut egghead.io]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io

<div ng-app="app">
  <div my-controller="ctrl">
  <input type="text" ng-model="data.message">
  <h1>{{data.message}}</h1>
  </div>
  <div my-controller="ctrl2">
  <input type="text" ng-model="data.message">
  <h1>{{data.message}}</h1>
  </div>
</div>

angular.module("app",[])

.directive("myController",function(){
  return {
    scope: true,
    controller: '@',
    priority: 500
  }
})
.controller("ctrl",function($scope){
  $scope.data={message:"foo"}
})
.controller("ctrl2",function($scope){
  $scope.data={message:"bar"}
})

/ OK

    priority: 500
/ is niet nodig, maar misschien in andere situaties wel	,
/ TODO

/  13	,

/ er wordt maar 1 my-controller dir create	,
/ er wordt maar 1 input dir create	,
/ er wordt maar 1 ng-model dir create	,
/ er is dus maar 1 input dir's linkFn	, en ng-model's linkFn	, dat geeft niet: ze krijgen de scope, ... in nodeLinkFn	, waar ze worden called	, (de scope zit dus niet in een closure scope)	,

           linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);

/ de ctrl's zijn wel uniek per node	, er wordt steeds een nieuwe create	, want NgModelController krijgt de juiste scope inj	, en heeft $attr	, en daaruit wordt 
  var ngModelGet = $parse($attr.ngModel),
/ bijv, $attr.ngModel="data.message"	,
 

/ maar we zien bij bindings wel afzonderlijke dir's 	, 

    function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
      if (interpolateFn) {
        var fn=function textInterpolateLinkFn(scope, node) {
...
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });
        }
        directives.push({
          priority: 0,
          compile: valueFn(fn)
        });
      }

/ de interpolateFn is steeds een andere, WH omdat er steeds een andere text is	, bijv {{data.message}} en deze is parsed door $interpolate	, en komt in parts	,
parts: Array[1]
0: function (self, locals) {
		return getter(self,locals)
}
/ en de fn die $interpolate returns (=interpolateFn) is een inner fct van $interpolate	, en heeft parts in closure scope	,  
, en fn heeft interpolateFn in scope	, dus daarom WH anders als de andere dir's	,

/ Einde ANGULAR CONTROLLERS

/ ANGULAR ISOLATE SCOPE 

/ 7	.

/ ng-controller: new scope is create in compositeLinkFn, want is bedoeld voor alle children	,
/ directive, isolate scope, new scope is create in nodeLinkFn, want is alleen bedoeld voor de node

/ ng-controller: is nodeLinkFn called?
 /TODO

/ 7	.

/ Lees	,
http://docs.angularjs.org/guide/directive

/ Lees	,
https://github.com/angular/angular.js/wiki/Understanding-Scopes
normal prototypal scope inheritance -- ng-include, ng-switch, ng-controller, directive with scope: true
normal prototypal scope inheritance with a copy/assignment -- ng-repeat. Each iteration of ng-repeat creates a new child scope, and that new child scope always gets a new property.
isolate scope -- directive with scope: {...}. This one is not prototypal, but '=', '@', and '&' provide a mechanism to access parent scope properties, via attributes.
transcluded scope -- directive with transclude: true. This one is also normal prototypal scope inheritance, but it is also a sibling of any isolate scope.

/ dus je kunt in isolated scope toch bij de parent scope komen met =,@, &	,

/ 7	.



/ 7	. 

/ alleen isol scope	,

[eric@walnut egghead.io]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/16_1

<div ng-app="app">

<kid></kid>
<br>
<kid></kid>

</div>

var app=angular.module("app",[])
app.directive("kid",function(){
  return {
    restrict:"E",
    template:"<input type=\"text\" ng-model=\"chore\">"+
      "<div>{{chore}}</div>",
    scope:{},
  }
})

/ in compile fase	,

/ we zien	in applyDirectivesToNode	,

      for(var i = 0, ii = directives.length; i < ii; i++) {
/ er kunnen er meerdere zijn	, bijv in <input ngmodel="message"> zijn er 2	,

       if (directiveValue = directive.scope) {
/ JA, 
/ scope:true	, 
/ scope:{}
          newScopeDirective = newScopeDirective || directive;

            if (isObject(directiveValue)) {
/ JA	, 
/ scope:{}
              newIsolateScopeDirective = directive;

         directiveValue 
              : directive.template;
"<input type="text" ng-model="chore"><div>{{chore}}</div>"

          } else {
            $compileNode.html(directiveValue);

      nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;
/ NEE, want newScopeDirective.scope==={}	,

/ in link fase	, 

/ TODO <div ng-controller="ctrl"> : heeft nodeLinkFn	?

     function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) {
           if (nodeLinkFn.scope) {
/ NEE
              childScope = scope.$new();
/ NIET
            } else {
/ JA
              childScope = scope;

      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {

/ scope is root scope,	 want linkFn.scope=false	,

        if (newIsolateScopeDirective) {
/ JA
          isolateScope = scope.$new(true);

/////////////////////////////////////////////////////////
        // RECURSION
        // We only pass the isolate scope, if the isolate directive has a template,
        // otherwise the child elements do not belong to the isolate directive.
        var scopeToChild = scope;
        if (newIsolateScopeDirective && (newIsolateScopeDirective.template || newIsolateScopeDirective.templateUrl === null)) {
/ JA
/ TODO templateUrl
          scopeToChild = isolateScope;
        }
        childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn);

/ door het template heeft <kid> een child	nodes	, de input en de div	,
/ in nodeLinkFn wordt er een ctrl create, een NgModelController, die de isol scope=$scope krijgt inject, en $scope.watch calls	, die de input updates als de model (die in de isol scope is verandert).

/ dan 2 linkFn's , de 1ste van ngModel, TODO, en de 2de van <input , die ->model writes bij Enter in de input	, 
/ dan linkFn bij {{...}}, die een $scope.watch calls, die als model verandert de text node update	,

/ 7	.

/ @

[eric@walnut ]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/16_2

<div ng-app="app">
<kid info="{{clean}}"></kid>
<br>
<kid info="{{homework}}"></kid>
</div>

var app=angular.module("app",[])
app.run(["$rootScope",function($rootScope){
  $rootScope.clean="Clean your room"
  $rootScope.homework="Do your homework"
}])
app.directive("kid",function(){
  return {
    restrict:"E",
    template:"<div>{{chore}}</div>",
    scope:{chore:"@info"},
  }
})

/ als we in HTML	,
<kid info="clean"></kid>
/ zien we 
clean
/ als we
<kid info="{{clean}}"></kid>
/ zien we	,
Clean your room

/ we zien 2 dir's in 	, 
<kid info="{{clean}}"></kid>
/ info is geen dir	, maar {{clean}} -> interpolate dir
 

/ compile

    function collectDirectives(node, directives, attrs, maxPriority, ignoreDirective) {
/ node=<kid info="{{clean}}">
   switch(nodeType) {
        case 1: /* Element */
          addDirective(directives, directiveNormalize(nodeName_(node).toLowerCase()), 'E', maxPriority, ignoreDirective);
/ D
              addAttrInterpolateDirective(node, directives, value, nName);
/c
    function addAttrInterpolateDirective(node, directives, value, name) {
      var interpolateFn = $interpolate(value, true);
/ value="{{clean}}"

/ Als {{clean}} in ... TODO
/ =fn fct met parts=[function(){return getter(self,locals)}], = gen code  die scope.clean zal geven (scope is arg van gen fct, bekend in scope.$digest)
/ = scope.watch.get fct en de watch.fn ... TODO (scope)	, 

      directives.push({
        priority: 100,
        compile: function() {
            return {
              pre: function attrInterpolatePreLinkFn(scope, element, attr) {
...

/t
/we komen in applyDirectivesToNode	,

/ 1ste	, {{clean}}
      for(var i = 0, ii = directives.length; i < ii; i++) {
           linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
              addLinkFns(linkFn.pre, linkFn.post, attrStart, attrEnd);

/ 2de	, <kid >

/ 13	.

/ link fase	,

      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {

          forEach(newIsolateScopeDirective.scope, function(definition, scopeName) {
newIsolateScopeDirective.scope={chore:"@info"}
definition="@info"
scopeName="chore"
            var match = definition.match(LOCAL_REGEXP) || [],
                attrName = match[3] || scopeName,
info
                optional = (match[2] == '?'),
                mode = match[1], // @, =, or &

           switch (mode) {
              case '@':
//////////////
                  isolateScope[scopeName] = $interpolate(attrs[attrName])(scope);
/ Dus hij parses {{clean}} en haalt deze uit de root scope, en sets in isol scope	,
/ 2-staps raket	,
/ scope=root scope	, 
/attrs["info"]="{{clean}}"
/ $interpolate(attrs[attrName])=
       fn = function(context) {
/ en context=scope=root scope	, 
                part = part(context);
/ =
function(self, locals) {
        return (getter(self, locals));
}
/ dus self=root scope	,
/ en in de gen code staat als hard in s.clean	, dus  hij vindt in de root scope .clean="Clean your room"	, 
/ of	,
/ en in de gen code staat als hard in s.work, dus  hij vindt in de root scope .clean="Do your homework"	, 


/ Klaar, verder in nodeLinkFn	,
        // PRELINKING
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs, linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);
/s
/ scope=root scope
/ TODO
             pre: function attrInterpolatePreLinkFn(scope, element, attr) {

/ de root scope's watcher hieronder rewrites attr info op <kid > ,
/ WAS <kid info="{{clean}}" >
/ WORDT <kid info="Clean your room"

                // we need to interpolate again, in case the attribute value has been updated (e.g. by another directive's compile function)
                interpolateFn = $interpolate(attr[name], true, getTrustedContext(node, name));
                attr[name] = interpolateFn(scope);
/attr["info"]="clean"	/ WAS
/attr["info"]="Clean your room"	/ NU

                (attr.$$observers && attr.$$observers[name].$$scope || scope).
                  $watch(interpolateFn, function interpolateFnWatchAction(newValue, oldValue) {
                      attr.$set(name, newValue);			/ (*)

/ Klaar	, verder in nodeLinkFn	,

        if (newIsolateScopeDirective && (newIsolateScopeDirective.template || newIsolateScopeDirective.templateUrl === null)) {
          scopeToChild = isolateScope;
        }
        childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn);
/c
   function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
      if (interpolateFn) {
        var fn=function textInterpolateLinkFn(scope, node) {
->          scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });
/ installs watcher op de isol scope	,

/ digest	,

/ we zijn	nog in	,
       function(scope, element, compile, injector, animate) {
        scope.$apply(function() {
          compile(element)(scope);
        });
/ we hebben net	,
      $apply: function(expr) {
          return this.$eval(expr);
/ D
            $rootScope.$digest();

/ er zijn 2 root scope.watchers	, uit de pre link fcts , see (*) 

          do { // "traverse the scopes" loop
            if ((watchers = current.$$watchers)) {
                    if ((value = watch.get(current)) !== (last = watch.last) &&
/ "Clean your room"
                      watch.fn(value, ((last === initWatchVal) ? value : last), current);

/ er komen in,
            pre: function attrInterpolatePreLinkFn(scope, element, attr) {
               (attr.$$observers && attr.$$observers[name].$$scope || scope).
                  $watch(interpolateFn, function interpolateFnWatchAction(newValue, oldValue) {
->										 	attr.$set(name, newValue);
								}
/ watch.get=interpolateFn	,
/ watch.fn=interpolateFnWatchAction	, dus komen bij ->
/c
      $set: function(key, value, writeAttr, attrName) {
       this[key] = value;
        $$observers && forEach($$observers[key], function(fn) {
          try {
            fn(value);
/c
      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
          forEach(newIsolateScopeDirective.scope, function(definition, scopeName) {
            switch (mode) {
              case '@':
                attrs.$observe(attrName, function(value) {
                  isolateScope[scopeName] = value;
/ Was al gedaan	,  ook onder	,
           switch (mode) {
              case '@':

/t in root scope.$digest	,
            if (!(next = (current.$$childHead ||
/ next= 1ste isol scope	,

/ deze scope heeft 1 watcher	,
/ we komen in	,
    function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
        var fn=function textInterpolateLinkFn(scope, node) {
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
->              node[0].nodeValue = value;
            });
/ interpolateFn vond isol scope.chore="Clean your room"	,  en wordt set tot value	,

            if (!(next = (current.$$childHead ||
                (current !== target && current.$$nextSibling)))) {
             while(current !== target && !(next = current.$$nextSibling)) {
                current = current.$parent;
              }
/ TODO
/ 2de isol scope	,
/ hetzelfde,	 vindt isol scope.chore="Do your homework"




/ 7	. 

/ egghead.io	, 16_2

/ isol scope, en ref naar parent scope	,

<div ng-app="app">
<kid info="clean"></kid>
<br>
<kid info="homework"></kid>
</div>

var app=angular.module("app",[])
app.run(["$rootScope",function($rootScope){
  $rootScope.clean="Clean your room"
  $rootScope.homework="Do your homework"
}])
app.directive("kid",function(){
  return {
    restrict:"E",
    template:"<div>{{chore}}</div>",
    scope:{chore:"=info"},
  }
})



/ 1ste <kid	>,

          forEach(newIsolateScopeDirective.scope, function(definition, scopeName) {
definition: "=info"
scopeName: "chore"
            var match = definition.match(LOCAL_REGEXP) || [],
0: "=info"
1: "="
2: ""
3: "info"
index: 0
input: "=info"
length: 4
                attrName = match[3] || scopeName,
"info"	, als we "=" ipv "=info" is het dus "chore"
                optional = (match[2] == '?'),
false
                mode = match[1], // @, =, or &
"="

           switch (mode) {
             case '=':
                parentGet = $parse(attrs[attrName]); 
/ attrs uit closure scope	, attrs["info"]="clean"
/ =function (self, locals) {
        return (getter(self, locals));
      }

                lastValue = isolateScope[scopeName] = parentGet(scope);
"Clean your room"	
/ want	,
///////////
/ scope=root scope	, want we zijn in nodeLinkFn en die heeft scope=root scope mee als param	,
/c
(function(s,k,pw
/**/) {
var l, fn, p;
if(s === null || s === undefined) return s;
l=s;
s=((k&&k.hasOwnProperty("clean"))?k:s)["clean"];
return s;
})
/ k=undefined ,s=root scope dus s["clean"]	,

/t
                isolateScope.$watch(function parentValueWatch() {

                  var parentValue = parentGet(scope);
                  if (!compare(parentValue, isolateScope[scopeName])) {
                    // we are out of sync and need to copy
                    if (!compare(parentValue, lastValue)) {
                      // parent changed and it has precedence
                      isolateScope[scopeName] = parentValue;
                    } else {
                      // if the parent can be assigned then do so
                      parentSet(scope, parentValue = isolateScope[scopeName]);
/ TODO
                    }
                  }


/t in nodeLinkFn
        var scopeToChild = scope;
/ root scope	, 
        if (newIsolateScopeDirective && (newIsolateScopeDirective.template || newIsolateScopeDirective.templateUrl === null)) {
/ JA
          scopeToChild = isolateScope;
/ isol scope	,
        }
        childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn);

/ Dus nodeLinkFn van de text child krijgt de isol scope mee	,

/ nodeLinkFn van text child execs alleen de linkFn	, en geeft een 2de watch op de isol scope	, die de text node update met isol scope.chore	,


/ Einde ANGULAR ISOLATE SCOPE 

/ ANGULAR ISOLATE SCOPE 

/ 17_1, 17_2

/ 7	.

[eric@walnut ]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/17_1

<div ng-app="app">
{{flavor}}
<div drink>
</div>
</div>

var app=angular.module("app",[])
app.directive("drink",function(){
  return {
    template:"<div>{{flavor}}</div>",
    link:function(scope){
      scope.flavor="cherry"
    }
  }
})

/ we zien 2 keer , inderdaad	,
cherry
cherry

/ er zijn 2 interpolate dir's	, en hun link fct (called in link fase) installs watcher op root scope	, die de text node update	,
/ doBootstap	,
        scope.$apply(function() {
          compile(element)(scope);
				}
/ dus de root scope's watcher's .get en .fn worden called	, de .get leest flavor uit root scope (fn fct, die parts in closure scope heeft, parts=parsed "flavor", is gen code, )

/ 7	.

[eric@walnut ]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/17_2

<div ng-app="app">
{{flavor}}
<div drink flavor="strawberry">
</div>
</div>

var app=angular.module("app",[])
app.directive("drink",function(){
  return {
    template:"<div>{{flavor}}</div>",
    link:function(scope,element,attrs){
      scope.flavor=attrs.flavor
    }
  }
})

//////////
/ NB. flavor is geen dir	, maar gewoon een attr	,
/ want we hebben GEEN	, 
app.directive("flavor",function(){
...


/ 7	.

[eric@walnut ]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/17_2

/ 13	,

<div ng-app="app">
{{flavor}}
<div drink flavor="strawberry"></div>
<div drink flavor="orange"></div>
</div>

var app=angular.module("app",[])
app.directive("drink",function(){
  return {
    template:"<div>{{flavor}}</div>",
    link:function(scope,element,attrs){
      scope.flavor=attrs.flavor
    }
  }
})

/ we zien 3 keer 
orange
orange
orange
/ want er is maar 1 scope, de root scope	, en {{flavor}} -> gen code die root.scope.flavor leest	,

/ 13	,

/  maar als we isol scope add	, zijn alle problemen weg	, 

<div ng-app="app">
{{flavor}}
<div drink flavor="strawberry"></div>
<div drink flavor="orange"></div>
</div>

var app=angular.module("app",[])
app.directive("drink",function(){
  return {
    template:"<div>{{flavor}}</div>",
    link:function(scope,element,attrs){
      scope.flavor=attrs.flavor
    },
    scope:{},
    
  }
})

/////////////////////////
/we zien nu maar 2 items	,
strawberry
orange

/ Dus  die binding in de root scope geeft wel de watch op de root scope,	 maar root scope.flavor is "" of undefined (TODO)	,


/ 13	,

/ maar we kunnen nog vereenvoudigen	,

<div ng-app="app">
{{flavor}}
<div drink flavor="strawberry"></div>
<div drink flavor="orange"></div>
</div>

var app=angular.module("app",[])
app.directive("drink",function(){
  return {
    template:"<div>{{flavor}}</div>",
    scope:{flavor:"@"},
    
  }
})

/ de link fct is dus niet nodig	,

/ De isol scope wordt create in de nodeLinkFn van 
<div drink flavor="strawberry"></div>
/ en van 	,
<div drink flavor="orange"></div>

      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
        if (newIsolateScopeDirective) {
          isolateScope = scope.$new(true);
            switch (mode) {
              case '@':
                  isolateScope[scopeName] = $interpolate(attrs[attrName])(scope);
/ dus isol scope.flavor="strawberry" en in de andere isol scope.flavor="orange"	,
/ dan wordt nodeLinkFn van {{flavor}} called, want dat is een child van <div drink ...>, en deze execs link fct uit de interpolate dir, die een watcher sets op de isol scope	,
/ Als dat klaar, dan zien we nog {{flavor}}	, want {{flavor}} wordt pas in root scope.__proto__.$digest vervangen (de link fase installs de watcher, nu pas in $digest wordt hij called)	,: de isol scope.watcher calls .get en .fn fct	, en laatste sets node,	




/ Einde ANGULAR ISOLATE SCOPE

/ ANGULAR TEMPLATEURL

[eric@walnut 30_1]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/30_1

<div ng-app="app">
{{flavor}}
<div drink flavor="strawberry"></div>
<div drink flavor="orange"></div>
</div>

var app=angular.module("app",[])
app.directive("drink",function(){
	return {
		templateUrl:"detail.html",
		scope:{flavor:"@"},
		
	}
})

[eric@walnut 30_1]$ cat detail.html 
<div>{{flavor}}</div>

/ 13	.

/ de 1ste keer in	 (want .success calls hem ook),
    function applyDirectivesToNode(directives, compileNode, templateAttrs, transclude...
      for(var i = 0, ii = directives.length; i < ii; i++) {

          nodeLinkFn = compileTemplateUrl(directives.splice(i, directives.length - i), $compileNode, templateAttrs, jqCollection, childTranscludeFn, preLinkFns, postLinkFns, {
                controllerDirectives: controllerDirectives,
                newIsolateScopeDirective: newIsolateScopeDirective,
                templateDirective: templateDirective,
                nonTlbTranscludeDirective: nonTlbTranscludeDirective
              })

    function compileTemplateUrl(directives, $compileNode, tAttrs,
        $rootElement, childTranscludeFn, preLinkFns, postLinkFns, previousCompileContext) {

      $http.get($sce.getTrustedResourceUrl(templateUrl), {cache: $templateCache}).  success(function(content) {

          } else {
/////////////////////
            $compileNode.html(content);
/ Hier wordt het template set	, en heeft de <div met de dir met templateUrl prop 

          afterTemplateNodeLinkFn = applyDirectivesToNode(directives, compileNode, tAttrs, childTranscludeFn, $compileNode, origAsyncDirective, preLinkFns, postLinkFns, previousCompileContext);
/c
/ Dus nu pas	,

      for(var i = 0, ii = directives.length; i < ii; i++) {

       if (directiveValue = directive.scope) {
          newScopeDirective = newScopeDirective || directive;

          if (!directive.templateUrl) {
/ JA
directive: Object
$$originalDirective: Object

index: 0
name: "drink"
priority: 0
require: undefined
restrict: "A"
scope: Object
	flavor:"@"
templateUrl: "detail.html"
__proto__: Object

index: 0
name: "drink"
priority: 0
replace: null
require: undefined
restrict: "A"
scope: Object
	flavor:"@"
templateUrl: null
transclude: null
            if (isObject(directiveValue)) {
/ JA
              newIsolateScopeDirective = directive;

        if (directive.template) {
/ NEE
          } else {
            $compileNode.html(directiveValue);
/ NIET
/ Hierboven is het al gedaan in de success fct	, 

     nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;
false

/ NB. 
/ we zitten toch weer in een scope.$apply	, want we zijn in	,

      xhr.onreadystatechange = function() {
          completeRequest(callback,
              status || xhr.status,
              response,
              responseHeaders);
        }
/c

    function completeRequest(callback, status, response, headersString) {
      callback(status, response, headersString);
/c
    function sendReq(config, reqData, reqHeaders) {
      function done(status, response, headersString) {
        resolvePromise(response, status, headersString);
->        if (!$rootScope.$$phase) $rootScope.$apply();

/ Einde NB

/t success	,

          afterTemplateNodeLinkFn = applyDirectivesToNode(directives, compileNode, tAttrs, childTranscludeFn, $compileNode, origAsyncDirective, preLinkFns, postLinkFns, previousCompileContext); 
/ D
/ compile fase is D	,

/ nu link fase meteen	,
            afterTemplateNodeLinkFn(afterTemplateChildLinkFn, scope, linkNode, $rootElement, childBoundTranscludeFn);
/c
      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {

        if (newIsolateScopeDirective) {
          isolateScope = scope.$new(true);

          forEach(newIsolateScopeDirective.scope, function(definition, scopeName) {
            var match = definition.match(LOCAL_REGEXP) || [],
                attrName = match[3] || scopeName,
flavor
                optional = (match[2] == '?'),
                mode = match[1], // @, =, or &
@

                attrs.$observe(attrName, function(value) {
                  isolateScope[scopeName] = value;
                });
                attrs.$$observers[attrName].$$scope = scope;
                if( attrs[attrName] ) {
                  isolateScope[scopeName] = $interpolate(attrs[attrName])(scope);
/ attrName=scopeName="flavor"
/ $interpolate doet niets nu	, we hebben flavor="strawberry" en geen "{{strawberry}}"	,
/ dus isol sc.flavor="strawberry"

/ pre link fct is er NIET
/ TODO
...

/ ANGULAR VIDEO 24 

  <zippy title="{{model.title}}">
    The content is: {{model.content}}
  </zippy>

app.directive("zippy",function(){
  return{
    restrict:"E",
    transclude:true,
    scope:{
      title:"@"
    },
    template:
		'<div>\
      <h3 ng-click="f()">\
        {{title}}\
      </h3>\
      <div ng-show="v" ng-transclude>\
        The content is: {{model.content}}\ // (*)
      </div>\
    </div>',
    link:function(scope){
      scope.v=false
      scope.f=function(){
        scope.v=!scope.v
      }
    }

/ (*) wordt vervangen door en is precies het user template, nu zien we goed wat er komt	,

/ compile	,

     nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;
false, 
/ want newScopeDirective.scope={title:"@"}	,
      nodeLinkFn.transclude = hasTranscludeDirective && childTranscludeFn;
nodeLinkFn.transclude=publicLinkFn van de user template	,
/ de directive template is in compile al met .html add aan <zippy>	,

/ zippy heeft meteen een child , dus gaat deze compile 
/ eerst	,
      <h3 ng-click="f()">\
        {{title}}\
      </h3>\
/ dan	,
     <div ng-show="v" ng-transclude>\
        The content is: {{model.content}}\
      </div>\

/ bij een input elem die ook een ng-model attr heeft, zijn 2 link  fct	, 
1 in ngModelDirective, en 1 in inputDirective	, 
/ dus multiple dirs geven multiple link fcts 

/ de nodeLinkFn van <zippy>	,
      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
boundLinkFn=compiled user template	,
/ de dir template is tijdens compile in DOM set	, met .html	,

         isolateScope = scope.$new(true);
scope=root scope

           switch (mode) {
              case '@':
                  isolateScope[scopeName] = $interpolate(attrs[attrName])(scope);
/ root scope	,
/ logisch, de attr staat in root scope, 	 
<div ng-app="app">
  <zippy title="{{model.title}}">
/ hier wordt isol scope.title=root scope.model.title	,
/ ook zien we dat pas hier {{model.title}} wordt parse	, 
/ TODO (want hij staat al wel in de cache)

        transcludeFn = boundTranscludeFn && controllersBoundTransclude;
        if (controllerDirectives) {
          forEach(controllerDirectives, function(directive) {
            var locals = {
              $scope: directive === newIsolateScopeDirective || directive.$$isolateScope ? isolateScope : scope,
              $element: $element,
              $attrs: attrs,
              $transclude: transcludeFn
            }
/ dus de transclude fct wordt set in locals	,

      if (newIsolateScopeDirective && (newIsolateScopeDirective.template || newIsolateScopeDirective.templateUrl === null)) {
          scopeToChild = isolateScope;
  
        childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn);
/ de isol scope is voor
	'<div>\
     <h3 ng-click="f()">\
        {{title}}\
      </h3>\
      <div ng-show="v" ng-transclude>\
        The content is: {{model.content}}\
      </div>\

/ eerst	,
     <h3 ng-click="f()">\
        {{title}}\
      </h3>\

/ de boundTranscludeFn wordt steeds meegegeven 	,
        childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn);
/c
      function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) {
              nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);

 en in iedere nodeLinkFn wordt	,
        transcludeFn = boundTranscludeFn && controllersBoundTransclude;
/ is alleen voor als er controllers zijn	,  voor in de locals die de ctor van de controller krijgt,	
        if (controllerDirectives) {
/ dit is dus los van het doorgeven van de transclude fct	, bij childLinkFn call in nodeLinkFn	,

/ eerst wordt de link fct van de children called,	  dus eerst van de #text {{title}}	, die een isl scope.watch installs, en dan van h3 zelf	, die de link fct van ng-click heeft	,
       compile: function($element, attr) {
          var fn = $parse(attr[directiveName]);
Parser.functionCall
          return function(scope, element, attr) {
->     			element.on(lowercase(name), function(event) {
              scope.$apply(function() {
                fn(scope, {$event:event});
              });

/ Dan	,
     <div ng-show="v" ng-transclude>\
        The content is: {{model.content}}\
      </div>\

        transcludeFn = boundTranscludeFn && controllersBoundTransclude;
        if (controllerDirectives) {
/ JA
          forEach(controllerDirectives, function(directive) {
/ 1, ngTransclude	,
            var locals = {
              $scope: directive === newIsolateScopeDirective || directive.$$isolateScope ? isolateScope : scope,
              $element: $element,
              $attrs: attrs,
              $transclude: transcludeFn
            }
/ ngTransclude's controller fct calls	,	
	this.$transclude=$transclude

/ dan wordt de link fct van de #text The content is: {{model.content}} called,
/ {{model.content}} is NIET parsed	,
/ maar deze #text wordt toch vervangen	,
/ dan wordt link fct van <div ng-show="v" ng-transclude>  called	,
/ eerst	,
  link: function($scope, $element, $attrs, controller) {
    controller.$transclude(function(clone) { 
      $element.empty();
      $element.append(clone);
    });
/ $scope=isl scope	,
/ controller.$transclude wat set in ctor hierboven	,

/c
      return function boundTranscludeFn(transcludedScope, cloneFn, controllers) {

/ createBoundTranscludeFn is called in link fase van <zippy> met scope=root scope	,

      function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) {
nodeList=
0: text
1: input.ng-pristine.ng-valid
2: text
3: input.ng-pristine.ng-valid
4: text
5: zippy
6: text
        for(i = 0, n = 0, ii = linkFns.length; i < ii; n++) {
/ en bij zippy	,
            childTranscludeFn = nodeLinkFn.transclude;
            if (childTranscludeFn || (!boundTranscludeFn && transcludeFn)) {
              nodeLinkFn(childLinkFn, childScope, node, $rootElement,
                createBoundTranscludeFn(scope, childTranscludeFn || transcludeFn)


   function createBoundTranscludeFn(scope, transcludeFn) {
      return function boundTranscludeFn(transcludedScope, cloneFn, controllers) {
->        var scopeCreated = false;
        if (!transcludedScope) {
/ JA
          transcludedScope = scope.$new();
/ scope=root scope	,
          transcludedScope.$$transcluded = true;
          scopeCreated = true;
        }

/ dus de transcluded scope is child root scope , net als de isl scope	,

        var clone = transcludeFn(transcludedScope, cloneFn, controllers);
/s
/ TODO
      return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
        if (cloneConnectFn) cloneConnectFn($linkNode, scope);
/s
    controller.$transclude(function(clone) { 
->      $element.empty();
      $element.append(clone);
The content is: {{model.content}}
/t
        if (compositeLinkFn) compositeLinkFn(scope, $linkNode, $linkNode);
/ scope is transclude scope,	 en vindt model.content in parent scope=root scope via prot inh	, als hij gaat resolve	,







 

/ Einde ANGULAR VIDEO 24 


/ ANGULAR VIDEO 27

/ ng-template

/ HIER HIER


/ Einde ANGULAR VIDEO 27 

/ ANGULAR ROUTE VIDEO 

/ video 29, ng-view 

$ vi 29/index.html

<script src="/angularjs/angular.js_cp/build/angular.js"></script>
<script src="/angularjs/angular.js_cp/build/angular-route.js"></script>
<script src="script.js"></script>

<div ng-app="app">
  <ng-view></ng-view>
</div>


$ vi 29/script.js

!function(){

var app=angular.module("app",["ngRoute"])

app.config(function($routeProvider){
  $routeProvider.when("/",{
    templateUrl:"app.html"  ,
    controller:"ctrl"
  })
})
app.controller("ctrl",function($scope){
    $scope.model={
      message:"This is my app!!"
    }
})

}()

/ als we geven	,
http://web/angularjs/egghead.io/29/
/ dan zien we	,
http://web/angularjs/egghead.io/29/#
/ en	,
This is my app!!



/ 7	. 

/ Debug	,

/ 13	.

/ app.config(function($routeProvider){...})
/ =
        var config = invokeLater('$injector', 'invoke');
/ dwz dat hij di de params	, hier $routeProvider	,
/ en dan fct.apply(self,args) calls	, met args={di's args}
//////////////////////////////
/ deze fct wordt invoke bij loadModules("app")	,


/ 13	.

app.controller("ctrl",function($scope){
    $scope.model={
      message:"This is my app!!"
    }
})
// =
app.config(function($controllerProvider){
  $controllerProvider.register("ctrl",function($scope){
    $scope.model={
      message:"This is my app!!"
    }
  })
})
//////////////////////////////
/ deze fct wordt invoke bij loadModules("app")	,


/ 13	.

  $routeProvider.when("/",{
    templateUrl:"app.html"  ,
    controller:"ctrl"
  })
/ create route.routes 
/ TODO

/13	.

/ we komen in	angular-route.js	,

(function(window, angular, undefined) {'use strict';

var ngRouteModule = angular.module('ngRoute', ['ng']).
                        provider('$route', $RouteProvider);
/ = $provide.provider

ngRouteModule.provider('$routeParams', $RouteParamsProvider);

ngRouteModule.directive('ngView', ngViewFactory);
/= $compileProvider.directive

ngRouteModule.directive('ngView', ngViewFillContentFactory);

})(window, window.angular);

/ 13	. 

/ we komen in script.js	,

var app=angular.module("app",["ngRoute"])
/c
     */
    return function module(name, requires, configFn) {
 ->     return ensure(modules, name, function() {
>>
/ modules=ng, ngLocale, ngRoute	,
/ name=app
/c
  function ensure(obj, name, factory) {
-->    return obj[name] || (obj[name] = factory());
  }
/ factory(), dus we komen in >>
/ dan weer terug bij -->	, return	,

/t in script.js	,

app.config(function($routeProvider){
  $routeProvider.when("/",{
...
/ = 
$injector.invoke( function($routeProvider){
 	$routeProvider.when("/",{
		...
	})
})

/ ngRoute's _invokeQueue heeft 4 entries	,

/ in providerCache	,
$routeProvider	,
$routeParamsProvider	,
 /TODO

/ app's _invokeQueue heeft er 2	,

app.config(function($routeProvider){
->	$routeProvider.when("/",{
			templateUrl:"app.html"	,
			controller:"ctrl"
		})
})

/ en	,
app.config(function($controllerProvider){
->  $controllerProvider.register("ctrl",function($scope){
    $scope.model={
      message:"This is my app!!"
    }
  })
})

/ 13	.

/ we zijn in	 het create van de "ngViewDirective"	,

   function addDirective(tDirectives, name, location, maxPriority, ignoreDirective, startAttrName, endAttrName) {
        for(var directive, directives = $injector.get(name + Suffix),
/ name="ngView"
/c
            var provider = providerInjector.get(servicename + providerSuffix);
"ngViewDirectiveProvider"	, 
            return instanceInjector.invoke(provider.$get, provider);
/c
       $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
          function($injector, $exceptionHandler) {
->            var directives = [];
            forEach(hasDirectives[name], function(directiveFactory, index) {
/= "ngViewFactory", voor deze factory moet $route di	, 
/ deze service is er nog niet	,
/c
            var provider = providerInjector.get(servicename + providerSuffix);
/ "$routeProvider"
            return instanceInjector.invoke(provider.$get, provider);
/ $routeProvider.$get heeft veel deps	, bijv $location	,
/c
            var provider = providerInjector.get(servicename + providerSuffix);
/$locationProvider
            return instanceInjector.invoke(provider.$get, provider);
/c
function $LocationProvider(){
	var
      html5Mode = false;
  this.$get = ['$rootScope', '$browser', '$sniffer', '$rootElement',
      function( $rootScope,   $browser,   $sniffer,   $rootElement) {
    if (html5Mode) {
/ NEE
      appBase = serverBase(initialUrl) + (baseHref || '/');
      LocationMode = $sniffer.history ? LocationHtml5Url : LocationHashbangInHtml5Url;
    } else {
/ JA
      appBase = stripHash(initialUrl);
      LocationMode = LocationHashbangUrl;
    }
/ TODO




/ we zien in de instanceCache "ngViewDirective" Array[2]
function ngViewFactory(   $route,   $anchorScroll,   $animate) {
->  return {
    	restrict: 'ECA',
    terminal: true,
    priority: 400,
    transclude: 'element',
    link: function(scope, $element, attr, ctrl, $transclude) {



function ngViewFillContentFactory($compile, $controller, $route) {
->  return {
    	restrict: 'ECA',
    priority: -400,
    link: function(scope, $element) {


/ dan applyDirectivesToNode	,

        if (directiveValue = directive.transclude) {
          hasTranscludeDirective = true;

         if (directiveValue == 'element') {
            hasElementTranscludeDirective = true;
            terminalPriority = directive.priority;
400

           $template = groupScan(compileNode, attrStart, attrEnd);
<ng-view>

           $compileNode = templateAttrs.$$element =
                jqLite(document.createComment(' ' + directiveName + ': ' +
                                              templateAttrs[directiveName] + ' '));
#comment "ngView undefined"

            compileNode = $compileNode[0];
            replaceWith(jqCollection, jqLite(sliceArgs($template)), compileNode);
/ we zien	 dat <ng-view></ngview> weg is	,
<div ng-app="app">
	<!-- ngView: undefined -->
</div>

///////////////////
           childTranscludeFn = compile($template, terminalPriority, ...)
/ terminalPriority=400	,

/ Intermezzo

/ TERMINALPRIORITY

/ terminalPriority=400	,
/ want hij gaat nu <ng-view> compile, maar dat waren we juist aan het doen	, 
/ we zijn apply de 1ste dir fct	, en deze moet NIET in deze compile	, daarom 	,
         if (directiveValue == 'element') {
...
            terminalPriority = directive.priority;
...
            childTranscludeFn = compile($template, transcludeFn, terminalPriority,
/ als we straks weer in addDirective komen, dan zal hij deze dir fct NIET add, 

            if ( (maxPriority === undefined || maxPriority > directive.priority) &&
                 directive.restrict.indexOf(location) != -1) {
/ NEE voor deze dir fct	 ngViewFactory
/ JA voor de 2de, ngViewFillContentFactory	, want heeft priority -400 en maxPriority=400> deze dir's priority=-400	,

/ In applyDirectivesToNode zien we	,

	      var terminalPriority = -Number.MAX_VALUE,
      for(var i = 0, ii = directives.length; i < ii; i++) {
        if (terminalPriority > directive.priority) {
          break; // prevent further processing of directives
        }
/ terminalPriority is hier vrijwel altijd -Number.MAX_VALUE, behalve als een van de dir fcts terminal:true is	, dan zal er geen volgend dir fct meer apply	, 
/ en de 1ste dir fct van ng-view is dat	, dus die set terminalPriority=400, en dan komt de 2de en dan 400 > -400 JA	, dus break	, 

/ Dus ngViewFactory apply als compile ng-view, en ngViewFillFactory ook als compile ng-view, maar dan als (user) template	,

/ Einde Intermezzo

$template=<ng-view></ng-view>

   function addDirective(tDirectives, name, location, maxPriority, ...){ 

        for(var directive, directives = $injector.get(name + Suffix), i = 0, ii = directives.length; i<ii; i++) {
            directive = directives[i];

            if ( (maxPriority === undefined || maxPriority > directive.priority) && directive.restrict.indexOf(location) != -1) {
/ JA, alleen voor de 2de	,
location="E"	,

function ngViewFillContentFactory($compile, $controller, $route) {
->  return {
    	restrict: 'ECA',
    priority: -400,
    link: function(scope, $element) {

/dan applyDirectivesToNode	, 
/ compileNode=<ng-view>
/ 1 dir	,
/ alleen linkFn in postLinkFns	,

/ t in applyDirectivesToNode	,
            childTranscludeFn = compile($template, transcludeFn);
/ D
compileNode=#comment "ngView: undefined"

            linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
/ link fct van 1ste dir 	,
function ngViewFactory(   $route,   $anchorScroll,   $animate) {
  return {
    link: function(scope, $element, attr, ctrl, $transclude) {
..

/ de 2de NIET, want	,
        if (terminalPriority > directive.priority) {
          break; // prevent further processing of directives

      nodeLinkFn.transclude = hasTranscludeDirective && childTranscludeFn;
/=publicLinkFn van compiled template <ng-view></ng-view>

/ t in compileNodes	, nodeList=text,comment,text

/ returns publicLinkFn	,

/t
          compile(element)(scope);

/ link fase	,

/ compositeLinkFn	,
/ comment node	,
           childTranscludeFn = nodeLinkFn.transclude;
/ publicLinkFn van template <ng-view></ng-view>	,
            if (childTranscludeFn || (!boundTranscludeFn && transcludeFn)) {
              nodeLinkFn(childLinkFn, childScope, node, $rootElement,
                createBoundTranscludeFn(scope, childTranscludeFn || transcludeFn)
/c
    function createBoundTranscludeFn(scope, transcludeFn) {
      return function boundTranscludeFn(transcludedScope, cloneFn, controllers) {
/ maakt nieuwe scope	,

/t
/c nodeLinkFn , node=#comment
        transcludeFn = boundTranscludeFn && controllersBoundTransclude;
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);
/c
function ngViewFactory(   $route,   $anchorScroll,   $animate) {
    link: function(scope, $element, attr, ctrl, $transclude) {
        scope.$on('$routeChangeSuccess', update);
          } else {
            cleanupLastView();
/ doet niets	,

/t publicLinkFn op <div ng-app="app">
	return $linkNode

/ root scope.__proto__.$digest

/ op root scope zijn 2 watchers, location en auto scroll	,

       do { // "while dirty" loop
                    if ((value = watch.get(current)) !== (last = watch.last) &&
/ watcher op root scope,	
function $LocationProvider(){
  this.$get = ['$rootScope', '$browser', '$sniffer', '$rootElement',
      function( $rootScope,   $browser,   $sniffer,   $rootElement) {
    // update browser
    var changeCounter = 0;
    $rootScope.$watch(function $locationWatch() {
     var oldUrl = $browser.url();
http://web/angularjs/egghead.io/29/
      if (!changeCounter || oldUrl != $location.absUrl()) {
        changeCounter++;

        $rootScope.$evalAsync(function() {
...


/volgende	,
       do { // "while dirty" loop

/ watcher op root scope	,
function $AnchorScrollProvider() {
 this.$get = ['$window', '$location', '$rootScope', function($window, $location, $rootScope) {
      $rootScope.$watch(function autoScrollWatch() {return $location.hash();},
        function autoScrollWatchAction() {
          $rootScope.$evalAsync(scroll);
        });

/ weer 	,
       do { // "while dirty" loop
/ nu entries op asyncQueue	,

              asyncTask.scope.$eval(asyncTask.expression);
/c

    // update browser
    var changeCounter = 0;
    $rootScope.$watch(function $locationWatch() {
      var oldUrl = $browser.url();
      var currentReplace = $location.$$replace;

      if (!changeCounter || oldUrl != $location.absUrl()) {
        changeCounter++;
        $rootScope.$evalAsync(function() {
->          if ($rootScope.$broadcast('$locationChangeStart', $location.absUrl(), oldUrl).
/ NEE
          } else {
            $browser.url($location.absUrl(), currentReplace);
            afterLocationChange(oldUrl);
/c
    function afterLocationChange(oldUrl) {
      $rootScope.$broadcast('$locationChangeSuccess', $location.absUrl(), oldUrl);
/c
      $broadcast: function(name, args) {
        var target = this,
            current = target,
            next = target,

        //down while you can, then up and next sibling or up and next sibling until back at root
        do {
          current = next;
          event.currentScope = current;
          listeners = current.$$listeners[name] || [];
current: Scope
$$listeners: Object
	$locationChangeSuccess: Array[1]
		0: function updateRoute() {
	$routeChangeSuccess: Array[1]
		0: function update() {

name: "$locationChangeSuccess"

             listeners[i].apply(null, listenerArgs);
/c
function $RouteProvider(){
  this.$get = ['$rootScope',
               '$location',
               '$routeParams',
               '$q',
               '$injector',
               '$http',
               '$templateCache',
               '$sce',
      function($rootScope, $location, $routeParams, $q, $injector, $http, $templateCache, $sce) {
    function updateRoute() {
->      var next = parseRoute(),


/ 7	. 

/ Omdat 
function ngViewFactory(   $route,   $anchorScroll,   $animate) {
  return {
    transclude: 'element',

/ verandert	,
<div ng-controller="ctrl">
	<ng-view></ng-view>
</div>

/in	,
<div ng-controller="ctrl">
	<!-- ngView: undefined -->
</div>

/ De node zelf ook wordt compiled	, (nu is er alleen de node)	,

/ 7	. 

/ Het comment 
	<!-- ngView: undefined -->
/ vervangt <ng-view> en is WH er om nodeLinkFn een node te geven	,

/ 7	. 

/ IN ROUTE # APPEARS

/ De url in de browser wordt	,
http://web/angularjs/egghead.io/29/#/

   $rootScope.$watch(function $locationWatch() {
      var oldUrl = $browser.url();
      var currentReplace = $location.$$replace;

      if (!changeCounter || oldUrl != $location.absUrl()) {
        changeCounter++;
        $rootScope.$evalAsync(function() {
          if ($rootScope.$broadcast('$locationChangeStart', $location.absUrl(), oldUrl).
              defaultPrevented) {
            $location.$$parse(oldUrl);
          } else {
            $browser.url($location.absUrl(), currentReplace);
->          afterLocationChange(oldUrl);
/c
    function afterLocationChange(oldUrl) {
      $rootScope.$broadcast('$locationChangeSuccess', $location.absUrl(), oldUrl);
/c
      $broadcast: function(name, args) {
            try {
              listeners[i].apply(null, listenerArgs);
/c
    function updateRoute() {
       if (next) {
          if (next.redirectTo) {
            if (angular.isString(next.redirectTo)) {
              $location.path(interpolate(next.redirectTo, next.params)).search(next.params) .replace();
/c
function locationGetterSetter(property, preprocess) {
  return function(value) {
...
    this.$$compose();
/c
function LocationHashbangUrl(appBase, hashPrefix) {			/ closure
/ hashPrefix="#"  ,
...
  this.$$compose = function() {
    this.$$url = encodePath(this.$$path) + (search ? '?' + search : '') + hash;
"/"
    this.$$absUrl = appBase + (this.$$url ? hashPrefix + this.$$url : '');
"http://web/angularjs/egghead.io/29/#/"

/ t
    function updateRoute() {
       if (next) {
          if (next.redirectTo) {
            if (angular.isString(next.redirectTo)) {
              $location.path(interpolate(next.redirectTo, next.params)).search(next.params) .replace();
/ D
        $q.when(next).
          then(function() {
...
          }).
          // after route change
          then(function(locals) {
            if (next == $route.current) {
              if (next) {
                next.locals = locals;
                angular.copy(next.params, $routeParams);
              }
 ->           $rootScope.$broadcast('$routeChangeSuccess', next, last);

/ Later	,
    // update browser
    var changeCounter = 0;
    $rootScope.$watch(function $locationWatch() {
      var oldUrl = $browser.url();
      var currentReplace = $location.$$replace;

      if (!changeCounter || oldUrl != $location.absUrl()) {
        changeCounter++;
        $rootScope.$evalAsync(function() {
          if ($rootScope.$broadcast('$locationChangeStart', $location.absUrl(), oldUrl).
              defaultPrevented) {
            $location.$$parse(oldUrl);
          } else {
->            $browser.url($location.absUrl(), currentReplace);
/ we zien in location in browser	, 
http://web/angularjs/egghead.io/29/#/



/ 7	.

/ Dan in compiled user template <ng-view>

        if (cloneConnectFn) cloneConnectFn($linkNode, scope);
/c
       function update() {
            var clone = $transclude(newScope, function(clone) {
              $animate.enter(clone, null, currentElement || $element, function onNgViewEnter () {
...
/clone (arg) = ng-view (user template)	,
/ $ element=#comment
/c
     enter : function(element, parent, after, done) {
        if (after) {
          after.after(element);
/ after=#comment
/ element=ng-view
/c
    var index = element, parent = element.parentNode;
    forEach(new JQLite(newElement), function(node){
      parent.insertBefore(node, index.nextSibling);
parent=div
node=ng-view
index=#comment, index.nextSibling="..." (TODO, carriage return?)

/ we zien in HTML	,
<div ng-app="app" class="ng-scope">
	<!-- ngView: undefined -->
	<ng-view class="ng-scope"></ng-view>
</div>

/t in publicLinkFn van user template	,
       if (cloneConnectFn) cloneConnectFn($linkNode, scope);
/ D
        if (compositeLinkFn) compositeLinkFn(scope, $linkNode, $linkNode);
/ link fct	, 
/ c
ngViewFillContentFactory.$inject = ['$compile', '$controller', '$route'];
function ngViewFillContentFactory($compile, $controller, $route) {
  return {
    link: function(scope, $element) {
      $element.html(locals.$template);

<div ng-app="app" class="ng-scope">
	<!-- ngView: undefined -->
	<ng-view class="ng-scope">
		<h1>{{model.message}}</h1>
	</ng-view>
</div>

      var link = $compile($element.contents());
/ Gaat <h1>{{model.message}}</h1> compile	, 

/ 7	. 

/ app.config, app.controller invokes provider fcts	,
app.config : $injector.invoke	, waar $injector=provideInjector=provideCache.$injector	,
app.controller: $controllerProvider.register	,

/ want	,

  function loadModules(modulesToLoad){
          for(invokeQueue = moduleFn._invokeQueue, i = 0, ii = invokeQueue.length; i < ii; i++) {
            var invokeArgs = invokeQueue[i],
                provider = providerInjector.get(invokeArgs[0]);

            provider[invokeArgs[1]].apply(provider, invokeArgs[2]);


/ als invokeArgs[0]="$injector , dan providerInjector heeft in closure scope de providerCache, en daar wordt "$injector" in gevonden	,

/7	. 

      $broadcast: function(name, args) {
"$locationChangeSuccess"
              listeners[i].apply(null, listenerArgs);
/c
    function updateRoute() {
              $location.path(interpolate(next.redirectTo, next.params)).search(next.params) .replace();
/ next.redirectTo="/"

/ we zien	,

LocationHashbangInHtml5Url.prototype =
  LocationHashbangUrl.prototype =
  LocationHtml5Url.prototype = {
...
  path: locationGetterSetter('$$path', function(path) {
    return path.charAt(0) == '/' ? path : '/' + path;
  }),

/ we komen in	,
function locationGetterSetter(property, preprocess) {
  return function(value) {
    this[property] = preprocess(value);
/ WAS "", NU "/"	,
    this.$$compose();
/c
    this.$$url = encodePath(this.$$path) + (search ? '?' + search : '') + hash;
"/"
    this.$$absUrl = appBase + (this.$$url ? hashPrefix + this.$$url : '');
"http://web/angularjs/egghead.io/31/#/"

/ Dan	verder in	,
    function updateRoute() {
        $q.when(next).
          then(function() {
...
          }).
/ TODO
          // after route change
          then(function(locals) {
              $rootScope.$broadcast('$routeChangeSuccess', next, last);
/c
        function update() {
/ NIETS

/later	,
   // update browser
    var changeCounter = 0;
    $rootScope.$watch(function $locationWatch() {
     if (!changeCounter || oldUrl != $location.absUrl()) {
/ JA
/ changeCounter=1	, dus die geeft NEE	,
/ Maar	,
oldUrl="http://web/angularjs/egghead.io/31/"
$location.absUrl()
"http://web/angularjs/egghead.io/31/#/"

       $rootScope.$evalAsync(function() {
          if ($rootScope.$broadcast('$locationChangeStart', $location.absUrl(), oldUrl).  defaultPrevented) {
/ NEE
/ TODO
            $location.$$parse(oldUrl);
          } else {
/ JA
            $browser.url($location.absUrl(), currentReplace);
/ We zien in chrome's location: http://web/angularjs/egghead.io/31/#/
            afterLocationChange(oldUrl);

/ later	,

    function updateRoute() {
              $location.path(interpolate(next.redirectTo, next.params)).search(next.params) .replace();
/D
       $q.when(next).
         then(function() {
              if (angular.isDefined(template)) {
                locals['$template'] = template;
/ D
              }
              return $q.all(locals);
          }).
          // after route change
          then(function(locals) {
            if (next == $route.current) {
              if (next) {
                next.locals = locals;
                angular.copy(next.params, $routeParams);
              }
              $rootScope.$broadcast('$routeChangeSuccess', next, last);
 
$route: Object

current: angular.extend.angular.extend

$$route: Object					/ = $route["/"]
controller: "ctrl"
keys: Array[0]
originalPath: "/"
regexp: /^\/$/
reloadOnSearch: true
template: "<h1>{{model.message}}</h1>"

locals: Object
$template: "<h1>{{model.message}}</h1>"

params: Object
pathParams: Object

reload: function () {

routes: Object
: Object
/: Object
/pizza: Object
/pizza/: Object
null: Object

/c
      $broadcast: function(name, args) {
name="$routeChangeSuccess"
              listeners[i].apply(null, listenerArgs);

       function update() {
          var locals = $route.current && $route.current.locals,
              template = locals && locals.$template;
template: "<h1>{{model.message}}</h1>"

          if (template) {
            var newScope = scope.$new();
            var clone = $transclude(newScope, function(clone) {
              $animate.enter(clone, null, currentElement || $element, function onNgViewEnter () {
/ c ($transclude)	,
        function controllersBoundTransclude(scope, cloneAttachFn) {
/c
        var clone = transcludeFn(transcludedScope, cloneFn, controllers);
/c
      return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
        if (cloneConnectFn) cloneConnectFn($linkNode, scope);
/c
        function update() {
            var clone = $transclude(newScope, function(clone) {
->              $animate.enter(clone, null, currentElement || $element, function onNgViewEnter () {
/c
      enter : function(element, parent, after, done) {
        if (after) {
          after.after(element);
/c
  after: function(element, newElement) {
    var index = element, parent = element.parentNode;
    forEach(new JQLite(newElement), function(node){
      parent.insertBefore(node, index.nextSibling);
/ parent = div.ng-controller	,
/ node=<ng-view>
/index=#comment

<div ng-controller="ctrl" class="ng-scope">
		<!-- ngView: undefined -->
		<ng-view class="ng-scope"></ng-view>
</div>

/ nu nog het template,	

        if (cloneConnectFn) cloneConnectFn($linkNode, scope);
/ D
/ Dit was de transclude fct	,
        if (compositeLinkFn) compositeLinkFn(scope, $linkNode, $linkNode);
/ Nu	,
/ de linkNode=<ng-view>
 /er is alleen een link fct	,
function ngViewFillContentFactory($compile, $controller, $route) {
  return {
    link: function(scope, $element) {
      var current = $route.current,
     var current = $route.current,
/ achter "/"	,
          locals = current.locals;
{$template:"<h1>{{model.message}}</h1>"}

      $element.html(locals.$template);
{{model.message}} #text staat in DOM	,
      var link = $compile($element.contents());
publicLinkFn	, met gen get model fct	,

/ Dus de <ng-view> was compile, en geeft een publicLinkFn	, dat de transclude fct is	, en nu wordt ook het template uit route "/" compile	, 

      if (current.controller) {
/ JA	,
current

angular.extend.angular.extend {params: Object, pathParams: Object, $$route: Object, locals: Object, reloadOnSearch: true…}

$$route: Object
locals: Object
params: Object
pathParams: Object
__proto__: Object

controller: "ctrl"
keys: Array[0]
originalPath: "/"
regexp: /^\/$/
reloadOnSearch: true
template: "<h1>{{model.message}}</h1>"

      if (current.controller) {
/ JA
"ctrl"	,
        locals.$scope = scope;
/ locals={$scope:..., $template:"<h1>{{model.message}}</h1>"	,
        var controller = $controller(current.controller, locals);
/c
    return function(expression, locals) {
       expression = controllers.hasOwnProperty(constructor)
            ? controllers[constructor]
/= function($scope,model){
    $scope.model=model
  })

      instance = $injector.instantiate(expression, locals);
/ Haalt $scope uit locals	,
      link(scope);
/c
      return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
/ de link fct installs $scope.watch


/ 7	. 

/ $digest	,

function ngViewFactory(   $route,   $anchorScroll,   $animate) {
  return {
    link: function(scope, $element, attr, ctrl, $transclude) {
        scope.$on('$routeChangeSuccess', update);


function $RouteProvider(){

  this.$get = ['$rootScope',
               '$location',
               '$routeParams',
               '$q',
               '$injector',
               '$http',
               '$templateCache',
               '$sce',
      function($rootScope, $location, $routeParams, $q, $injector, $http, $templateCache, $sce) {
    $rootScope.$on('$locationChangeSuccess', updateRoute);

/ we zijn in	,
    function afterLocationChange(oldUrl) {
      $rootScope.$broadcast('$locationChangeSuccess', $location.absUrl(), oldUrl);
/c
    function updateRoute() {
        $rootScope.$broadcast('$routeChangeStart', next, last);
/ dus na $locationChangeSuccess komt $routeChangeStart	,
              $location.path(interpolate(next.redirectTo, next.params)).search(next.params) .replace();


/ 13	. 

/ hij doet eerst	$locationChangeStart	, maar er zijn geen listeners	, daarom wH NEE	,
   $rootScope.$watch(function $locationWatch() {
        $rootScope.$evalAsync(function() {
          if ($rootScope.$broadcast('$locationChangeStart', $location.absUrl(), oldUrl).  defaultPrevented) {
/ NEE
          } else {
/ JA
            $browser.url($location.absUrl(), currentReplace);
/ NIETS
            afterLocationChange(oldUrl);
/c
    function afterLocationChange(oldUrl) {
      $rootScope.$broadcast('$locationChangeSuccess', $location.absUrl(), oldUrl);
/c
            try {
              listeners[i].apply(null, listenerArgs);

/ Dus $locationChangeSuccess heeft wel listeners	,

/c
    function updateRoute() {
    var next = parseRoute(),
/ "" -> "/"	,
/ last=undefined	,
        $rootScope.$broadcast('$routeChangeStart', next, last);
/ GEEN listeners	,
              $location.path(interpolate(next.redirectTo, next.params))
									.search(next.params) .replace();
/ $location.$$path="" -> "/"	,
/ c
    this.$$compose();
/c
    this.$$url = encodePath(this.$$path) + (search ? '?' + search : '') + hash;
/ "/"	, this.$$path="/",	 hash=""	,
    this.$$absUrl = appBase + (this.$$url ? hashPrefix + this.$$url : '');
"http://web/angularjs/egghead.io/31/#/"


         // after route change
          then(function(locals) {
              $rootScope.$broadcast('$routeChangeSuccess', next, last);
/ WEL listener	,
function ngViewFactory(   $route,   $anchorScroll,   $animate) {
  return {
    link: function(scope, $element, attr, ctrl, $transclude) {
        function update() {
/ NIETS

/ Dan	,
    $rootScope.$watch(function $locationWatch() {
      var oldUrl = $browser.url();
      var currentReplace = $location.$$replace;
true

      if (!changeCounter || oldUrl != $location.absUrl()) {
/ JA
        $rootScope.$evalAsync(function() {
          if ($rootScope.$broadcast('$locationChangeStart', $location.absUrl(), oldUrl).  defaultPrevented) {
/ NEE
          } else {
/ JA
            $browser.url($location.absUrl(), currentReplace);
/we zien	,
http://web/angularjs/egghead.io/31/#/
            afterLocationChange(oldUrl);
/c
      $rootScope.$broadcast('$locationChangeSuccess', $location.absUrl(), oldUrl);
/c
    function updateRoute() {
      var next = parseRoute(),
/c
      angular.forEach(routes, function(route, path) {
        if (!match && (params = switchRouteMatcher($location.path(), route))) {
/ Nu matches "/"	, 
/ Zonet was dat ""	,

match: angular.extend.angular.extend
$$route: Object
controller: "ctrl"
keys: Array[0]
originalPath: "/"
regexp: /^\/$/
reloadOnSearch: true
template: "<h1>{{model.message}}</h1>"

          last = $route.current;
/Zonet was dat een indirect "" -> "/"	, is nu last	,

last: angular.extend.angular.extend
$$route: Object
keys: Array[0]
originalPath: ""
redirectTo: "/"
regexp: /^$/

       $q.when(next).
          then(function() {
              if (angular.isDefined(template)) {
/ JA
/ Hier wordt dus ook template set	,
                locals['$template'] = template;
"<h1>{{model.message}}</h1>"
/ TODO

              return $q.all(locals);
            }
          }).
          // after route change
          then(function(locals) {
locals: Object
$template: "<h1>{{model.message}}</h1>"

                next.locals = locals;
              $rootScope.$broadcast('$routeChangeSuccess', next, last);
/c
function ngViewFactory(   $route,   $anchorScroll,   $animate) {
  return {
    link: function(scope, $element, attr, ctrl, $transclude) {
        function update() {
          var locals = $route.current && $route.current.locals,
              template = locals && locals.$template;
"<h1>{{model.message}}</h1>"
          if (template) {
            var newScope = scope.$new();
            var current = $route.current;
$route: Object

current: angular.extend.angular.extend
$$route: Object
controller: "ctrl"
keys: Array[0]
originalPath: "/"
regexp: /^\/$/
reloadOnSearch: true
template: "<h1>{{model.message}}</h1>"

locals: Object
$template: "<h1>{{model.message}}</h1>"

            var clone = $transclude(newScope, function(clone) {
/ deze anon fct is de cloneAttachFn	,
/c
        function controllersBoundTransclude(scope, cloneAttachFn) {
/c
   function createBoundTranscludeFn(scope, transcludeFn) {
      return function boundTranscludeFn(transcludedScope, cloneFn, controllers) {
...
->        var clone = transcludeFn(transcludedScope, cloneFn, controllers);
/c
     return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
        if (cloneConnectFn) cloneConnectFn($linkNode, scope);
/c
           var clone = $transclude(newScope, function(clone) {
              $animate.enter(clone, null, currentElement || $element, function onNgViewEnter () {
/c
      enter : function(element, parent, after, done) {
          after.after(element); 
/c
 after: function(element, newElement) {
/ element=#comment
/ newElement=ng-view

    var index = element, parent = element.parentNode;
    forEach(new JQLite(newElement), function(node){
      parent.insertBefore(node, index.nextSibling);

/ we zien	,
<div ng-controller="ctrl" class="ng-scope">
		<!-- ngView: undefined -->
		<ng-view class="ng-scope"></ng-view>
	</div>
/ klopt,	 index=#comment, de ng-view komt voor index.nextElement=
#text
data: "↵	"
 /TODO
/ hierna, nu is index.nextSibling =ng-view	,
/ en is index.nextSibling.nextSibling dit #text elem	,

      index = node;
ng-view

/ t
     return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
         if (cloneConnectFn) cloneConnectFn($linkNode, scope);
/ D
/ $linkNode=ng-view
/ Was #comment	? TODO
        if (compositeLinkFn) compositeLinkFn(scope, $linkNode, $linkNode);
/c
function ngViewFillContentFactory($compile, $controller, $route) {
    link: function(scope, $element) {

     var current = $route.current,
          locals = current.locals;
current: angular.extend.angular.extend
$$route: Object
controller: "ctrl"
keys: Array[0]
originalPath: "/"
regexp: /^\/$/
reloadOnSearch: true
template: "<h1>{{model.message}}</h1>"

locals: Object
$template: "<h1>{{model.message}}</h1>"

      $element.html(locals.$template);
$element=ng-view

/ we zien	,
<div ng-controller="ctrl" class="ng-scope">
		<!-- ngView: undefined -->
		<ng-view class="ng-scope">
			<h1>{{model.message}}</h1></ng-view>

      var link = $compile($element.contents());
/ compiles h1	,

      if (current.controller) {
/ "ctrl"
/ TODO, want current.$$route.controller="ctrl"

        locals.$scope = scope;
        var controller = $controller(current.controller, locals);
/c
      instance = $injector.instantiate(expression, locals);
/c
app.controller("ctrl",function($scope){
->		$scope.model={
				message:"This is my app!!"
		}
})

      link(scope);
/c
      return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
/c
       var fn=function textInterpolateLinkFn(scope, node) {
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });

/ We zijn nog steeds in ,	
              $rootScope.$broadcast('$routeChangeSuccess', next, last);

/ Dan komen we hieruit,	 en $digest-> $watch die "This is my app!!" 

 /13	. 

/ als we	,
http://web/angularjs/egghead.io/31/#/pizza
/ dan wordt er een nieuwe scope create, die de scope van de current ng-view replace, en er komt een nieuwe <ng-view> in DOM , en de current wordt rm	,

/ 7	.


/ video 32

    <ng-view></ng-view>


app.config(function($routeProvider){
  $routeProvider.when("/:message",{
    template:"Hello, {{model.message}}",
    controller:"ctrl",
  })
  .when("/",{
    template:"Hello!",
    controller:"ctrl",
  })
  //$locationProvider.html5Mode(true)
}) 

app.controller("ctrl",function($scope,$routeParams){
    $scope.model={
      message:$routeParams.message
    }
})

/ 13	. 

/ we insert 
<ng-view>					
/ en daarna daarin	,
<h1>{{model.message}</h1>					/ template	,

/ <ng-view> wordt compile -> ngViewFillFactory.link	

   link: function(scope, $element) {
      var current = $route.current,
          locals = current.locals;

      $element.html(locals.$template);

      var link = $compile($element.contents());

      if (current.controller) {
        locals.$scope = scope;
        var controller = $controller(current.controller, locals);
        if (current.controllerAs) {
          scope[current.controllerAs] = controller;
        }
      }

      link(scope);

/  maar hier wordt ook de  template compile	,


/ Intermezzo

/ See 21_2

/ Hier is een ng-transclude attr

app.directive("foo",function(){
  return{
    restrict: "E",
    replace:true,
    transclude:true,
    template:"<div ng-transclude style=\"color:red\">our template</div>"
  }
})

//////////////////////////////
/ attr dirs geven link fcts op een elem	,
/ ( en dat er een ctrl wordt create, maar die zijn er voor de link fcts),

/ Als foo dir template wordt compile, dan wordt ngTranscludeDirective create,  en de link fct install	, 
/ in de DOM komt deze template	, <div ng-transclude ...>	,
/ dat gebeurt in de compile fase, in applyDirectivesToNode, bij replace	,
/ in de link fase op deze <div ng-transclude ...> wordt controller create, en zijn $transclude fct set	, en de link fct called	,
  link: function($scope, $element, $attrs, controller) {
  ->  controller.$transclude(function(clone) { $scope=$scope /* ERICJ */
/ bij create van deze ctrl was $transclude set , omdat de nodeLinkFn.transclude != null was, =publicLinkFn user template, 	die in de dir template <div ng-transclude ...> komt	,

/ we hebben in HTML	,
<div ng-transclude="" style="color:red;color:red">
	our template
</div>
/ wat hierin komt (#text "our template" gaat eruit) , krijgt een nieuwe scope	,
/ daarna komen we in de publicLinkFn van de compiles user template	,
/ deze calls de cloneConnectFn=
var ngTranscludeDirective = ngDirective({
  link: function($scope, $element, $attrs, controller) {
    controller.$transclude(function(clone) { $scope=$scope /* ERICJ */
->    $element.empty();
      $element.append(clone);

/ Einde Intermezzo

/ 13	. 

/ bij ng-view is er geen template met ng-transclude	,

function ngViewFactory(   $route,   $anchorScroll,   $animate) {
  return {
...
    transclude: 'element',
    link: function(scope, $element, attr, ctrl, $transclude) {
...
        function update() {
            var clone = $transclude(newScope, function(clone) {
 ->             $animate.enter(clone, null, currentElement || $element, function onNgViewEnter () {
	
/ de $transclude fct is gegeven bij call link fct	,
/ dat is gebeurt bij het link van de #comment <!-- ngview	, 
            childTranscludeFn = nodeLinkFn.transclude;
            if (childTranscludeFn || (!boundTranscludeFn && transcludeFn)) {
              nodeLinkFn(childLinkFn, childScope, node, $rootElement,
                createBoundTranscludeFn(scope, childTranscludeFn || transcludeFn)
              );
/ er wordt dan trouwens geen ctrl create, maar de link fct wordt called	,

/ als we later bij in update komen ($routeChangeSuccess)	, dan wordt $transclude=controllersBoundTransclude called	, hij transclude dan de <h1>{{model.message}} </h1> in de nieuwe <ng-view>	, hij calls de fct bij ->	,

/ Einde ANGULAR ROUTE VIDEO 32


/ ANGULAR ROUTE

/ video 35

/ 13	,

/ we start met 	,

<div ng-app="app">
  <div ng-controller="ctrl">
    <ng-view></ng-view>
  </div>
</div>

app.config(["$routeProvider",function($routeProvider){
  $routeProvider.when("/",{
      templateUrl:"app.html"  ,
      controller:"ctrl" ,
  })
}])
app.controller("ctrl",function($scope){
    $scope.model={
      message:"This is my app!!"
    }
})

/ 13	,

app.config(["$routeProvider",function($routeProvider){
  $routeProvider.when("/",{
      templateUrl:"app.html"  ,
      controller:"ctrl" ,
      resolve:{
        app:function($q){
          var value=$q.defer()
          return value.promise
        },
      },
  })
}])

/ hij loads wel met XHR app.html,	 maar we zien hem niet	,
/ TODO
/ Wordt de controller wel create?
/ TODO

/ nu doen we	,

app.config(["$routeProvider",function($routeProvider){
  $routeProvider.when("/",{
      templateUrl:"app.html"  ,
      controller:"ctrl" ,
      resolve:{
        my:function($q,$timeout){
          var val=$q.defer()
          $timeout(function(){
            val.resolve()
          },2000)
          return val.promise
        },
      },
  })
}])

/ we zien app.html	,

/ 7	.

/ video 36 

$ vi script.js

app.config(["$routeProvider",function($routeProvider){
  $routeProvider.when("/",{
      templateUrl:"app.html"  ,
      controller:"ctrl" ,
      resolve:{
        my:my,
      },
  })
}])
app.controller("ctrl",function($scope){
    $scope.model={
      message:"This is my new app!!"
    }
})

var my=function($q,$timeout){
  var val=$q.defer()
  $timeout(function(){
    val.resolve()
  },2000)
  return val.promise
}


/ HIER HIER


/ Einde ANGULAR ROUTE

/ DEBUG ANGULAR ROUTE

/ video 29

/ 7	. 

/ providers maak je met $provide.factory, ... of met $provide.provider	, 
/ als je bij laatste een fct geeft, doet hij new	, bij de 1ste maakt je direct een obj	, 
/ dus er is de fct $RouteProvider, dat is een ctor, de provider heeft key "$routeProvider"	,

/7	. 

/ in angular-route.js	,

ngRouteModule.directive('ngView', ngViewFactory);
ngRouteModule.directive('ngView', ngViewFillContentFactory);

/ omdat ngRoute module wordt load	, wordt de ngView dir register	, dwz de ngViewDirectiveProvider wordt create	, en later in de compile fase, in addDirective wordt de dir create	,

/ 7	.

/ in angular-route.js 

/ is routes in de closure scope van $RouteProvider.$get	,
/ zoals in egghead.io/test	,
$ vi newcl.js

var $RouteProvider=function(){
  var routes={"/":{controller:"ctrl"}}
  this.$get=function(){
    var $route={routes:routes}
    return $route 
  }
}
var $routeProvider=new $RouteProvider
var $route=$routeProvider.$get()

/ $routeProvider.when sets routes, 

/ 7	.

/ compile <ng-view>

/ addDirective calls	,
        for(var directive, directives = $injector.get(name + Suffix),
/= .get("ngViewDirective")
/ als of je een dep inj	, resolves	,
/c
          return cache[serviceName] = factory(serviceName);
/c
            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
/ inv de $get fct van de "ngViewDirectiveProvider"	,
/c
       $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
          function($injector, $exceptionHandler) {
                var directive = $injector.invoke(directiveFactory)

/ we hadden eerder	,
ngRouteModule.directive('ngView', ngViewFactory);
ngRouteModule.directive('ngView', ngViewFillContentFactory);

/ en ook is	,
function ngViewFactory(   $route,   $anchorScroll,   $animate) {
/ dus moet eerst inj $route, ...

/ .invoke c
          : getService(key)
key="$route"
/c
          return cache[serviceName] = factory(serviceName);
/c
            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
/= "$routeProvider".$get	, heeft deps	, moeten inj	, bijv $location	,
/c
          : getService(key)
key="$location"
/c
          return cache[serviceName] = factory(serviceName);
/c
            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
/c
  this.$get = ['$rootScope', '$browser', '$sniffer', '$rootElement',
      function( $rootScope,   $browser,   $sniffer,   $rootElement) {
/ this="$locationProvider"	,

/ 7	. 

/ we hadden eerder	,
ngRouteModule.directive('ngView', ngViewFactory);
ngRouteModule.directive('ngView', ngViewFillContentFactory);

/ de "ngViewDirectiveProvider".$get invokes deze 2 factories	,

  this.directive = function registerDirective(name, directiveFactory) {
        $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
          function($injector, $exceptionHandler) {
                var directive = $injector.invoke(directiveFactory)
             return directives;

/ "ngViewDirective" 
directives: Array[2]

0: Object
compile: function () {
index: 0
link: function (scope, $element, attr, ctrl, $transclude) {
name: "ngView"
priority: 400
require: undefined
restrict: "ECA"
terminal: true
transclude: "element"

1: Object
compile: function () {
index: 1
link: function (scope, $element) {
name: "ngView"
priority: -400
require: undefined
restrict: "ECA" 



/ Einde DEBUG ANGULAR ROUTE

/ DEBUG ANGULAR ROUTE

/ video 35	,

/ we zien dat in de 2de link fct van ng-view dir de controller wordt create	,en het template 	wordt transclude	, wel {{model.message}}	, later wordt ng-view's watcher.fn called	, die node val set	,
/ TODO

$ vi index.html

<div ng-app="app">
  <div ng-controller="ctrl">
    <ng-view></ng-view>
  </div>
</div>

$ vi script.js

app.config(["$routeProvider",function($routeProvider){
  $routeProvider.when("/",{
      templateUrl:"app.html"  ,
      controller:"ctrl" ,
      resolve:{
        my:function($q,$timeout){
          var val=$q.defer()
          val.resolve("foo")
          return val.promise
        },
      },
  })
}])
app.controller("ctrl",function($scope,$route){
    $scope.model={ message:"This is my new app!!" }
    console.log($route)
})

/ we my prop van resolve komt resolved in $route.current.locals	, 
		my:"foo"
/ ook 
		$template:"<doctype ...><div>{{model.message}}..."
/ later WH
		$template:"<doctype ...><div>This is a new app!!..."
/ TODO

/ we komen in	,

$rootScope.$digest
/c
              asyncTask.scope.$eval(asyncTask.expression);
/c
    // update browser
    var changeCounter = 0;
    $rootScope.$watch(function $locationWatch() {
      var oldUrl = $browser.url();
      var currentReplace = $location.$$replace;
      if (!changeCounter || oldUrl != $location.absUrl()) {
        changeCounter++;
        $rootScope.$evalAsync(function() {
/ ooit een keer gedaan	,
/ TODO

/ HIER HIER
          if ($rootScope.$broadcast('$locationChangeStart', $location.absUrl(), oldUrl).  defaultPrevented) {
            $location.$$parse(oldUrl);
          } else {
            $browser.url($location.absUrl(), currentReplace);
->          afterLocationChange(oldUrl);
          }
        });
      }
/c
    function afterLocationChange(oldUrl) {
      $rootScope.$broadcast('$locationChangeSuccess', $location.absUrl(), oldUrl);
/c
      $broadcast: function(name, args) {
            try {
              listeners[i].apply(null, listenerArgs);
/c
    function updateRoute() {
      var next = parseRoute(),
/c
    function parseRoute() {
      // Match a route
      var params, match;
      angular.forEach(routes, function(route, path) {
/ 2 routes, keys: "", en "/"	,
        if (!match && (params = switchRouteMatcher($location.path(), route))) {
$location: LocationHashbangUrl
$$absUrl: "http://web/angularjs/egghead.io/35/#/"
$$compose: function () {
$$hash: ""
$$host: "web"
$$parse: function (url) {
$$path: "/"
$$port: 80
$$protocol: "http"
$$replace: false
$$rewrite: function (url) {
$$search: Object
$$url: "/"

       $q.when(next).
ext: angular.extend.angular.extend
$$route: Object
controller: "ctrl"
keys: Array[0]
originalPath: "/"
regexp: /^\/$/
reloadOnSearch: true
resolve: Object
my: function ($q,$timeout){
__proto__: Object
templateUrl: "app.html"
          then(function() {
            if (next) {
              var locals = angular.extend({}, next.resolve),
                  template, templateUrl;
locals: Object
my: function ($q,$timeout){
__proto__: Object
template: undefined
templateUrl: undefined

              angular.forEach(locals, function(value, key) {
                locals[key] = angular.isString(value) ?
/ key="my"
/ NEE, value is a function	,
                    $injector.get(value) : $injector.invoke(value);
/c
app.config(["$routeProvider",function($routeProvider){
	$routeProvider.when("/",{
			templateUrl:"app.html"	,
			controller:"ctrl"	,
			resolve:{
				my:function($q,$timeout){
->					var val=$q.defer()
					val.resolve("foo") 
					return val.promise

/ dus is een promise	, 
                locals[key] = angular.isString(value) ?

/ dan	,
              } else if (angular.isDefined(templateUrl = next.templateUrl)) {
templateUrl="app.html"	,
                  template = $http.get(templateUrl, {cache: $templateCache}).
                      then(function(response) { return response.data; });
/ template is een promise	,
/TODO
              if (angular.isDefined(template)) {
                locals['$template'] = template;
              }
              return $q.all(locals);
/s
  function all(promises) {
promises: Object
$template: Object
my: Object

    forEach(promises, function(promise, key) {
      counter++;
      ref(promise).then(function(value) {
        if (results.hasOwnProperty(key)) return;
        results[key] = value;
my:"foo"
$template="<doctype html>..."
        if (!(--counter)) deferred.resolve(results);

/ 13	,
/ dan later 	een asyncQueue task	,

/ hieronder gebeurt dit	,
/ val.resolve(val), 'n val.promise.then(function(val){...})

              return $q.all(locals);
/ hier waren we net	,
            }
          }).
          // after route change
          then(function(locals) {
/ locals={my:"foo", $template:"<doctype html>..."
            if (next == $route.current) {
/ "/"-route	,
              if (next) {
                next.locals = locals;
                angular.copy(next.params, $routeParams);
              }
->            $rootScope.$broadcast('$routeChangeSuccess', next, last);
/c
            try {
              listeners[i].apply(null, listenerArgs);
/c
        function update() {
          var locals = $route.current && $route.current.locals,
              template = locals && locals.$template;

          if (template) {
/ JA	,
            var newScope = scope.$new();

            // directives to non existing elements.
/////////////////////
            var clone = $transclude(newScope, function(clone) {
/= connectLinkFn in publicLinkFn, 
        if (cloneConnectFn) cloneConnectFn($linkNode, scope);
/ dus clone =<ng-view>	,

              $animate.enter(clone, null, currentElement || $element, function onNgViewEnter () {
/c
     enter : function(element, parent, after, done) {
        if (after) {
          after.after(element);
/c
  after: function(element, newElement) {
    var index = element, parent = element.parentNode;
    forEach(new JQLite(newElement), function(node){
->      parent.insertBefore(node, index.nextSibling);
      index = node;
/ we zien 	,

<div ng-controller="ctrl" class="ng-scope">
		<!-- ngView: undefined -->
		<ng-view class="ng-scope"></ng-view>
</div>

/ dan in publicLinkFn	,
        if (compositeLinkFn) compositeLinkFn(scope, $linkNode, $linkNode);

/ de nodeLinkFn van <ng-view>: geen controller	, calls alleen de link fct	,

function ngViewFillContentFactory($compile, $controller, $route) {
  return {
    restrict: 'ECA',
    priority: -400,
    link: function(scope, $element) {
->      var current = $route.current,
      $element.html(locals.$template);
/ we zien {{model.message}}

      var link = $compile($element.contents());
$element.contents()=text,h1,text, het template	,
/ TODO

      if (current.controller) {
        locals.$scope = scope;
{my:"foo",$template:"<doctype...>", $scope: ng-view scope	,
        var controller = $controller(current.controller, locals);
/c
app.controller("ctrl",function($scope,$route){
->		$scope.model={ message:"This is my new app!!" }
		console.log($route)
})
/ scope is de ng-view scope	,
/ $route.current.locals={my:"foo",$template:"<doctype...",$scope:ng-view scope}

      link(scope);
/ calls publicLinkFn	, dus calls link fct van de interpolate text node	, die de watcher installs op de ng-view scope	,

/ we zien 
This is my new app!!
/ TODO

/ later, 
/ we zijn in 	,
xhr.onreadystatechange
/c
completeRequest
/c
done
        resolvePromise(response, status, headersString);
        if (!$rootScope.$$phase) $rootScope.$apply();
/c
$digest
                    if ((value = watch.get(current)) !== (last = watch.last) &&
/c
   // update browser
    var changeCounter = 0;
    $rootScope.$watch(function $locationWatch() {
->
/ TODO 

/ 7	.


 



 


 


 






/ Einde DEBUG ANGULAR ROUTE

/ ANGULAR PROVIDERS

/ 7	 

      providerCache = {
        $provide: {
            provider: supportObject(provider),
            factory: supportObject(factory),
            service: supportObject(service),
            value: supportObject(value),
            constant: supportObject(constant),
            decorator: decorator
        }
				$injector:{
    			invoke: invoke,
      		instantiate: instantiate,
      		get: getService,					
					...
				}
		instanceCache={
				$injector:{
    			invoke: invoke,
      		instantiate: instantiate,
      		get: getService,				// heeft factory in closure scope om deps te create	, door $injector.invoke de provider.$get
					...
				}

/ factory
function(servicename) {
            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
          }));
/ Het 2de arg provider is voor als provider.$get this uses, bijv sets this.prop	,
/ Dat is ook wat $injector.instantiate doet	,
      returnedValue = invoke(Type, instance, locals);

/ 7	.

     providerInjector = (providerCache.$injector =
          createInternalInjector(providerCache, function() {
            throw $injectorMinErr('unpr', "Unknown provider: {0}", path.join(' <- '));
          })),
      instanceCache = {},
      instanceInjector = (instanceCache.$injector =
          createInternalInjector(instanceCache, function(servicename) {
->          var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
          }));

/ we noteren de instanceInjector met $injector	,
/ De fct bij -> is de factory fct , deze is er voor de deps als ze nog niet in de instanceCache.	
/ $injector.invoke calls 'n fct, maar inj eerst de deps,	 uit locals of uit de instanceCache of laat ze eerst maken met de ook $injector.invoke call	,

/ de providerInjector calls ook .invoke, maar heeft geen factory fct,	 deps zijn er al: XProvider is al create met een $provide.value("X",...) call, 

/ 7. 

$ vi 8_providers2/index.html

<!doctype html>
<html >
<head>
<script src="/angularjs/angular.js_cp/build/angular.js"></script>
<link rel="stylesheet" href="/bootstrap/bootstrap/css/bootstrap.css">
<script src="script.js"></script>
</head>
<body>
<div ng-app="app">
{{a}}
<br>
{{b}}
<br>
{{c}}
<br>
{{d}}
<br>
{{e}}
<br>
{{A}}
<br>
{{B}}
<br>
{{C}}
<br>
{{D}}
<br>
{{E}}
<br>
{{F}}
<br>
{{G}}
</div>

</body>
</html>

$ vi 8_providers2/script.js


var app=angular.module("app",[])

app.value("a","eric j.")
//=
function cl(v){
	return function(){return v}
}
app.factory("b",cl("eric j.")) 

app.factory("c",function(){ return "eric j." })

// calls $injector.instantiate	,$injector=providerInjector, die $injector.invoke calls	,
app.provider("d",function(){	 
	this.$get=cl("eric j.")
})
app.provider("e",function(aProvider){	 
	this.$get=aProvider.$get
})

app.config(["$provide",function($provide){
	$provide.value("A","eric j.")
}])
app.config(function($provide){
	$provide.factory("B",cl("eric j."))
})
app.config(function($provide){
	$provide.factory("C",function(){return "eric j."})
})
app.config(function($provide){
	$provide.provider("D",function(){
		this.$get=cl("eric j.")
	})
})

app.value("X","foo bar")
app.config(function($provide,XProvider){
	$provide.value("E",XProvider.$get())
})

app.config(function($injector){
	$injector.invoke(function($provide,XProvider){
		$provide.value("F",XProvider.$get())
	})
})


app.run(function($rootScope,a,b,c,d,e,A,B,C,D,E,F){

	$rootScope.a=a
	$rootScope.b=b
	$rootScope.c=c
	$rootScope.d=d
	$rootScope.e=e
	$rootScope.A=A
	$rootScope.B=B
	$rootScope.C=C
	$rootScope.D=D
	$rootScope.E=E
	$rootScope.F=F
})

app.run(function($injector,$rootScope){

	$injector.invoke(function(X,A){
		console.log(X)
		console.log(A)
	})

	var ctrl=function($scope,X){
		this.fct=function(){return X}	
		$scope.G=X
	}
	var locals={$scope:$rootScope}
	var instance=$injector.instantiate(ctrl,locals)
	console.log(instance.fct())


})

/ 7	.



 

/ 13	. 

/ ze hebben $provide.value zo program	,

  function value(name, val) {
    return factory(name, valueFn(val));
  }
function valueFn(value) {
  return function() {
    return value;
  };
}

/ maar het had ook zonder de closure valueFn gekund	,

  function value(name, val) {
    return factory(name, function(){return value}) 
  }

/ 13	. 


/ see 8_providers2	,

/ we kunnen 	,

app.value("a","eric j.")

=>
  $provide.value("A","eric j.")


/ of	,

app.config(function($provide){
  $provide.value("A","eric j.")
})
/ = 
app.config(["$provide",function($provide){
  $provide.value("A","eric j.")
}])

=>

$injector.invoke van 
function($provide){
  $provide.value("A","eric j.")
}

/ De 2e met app.config is dus uitgebreider: omdat app.config=$injector.invoke kunnen we naast $provide ook andere services inject	,
/ De 1ste is direct	, 

/ we kunnen	,
/////////////////////////////////////////////////////
app.value("X","foo bar")
app.config(function($provide,XProvider){
  $provide.value("E",XProvider.$get())
})
/ we zien	, 
foo bar


      instance = $injector.instantiate(expression, locals);
expression=
function($scope,X){
	$scope.test=X
})
locals={$scope:...}
/c
    function instantiate(Type, locals) {

      Constructor.prototype = ... Type.prototype;
      instance = new Constructor();

      returnedValue = invoke(Type, instance, locals);
/c
    function invoke(fn, self, locals){
/ inj deps,	 $scope uit locals,  X : $injector.get calls factory: $injector.invoke(XProvider.$get(), XProvider)
      return fn.apply(self, args);
fn=
function($scope,X){
	$scope.test=X
})
self=Constructor inst	,
args=[$scope, "Foo Bar"]
/ self is belangrijk: we kunnen in de controller ctor ook this.fct=... doen	,

/ 7	. 

/ waarom modules	?

/ een module is een namespace,	 een directive of controller heeft niets met de module te doen	, 
/ maar modules worden loaded	, en als we 
ngRouteModule.provider("$route",$RouteProvider)
/ je zet $provide.provider("$route,$RouteProvider) op de _invokeQueue van ngRouteModule	, en ngRouteModule moet loaded, anders gebeurt het niet	, dat is het belang van ngRouteModule	,
/ dan later bij loadModules	,

  function loadModules(modulesToLoad){
    forEach(modulesToLoad, function(module) {
          for(invokeQueue = moduleFn._invokeQueue, i = 0, ii = invokeQueue.length; i < ii; i++) {
            var invokeArgs = invokeQueue[i], provider = providerInjector.get(invokeArgs[0]);
           provider[invokeArgs[1]].apply(provider, invokeArgs[2]);
 
/ en als we	,
aModule.provider("$route",$RouteProvider)
/ en aModule wordt niet loaded	, dan wordt $provide.provider niet called	,

/ ander voorbeeld	,

/ het is zo dat	,

  ////////////////////////////////////
  function loadModules(modulesToLoad){
    forEach(modulesToLoad, function(module) {
          for(invokeQueue = moduleFn._invokeQueue, i = 0, ii = invokeQueue.length; i < ii; i++) {
            var invokeArgs = invokeQueue[i], provider = providerInjector.get(invokeArgs[0]);
            provider[invokeArgs[1]].apply(provider, invokeArgs[2]);


/ als we doen	,

<div ng-app="app">
  <div ng-controller="ctrl">
  {{test}}
  </div>
</div>

app.controller("ctrl",function($scope,X){
  $scope.test=X
})

/ dan is "app" een van de modules	, en wordt $controllerProvider.register called,	  en wordt controllers (in closure scope van $controllerProvider.register) set	,
controllers.ctrl=ctor hierboven	,

/ als we 	,
<div ng-app="app2">
  <div ng-controller="ctrl">
  {{test}}
  </div>
</div>

/ dan wordt controllers.ctrl niet set	,

/ dan later in $controller=$ControllerProvider.$get()	, 

    return function(expression, locals) {
      var instance, match, constructor, identifier;

      if(isString(expression)) {
        match = expression.match(CNTRL_REG),
        constructor = match[1],
        identifier = match[3];
        expression = controllers.hasOwnProperty(constructor)
            ? controllers[constructor]
/ NEE        
expression=undefined,	
        assertArgFn(expression, constructor, true);
/ ERR

/ 13	.


/ Einde ANGULAR PROVIDERS

/ URL HASH SIGN HISTORY LOCATION


[eric@walnut location]$ pwd
/home/eric/Devel/Web/angularjs/location

/ 7	.

/ lees	,
http://diveintohtml5.info/history.html
/ of	,
https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history

[eric@walnut location]$ cat hashsign.html 

<!doctype html>
<html>
<body>
<img src="beautiful-pink-flowers.jpg">
<div id="first"><h1>First</h1></div>
<img src="beautiful-pink-flowers.jpg">
<div id="second"><h1>Second</h1></div>
<img src="flowers.jpg">
</body>
</html>

/Geef 
http://web/angularjs/location/hashsign.html
http://web/angularjs/location/hashsign.html#first
http://web/angularjs/location/hashsign.html#second

/ we zien dat bij #first de bovenkant browser	, 
<div id="first"><h1>First</h1></div>





/ 7	.

/ lees	,
https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history
https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history/Example

[eric@walnut location]$ git clone https://github.com/giabao/mdn-ajax-nav-example

/ Maar we doen eerst zelf	,

/ 13	.

$ vi foo.html

<h1>Foo</h1>
<script>
!function(){
}()

$ vi bar.html

<h1>Bar</h1>
<script>
!function(){
window.history.back()
}()

/ we openen nieuw tab pagina, een lege pagina, 
/ we geven	, 
http://web/angularjs/location/bar.html
/ hij gaat meteen terug naar de lege pagina 

/ als we foo.html geven, en daarna bar.html, valt hij terug op foo.html	,

/ 13	.

$ vi foo.html

<script>
!function(){
var stateObj={foo:"bar"}
window.history.pushState(stateObj,"page 2","bar.html")
}()
</script>

/ als we geven
http://web/angularjs/location/foo.html
/dan verschijnt in de browser de url	,
http://web/angularjs/location/bar.html
/ maar in de browser zien we nog steeds
Foo

/ 13	.

/ als we zijn op 
http://web/angularjs/location/foo.html
/ en we een nieuwe page geven, bijv
http://web/angularjs/location/bar.html
/ dan gaat window.history.length +1	,

/als we dezelfde page nogmaals geven, blijft window.history.length onveranderd	,

/ 7	. 

/ lees	,
http://diveintohtml5.info/history.html
http://diveintohtml5.info/examples/history/fer.html
http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html

/ 7	. 

/ bij 31 	,
http://web/angularjs/egghead.io/31/#/pizza
/ OK
http://web/angularjs/egghead.io/31/pizza
/ NOT FOUND

/ TODO

/ 7	.



/ 13	.

$ vi index.html

<div ng-app="app">
  <div ng-controller="ctrl">
    <ng-view></ng-view>
  </div>
</div>


$ vi script.js

app.config(function($routeProvider){
  $routeProvider.when("/:message",{
    template:"Hello, {{model.message}}",
    controller:"ctrl",
  })
  .when("/",{
    template:"Hello!",
    controller:"ctrl",
  })
})

app.controller("ctrl",function($scope,$routeParams){
    $scope.model={
      message:$routeParams.message
    }
})

/ de laatste entry	, 
  .when("/",{
/ is omdat je dan 
http://web/angularjs/egghead.io/32
http://web/angularjs/egghead.io/32/
http://web/angularjs/egghead.io/32/#
http://web/angularjs/egghead.io/32/#/
/ kunt geven	, hij maakt er van	,
http://web/angularjs/egghead.io/32/#/
/we zien
Hello!
/ als we deze entry NIET hebben, MOETEN we geven	, 
http://web/angularjs/egghead.io/32/#/
Hello!

http://web/angularjs/egghead.io/32/#/pizza
Hello, pizza
http://web/angularjs/egghead.io/32/#/pizza/eric
/ NIETS


/ 13	.

/ see ook	,
http://web/angularjs/DevGuide/reference/app/route.html

/ waar we moeten add	, dan pas doet hij het	,

 <script type="text/javascript">
    angular.element(document.getElementsByTagName('head')).append(angular.element('<base href="' + window.location.pathname + '" />'));
  </script>
 </head>

/ TODO

/ 13	.

/ ng-template	,

http://jsfiddle.net/carpasse/mcVfK/3/

/ TODO

/ 13	.

/ in 32_2	,

$ vi index.html

<div ng-app="app">
  <div ng-controller="ctrl">
    <ng-view></ng-view>
  </div>
</div>


$ vi script.js

var app=angular.module("app",["ngRoute"])

app.config(function($routeProvider,$locationProvider){
  $routeProvider.when("/map/:country/:state/:city",{
    template:"Hello, {{model.message}}",
    controller:"ctrl",
  })
  //$locationProvider.html5Mode(true)
})


app.controller("ctrl",function($scope,$routeParams){
    $scope.model={
      message:"The address is: " +$routeParams.country +"," +$routeParams.state +"," +$routeParams.city
    }
})

  //$locationProvider.html5Mode(true)
/ TODO

/ 7	.

/ video 33	,

/ 13	.

$ vi script.js

app.config(["$routeProvider",function($routeProvider){
  $routeProvider.when("/",{
      templateUrl:"app.html"  ,
      controller:"ctrl"
    }).when("/pizza",{
      redirectTo:function(){
        return "/"
      }
    }).otherwise({
      redirectTo:"/",
    })
}])
app.controller("ctrl",function($scope){
    $scope.model={
      message:"This is my app!!"
    }
})

/ als we 
http://web/angularjs/egghead.io/33
http://web/angularjs/egghead.io/33/#/pizza
/ dan komen we op 
http://web/angularjs/egghead.io/33/#/

/ 13	.

$ vi script.js

app.config(["$routeProvider",function($routeProvider){
  $routeProvider.when("/",{
      templateUrl:"app.html"  ,
      controller:"ctrl"
    }).when("/pizza/:crust/:toppings",{
      redirectTo:function(params,path,search){
        console.log(params)
        console.log(path)
        console.log(search)
        return "/"
      }
    }).otherwise({
      redirectTo:"/",
    })
}])

/geef	,
http://web/angularjs/egghead.io/33/#/pizza/deep/olives?delivery=now
/ het wordt	,
http://web/angularjs/egghead.io/33/#/
/ en we zien in de log	,
Object {crust: "deep", toppings: "olives"} script.js:11
/pizza/deep/olives script.js:12
Object {delivery: "now"} script.js:13

/en we zien met XHR loaded	,
This is my app!!
/ want we worden nog steeds redirect to "/", en die loads met XHR app.html	,

/ 13	.

$ vi script.js

app.config(["$routeProvider",function($routeProvider){
  $routeProvider.when("/",{
      templateUrl:"app.html"  ,
      controller:"ctrl"
    }).when("/pizza/:crust/:toppings",{
      redirectTo:function(params,path,search){
        console.log(params)
        console.log(path)
        console.log(search)
        return "/"+params.crust
      }
    }).when("/deep",{
      template:"Deep disk"
    }).otherwise({
      redirectTo:"/",
    })
}])

/ als we geven	,
http://web/angularjs/egghead.io/33/#/pizza/deep/olives?delivery=now
/ dan wordt het	,
http://web/angularjs/egghead.io/33/#/pizza/deep
/ en we zien 
Deep disk


/ Einde URL HASH SIGN HISTORY LOCATION

/ ANGULAR TRANSCLUDE

/ lees	,
http://engineering.nulogy.com/posts/transclusion-in-angular/
/ voor transclude:"element"	,



/ video 21

/ we hebben ook 21_2/ 	, voor debug, een korte versie 	, 

$ pwd
21_1

<div ng-app="app">
    <foo>
      <input type="text" ng-model="data.message">
      <h1>{{data.message}}</h1>
    </foo>
</div>

var app=angular.module("app",[])

app.directive("foo",function(){
  return{
    restrict: "E",
    transclude:true,
    template:"<div class=\"label\" >Template, no ng-transclude dir</div>"
      +"<br>"
      +"<div class=\"label\" ng-transclude>Template, has ng-transclude</div>"
  }
})

/we zien	,

Template, no ng-transclude dir
Original HTML


//////////////////////
/ we zien altijd het template in <foo >	, 
/ maar in het template heeft de 2de div ng-transclude dir, dus dan worden al zijn children vervangen door de oorspronkelijke children van <foo >	,


/we zien in HTML	,

Template, no ng-transclude dir
Original HTML



/ 13	.

/ Debug	,

/ compile fase	,


/ apply foo dir to <foo > node	,
dir={
    restrict: "E",
    transclude:true,
    template:"<div class=\"label\" >This is a panel component</div>"
      +"<div class=\"label\" ng-transclude></div>"
}

/ er onstaat in de instanceCache een entry, key="fooDirective"	,

/ in applyDirectivesToNode, 

//////////////////////////////////////////////////////////////////////////
/ het template, het originele children van het elem met de dir wordt compile, rm van de elem, en de dir's template wordt de nieuwe child	, 

/ applyDirectivesToNode op de <foo> node , met de foo directive, doet	,

        if (directiveValue = directive.transclude) {
           } else {
            $template = jqLite(jqLiteClone(compileNode)).contents();
            $compileNode.empty(); // clear contents
            childTranscludeFn = compile($template, transcludeFn);
/ $template = ORIGINELE children van de node, <foo>	,
/ Dit komt straks in de foo dir's template	, nl als child van een elem waar ng-transclude een dir is	, 

/ dit was case transclude:true, dus maak compiled template en rm uit DOM	,

        if (directive.template) {
/ NIEUWE template	, foo directive's template	,
/ children van node, <foo>	,
         directiveValue = ... : directive.template;
          } else {
            $compileNode.html(directiveValue);
  

//////////////////////////////////////////////////////////////////////////

        if (directiveValue = directive.transclude) {

///////////////////////////////
/ transclude:true in de fooDirective op de <foo > elem	: het template, de oorspronkelijke children van <foo > worden compile , en later als de transclude-scope bekend, worden de link fct called	(als er zijn)	, 
/ in de foo dir's template is er <div ng-transclude>, deze ng-transclude dir heeft link fct die children van de div vervangt door de compile hierboven	,
/////////////////

          hasTranscludeDirective = true;

          } else {
            $template = jqLite(jqLiteClone(compileNode)).contents();
/ jqLite elems of original DOM children	,  is dus het OUDE template	,
<div class="label">Original HTML</div>

            $compileNode.empty(); // clear contents
/ rm childNodes, dus de text, div, text 
/ inderdaad	, in browser is verdwenen "Original HTML"

/ maar in $template zijn (copies) saved	,  en worden nu compile	,

/ we gaan dus de originele children van <foo > compile	(1ste stap), want later wordt pas de transclude-scope create TODO 

            childTranscludeFn = compile($template, transcludeFn);
transcludeFn: undefined
/ = publicLinkFn	, vrijwel altijd wordt er meteen (scope) als arg gegeven: 2 staps raket	, nu niet	, later called in (TODO)

/ we gaan verder in applyDirectivesToNode	, node=<foo > , dir =fooDirective	,

        if (directive.template) {
          templateDirective = directive;

         directiveValue = ...: directive.template;
"<div class="label" >Template, no ng-transclude dir</div><br><div class="label" ng-transclude>Template, has no-transclude</div>"

          } else {
            $compileNode.html(directiveValue);

///////////////
/ Hij vervangt eerst z'n eigen children door het foo dir's template	,dat meteen DOM elems worden (WH met JS .createNode )	,

/ we zien nu inderdaad	,
Template, no ng-transclude dir
Template, has no ng-transclude

/ er zijn geen link fcts	,

      nodeLinkFn.transclude = hasTranscludeDirective && childTranscludeFn;
/ van node <foo >, 	
/ = compiled original HTML, "Original HTML", =publicLinkFn

/ Klaar met apply fooDirective to <foo >	,

/t in compileNodes, 
/ we hebben applyDirectivesToNode op <foo > , dir was foo	,

/ <foo > heeft net nieuwe children	, div, br, div, uit foo dir's template	,

       childLinkFn =... : compileNodes(nodeList[i].childNodes, nodeLinkFn ? nodeLinkFn.transclude : transcludeFn);

/ we komen in compileNodes	,

/ de laatste div heeft dir ng-transclude	,

/ we zien	,
var ngTranscludeDirective = ngDirective({
  controller: ['$element', '$transclude', function($element, $transclude) {
   this.$transclude = $transclude;
  }],
  link: function($scope, $element, $attrs, controller) {
    controller.$transclude(function(clone) {
      $element.empty();
      $element.append(clone);
    });
  }
});
function ngDirective(directive) {
  if (isFunction(directive)) {
    directive = {
      link: directive
    };
  }
  directive.restrict = directive.restrict || 'AC';
  return valueFn(directive);
}

/ dan applyDirectivesToNode	, op de 2de div uit template met ng-transclude dir	,
        if (!directive.templateUrl && directive.controller) {
/ JA
          controllerDirectives[directiveName] = directive;

        if (directiveValue = directive.transclude) {
/ NEE

            linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
/ =function($scope, $element, $attrs, controller) {
    controller.$transclude(function(clone) {
      $element.empty();
      $element.append(clone);
    });
  }
	              addLinkFns(null, linkFn, attrStart, attrEnd);
/ to deze node	,

      nodeLinkFn.transclude = hasTranscludeDirective && childTranscludeFn;
false

/ 7	.

/ link fase	,
/ <div ng-translude> is gewoon in de DOM, 
/ de link fct van de <div ng-transclude> zegt tegen de ctrl: ga transclude, we komen in boundTranscludeFn die een nieuwe scope maakt (die niet wordt used)	, en calls publicLinkFn=compiled original template 	, die calls eerst cloneConnectF=callback van ctrl, die  <div ng-transclude> vindt in z'n closure (=link fct van <div ng-transclude) scope als parent van original template	, en calls daarna (als er is) compositeLinkFn	,


/ we waren in	,
        scope.$apply(function() {
          element.data('$injector', injector);
->          compile(element)(scope);
/ de stap , (scope)
/ scope=root scope	,

/ we komen in	,

    function compile($compileNodes, ... )
      return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
/ Dus publicLinkFn vindt de $compileNodes in z'n closure scope	,

/ Intermezzo

/ see closure als class, en z'n args en locals als class members	, en de inner fct als class method	,

/ Einde Intermezzo

/ vervolgens worden scope, $linkNode steeds meegegeven	,

        if (compositeLinkFn) compositeLinkFn(scope, $linkNode, $linkNode);
/ $linkNode=<div ng-app>
/ scope=root scope	,
/c
            childLinkFn(scope, node.childNodes, undefined, boundTranscludeFn);
/ node.childNodes=foo
/c
              nodeLinkFn(childLinkFn, childScope, node, $rootElement, createBoundTranscludeFn(scope, childTranscludeFn || transcludeFn)
/c
        childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn);
/ linkNode.childNodes=<div ng-transclude>
/c
              nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);
/c
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);
/ link.require="ngTransclude"
/c
  link: function($scope, $element, $attrs, controller) {
->    controller.$transclude(function(clone) {
/ $scope=root scope,
/ $element=<div ng-transclude>

/ Deze zijn in de closure scope van de ...

/c
        function controllersBoundTransclude(scope, cloneAttachFn) {
          return boundTranscludeFn(scope, cloneAttachFn, transcludeControllers);
/ gebeurt niets, gewoon doorgeven	,
/c
    function createBoundTranscludeFn(scope, transcludeFn) {
      return function boundTranscludeFn(transcludedScope, cloneFn, controllers) {
->      if (!transcludedScope) {
          transcludedScope = scope.$new();
          transcludedScope.$$transcluded = true;
          scopeCreated = true;
        }
        var clone = transcludeFn(transcludedScope, cloneFn, controllers);

/ boundTranscludeFn vindt scope=root scope, transcludeFn=publicLinkFn=compiled original template,

/c
    function compile($compileNodes,...) 
     return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
    var $linkNode = cloneConnectFn ? JQLitePrototype.clone.call($compileNodes) 

/ publicLinkFn vindt $compileNodes in z'n closure scope	,

        if (cloneConnectFn) cloneConnectFn($linkNode, scope);
/c
  link: function($scope, $element, $attrs, controller) {
    controller.$transclude(function(clone) {
  ->    $element.empty();
      $element.append(clone);
    });
  }
/ $element wordt gevonden in closure scope	, =<div ng-transclude>	,

 
/ Einde ANGULAR TRANSCLUDE

/ ANGULAR TRANSCLUDE


/ lees	,
http://engineering.nulogy.com/posts/transclusion-in-angular/
/ voor transclude:"element"	,

[eric@walnut element]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/nulogy/element

[eric@walnut 21_3]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/21_3

/////////////////////////////////////////////
/ als we transclude:"element", moeten we ook replace:true	,

$ vi index.html

<div ng-app="app">
    <foo>
      <div>user template</div>
    </foo>
</div>

$ vi script.js

app.directive("foo",function(){
  return{
    restrict: "E",
   	replace:true,
    transclude:"element",
    template:"<div ng-transclude style=\"color:red\">our template</div>"

  }
})

<div ng-app="app" class="ng-scope">
		<div ng-transclude="" style="color:red;color:red">
			<foo class="ng-scope">
				<div>user template</div>
			</foo>
	</div>
</div>

/ CASES TRANSCLUDE

/ 13	.

replace:true,
transclude:"element",

<div ng-app="app" class="ng-scope">
		<div ng-transclude="" style="color:red;color:red">
			<foo class="ng-scope">
				<div>user template</div>
			</foo></div>
</div>

/ replace:true : het comment <!-- foo: undefined --> wordt vervangen door our templaate		<div ng-transclude="" style="color:red;color:red">

/ 13

replace:false,
transclude:"element",

<div ng-app="app" class="ng-scope">
	<!-- foo: undefined --> 
</div>

/ 13	.

replace:true,
transclude:true,

/ true	, replace
<div ng-app="app" class="ng-scope">
		<div ng-transclude="" style="color:red;color:red">	
			<div class="ng-scope">user template</div>
		</div>
</div>

/ 13	.

replace:false,
transclude:true,

<div ng-app="app" class="ng-scope">
		<foo>
			<div ng-transclude="" style="color:red">				
				<div class="ng-scope">user template</div>			
			</div>
		</foo>
</div>

/ 13	.

replace:true,
transclude:"element",

<div ng-app="app" class="ng-scope">
		<div ng-transclude="" style="color:red;color:red">
			<foo class="ng-scope">
				<div>user template</div>
		</foo>
	</div>
</div>


/ Einde ANGULAR TRANSCLUDE

/ DEBUG ANGULAR PROMISE

/ 35_promise	,

<div ng-app="app">
  Hello, {{v}}
</div>

app.run(function($rootScope,$q,$timeout){
  var val=$q.defer()
  val.promise.then(function(v){
    $rootScope.v=v
  })
  $timeout(function(){
  val.resolve("foo")
  },10000)
})

/ we zien voor de 10 sec	, 
Hello,
/ we zien dus NIET	,
Hello, {{v}}
/ TODO
/ Na 10 sec zien we 
Hello, foo

/ 7	.

/ we rm de $timeout	,

app.run(function($rootScope,$q){
  var val=$q.defer()
  val.promise.then(function(v){
    $rootScope.v=v
  })
  val.resolve("foo")
})

/ OK

/ 7	.

/ we maken  een button erbij	,

<div ng-app="app">
  Hello, {{v}}
  <input type="button" value="call f" ng-click="f()">
</div>

app.run(function($rootScope,$q){
  var val=$q.defer()
  val.promise.then(function(v){
    $rootScope.v=v
  })
  val.resolve("foo")

  $rootScope.f=function(){
    var val2=$q.defer()
    val2.promise.then(function(v){
      $rootScope.v=v
    })
    val2.resolve("baz")
  }
})

/OK 
/ we zien eerst
Hello, foo [call f]
/ als we click dan zien we	, 
Hello, baz [call f]

/ als we click	, komen we toch in $rootScope.$apply	, want	,

function createEventHandler(element, events) {
  var eventHandler = function (event, type) {
    forEach(events[type || event.type], function(fn) {
      fn.call(element, event);
    });
/c
var ngEventDirectives = {};
forEach(
  'click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste'.split(' '),
  function(name) {
    var directiveName = directiveNormalize('ng-' + name);
    ngEventDirectives[directiveName] = ['$parse', function($parse) {
      return {
        compile: function($element, attr) {
          var fn = $parse(attr[directiveName]);
          return function(scope, element, attr) {
            element.on(lowercase(name), function(event) {
->            scope.$apply(function() {
-->                fn(scope, {$event:event});
              });
            });
          };
        }
      };
    }];
  }
);
/ eerst in ->, dan in -->	,
/c
	$rootScope.f=function(){
->		var val2=$q.defer()

/ 13	.

/ als we zelf	,

$rootScope.f=function(){
  $rootScope.$apply(function(){ 
    var val2=$q.defer()
    val2.promise.then(function(v){
      $rootScope.v=v
    })
    val2.resolve("baz") 
  })
}
/ dan ERR: $apply is already in progress	,


/ Einde DEBUG ANGULAR PROMISE

/ ANGULAR HTTP NODEJS

/ TODO

/ Kijk naar	,
https://egghead.io/lessons/angularjs-http

[eric@walnut 35_http_nodejs]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/35_http_nodejs

/ we zien een server in node.js, 
/ in ANGULAR HTTP PHP maken we de server in php	,

[eric@walnut egghead.io]$ cp -a /home/eric/Devel/Node.js/Express/self 35_http_nodejs

$ vi app2.js

var express=require("express")
var app=express()
app.get("/users",function(req,res){
  res.send({hello:"world"})
})
app.set("port",3000)

var http=require("http")
var server=http.createServer(app).listen(app.get("port"),function(){
  console.log("Listening on port %d",app.get("port"))
})

[eric@walnut 35_http_server]$ node app2.js 
Listening on port 3000

[eric@walnut egghead.io]$ curl -i localhost:3000/users
HTTP/1.1 200 OK
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Content-Length: 22
ETag: "2137388019"
Date: Sun, 06 Apr 2014 19:16:32 GMT
Connection: keep-alive

{
  "hello": "world"
}

/ OK

/ Maar ook 	,

$ vi app.js

var express=require("express")
var app=express()
app.get("/users",function(req,res){
  res.send({hello:"world"})
})
app.set("port",3000)
var server=app.listen(app.get("port"),function(){
  console.log("Listening on port %d",app.get("port"))
})

/ OK	,

$ vi index.html

<div ng-app="app">
</div>

$ vi script.js

app.run(function($rootScope,$http){
  $http.get("http://localhost:3000/users").then(function(val){
    console.log(val.data)
  })
})

///////////////////////////////////////
/ Dit is een XHR request!

/ geef in chrome	,
http://web/angularjs/egghead.io/35_http_nodejs/

XMLHttpRequest cannot load http://localhost:3000/users. No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'http://web' is therefore not allowed access. 

/ we moeten in chrome geven	,
http://localhost:3000/users

/ je komt nu inderdaad van http://web, en gaat naar http://localhost	,

/ Intermezzo

/ cors	,

[eric@walnut 35_http_server]$  npm install cors --save
[eric@walnut 35_http_server]$ vi package.json 
{
  "name": "self",
  "version": "0.0.0",
  "description": "hello world 2 test app",
  "dependencies": {
    "express": "3.x",
    "cors": "^2.2.0"
  }
}

/ Later	, 
http://stackoverflow.com/questions/7067966/how-to-allow-cors-in-express-nodejs
http://stackoverflow.com/questions/20035101/no-access-control-allow-origin-header-is-present-on-the-requested-resource-w

/ Einde Intermezzo


/ Einde ANGULAR HTTP NODEJS 

/ ANGULAR HTTP PHP 

/ Kijk naar	,
https://egghead.io/lessons/angularjs-http

[eric@walnut 35_http_php]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/35_http_php

$ vi users.php

<?php
$a=array("hello"=>"world");
echo json_encode($a);
?>

[eric@walnut 35_http_php]$ vi script.js 

app.run(function($rootScope,$http){
  $http.get("users.php").then(function(val){
    console.log(val.data)
  })
})

///////////////////////////////////////
/ Dit is een XHR request!

$ vi index.html

<div ng-app="app">
</div>

/ Geef 	,
http://web/angularjs/egghead.io/35_http_php/

/ we zien in console	,
XHR finished loading: "http://web/angularjs/egghead.io/35_http_php/users.php". angular.js:7926
Object {hello: "world"} script.js:7

/ Einde ANGULAR HTTP PHP 

/ NODE.JS 

/ kijk	,
https://www.youtube.com/watch?v=jo_B4LTHi3I

/ 7	.

[eric@walnut video]$ pwd
/home/eric/Devel/Node.js/video
[eric@walnut video]$ vi web-server.js 

var http=require("http")
var s=http.createServer(function(req,res){
  console.log("ericj")
  res.writeHead(200,{"content-type":"text/plain"})
  res.write("hello\n")
  setTimeout(function(){
    res.end("world\n")
  },2000)
})
s.listen(8000)

/ de console.log verschijnt aan de server kant	,

[eric@walnut video]$ curl -i http://localhost:8000
HTTP/1.1 200 OK
content-type: text/plain
Date: Sun, 06 Apr 2014 11:59:49 GMT
Connection: keep-alive
Transfer-Encoding: chunked

hello
/ na 2 sec:
world

[eric@walnut video]$ ab -n 100 -c 100 http://127.0.0.1:8000/
/ we MOETEN eindigen op /	,
/ localhost werkt NIET	,

/ 7	.

$ cat tcp-server.js

var net =require("net")
var server=net.createServer(function(sock){
  sock.write("hello\n")
  sock.end("world\n")

})
server.listen(8000)

[eric@walnut video]$ node tcp-server.js 

[eric@walnut video]$ telnet localhost 8000
Trying ::1...
telnet: connect to address ::1: Connection refused
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
hello
world
Connection closed by foreign host.

[eric@walnut video]$ nc 127.0.0.1 8000
hello
world
/ Blijft open	,
/ TODO

/ $ nc localhost werkt NIET 
/ TODO

/ 7	.

$ cat tcp-server-2.js

var net =require("net")
var server=net.createServer(function(sock){
console.log("ericj")
  sock.write("hello\n")
  sock.write("world\n")

  sock.on("data",function(data){
    sock.write(data)
  })
})
server.listen(8000)

/ sock.on("data",...)	, daar MOET "data" staan	,

[eric@walnut video]$ node tcp-server-2.js 

[eric@walnut video]$ nc 127.0.0.1 8000
hello
world
eric j
eric j

/ 7	.

$ cat chat.js

var net = require("net")
var socks=[]
var srv=net.Server(function(sock){
  socks.push(sock)
  sock.on("data",function(d){
    for(var i=0;i<socks.length;i++){
      if(socks[i]==sock)continue
      socks[i].write(d)
    }
  })
  sock.on("end",function(){
    var i=socks.indexOf(sock)
    socks.splice(i,1)
  })
})
srv.listen(8000)

[eric@walnut video]$ node chat.js 

[eric@walnut video]$ nc 127.0.0.1 8000
ericj
saskia

[eric@walnut video]$ nc 127.0.0.1 8000
ericj
saskia

/ 7	.

/ debug	,

$ cat hello-world-2.js

setTimeout(function(){
  console.log("world")
},2000)
console.log("hello")

var foo=function(){
  debugger
  console.log("eric")
}
foo()

[eric@walnut video]$ node hello-world-2.js 
hello
eric
world

[eric@walnut video]$ node debug hello-world-2.js 
/ hij valt op 1ste regel	, geef meteen	,
debug> c
< hello
break in hello-world-2.js:7
  5 
  6 var foo=function(){
> 7 	debugger
  8  	console.log("eric")	
  9 }

/ Einde NODE.JS

/ EXPRESS REST 

/ Lees	,
http://expressjs.com/guide.html

/ 7	.

/ als we express use	, dan moeten we NIET	,
var server=http.createServer(app).listen(3000,function(){
  console.log("Listening on port %d",server.address().port)
})
/ want dat is WH al	, we hoeven alleen	,
app.listen(3000)


/ 7	.

/ Met de hand	,

[eric@walnut self]$ pwd
/home/eric/Devel/Node.js/Express/self

$ npm init
/ maakt package.json

[eric@walnut self]$ npm info express version
3.5.1

/ maar in package.json kunnen we 3.x , hij download 3.5.1	,

[eric@walnut self]$ cat package.json 
{
  "name": "self",
  "version": "0.0.0",
  "description": "hello world 2 test app",
  "dependencies":{
    "express":"3.x"
  }
}

[eric@walnut self]$ npm install
express@3.5.1 node_modules/express
├── methods@0.1.0
├── merge-descriptors@0.0.2
├── debug@0.8.0
├── cookie-signature@1.0.3
├── fresh@0.2.2
├── range-parser@1.0.0
├── buffer-crc32@0.2.1
├── cookie@0.1.1
├── mkdirp@0.3.5
├── commander@1.3.2 (keypress@0.1.0)
├── send@0.2.0 (mime@1.2.11)
└── connect@2.14.1 (response-time@1.0.0, connect-timeout@1.0.0, method-override@1.0.0, vhost@1.0.0, static-favicon@1.0.0, pause@0.0.1, basic-auth-connect@1.0.0, serve-static@1.0.2, morgan@1.0.0, bytes@0.2.1, qs@0.6.6, raw-body@1.1.3, errorhandler@1.0.0, cookie-parser@1.0.1, express-session@1.0.2, csurf@1.0.0, serve-index@1.0.1, compression@1.0.0, multiparty@2.2.0)

/ we maken eerst app met de hand	,

$ vi app.js

var express=require("express")
var app=express()
app.get("/hello.txt",function(req,res){
  res.send("Hello world\n")
})
var server=app.listen(3000,function(){
  console.log("Listening on port %d",server.address().port)
})
/ TODO

[eric@walnut self]$ node app.js 
Listening on port 3000

Hello world[eric@walnut self]$ curl -i http://localhost:3000/hello.txt
HTTP/1.1 200 OK
X-Powered-By: Express
Content-Type: text/html; charset=utf-8
Content-Length: 12
ETag: "-1220943659"
Date: Sun, 06 Apr 2014 14:04:08 GMT
Connection: keep-alive

Hello world

/ 13	.	

/ we kunnen ook	,

$ vi app.js

var express=require("express")
var app=express()
app.get("/hello.txt",function(req,res){
  res.send("Hello world\n")
})
var http=require("http")
var server=http.createServer(app).listen(3000,function(){
  console.log("Listening on port %d",server.address().port)
})
/ TODO

/ 7	.

/ lees	,
http://expressjs.com/3xapi.html#app.use

/ 13	,

/ .use is onafh van get/post/delete/put	, en het path is mount point	, dus is het begin van de url	, dat past of niet	,
/ .get is routing, is precies	,

/ als we app.use willen use voor posts	, moeten we	,
app.use(express.bodyParser())
/ anders krijgen we aan de server kant	,
Cannot POST /
/ TODO


app.use("/",function(req,res,next){
  console.log("%s %s", req.method,req.url)
  next()
})
app.use("/",function(req,res){
  res.send("use\n")
})
app.get("/",function(req,res){
  res.send("get\n")
})

[eric@walnut self]$ node app3.js 
GET /
GET /saskia
GET /ericj

[eric@walnut node-todo]$  curl http://localhost:3000
use
[eric@walnut node-todo]$  curl http://localhost:3000/saskia
use
[eric@walnut node-todo]$  curl http://localhost:3000/ericj
use

/ 13	, 

/ we hebben	,
[eric@walnut self]$ touch public/style.css
[eric@walnut self]$ cat bower.json 
{
	"name": "nagular",
	"version": "1.0.0",
	"dependencies": {
		"jquery": "latest"
	}
}
$ bower install geeft een dist	,
/ TODO

/ 13	.


app.use("/",function(req,res,next){
  console.log("%s %s", req.method,req.url)
  next()
})
app.get("/",function(req,res){
  res.send("get\n")
})
app.use("/",function(req,res,next){
  res.send("use\n")
})

/ de truc zit hem in next	, hij gaat dan ook app.get proberen	,
/ TODO

/ de andere app.use kunnen we geen next geven	,  want dan ERR	,
Error: Can't set headers after they are sent.
    at ServerResponse.OutgoingMessage.setHeader (_http_outgoing.js:331:11)
    at ServerResponse.res.setHeader (/home/eric/Devel/Node.js/Express/self/node_modules/express/node_modules/connect/lib/patch.js:63:22)
    at next (/home/eric/Devel/Node.js/Express/self/node_modules/express/node_modules/connect/lib/proto.js:156:13)
    at Object.handle (/home/eric/Devel/Node.js/Express/self/app3.js:9:2)
    at next (/home/eric/Devel/Node.js/Express/self/node_modules/express/node_modules/connect/lib/proto.js:193:15)
    at Object.handle (/home/eric/Devel/Node.js/Express/self/app3.js:5:2)
    at next (/home/eric/Devel/Node.js/Express/self/node_modules/express/node_modules/connect/lib/proto.js:193:15)
    at Object.expressInit [as handle] (/home/eric/Devel/Node.js/Express/self/node_modules/express/lib/middleware.js:30:5)
    at next (/home/eric/Devel/Node.js/Express/self/node_modules/express/node_modules/connect/lib/proto.js:193:15)
    at Object.query [as handle] (/home/eric/Devel/Node.js/Express/self/node_modules/express/node_modules/connect/lib/middleware/query.js:45:5)
/ TODO

/ 13	.

app.use(express.static(__dirname+"/public"))
app.get("/",function(req,res){
  res.send("get\n")
})

/ zonder app.use	,
[eric@walnut node-todo]$  curl http://localhost:3000/style.css
Cannot GET /style.css
/ met app.use	,
[eric@walnut node-todo]$  curl http://localhost:3000/style.css
[eric@walnut node-todo]$  
/ Niets dus	,
/ TODO

/ 13	.

/ we hoeven zelf geen log fct te program	,

/*
app.use("/",function(req,res,next){
  console.log("%s %s", req.method,req.url)
  next()
})
*/
app.use(express.logger())
// of	,
app.use(express.logger("dev"))

/ we zien aan de server 	,
[eric@walnut self]$ node app3.js 
127.0.0.1 - - [Wed, 09 Apr 2014 19:55:53 GMT] "GET / HTTP/1.1" 200 4 "-" "curl/7.27.0"
/ of	,
GET / 200 7ms - 4b

/ 13	,

app.use(express.logger("dev"))
app.use(express.static(__dirname+"/public"))
app.get("/",function(req,res){
  res.send("get\n")
})
app.post("/",function(req,res){
  res.send("post\n")
})

app.use("/ericj",function(req,res){
  res.send("use\n")
})
app.listen(3000)

[eric@walnut mongoose]$ curl -X POST -d "name:ericj&age:51" http://localhost:3000 
post
[eric@walnut mongoose]$ curl -X POST -d "name:ericj&age:51" http://localhost:3000/ericj
use
[eric@walnut mongoose]$ curl -X POST -d "name:ericj&age:51" http://localhost:3000/saskia
Cannot POST /saskia

/ 13	,

app.use("/",function(req,res){
  res.send("use\n")
})
app.get("/",function(req,res){
  res.send("get\n")
})
app.post("/ericj",function(req,res){
  res.send("post\n")
})

[eric@walnut mongoose]$ curl -X POST -d "name:ericj&age:51" http://localhost:3000/ericj
use
/ hij pakt WH de 1ste die hij kan pakken	,
[eric@walnut mongoose]$ curl -X POST -d "name:ericj&age:51" http://localhost:3000/saskia
use
[eric@walnut mongoose]$ curl -X POST -d "name:ericj&age:51" http://localhost:3000
use

/////////////////////////////
/ REST

[eric@walnut self]$ pwd
/home/eric/Devel/Node.js/Express/self

/ see app4.js

$ node app4

/ 13	.

/ get	,

/ Lees	,
http://expressjs.com/3x/api.html
http://stackoverflow.com/questions/5710358/how-to-get-post-query-in-express-node-js

app.get("/user/:id/:gender",function(req,res){
  debugger
  res.send("get, "+"\n"+ 
    "params: "+req.params.id+", "+req.params.gender+"\n"+
    "query: "+req.query.length+", "+req.query.shoe.color+"\n"+
    "param: "+req.param("id")+", "+req.param("shoe").color+"\n"
  )
})

[eric@walnut ]$ curl -g "http://localhost:3000/user/ericj/male?length=176&shoe[color]=blue"
get, 
params: ericj, male
query: 176, blue
param: ericj, blue
[eric@walnut ]$ curl "http://localhost:3000/user/ericj/male?length=176&shoe%5Bcolor%5D=blue"
get, 
params: ericj, male
query: 176, blue
param: ericj, blue

/ als we [] use in de url, geef dan aan curl -g	, anders url encode met %5B, %5D	,

The default is application/x-www-form-urlencoded.
/ wij doen -H "content-type:application/json"

/ 13	,

/ post	,

app.use(express.json())
app.use(express.urlencoded())
app.post("/user/:id/:gender",function(req,res){
  debugger
  res.send("post, "+"\n"+
    "params: "+req.params.id+", "+req.params.gender+"\n"
    +"body: "+req.body.len+", "+req.body.shoe.color+"\n"
    +"param: "+req.param("id")+", "+req.param("shoe").color+"\n"
  )
})

[eric@walnut mongoose]$ curl  -d "len=176&shoe[color]=blue"  "http://localhost:3000/user/ericj/male"
post, 
params: ericj, male
body: 176, blue
param: ericj, blue


[eric@walnut mongoose]$ curl  -d '{"len":176,"shoe":{"color":"blue"}}' -H "content-type:application/json" "http://localhost:3000/user/ericj/male"
post, 
params: ericj, male
body: 176, blue
param: ericj, blue

/ 13	.

/ put	, delete

/ lees	,
http://stackoverflow.com/questions/8378338/what-does-connect-js-methodoverride-do

/ use in server	,
app.use(express.methodOverride()) 										// !
/ en in curl	, "_method":"put"	,

var express=require("express")
var app=express()
app.use(express.json())
app.use(express.urlencoded())
app.use(express.logger())
app.use(express.static(__dirname+"/public"))
app.use(express.methodOverride()) 										// !

app.put("/user/:id/:gender",function(req,res){
  debugger
  res.send("put, "+"\n"+
    "params: "+req.params.id+", "+req.params.gender+"\n"
    +"body: "+req.body.len+", "+req.body.shoe.color+"\n"
    +"param: "+req.param("id")+", "+req.param("shoe").color+"\n"
  )
})
app.delete("/user/:id/:gender",function(req,res){
  debugger
  res.send("delete, "+"\n"+
    "params: "+req.params.id+", "+req.params.gender+"\n"
    +"body: "+req.body.len+", "+req.body.shoe.color+"\n"
    +"param: "+req.param("id")+", "+req.param("shoe").color+"\n"
  )
})


[eric@walnut ]$ curl  -d '{"len":176,"shoe":{"color":"blue"},"_method":"put"}' -H "content-type:application/json" "http://localhost:3000/user/ericj/male"
put, 
params: ericj, male
body: 176, blue
param: ericj, blue

param: ericj, blue
[eric@walnut mongoose]$ curl  -d '{"len":176,"shoe":{"color":"blue"},"_method":"delete"}' -H "content-type:application/json" "http://localhost:3000/user/ericj/male"
delete, 
params: ericj, male
body: 176, blue
param: ericj, blue

[eric@walnut mongoose]$ curl  -d "len:176&shoe[color]=blue&_method=delete" -H "content-type:application/x-www-form-urlencoded" "http://localhost:3000/user/ericj/male"
delete, 
params: ericj, male
body: undefined, blue
param: ericj, blue

/ 13	.

app.use(express.static(__dirname+"/public"))

/ we hebben geen app.get("/",...) nodig of zoiets	,

[eric@walnut mongoose]$   curl http://localhost:3000
Cannot GET /
[eric@walnut mongoose]$   curl http://localhost:3000/style.css
body{
	color:#ccc
}

app.use("/bower_components",express.static(__dirname+"/bower_components"))

/ we doen dan in js	,
<script src="/bower_components/jquery/dist/jquery.js"></script>
/ of	,
<script src="bower_components/jquery/dist/jquery.js"></script>

/ we kunnen ook	,
app.use(express.static(__dirname+"/bower_components"))

/ we doen dan in js	,
<script src="/jquery/dist/jquery.js"></script>
/ of	,
<script src="jquery/dist/jquery.js"></script>

/ Einde  REST
///////////////////////////////

/ 7	. 

/ als we achter de rest app.get	,

app.get("*",function(req,res){
  res.sendfile("./public/index.html")
})

/ dan krijgen we bij iedere andere url zoals user/ericj/male  index.html terug	,

[eric@walnut self]$ curl -g  "http://localhost:3000/user/ericj?length=176&shoe[color]=blue"
<!doctype html>
<html>
<body>
<h1>Foo</h1>
</body>
</html>

 

/ Einde EXPRESS REST 

/ EXPRESS REST JQUERY


[eric@walnut self]$ pwd
/home/eric/Devel/Node.js/Express/self

/ app4.js en index.html

$ bower install jquery

[eric@walnut self]$ vi app4.js 
...
app.use("/bower_components",express.static(__dirname+"/bower_components"))
...

$ node app4

$ vi public/index.html


<!doctype html>
<html>
<body>
<form id="get_urlenc">
	<input value="ericj" id="name" type="text">
	<input value="male" id="gender" type="text">
	<input value="get_urlenc" type="submit">
</form>
<form id="get_json">
	<input value="ericj" id="name" type="text">
	<input value="male" id="gender" type="text">
	<input value="get_json" type="submit">
</form>
<form id="post_urlenc">
	<input value="ericj" id="name" type="text">
	<input value="male" id="gender" type="text">
	<input value="post_urlenc" type="submit">
</form>
<form id="post_json">
	<input value="ericj" id="name" type="text">
	<input value="male" id="gender" type="text">
	<input value="post_json" type="submit">
</form>
<form id="put_urlenc">
	<input value="ericj" id="name" type="text">
	<input value="male" id="gender" type="text">
	<input value="put_urlenc" type="submit">
</form>
<form id="put_json">
	<input value="ericj" id="name" type="text">
	<input value="male" id="gender" type="text">
	<input value="put_json" type="submit">
</form>
<form id="delete_urlenc">
	<input value="ericj" id="name" type="text">
	<input value="male" id="gender" type="text">
	<input value="delete_urlenc" type="submit">
</form>
<form id="delete_json">
	<input value="ericj" id="name" type="text">
	<input value="male" id="gender" type="text">
	<input value="delete_json" type="submit">
</form>
<div id="result">
</div>
<script src="/bower_components/jquery/dist/jquery.js"></script>
<script>
$("#get_urlenc").submit(function(event){
	event.preventDefault()
	var name=$("#get_urlenc #name").val()
	var gender=$("#get_urlenc #gender").val()
	var val=$.ajax({
		url:"/user/"+name+"/"+gender,
		type:"get",
		data:{length:176,shoe:{color:"blue"}},
		contentType:"application/x-www-form-urlencoded",
	}).done(function(data){
		$("#result").append(data)
		$("#result").append("<br>")
	})
})
$("#get_json").submit(function(event){
	event.preventDefault()
	var name=$("#get_json #name").val()
	var gender=$("#get_json #gender").val()
	var val=$.ajax({
		url:"/user/"+name+"/"+gender,
		type:"get",
		data:{length:176,shoe:{color:"blue"}},
		contentType:"application/json",
	}).done(function(data){
		$("#result").append(data)
		$("#result").append("<br>")
	})
})
$("#post_urlenc").submit(function(event){
	event.preventDefault()
	var name=$("#post_urlenc #name").val()
	var gender=$("#post_urlenc #gender").val()
	var val=$.ajax({
		url:"/user/"+name+"/"+gender,
		type:"post",
		data:{length:176,shoe:{color:"blue"}},
		contentType:"application/x-www-form-urlencoded",
	}).done(function(data){
		$("#result").append(data)
		$("#result").append("<br>")
	})
})
$("#post_json").submit(function(event){
	event.preventDefault()
	var name=$("#post_json #name").val()
	var gender=$("#post_json #gender").val()
	var val=$.ajax({
		url:"/user/"+name+"/"+gender,
		type:"post",
		data:JSON.stringify({length:176,shoe:{color:"blue"}}),
		contentType:"application/json",
	}).done(function(data){
		$("#result").append(data)
		$("#result").append("<br>")
	})
})
$("#put_urlenc").submit(function(event){
	event.preventDefault()
	var name=$("#put_urlenc #name").val()
	var gender=$("#put_urlenc #gender").val()
	var val=$.ajax({
		url:"/user/"+name+"/"+gender,
		type:"put",
		data:{_method:"put",length:176,shoe:{color:"blue"}},
		contentType:"application/x-www-form-urlencoded",
	}).done(function(data){
		$("#result").append(data)
		$("#result").append("<br>")
	})
})
$("#put_json").submit(function(event){
	event.preventDefault()
	var name=$("#put_json #name").val()
	var gender=$("#put_json #gender").val()
	var val=$.ajax({
		url:"/user/"+name+"/"+gender,
		type:"put",
		data:JSON.stringify({_method:"put",length:176,shoe:{color:"blue"}}),
		contentType:"application/json",
	}).done(function(data){
		$("#result").append(data)
		$("#result").append("<br>")
	})
})
$("#delete_urlenc").submit(function(event){
	event.preventDefault()
	var name=$("#delete_urlenc #name").val()
	var gender=$("#delete_urlenc #gender").val()
	var val=$.ajax({
		url:"/user/"+name+"/"+gender,
		type:"delete",
		data:{_method:"delete",length:176,shoe:{color:"blue"}},
		contentType:"application/x-www-form-urlencoded",
	}).done(function(data){
		$("#result").append(data)
		$("#result").append("<br>")
	})
})
$("#delete_json").submit(function(event){
	event.preventDefault()
	var name=$("#delete_json #name").val()
	var gender=$("#delete_json #gender").val()
	var val=$.ajax({
		url:"/user/"+name+"/"+gender,
		type:"delete",
		data:JSON.stringify({_method:"delete",length:176,shoe:{color:"blue"}}),
		contentType:"application/json",
	}).done(function(data){
		$("#result").append(data)
		$("#result").append("<br>")
	})
})
</script>

</body>
</html>

/ geef	,

http://localhost:3000/index.html
/ of	,
http://localhost:3000

/ we kunnen	,
		url:"/user/"+name+"/"+gender,
/ of	,
		url:"user/"+name+"/"+gender,


/ Einde EXPRESS REST JQUERY

/ EXPRESS REST ANGULARJS 

[eric@walnut self]$ pwd
/home/eric/Devel/Node.js/Express/self

/ app4a.js en angular.html

[eric@walnut self]$ bower install angular

/ we zien verschillen tussen jquery en angular	,

/ 7	. 

/ bij jquery werkt NIET	,

$("#get_json").submit(function(event){
  event.preventDefault()
  var name=$("#get_json #name").val()
  var gender=$("#get_json #gender").val()
  var val=$.ajax({
    url:"/user/"+name+"/"+gender,
    type:"get",
    data:JSON.stringify({length:176,shoe:{color:"blue"}}),
    contentType:"application/json",
  }).done(function(data){
    $("#result").append(data)
    $("#result").append("<br>")
  })
})

/ want nu wordt create 
"/user/ericj/male?{"length":176,"shoe":{"color":"blue"}}"

/ zo'n url maken doet hij alleen bij get	, niet bij delete	,

/ 7	. 

/ bij angular lijkt .delete op .get	, en .put op .post , want hebben beide data param	, al kan dat altijd, als je http({method:...,data:...,param:...})

/////////////
/ bij angular heb je inderdaad param en data	, bij jquery alleen data	, bij jquery alleen bij get komt in url, dus is als param bij angular,	

/ in angular.html hebben we nu param gegeven, 
/ TODO

/ 7	. 

/ Bij angular hoeven we geen _method="put"/"delete" mee te geven	,

/ 7	.

/ Lees over serialize bij angular en jquery	,
https://github.com/angular/angular.js/issues/3740





/ Einde EXPRESS REST ANGULARJS 


/ EXPRESS GENERATOR

/ 7	.

/ express-generator 

/ Geef in google	,
express example
/ lees	,
http://shapeshed.com/creating-a-basic-site-with-node-and-express/
http://superbigtree.tumblr.com/post/62759231807/a-simple-example-application-using-express-ejs-and

/ Geef in google	,
express angularjs example
/ Lees	,
https://coderwall.com/p/ww38iq

[eric@walnut ]$ sudo npm install -g express-generator
/usr/local/bin/express -> /usr/local/lib/node_modules/express-generator/bin/express
express-generator@3.0.0 /usr/local/lib/node_modules/express-generator
├── mkdirp@0.3.5
└── commander@1.3.2 (keypress@0.1.0)

/ 13	,

[eric@walnut Express]$ pwd
/home/eric/Devel/Node.js/Express

[eric@walnut Express]$ express -c stylus gen

   create : gen
   create : gen/package.json
   create : gen/app.js
   create : gen/public
   create : gen/routes
   create : gen/routes/index.js
   create : gen/routes/user.js
   create : gen/public/stylesheets
   create : gen/public/stylesheets/style.styl
   create : gen/views
   create : gen/views/index.jade
   create : gen/views/layout.jade
   create : gen/views/error.jade
   create : gen/bin
   create : gen/bin/www
   create : gen/public/javascripts
   create : gen/public/images

   install dependencies:
     $ cd gen && npm install

   run the app:
     $ DEBUG=my-application ./bin/www

$ cd gen
$ npm install

debug@0.7.4 node_modules/debug

static-favicon@1.0.2 node_modules/static-favicon

cookie-parser@1.0.1 node_modules/cookie-parser
├── cookie-signature@1.0.3
└── cookie@0.1.0

body-parser@1.0.1 node_modules/body-parser
├── qs@0.6.6
└── raw-body@1.1.3 (bytes@0.2.1)

morgan@1.0.0 node_modules/morgan
└── bytes@0.2.1

jade@1.3.1 node_modules/jade
├── commander@2.1.0
├── character-parser@1.2.0
├── mkdirp@0.3.5
├── with@3.0.0 (uglify-js@2.4.13)
├── constantinople@2.0.0 (uglify-js@2.4.13)
├── transformers@2.1.0 (promise@2.0.0, css@1.0.8, uglify-js@2.2.5)
└── monocle@1.1.51 (readdirp@0.2.5)

stylus@0.42.3 node_modules/stylus
├── css-parse@1.7.0
├── mkdirp@0.3.5
├── sax@0.5.8
└── glob@3.2.9 (inherits@2.0.1, minimatch@0.2.14)

express@3.4.8 node_modules/express
├── methods@0.1.0
├── merge-descriptors@0.0.1
├── cookie-signature@1.0.1
├── fresh@0.2.0
├── range-parser@0.0.4
├── buffer-crc32@0.2.1
├── cookie@0.1.0
├── mkdirp@0.3.5
├── commander@1.3.2 (keypress@0.1.0)
├── send@0.1.4 (mime@1.2.11)
└── connect@2.12.0 (uid2@0.0.3, pause@0.0.1, qs@0.6.6, bytes@0.2.1, batch@0.5.0, raw-body@1.1.2, negotiator@0.3.0, multiparty@2.2.0)

[eric@walnut gen]$ npm start

> application-name@0.0.1 start /home/eric/Devel/Node.js/Express/gen
> node ./bin/www

/ Geef	,
localhost:3000

/ we zien in server window	,
GET / 304 215ms
GET /stylesheets/style.css 200 89ms - 110b

/ Geef
localhost:3000/users

/ we zien in server window	,
GET /users 304 4ms

/ Einde EXPRESS GENERATOR

/ EXPRESS POSTS EXAMPLE

/ 7	.

/Lees	,
http://superbigtree.tumblr.com/post/62759231807/a-simple-example-application-using-express-ejs-and

[eric@walnut Express]$ mkdir posts && cd posts
$ npm init
/ we rm aantal entries	, let op: laatste , rm	,
$ vi package.json

{
  "name": "posts",
  "version": "0.0.0",
  "description": "http://superbigtree.tumblr.com/post/62759231807/a-simple-example-application-using-express-ejs-and"
}

[eric@walnut posts]$ npm install --save express
[eric@walnut posts]$ npm install --save ejs

/ 13	.

/ eerst alleen index.js	, nog geen posts	,

$ vi app.js

var express = require('express');
var app = express();

app.use('/public', express.static(__dirname + '/public'));

app.locals({
  title: 'Extended Express Example'
});

app.get('/', function(req, res){
  res.render('index.ejs');
});

app.listen(3000);
console.log('app is listening at localhost:3000');

[eric@walnut posts]$ vi views/header.ejs

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title><%= title %></title>
  <link rel="stylesheet" href="/public/styles.css">
</head>
<body>

<header>
  <div class="container">
    <h1><a href="/"><%= title %></a></h1>
  </div>
</header>

[eric@walnut posts]$ vi views/footer.ejs

<footer>
  <div class="container">
    <p>Posts are also available via json at <a href="/api/posts">/api/posts</a>/
  </div>
</footer>

</body>
</html>

[eric@walnut posts]$ vi views/index.ejs

<% include header %>

<% include footer %>

[eric@walnut posts]$ mkdir public
[eric@walnut posts]$ vi public/styles.css

body {
  font: 16px/1.5 'Helvetica Neue', Helvetica, Arial, sans-serif;
  color: #787876;
}

h1, h3 {
  font-weight: 300;
  margin-bottom: 5px;
}

a {
  text-decoration: none;
  color: #EA6045;
}

a:hover {
  color: #2F3440;
}

.container {
  width: 90%;
  margin: 0px auto;
}

footer {
  margin-top: 30px;
  border-top: 1px solid #efefef;
  padding-top: 20px;
  font-style: italic;
}

@media (min-width: 600px){
  .container {
    width: 60%;
  }
}

$ node app.js
/ Geef
localhost:3000
/ OK

/ 13	, 

/ nu met alleen nog alle posts	,

[eric@walnut posts]$ cat posts.json 
[
{
  "title": "This is the first post",
  "slug": "first-post",
  "content": "The pizza is awesome. The pizza is...
},
{
  "title": "Another post that you might like",
  "slug": "second-post",
  "content": "Eating pizza is great. Ea...
},
{
  "title": "The third and last post",
  "slug": "third-post",
  "content": "The pizza always runs out. The p...
}
]

$ vi app.js

...
var fs=require("fs")
app.all('*', function(req, res, next){
  fs.readFile('posts.json', function(err, data){
    res.locals.posts = JSON.parse(data);
    next();
  });
});
...
app.get('/api/posts', function(req, res){
  res.json(res.locals.posts);
});

/ app.all moet VOOR app.get("/",...)	,

[eric@walnut posts]$ vi views/index.ejs 

...
<main role="main">
  <div class="container">
    <% posts.forEach(function(post){ %>
      <h3>
        <a href="/post/<%= post.slug %>">
          <%= post.title %>
        </a>
      </h3>
      <div><%= post.content %></div>
    <% }); %>
  </main>
</div>
...

/ Geef	,
localhost:3000
/ we zien de 3 posts in HTML	, 
/ in de footer is de link /api/posts	, we zien dan de json	,

/ 13	,

/ individuele posts	,

$ vi app.js

...
app.get('/post/:slug', function(req, res, next){
  res.locals.posts.forEach(function(post){
    if (req.params.slug === post.slug){
      res.render('post.ejs', { post: post });
    }
  })
});
...

[eric@walnut posts]$ vi views/post.ejs

<% include header %>

<main role="main">
  <div class="container">
    <h3><%= post.title %></h3>
    <div><%= post.content %></div>
  </main>
</div>

<% include footer %>

/ Geef	,
http://localhost:3000/post/first-post

/ OK


/ Einde EXPRESS POSTS EXAMPLE

/ EXPRESS MONGOOSE ANGULARJS TODO APP

/ Kijk	,
https://coderwall.com/p/ww38iq

/ kijk	,
http://scotch.io/tutorials/javascript/creating-a-single-page-todo-app-with-node-and-angular

[eric@walnut Express]$ git clone https://github.com/scotch-io/node-todo.git
[eric@walnut Express]$ cd node-todo/
[eric@walnut Express]$ npm install
> kerberos@0.0.3 install /home/eric/Devel/Node.js/Express/node-todo/node_modules/mongoose/node_modules/mongodb/node_modules/kerberos
> (node-gyp rebuild 2> builderror.log) || (exit 0)


> bson@0.2.2 install /home/eric/Devel/Node.js/Express/node-todo/node_modules/mongoose/node_modules/mongodb/node_modules/bson
> (node-gyp rebuild 2> builderror.log) || (exit 0)

express@3.4.8 node_modules/express
├── methods@0.1.0
├── merge-descriptors@0.0.1
├── debug@0.8.0
├── range-parser@0.0.4
├── cookie-signature@1.0.1
├── fresh@0.2.0
├── buffer-crc32@0.2.1
├── cookie@0.1.0
├── mkdirp@0.3.5
├── commander@1.3.2 (keypress@0.1.0)
├── send@0.1.4 (mime@1.2.11)
└── connect@2.12.0 (uid2@0.0.3, pause@0.0.1, qs@0.6.6, bytes@0.2.1, raw-body@1.1.2, batch@0.5.0, negotiator@0.3.0, multiparty@2.2.0)

mongoose@3.6.20 node_modules/mongoose
├── regexp-clone@0.0.1
├── muri@0.3.1
├── sliced@0.0.5
├── hooks@0.2.1
├── mpath@0.1.1
├── ms@0.1.0
├── mpromise@0.2.1 (sliced@0.0.4)
└── mongodb@1.3.19 (kerberos@0.0.3, bson@0.2.2)

[eric@walnut node-todo]$ node server.js 
connect.multipart() will be removed in connect 3.0
visit https://github.com/senchalabs/connect/wiki/Connect-3.0 for alternatives
connect.limit() will be removed in connect 3.0
App listening on port 8080


/ HIER HIER

/ Einde EXPRESS MONGOOSE ANGULARJS TODO APP

/ NODE 

/ 7	. 

/ Lees	over module.exports	,
http://stackoverflow.com/questions/5311334/what-is-the-purpose-of-node-js-module-exports-and-how-do-you-use-it

/////////////
/ als je require, dan import je altijd module.exports

/ niet exports dus per se: exports is default module.exports	, tenzij je exports override, 	maar dan kun je reset module.exports=exports	,

/ 7	.

/ er is een verschil	,

$ cat count.js

var count=1
exports.inc=function(){count++}
exports.get=function(){return count}

$ cat count.js

var count=1
exports={
	inc:function(){count++}
	,get:function(){return count}
}

/ er is nl al exports, module	, en in de 2de override we exports,	

/ hieronder zien we	;
/ als we exports write, write we ook module.exports

/ dus er is module, exports en exports is ref naar module.exports	, tenzij je exports override, dan moeten we opnieuw de link reset: module.exports=exports	,

/ dus als we exports override blijft module exports leeg	, en als een andere module deze module import met require, is de import leeg	,

/ dus moeten we als we exports override, 
	module.exports=exports
/ dan is het weer OK	, 

/ dus 

var count=1
exports={
  inc:function(){count++}
  ,get:function(){return count}
}
module.exports=exports

/ =

var count=1
exports.inc=function(){count++}
exports.get=function(){return count}

/ 7	. 

/ we kunnen	,

$ cat hello2.js

var fct=function(){console.log("hello")}
var fct2=function(){console.log("hello2")}
module.exports={
  fct:fct,
  fct2:fct2
}

/ exports is nu leeg, maar voor require("./hello2.js") geeft dat niet omdat je altijd module.exports import	, 


/ 7	

/ als we exports write, write we ook module.exports
/ als we module.exports write, write we NIET exports

[eric@walnut test]$ pwd
/home/eric/Devel/Node.js/Express/test

[eric@walnut test]$ cat count.js 
var count=1
exports.inc=function(){count++}
exports.get=function(){return count}

debug> repl
Press Ctrl + C to leave debug repl
> module
{ id: '.',
  exports: { inc: [Function], get: [Function] },
  parent: null,
  filename: '/home/eric/Devel/Node.js/Express/test/count.js',
  loaded: false,
  children: [],
  paths: 
   [ '/home/eric/Devel/Node.js/Express/test/node_modules',
     '/home/eric/Devel/Node.js/Express/node_modules',
     '/home/eric/Devel/Node.js/node_modules',
     '/home/eric/Devel/node_modules',
     '/home/eric/node_modules',
     '/home/node_modules',
     '/node_modules' ] }
> exports
{ inc: [Function], get: [Function] }

[eric@walnut test]$ cat hello.js 
var fct=function(){console.log("hello")}
module.exports=fct

debug> repl
Press Ctrl + C to leave debug repl
> exports
{}
> module
{ id: '.',
  exports: [Function],
  parent: null,
  filename: '/home/eric/Devel/Node.js/Express/test/hello.js',
  loaded: false,
  children: [],
  paths: 
   [ '/home/eric/Devel/Node.js/Express/test/node_modules',
     '/home/eric/Devel/Node.js/Express/node_modules',
     '/home/eric/Devel/Node.js/node_modules',
     '/home/eric/Devel/node_modules',
     '/home/eric/node_modules',
     '/home/node_modules',
     '/node_modules' ] }

/ Einde NODE

/ EXPRESS MONGOOSE ANGULARJS

/ Lees	,
http://scotch.io/bar-talk/setting-up-a-mean-stack-single-page-application

[eric@walnut Express]$ git clone https://github.com/scotch-io/starter-node-angular.git

/ hier install we zelf angular, ipv van cdn	,
[eric@walnut starter-node-angular]$ npm install
...
> bson@0.2.2 install /home/eric/Devel/Node.js/Express/starter-node-angular/node_modules/mongoose/node_modules/mongodb/node_modules/bson
> (node-gyp rebuild 2> builderror.log) || (exit 0)

express@3.4.8 node_modules/express
├── methods@0.1.0
├── merge-descriptors@0.0.1
├── debug@0.8.0
├── range-parser@0.0.4
├── cookie-signature@1.0.1
├── fresh@0.2.0
├── buffer-crc32@0.2.1
├── cookie@0.1.0
├── mkdirp@0.3.5
├── commander@1.3.2 (keypress@0.1.0)
├── send@0.1.4 (mime@1.2.11)
└── connect@2.12.0 (uid2@0.0.3, pause@0.0.1, qs@0.6.6, bytes@0.2.1, raw-body@1.1.2, batch@0.5.0, negotiator@0.3.0, multiparty@2.2.0)

mongoose@3.6.20 node_modules/mongoose
├── regexp-clone@0.0.1
├── muri@0.3.1
├── sliced@0.0.5
├── hooks@0.2.1
├── mpath@0.1.1
├── ms@0.1.0
├── mpromise@0.2.1 (sliced@0.0.4)
└── mongodb@1.3.19 (kerberos@0.0.3, bson@0.2.2)


[eric@walnut starter-node-angular]$ bower install
bower cached        git://github.com/angular/bower-angular-route.git#1.2.14
bower validate      1.2.14 against git://github.com/angular/bower-angular-route.git#*
bower cached        git://github.com/twbs/bootstrap.git#3.1.1
bower validate      3.1.1 against git://github.com/twbs/bootstrap.git#*
bower cached        git://github.com/angular/bower-angular.git#1.2.14
bower validate      1.2.14 against git://github.com/angular/bower-angular.git#*
bower new           version for git://github.com/angular/bower-angular-route.git#*
bower resolve       git://github.com/angular/bower-angular-route.git#*
bower new           version for git://github.com/angular/bower-angular.git#*
bower resolve       git://github.com/angular/bower-angular.git#*
bower download      https://github.com/angular/bower-angular/archive/v1.2.16.tar.gz
bower download      https://github.com/angular/bower-angular-route/archive/v1.2.16.tar.gz
bower extract       angular-route#* archive.tar.gz
bower resolved      git://github.com/angular/bower-angular-route.git#1.2.16
bower not-cached    git://github.com/angular/bower-angular.git#1.2.16
bower resolve       git://github.com/angular/bower-angular.git#1.2.16
bower download      https://github.com/angular/bower-angular/archive/v1.2.16.tar.gz
bower cached        git://github.com/jquery/jquery.git#2.1.0
bower validate      2.1.0 against git://github.com/jquery/jquery.git#>= 1.9.0
bower extract       angular#* archive.tar.gz
bower resolved      git://github.com/angular/bower-angular.git#1.2.16
bower extract       angular#1.2.16 archive.tar.gz
bower resolved      git://github.com/angular/bower-angular.git#1.2.16
bower install       bootstrap#3.1.1
bower install       angular-route#1.2.16
bower install       angular#1.2.16
bower install       jquery#2.1.0

bootstrap#3.1.1 public/libs/bootstrap
└── jquery#2.1.0

angular-route#1.2.16 public/libs/angular-route
└── angular#1.2.16

angular#1.2.16 public/libs/angular

jquery#2.1.0 public/libs/jquery

[eric@walnut starter-node-angular]$ node server.js 
connect.multipart() will be removed in connect 3.0
visit https://github.com/senchalabs/connect/wiki/Connect-3.0 for alternatives
connect.limit() will be removed in connect 3.0
Magic happens on port 8080



/ Einde EXPRESS MONGOOSE ANGULARJS


/ MONGOOSE 

[eric@walnut Express]$ pwd
/home/eric/Devel/Node.js/Express
[eric@walnut Express]$ cp node-todo/package.json mongoose/
[eric@walnut Express]$ cd mongoose/
[eric@walnut Express]$ npm install

/ 7	,

/ Lees	,
http://mongoosejs.com/

$ vi home.js

var mongoose=require("mongoose")
mongoose.connect("mongodb://localhost:27017/mydb")
var cat=mongoose.model("cat",{name:String})
var kitty=new cat({name:"Angela Roos"})
kitty.save(function(err){
  console.log("meow")
})

[eric@walnut mongoose]$ node home.js
meow

> db.getCollectionNames();
[ "baz", "bios", "cats", "system.indexes", "testData" ]
> db.cats.find()
{ "name" : "Angela Roos", "_id" : ObjectId("53445224c52500d833000001"), "__v" : 0 }


/ In mongodb verschijnt collection cats	,
/ Ook als we	,
var cat=mongoose.model("Cat",{name:String})
/ zien we cats in db	,

/ 7	.

/ http://mongoosejs.com/docs/index.html 

/ quick start guide	,

/ voorlopig	,
$ vi quick.js

var mongoose=require("mongoose")
mongoose.connect("mongodb://localhost:27017/mydb")
var db=mongoose.connection

db.on("error",console.error.bind(console,"connection error:"))

db.on("open",console.log.bind(console,"connected!"))
// of	,
/*
db.once("open",function callback(){
  console.log("connected!")
})
*/

/ als we bijv express ERR	,
mongoose.connect("mongodb://localhost:2717/mydb")
/dan	krijgen we een message	,
[eric@walnut mongoose]$ node quick.js 
connection error: [Error: failed to connect to [localhost:2717]]
/ en die krijgen we niet bij	,
db.on("error",function (){
  console.log("connection error:")
})
/ TODO

/ 13	,

/ debug node: geef repl om var te inspect	,

[eric@walnut mongoose]$ node debug quick.js 
debug> n
break in quick.js:2
  1 var mongoose=require("mongoose")
> 2 mongoose.connect("mongodb://localhost:27017/mydb")

debug> repl
Press Ctrl + C to leave debug repl
> mongoose
{ connections: 
   [ { base: [Object],
       collections: {},
       models: {},
       replica: false,
       hosts: null,
       host: null,
       port: null,
       user: null,
       pass: null,
       name: null,
       options: null,
       _readyState: 0,
       _closeCalled: false,
       _hasOpened: false,
       _listening: false } ],
  plugins: [],
  models: {},
  modelSchemas: {},
  options: {} }

/ ctrl+c
debug> 

/ see voor .on, .once	, 
http://nodejs.org/api/events.html

> db.__proto__.__proto__.__proto__
{ constructor: [Function],
  domain: undefined,
  _events: undefined,
  _maxListeners: undefined,
  setMaxListeners: [Function],
  emit: [Function],
  addListener: [Function],
  on: [Function],
  once: [Function],
  removeListener: [Function],
  removeAllListeners: [Function],
  listeners: [Function] }

> console
{ _stdout: 
   { _connecting: false,
     _hadError: false,
     _handle: { fd: 1, writeQueueSize: 0, owner: [Object], onread: [Function] },
     _host: null,
     _readableState: 
      { highWaterMark: 16384,
        buffer: [],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: null,
        ended: false,
        endEmitted: false,
        reading: false,
        sync: true,
        needReadable: false,
        emittedReadable: false,
        readableListening: false,
        objectMode: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: false,
     domain: null,
     _events: { end: [Function], finish: [Function], _socketEnd: [Function] },
     _maxListeners: undefined,
     _writableState: 
      { highWaterMark: 16384,
        objectMode: false,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: true,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        buffer: [],
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false },
     writable: true,
     allowHalfOpen: false,
     destroyed: false,
     bytesRead: 0,
     _bytesDispatched: 0,
     _writev: null,
     _pendingData: null,
     _pendingEncoding: '',
     read: null,
     _type: 'pipe',
     fd: 1,
     _isStdio: true,
     destroySoon: [Function],
     destroy: [Function] },
  _stderr: 
   { _connecting: false,
     _hadError: false,
     _handle: { fd: 2, writeQueueSize: 0, owner: [Object], onread: [Function] },
     _host: null,
     _readableState: 
      { highWaterMark: 16384,
        buffer: [],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: null,
        ended: false,
        endEmitted: false,
        reading: false,
        sync: true,
        needReadable: false,
        emittedReadable: false,
        readableListening: false,
        objectMode: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: false,
     domain: null,
     _events: { end: [Function], finish: [Function], _socketEnd: [Function] },
     _maxListeners: undefined,
     _writableState: 
      { highWaterMark: 16384,
        objectMode: false,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: true,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        buffer: [],
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false },
     writable: true,
     allowHalfOpen: false,
     destroyed: false,
     bytesRead: 0,
     _bytesDispatched: 0,
     _writev: null,
     _pendingData: null,
     _pendingEncoding: '',
     read: null,
     _type: 'pipe',
     fd: 2,
     _isStdio: true,
     destroySoon: [Function],
     destroy: [Function] },
  _times: {},
  log: [Function],
  info: [Function],
  warn: [Function],
  error: [Function],
  dir: [Function],
  time: [Function],
  timeEnd: [Function],
  trace: [Function],
  assert: [Function],
  Console: [Function] }

/ we zien inderdaad	, console.log, console.error	,

/ 13	,

$ vi quick.js

var mongoose=require("mongoose")
mongoose.connect("mongodb://localhost:27017/mydb")
var db=mongoose.connection
db.on("error",console.error.bind(console,"connection error:"))
db.once("open",function callback(){ console.log("connected!") })
var schema=mongoose.Schema({name:String})
schema.methods.speak=function(){
  var greeting=this.name?"Meow name is "+this.name:"I don't have a name"
  console.log(greeting)
}
var cat=mongoose.model("cat",schema)
var first=new cat({name:"first"})
first.speak()
console.log(first)
first.save(function(err,first){
  if(err)return console.error(err)
  first.speak()
})
var callback=function(err,cats){
  if(err)return console.error(err)
  console.log(cats)
}
cat.find(callback)
cat.find({name:/^first/},callback)

/ we doen eerst	,
> db.cats.drop()
true

/ dan	,
[eric@walnut mongoose]$ node quick.js 
Meow name is first
{ name: 'first', _id: 5345176e69f02d533d000001 }
connected:
[]
[]
Meow name is first

[eric@walnut mongoose]$ node quick.js 
Meow name is first
{ name: 'first', _id: 53451778212166623d000001 }
connected:
[ { name: 'first', _id: 5345176e69f02d533d000001, __v: 0 } ]
[ { name: 'first', _id: 5345176e69f02d533d000001, __v: 0 } ]
Meow name is first

/ We zien	,
/ connected: is laat	,
/ TODO
/ cat.find execs eerder als cat.save	,
/ TODO

/ 7	.

/ 13	.

$ vi todo.js

var mongoose=require("mongoose")
var res=mongoose.connect("mongodb://localhost:270717/mydb")

debug> repl
Press Ctrl + C to leave debug repl
> res===mongoose
true

/ 13	.

/ als we willen dat program sluit, moeten	we	mongoose.disconnect	,

$ vi todo.js

var mongoose=require("mongoose")
mongoose.connect("mongodb://localhost:27017/mydb")
var Todo=mongoose.model("todo",{text:String,done:Boolean})

var todo=new Todo({text:"Bar foo",done:false})
todo.save(function(err){
  if(err)res.send(err)
})

Todo.create({text:"Foo bar",done:false},function(err){
  if(err)res.send(err)
})

mongoose.disconnect(function(err){
  if(err)res.send(err)
})

> db.todos.find()
{ "text" : "Bar foo", "done" : false, "_id" : ObjectId("5347ae317b872b2f12000001"), "__v" : 0 }
{ "text" : "Foo bar", "done" : false, "_id" : ObjectId("5347ae317b872b2f12000002"), "__v" : 0 }

/ wanneer persists is niet duidelijk, in debug zien we dat dit niet meteen na todo.save of Todo.create is, maar later	,


mongoose.connect("localhost:27017/mydb")
/ is ook OK,	 mongo:// hoeft dus NIET	,

/ 13	.

/ maar als we een query doen,	 en we mongoose.disconnect daarna	, wordt de query Todo.find NIET gedaan	,

$ vi todo.js

var mongoose=require("mongoose")
mongoose.connect("localhost:27017/mydb")
var Todo=mongoose.model("todo",{text:String,done:Boolean})

var todo=new Todo({text:"Bar foo",done:false})
todo.save(function(err){
  if(err)console.log(err)
})

Todo.create({text:"Foo bar",done:false},function(err){
  if(err)console.log(err)
})

Todo.find(function(err,res){
  debugger
  if(err)console.log(err)
  console.log(res)
})

/*
mongoose.disconnect(function(err){
  if(err)res.send(err)
})
*/

[eric@walnut mongoose]$ node  todo.js 
[ { text: 'Bar foo',
    done: false,
    _id: 5347b67c0e56efe314000001,
    __v: 0 },
  { text: 'Foo bar',
    done: false,
    _id: 5347b67c0e56efe314000002,
    __v: 0 } ] 

/ 13	.

/ lees	,
http://stackoverflow.com/questions/10081452/drop-database-with-mongoose

/ als we Todo.remove bovenaan	, en we doen tussendoor Todo.create	, dan geeft aan het einde Todo.find een leeg []	, 

$ vi todo.js

var mongoose=require("mongoose")
mongoose.connect("localhost:27017/mydb")
  
var Todo=mongoose.model("todo",{text:String,done:Boolean})
/*
Todo.remove({},function(err){
  if(err)console.log(err)
})
*/

var todo=new Todo({text:"Bar foo",done:false})
todo.save(function(err){
  if(err)console.log(err)
})

Todo.create({text:"Foo bar",done:false},function(err){
  if(err)console.log(err)
})

Todo.find(function(err,res){
  debugger
  if(err)console.log(err)
  console.log(res)
})

/*
mongoose.disconnect(function(err){
  if(err)res.send(err)
})
*/

/ TODO

/ 13	.

/ lees	,
http://stackoverflow.com/questions/10081452/drop-database-with-mongoose

/ we kunnen ACHTER
var Todo=mongoose.model("todo",{text:String,done:Boolean})
/ set	,
mongoose.connection.collections["todos"].drop(function(err){
  if(err)console.log(err)
})

/ moet erachter, anders is mongoose.connection.collections={} 	,
/ TODO

/ we zien dat Todo.find [] geeft	, terwijl in mongo we 2 nieuwe todo's zien	, dus zijn alle vorige todo's inderdaad weg	, zoals de bedoeling was	,

> db.todos.find()
{ "text" : "Bar foo", "done" : false, "_id" : ObjectId("5347cc4ae74971a319000001"), "__v" : 0 }
{ "text" : "Foo bar", "done" : false, "_id" : ObjectId("5347cc4ae74971a319000002"), "__v" : 0 }

$ vi todo.js

/ HIER HIER

var mongoose=require("mongoose")
mongoose.connect("localhost:27017/mydb")

var Todo=mongoose.model("todo",{text:String,done:Boolean})
/*
Todo.remove({},function(err){
  if(err)console.log(err)
})
*/
mongoose.connection.collections["todos"].drop(function(err){
  if(err)console.log(err)
})

var todo=new Todo({text:"Bar foo",done:false})
todo.save(function(err){
  if(err)console.log(err)
})
Todo.create({text:"Foo bar",done:false},function(err){
  if(err)console.log(err)
})

Todo.find(function(err,res){
  debugger
  if(err)console.log(err)
  console.log(res)
})


/*
mongoose.disconnect(function(err){
  if(err)res.send(err)
})
*/


/ 7	.

/ drop db	, ...

/ 13	,

$ vi dbs.js

var mongoose=require("mongoose")
mongoose.connect("localhost:27017/myother")
mongoose.disconnect()

/ show databases	,
> db.adminCommand("listDatabases")
/ we zien myother er NIET bij	,

$ vi dbs.js

var mongoose=require("mongoose")
mongoose.connect("localhost:27017/myother")

var Todo=mongoose.model("todo",{name:String})
Todo.create({name:"eric j"},function(err){
  res.send(err)
})
mongoose.disconnect(function(err){
  if(err)console.log(err)
})

/ in mongo	,
/ show databases	,
> db.adminCommand("listDatabases")
/ we zien myother er WEL bij	,


/ in mongo	,
/ drop db myother	,
> use myother
> db.dropDatabase()

/ Hoe in mongoose rm collection, db	?
/ TODO

/ 13	,

 




/ Einde MONGOOSE 

/ MONGODB

[eric@walnut node-todo]$ ps ajx | grep mongo
    1  2771  2770  2770 ?           -1 Sl     989  58:26 /usr/bin/mongod -f /etc/mongod.conf

/ Maar ERR	,
[eric@walnut node-todo]$ sudo systemctl restart mongod.service 
/ TODO

/ 7	. 

/ Installation	,

/ 13	.

/ getting started

/ Lees	,
http://docs.mongodb.org/manual/tutorial/getting-started/

MongoDB shell version: 2.4.8
connecting to: test
Welcome to the MongoDB shell.
For interactive help, type "help".
For more comprehensive documentation, see
	http://docs.mongodb.org/
Questions? Try the support group
	http://groups.google.com/group/mongodb-user

> use mydb
switched to db mydb
> db
mydb
> show dbs
local	0.078125GB
test	(empty)
> j={name  : "mongo"}
{ "name" : "mongo" }
> k={x:3}
{ "x" : 3 }
> db.testData.insert(j)
> db.testData.insert(k)
> show dbs
local	0.078125GB
mydb	0.203125GB
test	(empty)
> show collections
system.indexes
testData
> db.testData.find()
{ "_id" : ObjectId("53428ed068647e79f8edac01"), "name" : "mongo" }
{ "_id" : ObjectId("53428f7368647e79f8edac02"), "x" : 3 }


> var c=db.testData.find()
> while(c.hasNext())printjson(c.next())
/ print alles	,
> while(c.hasNext())printjson(c.next())
/ niets	,
> var c=db.testData.find()
> while(c.hasNext())printjson(c.next())
/ print alles	,

> printjson(c[4])
{ "_id" : ObjectId("5342920068647e79f8edac05"), "x" : 3 }

> db.testData.find({x:18})
{ "_id" : ObjectId("5342920068647e79f8edac14"), "x" : 18 }

/ 13	,

/ Lees	,
http://docs.mongodb.org/manual/tutorial/generate-test-data/

> for (var i=1;i<=25;i++)db.testData.insert({x:i})
> db.testData.find()
{ "_id" : ObjectId("53428ed068647e79f8edac01"), "name" : "mongo" }
{ "_id" : ObjectId("53428f7368647e79f8edac02"), "x" : 3 }
{ "_id" : ObjectId("5342920068647e79f8edac03"), "x" : 1 }
{ "_id" : ObjectId("5342920068647e79f8edac04"), "x" : 2 }
{ "_id" : ObjectId("5342920068647e79f8edac05"), "x" : 3 }
{ "_id" : ObjectId("5342920068647e79f8edac06"), "x" : 4 }
{ "_id" : ObjectId("5342920068647e79f8edac07"), "x" : 5 }
{ "_id" : ObjectId("5342920068647e79f8edac08"), "x" : 6 }
{ "_id" : ObjectId("5342920068647e79f8edac09"), "x" : 7 }
{ "_id" : ObjectId("5342920068647e79f8edac0a"), "x" : 8 }
{ "_id" : ObjectId("5342920068647e79f8edac0b"), "x" : 9 }
{ "_id" : ObjectId("5342920068647e79f8edac0c"), "x" : 10 }
{ "_id" : ObjectId("5342920068647e79f8edac0d"), "x" : 11 }
{ "_id" : ObjectId("5342920068647e79f8edac0e"), "x" : 12 }
{ "_id" : ObjectId("5342920068647e79f8edac0f"), "x" : 13 }
{ "_id" : ObjectId("5342920068647e79f8edac10"), "x" : 14 }
{ "_id" : ObjectId("5342920068647e79f8edac11"), "x" : 15 }
{ "_id" : ObjectId("5342920068647e79f8edac12"), "x" : 16 }
{ "_id" : ObjectId("5342920068647e79f8edac13"), "x" : 17 }
{ "_id" : ObjectId("5342920068647e79f8edac14"), "x" : 18 }
> it
{ "_id" : ObjectId("5342920068647e79f8edac15"), "x" : 19 }
{ "_id" : ObjectId("5342920068647e79f8edac16"), "x" : 20 }
{ "_id" : ObjectId("5342920068647e79f8edac17"), "x" : 21 }
{ "_id" : ObjectId("5342920068647e79f8edac18"), "x" : 22 }
{ "_id" : ObjectId("5342920068647e79f8edac19"), "x" : 23 }
{ "_id" : ObjectId("5342920068647e79f8edac1a"), "x" : 24 }
{ "_id" : ObjectId("5342920068647e79f8edac1b"), "x" : 25 }

> function insertData(dbName, colName, num){
... var col=db.getSiblingDB(dbName).getCollection(colName)
... for(var i=0;i<num;i++){
... col.insert({y:i})
... }
... print(col.count)
... }
> insertData("mydb","testData",4)
function ( x ){
    return this.find( x ).count();
}

> db.testData.find()
{ "_id" : ObjectId("53428ed068647e79f8edac01"), "name" : "mongo" }
{ "_id" : ObjectId("53428f7368647e79f8edac02"), "x" : 3 }
{ "_id" : ObjectId("5342920068647e79f8edac03"), "x" : 1 }
{ "_id" : ObjectId("5342920068647e79f8edac04"), "x" : 2 }
{ "_id" : ObjectId("5342920068647e79f8edac05"), "x" : 3 }
{ "_id" : ObjectId("5342920068647e79f8edac06"), "x" : 4 }
{ "_id" : ObjectId("5342920068647e79f8edac07"), "x" : 5 }
{ "_id" : ObjectId("5342920068647e79f8edac08"), "x" : 6 }
{ "_id" : ObjectId("5342920068647e79f8edac09"), "x" : 7 }
{ "_id" : ObjectId("5342920068647e79f8edac0a"), "x" : 8 }
{ "_id" : ObjectId("5342920068647e79f8edac0b"), "x" : 9 }
{ "_id" : ObjectId("5342920068647e79f8edac0c"), "x" : 10 }
{ "_id" : ObjectId("5342920068647e79f8edac0d"), "x" : 11 }
{ "_id" : ObjectId("5342920068647e79f8edac0e"), "x" : 12 }
{ "_id" : ObjectId("5342920068647e79f8edac0f"), "x" : 13 }
{ "_id" : ObjectId("5342920068647e79f8edac10"), "x" : 14 }
{ "_id" : ObjectId("5342920068647e79f8edac11"), "x" : 15 }
{ "_id" : ObjectId("5342920068647e79f8edac12"), "x" : 16 }
{ "_id" : ObjectId("5342920068647e79f8edac13"), "x" : 17 }
{ "_id" : ObjectId("5342920068647e79f8edac14"), "x" : 18 }
Type "it" for more
> 
> it
{ "_id" : ObjectId("5342920068647e79f8edac15"), "x" : 19 }
{ "_id" : ObjectId("5342920068647e79f8edac16"), "x" : 20 }
{ "_id" : ObjectId("5342920068647e79f8edac17"), "x" : 21 }
{ "_id" : ObjectId("5342920068647e79f8edac18"), "x" : 22 }
{ "_id" : ObjectId("5342920068647e79f8edac19"), "x" : 23 }
{ "_id" : ObjectId("5342920068647e79f8edac1a"), "x" : 24 }
{ "_id" : ObjectId("5342920068647e79f8edac1b"), "x" : 25 }
{ "_id" : ObjectId("534293af68647e79f8edac1c"), "y" : 0 }
{ "_id" : ObjectId("534293af68647e79f8edac1d"), "y" : 1 }
{ "_id" : ObjectId("534293af68647e79f8edac1e"), "y" : 2 }
{ "_id" : ObjectId("534293af68647e79f8edac1f"), "y" : 3 }

/ 7	.

/ MongoDB crud operations

/ 13	. 

/ Lees	,
http://docs.mongodb.org/manual/reference/bios-example-collection/

/ Met db.bios.insert kunnen we maar 1 doc tegelijk insert,	 we cp en paste	een aantal keren	,
> db.bios.find()
{ "_id" : 1, "name" : { "first" : "John", "last" : "Backus" }, "birth" : ISODate("1924-12-03T05:00:00Z"), "death" : ISODate("2007-03-17T04:00:00Z"), "contribs" : [  "Fortran",  "ALGOL",  "Backus-Naur Form",  "FP" ], "awards" : [ 	{ 	"award" : "W.W. McDowell Award", 	"year" : 1967, 	"by" : "IEEE Computer Society" }, { 	"award" : "National Medal of Science", 	"year" : 1975, 	"by" : "National Science Foundation" }, 	{ 	"award" : "Turing Award", 	"year" : 1977, 	"by" : "ACM" }, 	{ 	"award" : "Draper Prize", 	"year" : 1993, 	"by" : "National Academy of Engineering" } ] }
{ "_id" : ObjectId("51df07b094c6acd67e492f41"), "name" : { "first" : "John", "last" : "McCarthy" }, "birth" : ISODate("1927-09-04T04:00:00Z"), "death" : ISODate("2011-12-24T05:00:00Z"), "contribs" : [  "Lisp",  "Artificial Intelligence",  "ALGOL" ], "awards" : [ 	{ 	"award" : "Turing Award", 	"year" : 1971, 	"by" : "ACM" }, 	{ 	"award" : "Kyoto Prize", 	"year" : 1988, 	"by" : "Inamori Foundation" }, 	{ 	"award" : "National Medal of Science", 	"year" : 1990, 	"by" : "National Science Foundation" } ] }
{ "_id" : 3, "name" : { "first" : "Grace", "last" : "Hopper" }, "title" : "Rear Admiral", "birth" : ISODate("1906-12-09T05:00:00Z"), "death" : ISODate("1992-01-01T05:00:00Z"), "contribs" : [  "UNIVAC",  "compiler",  "FLOW-MATIC",  "COBOL" ], "awards" : [ 	{ 	"award" : "Computer Sciences Man of the Year", 	"year" : 1969, 	"by" : "Data Processing Management Association" }, 	{ 	"award" : "Distinguished Fellow", 	"year" : 1973, 	"by" : " British Computer Society" }, 	{ 	"award" : "W. W. McDowell Award", 	"year" : 1976, 	"by" : "IEEE Computer Society" }, 	{ 	"award" : "National Medal of Technology", "year" : 1991, 	"by" : "United States" } ] }
{ "_id" : 4, "name" : { "first" : "Kristen", "last" : "Nygaard" }, "birth" : ISODate("1926-08-27T04:00:00Z"), "death" : ISODate("2002-08-10T04:00:00Z"), "contribs" : [  "OOP",  "Simula" ], "awards" : [ 	{ 	"award" : "Rosing Prize", 	"year" : 1999, 	"by" : "Norwegian Data Association" }, 	{ 	"award" : "Turing Award", 	"year" : 2001, 	"by" : "ACM" }, 	{ 	"award" : "IEEE John von Neumann Medal", 	"year" : 2001, 	"by" : "IEEE" } ] }
{ "_id" : 5, "name" : { "first" : "Ole-Johan", "last" : "Dahl" }, "birth" : ISODate("1931-10-12T04:00:00Z"), "death" : ISODate("2002-06-29T04:00:00Z"), "contribs" : [  "OOP",  "Simula" ], "awards" : [ 	{ 	"award" : "Rosing Prize", 	"year" : 1999, 	"by" : "Norwegian Data Association" }, 	{ 	"award" : "Turing Award", 	"year" : 2001, 	"by" : "ACM" }, 	{ 	"award" : "IEEE John von Neumann Medal", 	"year" : 2001, 	"by" : "IEEE" } ] }
{ "_id" : 6, "name" : { "first" : "Guido", "last" : "van Rossum" }, "birth" : ISODate("1956-01-31T05:00:00Z"), "contribs" : [  "Python" ], "awards" : [ 	{ 	"award" : "Award for the Advancement of Free Software", 	"year" : 2001, 	"by" : "Free Software Foundation" }, 	{ 	"award" : "NLUUG Award", 	"year" : 2003, 	"by" : "NLUUG" } ] }
{ "_id" : ObjectId("51e062189c6ae665454e301d"), "name" : { "first" : "Dennis", "last" : "Ritchie" }, "birth" : ISODate("1941-09-09T04:00:00Z"), "death" : ISODate("2011-10-12T04:00:00Z"), "contribs" : [  "UNIX",  "C" ], "awards" : [ 	{ 	"award" : "Turing Award", 	"year" : 1983, 	"by" : "ACM" }, 	{ 	"award" : "National Medal of Technology", 	"year" : 1998, 	"by" : "United States" }, 	{ 	"award" : "Japan Prize", 	"year" : 2011, 	"by" : "The Japan Prize Foundation" } ] }
{ "_id" : 8, "name" : { "first" : "Yukihiro", "aka" : "Matz", "last" : "Matsumoto" }, "birth" : ISODate("1965-04-14T04:00:00Z"), "contribs" : [  "Ruby" ], "awards" : [ 	{ 	"award" : "Award for the Advancement of Free Software", 	"year" : "2011", 	"by" : "Free Software Foundation" } ] }
{ "_id" : 9, "name" : { "first" : "James", "last" : "Gosling" }, "birth" : ISODate("1955-05-19T04:00:00Z"), "contribs" : [  "Java" ], "awards" : [ 	{ 	"award" : "The Economist Innovation Award", 	"year" : 2002, 	"by" : "The Economist" }, 	{ 	"award" : "Officer of the Order of Canada", 	"year" : 2007, 	"by" : "Canada" } ] }
{ "_id" : 10, "name" : { "first" : "Martin", "last" : "Odersky" }, "contribs" : [  "Scala" ] }

/ 13	.

http://docs.mongodb.org/manual/tutorial/insert-documents/

/ we zien op
http://docs.mongodb.org/manual/core/server-side-javascript/
/ shell commands en js commands	, 
show databases, db.adminCommand('listDatabases')
/ maar de js commands kunnen ook in de shell	,

[eric@walnut Administration]$ pwd
/home/eric/Devel/MongoDB/Manual/Administration


$ vi fifth.js

var db_=connect("localhost:27017/mydb")

db_.testData.remove({type:"misc",item:"card"})

db_.testData.insert({_id:10,type:"misc",item:"card",qty:15})
db_.testData.insert({_id:10,type:"misc",item:"card",qty:15})
/ we zien maar 1 row	, omdat we _id geven	,

db_.testData.insert({type:"misc",item:"card",qty:15})
/ een nieuwe row, met nieuwe id	,
db_.testData.update({type:"misc",item:"card"},{$set:{qty:10}},{upset:true,multi:true})

db_.testData.save({type:"misc",item:"card",qty:40})
db_.testData.save({type:"misc",item:"card",qty:40})
// 2 rows	,



var curs=db_.testData.find()
while(curs.hasNext()){
  var item=curs.next()
  printjson(item)
}

...
{ "_id" : 10, "type" : "misc", "item" : "card", "qty" : 10 }
{
	"_id" : ObjectId("5344008e17ff02bb37652e9a"),
	"type" : "misc",
	"item" : "card",
	"qty" : 10
}
{
	"_id" : ObjectId("5344008e17ff02bb37652e9b"),
	"type" : "misc",
	"item" : "card",
	"qty" : 40
}
{
	"_id" : ObjectId("5344008e17ff02bb37652e9c"),
	"type" : "misc",
	"item" : "card",
	"qty" : 40
}

/ lees	,
http://docs.mongodb.org/manual/reference/method/db.collection.update
/ upsert create a doc als er niet is	,
/ let op multiple:true	,

/ 13	,


/ 7	.

/ Administration

/ 13	.

/ scripts	,

/ Lees voor verschillen shell en javascript	,
http://docs.mongodb.org/manual/core/server-side-javascript

/ met $ mongo zien we altijd	,
connecting to: ... 
/ Als we 
$ mongo first.js
/ dan zien we altijd	,
connecting to: test
/ als we  
$ mongo mydb first.js
/ dan zien we altijd	,
connecting to: mydb
 / Dit staat buiten wat er in het script staat	, bijv	,
var conn=new Mongo("localhost:27017")
var db_=conn.getDB("mydb")
/////////////////
/ In het script is er altijd de var db	, als we $mongo geven is db test	, als we $ mongo mydb geven, is db mydb	,

[eric@walnut Administration]$ pwd
/home/eric/Devel/MongoDB/Manual/Administration

http://docs.mongodb.org/manual/tutorial/write-scripts-for-the-mongo-shell/


[eric@walnut Administration]$ mongo mydb --eval "printjson(db.getCollectionNames())"
MongoDB shell version: 2.4.8
connecting to: mydb
[ "bios", "system.indexes", "testData" ]


$ touch first.js
[eric@walnut Administration]$ mongo localhost:27017/mydb first.js
MongoDB shell version: 2.4.8
connecting to: localhost:27017/mydb

$ vi first.js

+function(){

printjson(db.adminCommand("listDatabases"))

}()

/////////////////
/ we zien dat er automatisch een db var is	,
/ deze 

[eric@walnut Administration]$ mongo localhost:27017/mydb first.js
/ of	,
[eric@walnut Administration]$ mongo mydb first.js
/ of	,
[eric@walnut Administration]$ mongo localhost/mydb first.js
MongoDB shell version: 2.4.8
connecting to: localhost:27017/mydb
{
	"databases" : [
		{
			"name" : "local",
			"sizeOnDisk" : 83886080,
			"empty" : false
		},
		{
			"name" : "mydb",
			"sizeOnDisk" : 218103808,
			"empty" : false
		},
		{
			"name" : "test",
			"sizeOnDisk" : 1,
			"empty" : true
		}
	],
	"totalSize" : 301989888,
	"ok" : 1
}

/ 13	. 

/ HIER HIER

/ new Mongo	,

/ we deden ERR	,

$ vi second.js

var conn=new Mongo("localhost:27017/mydb")

[eric@walnut Administration]$ mongo second.js 
MongoDB shell version: 2.4.8
connecting to: test
Mon Apr  7 16:29:19.748 starting new replica set monitor for replica set localhost:27017 with seed of mydb:27017
Mon Apr  7 16:29:19.818 getaddrinfo("mydb") failed: Name or service not known
Mon Apr  7 16:29:19.818 error connecting to seed mydb:27017, err: couldn't connect to server mydb:27017
Mon Apr  7 16:29:21.818 warning: No primary detected for set localhost:27017
Mon Apr  7 16:29:21.818 All nodes for set localhost:27017 are down. This has happened for 1 checks in a row. Polling will stop after 29 more failed checks
Mon Apr  7 16:29:21.818 replica set monitor for replica set localhost:27017 started, address is localhost:27017/
Mon Apr  7 16:29:21.819 [ReplicaSetMonitorWatcher] starting
Mon Apr  7 16:29:21.821 Error: connect failed to replica set localhost:27017/mydb:27017 at second.js:3
failed to load: second.js
/ TODO

$ vi second.js

+function(){

printjson(db)
var colls=db.getCollectionNames()
printjson(colls)

var conn=new Mongo("localhost:27017")
var db_=conn.getDB("mydb")
printjson(db_)
var colls=db_.getCollectionNames()
printjson(colls)

var db__=connect("localhost:27017/mydb")
printjson(db__)

printjson(db.adminCommand("listDatabases"))
printjson(db_.adminCommand("listDatabases"))
printjson(db__.adminCommand("listDatabases"))

}()

[eric@walnut Administration]$ mongo second.js 
MongoDB shell version: 2.4.8
connecting to: test
test
[ ]
mydb
[ "bios", "system.indexes", "testData" ]
connecting to: localhost:27017/mydb
mydb
{
	"databases" : [
		{
			"name" : "local",
			"sizeOnDisk" : 83886080,
			"empty" : false
		},
		{
			"name" : "mydb",
			"sizeOnDisk" : 218103808,
			"empty" : false
		},
		{
			"name" : "test",
			"sizeOnDisk" : 1,
			"empty" : true
		}
	],
	"totalSize" : 301989888,
	"ok" : 1
}
/ 3 keer in het totaal	,

/ lees over connect	,
http://docs.mongodb.org/manual/reference/method/connect/

/ 13	.

/ we kunnen de default db, of een eigen connect db_ maken	, we kunnen altijd een sibling vragen	, want als db_=mydb, is test een sibling , en andersom	,

$ vi third.js

printjson(db)
var colls=db.getCollectionNames()
printjson(colls)

var db_=connect("localhost:27017/mydb")
var db__=db_.getSiblingDB("test")
printjson(db__)

[eric@walnut Administration]$ mongo third.js 
MongoDB shell version: 2.4.8
connecting to: test
test
[ ]
connecting to: localhost:27017/mydb
test

/ 13	,

/ als we geven	,
[eric@walnut Administration]$ mongo mydb
MongoDB shell version: 2.4.8
connecting to: mydb
> 

/ 13	. 

/ geef	,
https://groups.google.com -> https://groups.google.com/forum/#!overview
/ een hashbang url	,

/ Hier zien we mongo-user	,

/Lees	,
https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/4GLzfBrtcJI
/ Het filter werkt OK	,

/ 13	. 

$ vi fourth.js

var db_=connect("localhost:27017/mydb")
printjson(db_)
var curs=db_.testData.find()
while(curs.hasNext()){
  var item=curs.next()
  printjson(item)
}

[eric@walnut Administration]$ mongo fourth.js 
MongoDB shell version: 2.4.8
connecting to: test
test
connecting to: localhost:27017/mydb
mydb
{ "_id" : ObjectId("53428ed068647e79f8edac01"), "name" : "mongo" }
{ "_id" : ObjectId("53428f7368647e79f8edac02"), "x" : 3 }
...


/ lees	,
http://docs.mongodb.org/manual/reference/method/db.collection.find/#crud-read-cursor

/ 7	.

/ Indexes	,

> db.baz.drop();for(var n=0;n<10000;n++)db.baz.insert({i:n,j:Math.random()}) 

> db.baz.find({i: {$mod: [10,0]}}).sort({j:-1}).explain()
{
	"cursor" : "BasicCursor",
	"isMultiKey" : false,
	"n" : 1000,
	"nscannedObjects" : 10000,
	"nscanned" : 10000,
	"nscannedObjectsAllPlans" : 10000,
	"nscannedAllPlans" : 10000,
	"scanAndOrder" : true,
	"indexOnly" : false,
	"nYields" : 0,
	"nChunkSkips" : 0,
	"millis" : 21,
	"indexBounds" : {
		
	},
	"server" : "walnut.nuts.org:27017"
}

> var c=db.baz.find({i: {$mod: [10,0]}})
> while(c.hasNext())printjson(c.next().i)
...
9990
/ alle 10-vouden	,

> var c=db.baz.find({i:{$mod:[10,0]}},{i:1,j:1,_id:0})
/ geef i,j	,
> while(c.hasNext())printjson(c.next())
...
{ "i" : 9980, "j" : 0.3080777060240507 }
{ "i" : 9990, "j" : 0.3121808583382517 }

> var c=db.baz.find({i:{$mod:[10,0]}},{i:1,j:1,_id:0}).sort({i:-1})
> while(c.hasNext())printjson(c.next())
...
{ "i" : 10, "j" : 0.4142917422577739 }
{ "i" : 0, "j" : 0.8481751568615437 }

> var c=db.baz.find({i:{$mod:[10,0]}},{i:1,j:1,_id:0}).sort({j:-1})
> while(c.hasNext())printjson(c.next())
...
{ "i" : 5700, "j" : 0.0017659114673733711 }
{ "i" : 9740, "j" : 0.0013516456820070744 }

> var c=db.baz.find({i:{$mod:[10,0]}},{i:1,j:1,_id:0}).sort({j:1})
> while(c.hasNext())printjson(c.next())
...
{ "i" : 3300, "j" : 0.9964236079249531 }
{ "i" : 1790, "j" : 0.997796235140413 }

> db.baz.ensureIndex({i:1,j:-1})
> db.baz.find({i: {$mod: [10,0]}}).sort({j:-1}).explain()
{
	"cursor" : "BtreeCursor i_1_j_-1",
	"isMultiKey" : false,
	"n" : 1000,
	"nscannedObjects" : 10000,
	"nscanned" : 10000,
	"nscannedObjectsAllPlans" : 11001,
	"nscannedAllPlans" : 11001,
	"scanAndOrder" : true,
	"indexOnly" : false,
	"nYields" : 0,
	"nChunkSkips" : 0,
	"millis" : 28,
	"indexBounds" : {
		"i" : [
			[
				-1.7976931348623157e+308,
				1.7976931348623157e+308
			]
		],
		"j" : [
			[
				{
					"$maxElement" : 1
				},
				{
					"$minElement" : 1
				}
			]
		]
	},
	"server" : "walnut.nuts.org:27017"
}
> 
/ Inderdaad,	 duurt langer	,

> db.baz.dropIndex({i:1,j:-1})
{ "nIndexesWas" : 2, "ok" : 1 }
> db.baz.find({i: {$mod: [10,0]}}).sort({j:-1}).explain()
{
	"cursor" : "BasicCursor",
	"isMultiKey" : false,
	"n" : 1000,
	"nscannedObjects" : 10000,
	"nscanned" : 10000,
	"nscannedObjectsAllPlans" : 10000,
	"nscannedAllPlans" : 10000,
	"scanAndOrder" : true,
	"indexOnly" : false,
	"nYields" : 0,
	"nChunkSkips" : 0,
	"millis" : 11,
	"indexBounds" : {
		
	},
	"server" : "walnut.nuts.org:27017"
}
/ nu weer kort	,

/ 7	. 

/ Aggregation

/ TODO

/ 7	. 

/ security

/ Lees	,
http://docs.mongodb.org/manual/tutorial/enable-authentication/

/ lees in peacan LOG_31_mrt_2014.txt bij MONGODB

/ 7	. 

/ we kunnen 	,
$ mongo localhost:27017/mydb







/ Einde MONGODB

/ NODE-INSPECTOR

[eric@walnut ]$ sudo npm install -g node-inspector

[eric@walnut self]$ pwd
/home/eric/Devel/Node.js/Express/self
[eric@walnut self]$ node-debug app4a.js

/ we hoeven geen debugger stmts meer te set, gewoon b's zoals gewend	,




/ Einde NODE-INSPECTOR

/ ANDROID 

• Feel at ease with most programming concepts of Android, including Data Storage, Location, Sensors and Video Capture. The Android User Interface has no secrets for you;

/ Einde ANDROID 

/ ANGULAR COMPILE

/ compile & link: voornamelijk exec link fcts	voor ieder node,  ook create controllers (voor ieder node0	,
/ compile : reg link fcts voor ieder node, add template toe aan DOM	,
/ link : exec de link fcts, 

/ 7	. 

/ per node collection gegeven aan compile is er 1 publicLinkFn	, de top	, 
/ per node list is er een compositeLinkFn	, een van de node lists is die hierboven	, de node collection gegeven aan compile 
/ per node is 1 nodeLinkFn	,

/ publicLinkFn heeft als closure scope de toendertijd local scope van compile
/ compositeLinkFn heeft als closure scope de toendertijd local scope van compileNodes	, 
/ nodeLinkFn heeft als closure scope de toendertijd local scope van applyDirectivesToNode, 

/ 7	.

/ compile wordt called met de $compileNodes,   

   function compile($compileNodes, transcludeFn, maxPriority, ignoreDirective,
                        previousCompileContext) {
      if (!($compileNodes instanceof jqLite)) {
        $compileNodes = jqLite($compileNodes);
      }

      var compositeLinkFn = compileNodes($compileNodes, transcludeFn,...) 

     	return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
        var $linkNode = ...  : $compileNodes;
        if (compositeLinkFn) compositeLinkFn(scope, $linkNode, $linkNode);

/7	.

/ compileNodes is een recursieve fct	, gaat alle node lists af	, 
/ voor iedere node list komt er een list van {nodeLinkFn/null,compositeLinkFn/null} (per node)	,
/ er is inderdaad per node een nodeLinkFn/null en een compositeLinkFn/null	,

/ 7	

/ er is maar 1 compile fct (obj) maar elke call levert een compositeLinkFn fct (obj), en deze heeft de closure scope van compile met daarin $compileNodes,	

/ 7	.

/ er is maar 1 fct compileNodes	, maar iedere call creates a compositeLinkFn fct obj	,
/ want de structuur is zo	,
    function compileNodes(nodeList, transcludeFn, ...){ 
			return compisiteLinkFn
      function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) 			{
		}

/ 7	.

    function compileNodes(nodeList, transcludeFn, ...){ 
				var linkFns=[]

      for(var i = 0; i < nodeList.length; i++) {
 
        nodeLinkFn = ... ? applyDirectivesToNode(directives, nodeList[i], attrs, transcludeFn, $rootElement, null, [], [], previousCompileContext)

        childLinkFn = ...: compileNodes(nodeList[i].childNodes, ... ) 
				// = compositeLinkFn fct obj	,

        linkFns.push(nodeLinkFn);
        linkFns.push(childLinkFn); 
			}

      	return linkFnFound ? compositeLinkFn : null;

      	function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn){

       		for(i = 0, n = 0, ii = linkFns.length; i < ii; n++) {
          	node = stableNodeList[n];
          	nodeLinkFn = linkFns[i++];
          	childLinkFn = linkFns[i++];
          	$node = jqLite(node);
					}
       		if (nodeLinkFn) {
            if (nodeLinkFn.scope) {
              childScope = scope.$new();
            } else {
              childScope = scope;

          	childTranscludeFn = nodeLinkFn.transclude;
          	if (childTranscludeFn || (!boundTranscludeFn && transcludeFn)) {
             	nodeLinkFn(childLinkFn, childScope, node, $rootElement, createBoundTranscludeFn(scope, childTranscludeFn || transcludeFn));
          	} else {
              nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);
          }
          } else if (childLinkFn) {
            childLinkFn(scope, node.childNodes, undefined, boundTranscludeFn);
          }


		}	

/ 7	. 

/ applyDirectivesToNode doet precies hetzelfde	, iedere call geeft een nieuwe nodeLinkFn, en die heeft de local scope van deze call van applyDirectivesToNode als closure scope	,

    function applyDirectivesToNode(directives, compileNode, preLinkFns, postLinkFns, ...){
			var
       newScopeDirective,						/* nodeLinkFn uses */
       controllerDirectives , 
       newIsolateScopeDirective ,
       templateDirective ,

      for(var i = 0, ii = directives.length; i < ii; i++) {
         if (directiveValue = directive.scope) {
          newScopeDirective = newScopeDirective || directive;
            if (isObject(directiveValue)) {
              newIsolateScopeDirective = directive;
            }
				 }
		      if (!directive.templateUrl && directive.controller) {
          controllerDirectives[directiveName] = directive;
        }
				  if (directiveValue = directive.transclude) {
          		hasTranscludeDirective = true;
					} else {
            $template = jqLite(jqLiteClone(compileNode)).contents();
            $compileNode.empty(); // clear contents
            childTranscludeFn = compile($template, transcludeFn);
/ Origele HTML
          }
        if (directive.template) {
         } else {
            $compileNode.html(directiveValue);
/ template HTML
        if (directive.templateUrl) {
/ TODO
        } else if (directive.compile) {
            linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
              addLinkFns(null, linkFn, attrStart, attrEnd);
 				}

     	nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;
      nodeLinkFn.transclude = hasTranscludeDirective && childTranscludeFn;

    	return nodeLinkFn;
     	
			function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
			       if (newIsolateScopeDirective) {
          			isolateScope = scope.$new(true);
           			switch (mode) {
              	case '@':
                  isolateScope[scopeName] = $interpolate(attrs[attrName])(scope);

 ...
          if (templateDirective ...)
...
        if (controllerDirectives) {
...
            elementControllers[directive.name] = controllerInstance;

        childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn);

           linkFn = postLinkFns[i];
           linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn); 
																		/* call */
 
	
/ 7	.

/ applyDirectivesToNode doet	,
            $compileNode.html(directiveValue);

/ want hier is geen scope voor nodig,	 hoeft niet pas in nodeLinkFn	,

/ 7	.

The link function is responsible for registering DOM listeners as well as updating the DOM. It is executed after the template has been cloned

/ we kunnen inderdaad

$ vi 19/script.js

.directive("foo",function(){
  return{
    scope:{ 
      bar:"&",
    }
    ,template:'<div ng-click="bar()">Dial {{fct()}}</div>'
    ,link:function(scope){
      scope.fct=function(){
        return "Me"
      }
    }

/ normaal zet we DOM updates in ng-controller's $scope	,

/ we kunnen NIET ipv hierboven in de link fct	,
    scope:{ 
      bar:"&",
			fct:function(){return "Me"}
    }

/ ERR: TypeError: Object function (){return "OK"} has no method 'match'
/ TODO

/ 7	.

/ in nodeLinkFn	,

            if (directive.controllerAs) {
              locals.$scope[directive.controllerAs] = controllerInstance;
 


/ Einde ANGULAR COMPILE

/ ANGULAR FACTORY 

/ Intermezzo

function cl(v){
  return function(){return v}
}
var f=cl("foo bar")
f()

/ Dan wordt v gevonden niet in de local scope van f, maar in de closure scope van f	, dat is de local scope van cl	,
/ in deze local scope van cl staat: v==="foo bar"	,  v is een alias voor de string "foo bar"	,

 
/ Einde Intermezzo

/ .value kan string, obj, fct geven	, een fct moet je dan in het template wel call	,
/ .factory geeft 'n fct, en = .$get fct van de provider	, deze wordt invoke	(met di)	,

/ we kunnen in de template ook inject	,

[eric@walnut ]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/8_provider

$ vi index.html

<!doctype html>
<html >
<head>
<script src="/angularjs/angular.js/build/angular.js"></script>
<link rel="stylesheet" href="/bootstrap/bootstrap/css/bootstrap.css">
<script src="script.js"></script>
</head>
<body>
<div ng-app="app">
{{B}}
<br>
{{b}}
<br>
{{b2}}
<br>
{{c}}
<br>
{{D.name}}
<br>
{{e()}}
<br>
{{F()}}
<br>
{{G().cast[0].name}}
{{G().cast[0].role}}
<br>
{{h.cast[0].name}}
{{h.cast[0].role}}
<br>
{{i}}
<br>
{{J(B)}}
</div>


</body>
</html>


$ vi script.js

var app=angular.module("app",[])

app.value("B","eric j.")
//=
function cl(v){
	return function(){return v}
}
app.factory("b",cl("eric j.")) // de string zit in de closure scope	van de fct	, 
// dus we kunnen write {return v} terwijl v niet in de local scope zit; hij kent ook de closure scope en daar is v	,
// hetzelfde result als	, (maar nu zit de string in de local scope van de fct zelf, er is geen closure (fct) hier :
app.factory("c",function(){ return "eric j." })

app.provider("b2",function(){
	this.$get=cl("foo bar")
})

app.value("D",{name:"eric j."})
app.factory("e",function(){ return function(){return "eric j."} })
app.value("F",function(){return "eric j."})
app.value("G",function(){var x={};x.cast=[{name:"eric j",role:"programmer"}];return x})
app.factory("h",function(){var x={};x.cast=[{name:"eric j",role:"programmer"}];return x})

app.factory("i",["B",function(B){return "i"+B}])

app.value("J",["B",function(B){return "J"+B}])

app.run(["$rootScope","B","b","b2","c","D","e","F","G","h","i","J",function($rootScope,B,b,b2,c,D,e,F,G,h,i,J){

	$rootScope.B=B
	$rootScope.b=b
	$rootScope.b2=b2
	$rootScope.c=c
	$rootScope.D=D
	$rootScope.e=e
	$rootScope.F=F
	$rootScope.G=G
	$rootScope.h=h
	$rootScope.i=i
	$rootScope.J=J
}])

/we maken een provider	,
app.factory("b",cl("eric j."))
/ cl("eric j") is de $get fct van de provider die we hier maken	,

/ dit is hetzlefde als 
app.provider("b2",function(){
	this.$get=cl("foo bar")
})

/ we kunnen NIET
app.run($provide,...){
$provide.provider("b2",function(){
	this.$get=cl("foo bar")
})
/ want $provide zit niet in de instanceCache	,


/ we kunnen NIET	, hij zegt: cannot interpolate	,
app.value("J",["B",function(B){return "J"+B}])
/ TODO

/ Einde ANGULAR FACTORY 

/ ANGULAR NG-REPEAT

/ ngFilter video	, video 8	,

[eric@walnut 8_1]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/8_1
$ vi index.html

<div ng-app="app">
    <table class="table">
      <tr ng-repeat="a in A">
        <td>{{a.name}}</td>
        <td>{{a.character}}</td>
      </tr>
    </table>
</div>

$ vi script.js

var app=angular.module("app",[])
app.value("A",[
    {name:"Robert Downey Jr." ,character:"Tony Stark / Iron Man" }
    ,{name:"Chris Evans" ,character:"Steve Rogers / Captain America" }
])
app.run(function($rootScope,A){
  $rootScope.A=A
})

/ 7	. 

/ iets andere versie	, 8_1	,

<div ng-app="app">
  <div ng-repeat="a in A">
    <h1>Eric J.</h1>
  </div>
  <foo></foo>
</div>

app.value("A",[
    {name:"Robert Downey Jr." ,character:"Tony Stark / Iron Man" }
    ,{name:"Chris Evans" ,character:"Steve Rogers / Captain America" }
])
app.directive("foo",function(){
  return {restrict:"E",template:"<h1>Foo</h1>"}
})
app.run(function($rootScope,A){
  $rootScope.A=A
})

/ we zien	(even zonder Foo),

<div ng-app="app" class="ng-scope">

	<!-- ngRepeat: a in A -->
	<div ng-repeat="a in A" class="ng-scope">
		<h1>Eric J.</h1>
	</div>
	<!-- end ngRepeat: a in A -->
	<div ng-repeat="a in A" class="ng-scope">
		<h1>Eric J.</h1>
	</div>
	<!-- end ngRepeat: a in A -->

</div>

/ we moeten A inject	, anders zien we NIET 2 keer "Eric J."	,
/ foo in net als ng-repeat, hoeven we niet in $rootScope te set	, 
/ A moeten we wel in $rootScope set	, is data	, net als dat je zou doen {{data.message}} 	,

/ iets andere versie , 8_2	,

<div ng-app="app">
  <div ng-repeat="a in A">
    <h1>{{a.name}}</h1>
    <h1>{{a.character}}</h1>
  </div>
</div>

var app=angular.module("app",[])
app.value("A",[
    {name:"Robert Downey Jr." ,character:"Tony Stark / Iron Man" }
    ,{name:"Chris Evans" ,character:"Steve Rogers / Captain America" }
])
app.run(function($rootScope,A){
  $rootScope.A=A
})

/we zien	,

<div ng-app="app" class="ng-scope">
	<!-- ngRepeat: a in A -->
	<div ng-repeat="a in A" class="ng-scope">
		<h1 class="ng-binding">Robert Downey Jr.</h1>
		<h1 class="ng-binding">Tony Stark / Iron Man</h1>
	</div>
	<!-- end ngRepeat: a in A -->
	<div ng-repeat="a in A" class="ng-scope">
		<h1 class="ng-binding">Chris Evans</h1>
		<h1 class="ng-binding">Steve Rogers / Captain America</h1>
	</div>
	<!-- end ngRepeat: a in A -->

</div>

/ we zien dat <div ng-repeat="..."> ook onderdeel is van het template	, want deze zien we ook steeds terug	,


/ 7	.

/ Debug	,

/ compile	,

/ collectDirectives	,

var ngRepeatDirective = ['$parse', '$animate', function($parse, $animate) {
  var NG_REMOVED = '$$NG_REMOVED';
  var ngRepeatMinErr = minErr('ngRepeat');
  return {
    transclude: 'element',
    priority: 1000,
    terminal: true,
    $$tlb: true,
    link: function($scope, $element, $attr, ctrl, $transclude){
...

/ applyDirectivesToNode	,

        if (directiveValue = directive.transclude) {
          hasTranscludeDirective = true;
           terminalPriority = directive.priority;
1000

          if (directiveValue == 'element') {
/ JA
            $template = groupScan(compileNode, attrStart, attrEnd);
/ $template[0]===compileNode
true
/ compileNode=
  <div ng-repeat="a in A">
    <h1>Eric J.</h1>
  </div>

            $compileNode = templateAttrs.$$element = jqLite(document.createComment(' ' + directiveName + ': ' + templateAttrs[directiveName] + ' '));
/ $compileNode=
	[<!-- ngRepeat: a in A -->]
            compileNode = $compileNode[0];
	<!-- ngRepeat: a in A -->

            replaceWith(jqCollection, jqLite(sliceArgs($template)), compileNode);
/ het template wordt rm , dus <div ng-repeat="...">...</div> rm	 van parent <div ng-app> en er komt voor in de plaats <!-- ngRepeat: a in A -->
/s
    function replaceWith($rootElement, elementsToRemove, newNode) {
elementsToRemove
[ <div ng-repeat="a in A">
    <h1>Eric J.</h1>
</div> 
]
newNode
	<!-- ngRepeat: a in A -->

      if (parent) {
<div ng-app>
        parent.replaceChild(newNode, firstElementToRemove);
/ we zien	,
<div ng-app>
	<!-- ngRepeat: a in A -->
</div>

      elementsToRemove[0] = newNode;
	<!-- ngRepeat: a in A -->

/t
/ applyDirectivesToNode	,

            childTranscludeFn = compile($template,maxPriority, ...)
/ maxPriority=1000
/ de ng-repeat dir wordt NIET ...
/ want	,
           if ( (maxPriority === undefined || maxPriority > directive.priority) && directive.restrict.indexOf(location) != -1) {
/ NEE
maxPriority=1000
maxPriority>directive.priority	, NEE, want =
directive.restrict.indexOf(location="A")=0
	              match = directive;
/ NIET
      return match;
undefined
/ Geen directives dus	in node <div ng-repeat="...">,
/ We zitten nog steeds in applyDirectivesToNode (ng-repeat dir), en in compile van template, waar <div ng-repeat="..."> weer inzit, heet ng-repeat nu geen betekenis	,

/ dan compileNodes {{a.name}}	,
/ in $interpolate	,
          parts.push(fn = $parse(exp = text.substring(startIndex + startSymbolLength, endIndex)));

/ applyDirectivesToNode installs link fct uit deze dir	,
        var fn=function textInterpolateLinkFn(scope, node) {

/ Dan klaar met compile template	,
    function compile($compileNodes, transcludeFn, maxPriority, ignoreDirective,
      return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
/ $compileNodes=JQLite[1], op <div ng-repeat="...">...</div>

/t
/ in applyDirectivesToNode	,
            childTranscludeFn = compile($template, transcludeFn);
 / D
            linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
/ = link fct uit ng-repeat dir	,
/ $compileNode= <!-- ngRepeat: a in A --> , doet er WH niet toe, TOOD

              addLinkFns(null, linkFn, attrStart, attrEnd);

        if (directive.terminal) {
          nodeLinkFn.terminal = true;
          terminalPriority = Math.max(terminalPriority, directive.priority);
1000

      nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;
undefined
      nodeLinkFn.transclude = hasTranscludeDirective && childTranscludeFn;
childTranscludeFn
/ =publicLinkFn van de compile template=
  <div ng-repeat="a in A">
    <h1>Eric J.</h1>
  </div>

      return nodeLinkFn;

$compileNode=JQLite[<!-- ngRepeat: a in A -->]
compileNode=<!-- ngRepeat: a in A -->
/ Dit is de node die nu in de DOM is	, child van <div ng-repeat>	, de child die er was	,
  <div ng-repeat="a in A">
    <h1>Eric J.</h1>
  </div>
/ daarvan is de compile template=publicLinkFn nodeLinkFn.transclude	,
/ wat in $compileNodes in closure scope van publicLinkFn,  TODO

/ t
/ in compileNodes	, $nodeList=text,comment,text (was text,div,text)

/ t
/ doBootstrap
       scope.$apply(function() {
          element.data('$injector', injector);
          compile(element)(scope);
        });
/ compile(element=<div ng-app> ) is D	,

/ nu link	fase: call link fct	, maak ctrl ,

/ we komen in publicLinkFn, $compileNodes=<div ng-app>...</div> in closure scope (= local scope compile)	,

     function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) {
/ nodeList=text,comment,text

         node = stableNodeList[n];
#comment
         nodeLinkFn = linkFns[i++];

         childTranscludeFn = nodeLinkFn.transclude;
/ publicLinkFn=compiled template <div ng-repeat>	, 

          if (childTranscludeFn || (!boundTranscludeFn && transcludeFn)) {
              nodeLinkFn(childLinkFn, childScope, node, $rootElement, createBoundTranscludeFn(scope, childTranscludeFn || transcludeFn))

   function createBoundTranscludeFn(scope, transcludeFn) {
     return function boundTranscludeFn(transcludedScope, cloneFn, controllers){ 
/ scope=root scope, 
/ transcludeFn=compiled template	,

/t
/c
      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
        transcludeFn = boundTranscludeFn && controllersBoundTransclude;

            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);
/c
var ngRepeatDirective = ['$parse', '$animate', function($parse, $animate) {
    link: function($scope, $element, $attr, ctrl, $transclude){
/ ctrl=undefined
$transclude = function controllersBoundTransclude(scope, cloneAttachFn) {

       var expression = $attr.ngRepeat;
"a in A"
        lhs = match[1];
"a"
        rhs = match[2];
"A"
       valueIdentifier = match[3] || match[1];
"a"
        $scope.$watchCollection(rhs, function ngRepeatAction(collection){
/ $scope=root scope	,
/c
      $watchCollection: function(obj, listener) {
        var objGetter = $parse(obj);
/ obj="A"

        return this.$watch($watchCollectionWatch, $watchCollectionAction);

/ Klaar met compile, link (di maak crtls, call dir's link fcts)	,

/ Dan $rootscope.$digest	,
                    if ((value = watch.get(current)) !== (last = watch.last) &&
/c
      $watchCollection: function(obj, listener) {
        function $watchCollectionWatch() {
 ->         newValue = objGetter(self);
/ self=root scope	,
/we komen in gen code	,

(function(s,k,pw
/**/) {
var l, fn, p;
if(s === null || s === undefined) return s;
l=s;
s=((k&&k.hasOwnProperty("A"))?k:s)["A"];
/ k=undefined, dus =s.A, s=root scope	,
return s;
})
// s=[{...},{...}]	,

/ t
                      watch.fn(value, ((last === initWatchVal) ? value : last), current);
     $watchCollection: function(obj, listener) {
       function $watchCollectionAction() {
       ->   listener(newValue, oldValue, self);
/ listener is in de closure scope	,
/c
var ngRepeatDirective = ['$parse', '$animate', function($parse, $animate) {
    link: function($scope, $element, $attr, ctrl, $transclude){
        $scope.$watchCollection(rhs, function ngRepeatAction(collection){
->          var index, length,
// collection=[{...},{...}]	,

              previousNode = $element[0],     // current position of the node
#comment
          for (index = 0, length = collectionKeys.length; index < length; index++) {
          key = (collection === collectionKeys) ? index : collectionKeys[index];
            value = collection[key];
key:0
value: Object
$$hashKey: "003"
character: "Tony Stark / Iron Man"
name: "Robert Downey Jr."

/ per item in collection wordt er (hier) een nieuwe scope create, en wordt a:{...} die deze scope set, en wordt  publicLinkFn called,die 
        if (cloneConnectFn) cloneConnectFn($linkNode, scope);
/ adds template met {{a.name}} aan DOM
        if (compositeLinkFn) compositeLinkFn(scope, $linkNode, $linkNode);
/ calls linkFn, die ng-repeat scope.$watch calls, die een watcher installs op deze ng-repeat scope (voor elk item is er zo'n aparte scope)

 
           } else {
              // new item which we don't know about
              childScope = $scope.$new();
             childScope[valueIdentifier] = value;
/ childScope.a={...}, dus a key in ng-repeat scope, straks bij volgende item is er een andere ng-repeat scope, met a als key	,
//////////////////////////////
valueIdentifier: "a" /uit closure scope, de local scope van de ng-repeat's linkf fct	,
value: Object
$$hashKey: "003"
character: "Tony Stark / Iron Man"
name: "Robert Downey Jr."

            if (!block.scope) {
/ JA
              $transclude(childScope, function(clone) {
									... / (*)
/ in nodeLinkFn was $transclude= ... controllersBoundTransclude, uiteindelijk wordt er een nieuwe scope create en komen we in publicLinkFn (=compiled ng-repeat template)	, en komen we terug in (*)	,
/ (*) heet verderop cloneAttachFn, cloneFn,cloneConnectFn	,
/c
      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
        function controllersBoundTransclude(scope, cloneAttachFn) {
->        if (hasElementTranscludeDirective) {
            transcludeControllers = elementControllers;
[]
          return boundTranscludeFn(scope, cloneAttachFn, transcludeControllers);
/c

    function createBoundTranscludeFn(scope, transcludeFn) {
      return function boundTranscludeFn(transcludedScope, cloneFn, controllers) {
/ scope =root scope
/transcludeFn=publicLinkFn=compiled template <div ng-repeat="...">...</div>

       if (!transcludedScope) {
          transcludedScope = scope.$new();
/NEE
        var clone = transcludeFn(transcludedScope, cloneFn, controllers);
/c
   function compile($compileNodes, transcludeFn, maxPriority, ignoreDirective,
     return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
  ->      if (cloneConnectFn) cloneConnectFn($linkNode, scope);
/c
var ngRepeatDirective = ['$parse', '$animate', function($parse, $animate) {
    link: function($scope, $element, $attr, ctrl, $transclude){
       $scope.$watchCollection(rhs, function ngRepeatAction(collection){
           if (!block.scope) {
              $transclude(childScope, function(clone) {
/= (*)
->                clone[clone.length++] = document.createComment(' end ngRepeat: ' + expression + ' ');
/ nu is clone 2 DOM nodes	, template, comment	,
clone: JQLite[2]
0: div.ng-scope
1: comment
length: 2

                $animate.enter(clone, null, jqLite(previousNode));
/ previousNode komt uit de closure scope	,
/ = #comment <!-- ngRepeat: a in A -->
/ c
var $AnimateProvider = ['$provide', function($provide) {
  this.$get = ['$timeout', function($timeout) {
   return {
      enter : function(element, parent, after, done) {
        if (after) {
          after.after(element);
/c
...
  after: function(element, newElement) {
/ element=#comment
/ newElement=JQLite[template, #comment]

    var index = element, parent = element.parentNode;
/ parent=<div ng-app>
    forEach(new JQLite(newElement), function(node){
      parent.insertBefore(node, index.nextSibling);
/ index=#comment, index.nextSibling=#text "\n\n"
/ dus komen tempate, #comment achter #comment	,

/ in HTML	,

<div ng-app="app" class="ng-scope">
	<!-- ngRepeat: a in A -->
	<div ng-repeat="a in A" class="ng-scope">
		<h1>{{a.name}}</h1>
	</div>
	<!-- end ngRepeat: a in A -->
</div> 

/t
        if (cloneConnectFn) cloneConnectFn($linkNode, scope);
/D
        if (compositeLinkFn) compositeLinkFn(scope, $linkNode, $linkNode);
/c
           if (childTranscludeFn || (!boundTranscludeFn && transcludeFn)) {
/ NEE
            } else {
              nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);
/ node=#text {{a:name}}

/ calls de linkFn	,
   function addTextInterpolateDirective(directives, text) {
        var fn=function textInterpolateLinkFn(scope, node) {
        ->    var parent = node.parent(),
                bindings = parent.data('$binding') || [];
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
/ scope = ng-repeat scope	,

/ we set een watcher op een ng-repeat scope	, NB we zijn nu ook in een watcher.fn, op de root scope	, in $watchCollectionAction, set in de ng-repeat dir's link fct, met $scope.$watchCollection	,

/t
    function createBoundTranscludeFn(scope, transcludeFn) {
      return function boundTranscludeFn(transcludedScope, cloneFn, controllers) {
        var clone = transcludeFn(transcludedScope, cloneFn, controllers);
/ D
	return clone


/ t
/ Volgende	,
        $scope.$watchCollection(rhs, function ngRepeatAction(collection){
          for (index = 0, length = collectionKeys.length; index < length; index++) {
            if (nextBlockOrder[index - 1]) previousNode = getBlockEnd(nextBlockOrder[index - 1]);
#comment / = comment block van net hierboven	,

          } else {
              childScope = $scope.$new();
            childScope[valueIdentifier] = value;
/ childScope.a:{...}, dus nu a key in een andere scope	,
/////////////////////////

/ publicLinkFn wordt called, in het ng-repeat template speelt de ng-repeat dir geen rol, alleen {{a.name}}, dus de link fct van deze interpolate dir wordt called	, (dat is wat publicLinkFn doet)	,

/t
var ngRepeatDirective = ['$parse', '$animate', function($parse, $animate) {
    link: function($scope, $element, $attr, ctrl, $transclude){
       $scope.$watchCollection(rhs, function ngRepeatAction(collection){
          for (index = 0, length = collectionKeys.length; index < length; index++) {
/ Geen volgende,	

/t
Scope.prototype
      $watchCollection: function(obj, listener) {
        var self = this;
root scope
       function $watchCollectionAction() {
          listener(newValue, oldValue, self);
/ D
/ this='n watcher, want  we zijn in	,
       watch.fn(value, ((last === initWatchVal) ? value : last), current);
/ self =root scope, maar $watchCollection is een closure,	

/t
Scope.prototype.$digest, this=root scope	, dus = root scope.__proto__.$digest	,

          do { // "traverse the scopes" loop

            if (!(next = (current.$$childHead ||
/ 1ste ng-repeat scope	,
          } while ((current = next));
/ JA
/ volgende,	
          traverseScopesLoop:
          do { // "traverse the scopes" loop

                    if ((value = watch.get(current)) !== (last = watch.last) &&
/c
    function $interpolate(text, mustHaveExpression, trustedContext) {
        fn = function(context) {
                part = part(context);
/ context=ng-repeat scope	, en deze heeft key a:{...}	,
part: "Robert Downey Jr.", want	,
/c
(function(s,k,pw
/**/) {
var l, fn, p;
if(s === null || s === undefined) return s;
l=s;
s=((k&&k.hasOwnProperty("a"))?k:s)["a"];
if(s === null || s === undefined) return s;
l=s;
s=s["name"];
return s;
})

/t
                      watch.fn(value, ((last === initWatchVal) ? value : last), current);

           scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
->              node[0].nodeValue = value;

/t
            if (!(next = (current.$$childHead ||
                (current !== target && current.$$nextSibling)))) {
             while(current !== target && !(next = current.$$nextSibling)) {
 /NEE
/ current=ng-repeat scope	, current.$$childHead=null, target=root scope	, current.$$nextSibling=2de ng-repeat scope	,
/ next = current.$$nextSibling wordt gedaan, en = 2de ng-repeat scope	,

          } while ((current = next));
/ JA
/ volgende,	
          traverseScopesLoop:
          do { // "traverse the scopes" loop


/ Einde ANGULAR NG-REPEAT

/ ANGULAR COMPILE

[eric@walnut 8_compile]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/8_compile

/ 7	.

<div ng-app="app">
    <foo>
    </foo>
</div>

app.directive("foo",function(){
  return{
    restrict: "E",
    template:'<input type="text" ng-model="data.message">'+
      '<h1>{{data.message}}</h1>'
  }
})

/ OK	,

/7	.

    <foo>
      <input type="text" ng-model="data.message">
      <h1>{{data.message}}</h1>
    </foo>

app.directive("foo",function(){
  return{
    restrict: "E",
    transclude:true,
    template:"<div ng-transclude></div>",
  }
})

/ OK

/ we zien in de instanceCache	,
fooDirective
inputDirective
ngModelDirective
/ een interpolate dir komt niet in de instanceCache, want het is steeds een andere, iedere {{...}} geeft een nieuwe gen code	,
/////////////////////

/ compile fooDirective	,
    function applyDirectivesToNode(directives, compileNode,...){
        if (directiveValue = directive.transclude) {
          hasTranscludeDirective = true;
          } else {
            $template = jqLite(jqLiteClone(compileNode)).contents();
            $compileNode.empty(); // clear contents
            childTranscludeFn = compile($template, transcludeFn);
					}
      nodeLinkFn.transclude = hasTranscludeDirective && childTranscludeFn;
      return nodeLinkFn;

/ link	,
/ heeft $linkNode=<div ng-app> in closure scope=toendertijd local scope compile 
      return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
         if (cloneConnectFn) cloneConnectFn($linkNode, scope);
/ NEE
        if (compositeLinkFn) compositeLinkFn(scope, $linkNode, $linkNode);
/ JA
...

/node=<foo>
            childTranscludeFn = nodeLinkFn.transclude;
            if (childTranscludeFn || (!boundTranscludeFn && transcludeFn)) {
              nodeLinkFn(childLinkFn, childScope, node, $rootElement,
                createBoundTranscludeFn(scope, childTranscludeFn || transcludeFn)

/ $element=<div ng-transclude>
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);


      return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
       if (cloneConnectFn) cloneConnectFn($linkNode, scope);
/ sets 
        if (compositeLinkFn) compositeLinkFn(scope, $linkNode, $linkNode);
/c
...
var ngTranscludeDirective = ngDirective({
  link: function($scope, $element, $attrs, controller) {
->    controller.$transclude(function(clone) { $scope=$scope /* ERICJ */
/c
...
  function createBoundTranscludeFn(scope, transcludeFn) {
    return function boundTranscludeFn(transcludedScope, cloneFn, controllers) {
/ scope=root scope	,
        if (!transcludedScope) {
          transcludedScope = scope.$new();
        var clone = transcludeFn(transcludedScope, cloneFn, controllers);
/c
      return function publicLinkFn(scope, cloneConnectFn, transcludeControllers){
/ heeft $linkNode=template=text,input,text,h1,text in closure scope=toendertijd local scope van compile 
/ scope=ng-transclude scope	,
         if (cloneConnectFn) cloneConnectFn($linkNode, scope);
/ JA 
/c
var ngTranscludeDirective = ngDirective({
    link: function($scope, $element, $attrs, controller) {
    controller.$transclude(function(clone) { $scope=$scope /* ERICJ */
/ scope=ng-transclude scope	, maar niet used	,
->      $element.empty();
      $element.append(clone);

        if (compositeLinkFn) compositeLinkFn(scope, $linkNode, $linkNode);
/ JA
/ execs link fct	,
/ deze uses scope wel	,
/c
       var fn=function textInterpolateLinkFn(scope, node) {
/ scope=ng-transclude scope	,
 				      var interpolateFn = $interpolate(text, true);
/=
        fn = function(context) {

       scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;

/ in root scope.__proto__.$digest	,
                    if ((value = watch.get(current)) !== (last = watch.last) &&
/ current=ng-transclude scope	,

/ We zien dat ook ng-transclude->nieuwe scope	, maar hij wordt niet used in de cloneConnectFn  , want je sets DOM elems, 
/ maar wel in compositeLinkFn	,
/ de reden is dat al 2 hebben 	,	
	<div ng-transclude></div>
	<div ng-transclude></div>
/ dan isolated scopes	,

 
/ 7	. 

/ see 19c	, 

/ Intermezzo

/ 13	.

/ In 
    function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
        var fn=function textInterpolateLinkFn(scope, node) {
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
        directives.push({
          compile: valueFn(fn)

/ is interpolateFn de gen code die de models uit de scopes	haalt, dat wordt dus de get fct van de watcher, die de link fct installs	,

/ 13	.

    <div foo bar="baz(msg)" ></div>

app.directive("foo",function(me,you){
  return{
    template:'<div ng-click="bar({msg:you})">Dial {{fct()}}</div>',


    function applyDirectivesToNode(directives, compileNode, templateAttrs, transcludeFn,
        if (directive.template) {
            $compileNode.html(directiveValue);

/ we zien dat de foo dir -> de template wordt child van node waar foo dir in is	,

/ 13	. 

/ In addDirective	,

       directives = $injector.get(name + Suffix),
/c
            return instanceInjector.invoke(provider.$get, provider);
/c
                var directive = $injector.invoke(directiveFactory)

/ dus	,
$injector.get("fooDirective") calls 
$injector.invoke("fooDirectiveProvider.$get), calls 
$injector.invoke(ngControllerDirective) 

/ $injector.invoke calls de fct, maar inj ook de deps=params	,

/ 13	. 

/ $injector.instantiate calls ook $injector.invoke	, nl op de ctor	, die krijgt dus ook deps inj	,

/ Einde Intermezzo

/ 13	. 

  <div ng-controller="ctrl as ctrl">
    <div foo bar  ></div>

/ wordt	,

  <div ng-controller="ctrl as ctrl">
    <div foo bar  >
    	<div ng-click="baz(value)">
				Dial {{fct()}} and {{fun()}} and {{fun2()}} and {{fun3()}}
			</div>
		</div>


.controller("ctrl",function($scope){
  $scope.baz=function(m){
    console.log(m)
  }
  this.gee=function(){return "Gras"}
  $scope.hee=function(){return "Bird"}
})

.directive("foo",function(){
  return{
    scope:true,
    template:'<div ng-click="baz(value)">Dial {{fct()}} and {{fun()}} and {{fun2()}} and {{fun3()}}</div>',
    link:function(scope){
      scope.fct=function(){
        return "Me" }
      scope.value="You"
    },
    controller:function($scope){
      var that=this
      $scope.fun=function(){ // had ook in link fct, maar kun je dan een ctrl fct call  , zoals we hier doen met that.func  ? TODO
        return that.func()}
      $scope.fun2=function(){
        return $scope.hee()}
      $scope.fun3=function(){
          return $scope.ctrl.gee()}
      this.func=function(){
        return "Flowers"}
    }
  }
})
.directive("bar",function(){
  return{
    scope:true,
    link:function(scope){
      scope.fct=function(){
        return "Me2" }
      scope.value="You2"
    },
    controller:function($scope){
      var that=this
      $scope.fun=function(){
        return that.func()}
      $scope.fun2=function(){
        return $scope.hee()+"2"}
      $scope.fun3=function(){
        return $scope.ctrl.gee()+"2"}
      this.func=function(){
        return "Flowers2"}
    }
  }
})

/ Dit gaat toevallig goed	, 
/ want directives=[bar,foo], na sort	, 
/ hij maakt eerst een new scope, en dan een isol scope, (die wel een child is van de new scope, maar niet prototypical)	,

/ Maar als we 
.directive("foo",function(){ -> .directive("bar",function(){
/ en 
.directive("bar",function(){ -> .directive("foo",function(){

/ dan nog steeds	,
/ want directives=[bar,foo], na sort	, 
/ maar nu maakt hij de eerst een isol scope, en daarop kan hij geen new scope maken 	, dat doen ze zo	, in applyDirectivesToNode

            assertNoDuplicate('new/isolated scope', newIsolateScopeDirective, directive, $compileNode);
/ De newIsolateScopeDirective moet undefined zijn	, en dat is hij nu niet	,

/ In het geval dat bar new scope, en foo isol scope,	krijgen de controllers en link fct ook de goede scopes	, 

/ 13	. 

/ 19c3

< div foo bar> 	, foo heeft scope:true, en bar heeft scope:true

/ function compositeLinkFn heeft list van child nodes,	 en bijbehorende nodeLinkFns	, in applyDirectivesToNode was set nodeLinkFn.scope	, en daardoor kan compositeLinkFn de new scope create, en pass in to nodeLinkFn	,

/ 13	. 

/ op <div foo bar>	,

    function applyDirectivesToNode(directives, compileNode, templateAttrs, transcludeFn,
      for(var i = 0, ii = directives.length; i < ii; i++) {
        if (directiveValue = directive.scope) {
          newScopeDirective = newScopeDirective || directive;
/ bar	, 
/ de 1ste keer is newScopeDirective=undefined, dus wordt newScopeDirective=bar , en de 2de eerk als directive=foo, gebeurt er niets	,

      nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;
bar

      function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) {
           if (nodeLinkFn.scope) {
              childScope = scope.$new();
              nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);
      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
          forEach(controllerDirectives, function(directive) {
            var locals = {
              $scope: directive === newIsolateScopeDirective || directive.$$isolateScope ? isolateScope : scope,
              $element: $element,
              $attrs: attrs,
              $transclude: transcludeFn
            }, controllerInstance;

            controller = directive.controller;

            controllerInstance = $controller(controller, locals);
            elementControllers[directive.name] = controllerInstance;
/ foo en bar	,

/ beide controlleres hebben elk een func fct	, maar ze set beiden in de new scope, 	en de controller ctor van bar execs het eerst, en dus die van foo overwrites die die de ctor van bar deed	, 

 




/ 13	.

/ In dit vb hebben de ng-controller , foo, bar directives allen 
	scope:true

	<div ng-controller="ctrl">
    <div foo bar  >
			<div ng-click="baz(value)">Dial {{fct()}} and {{fun()}} and {{fun2()}} and {{fun3()}}</div>
		</div>

.directive("foo",function(){
  return{
    scope:true,
    controller:function($scope){
...
    template:'<div ng-click="baz(value)">Dial {{fct()}} and {{fun()}} and {{fun2()}} and {{fun3()}}</div>',


.directive("bar",function(){
  return{
    scope:true,
    controller:function($scope){
...

/ in applyDirectivesToNode	,

/ 1 new scope 

       if (directiveValue = directive.scope) {
          newScopeDirective = newScopeDirective || directive;
/ Hij pakt de 1ste alleen	, bar in dit geval	, die kwam eerst	,


/ 2 controllers	,

          controllerDirectives[directiveName] = directive;
/ beide	,

controllerDirectives: Object

bar: Object
compile: function () {
controller: function ($scope){
index: 0
link: function (scope){
name: "bar"
priority: 0
require: "bar"
restrict: "A"
scope: true

foo: Object
compile: function () {
controller: function ($scope){
index: 0
link: function (scope){
name: "foo"
priority: 0
require: "foo"
restrict: "A"
scope: true
template: "<div ng-click="baz(value)">Dial {{fct()}} and {{fun()}} and {{fun2()}} and {{fun3()}}</div>"

/ 1 template.

       if (directive.template) {
          assertNoDuplicate('template', templateDirective, directive, $compileNode);
          templateDirective = directive;

/ door de assert kan er maar 1 templateDirective zijn	,

            $compileNode.html(directiveValue);


/ 2 link fct	,

              addLinkFns(null, linkFn, attrStart, attrEnd);

postLinkFns: Array[2]
0: function (scope){
	scope.fct=function(){return "Me"}
	scope.value="You"
}
1: function (scope){
	scope.fct=function(){return "Me2"}
	scope.value="You2"
}

      nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;

/ 13	.

/ we hebben de #text node	,
    Dial {{fct()}} and {{fun()}} and {{fun2()}} and {{fun3()}}

/ er is 1 interpolate dir	op deze node	,
/ de link fct van deze dir installs de watcher op de scope	, en de get fct van deze watcher, fn hier beneden, heeft execs for loops over alle parsed	, dus "fct()",	 "fun()"	, ...

   function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
        var fn=function textInterpolateLinkFn(scope, node) {
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });
        }
        directives.push({
          priority: 0,
          compile: valueFn(fn)
        });

/ de get fct van de watcher, interpolateFn,  heeft parts in z'n closure scope, en dat zijn de parsed "fct()", "fun()", ...

    function $interpolate(text, mustHaveExpression, trustedContext) {
      var 
          parts = [],
          parts.push(fn = $parse(exp = text.substring(startIndex + startSymbolLength, endIndex)));
       	fn = function(context) {
              if (typeof (part = parts[i]) == 'function') {
                part = part(context);
        return fn;

/ 13	

/ link fase	, 

    <div foo bar  >

     function compositeLinkFn(scope, nodeList, $rootElement, boundTranscludeFn) {
            if (nodeLinkFn.scope) {
/ JA
              childScope = scope.$new();

/ de node heeft een dir met scope:true	, 
/ er zijn er nu zelfs 2	,

              nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);
/c
      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {

          forEach(controllerDirectives, function(directive) {
            var locals = {
              $scope: directive === newIsolateScopeDirective || directive.$$isolateScope ? isolateScope : scope,
              $element: $element,
              $attrs: attrs,
              $transclude: transcludeFn
            }, controllerInstance;
            controller = directive.controller;

            controllerInstance = $controller(controller, locals);
/ Dus beide controllers krijgen dezelfde scope 	,
/c
    if(isString(expression)) {
        match = expression.match(CNTRL_REG),
/ /^(\S+)(\s+as\s+(\w+))?$/ 											/ we zien "as"

        constructor = match[1],										/ "ctrl"	,
        identifier = match[3];										/ als "as" er is	,
        expression = controllers.hasOwnProperty(constructor)
            ? controllers[constructor]						/ ctor	,
      	instance = $injector.instantiate(expression, locals);

      if (identifier) {
        locals.$scope[identifier] = instance;

/ 13	. 

/ ook new scopes gaan het template in	,

  <div ng-controller="ctrl as ctrl">
    <div foo bar  >
   		<div ng-click="baz(value)">
				Dial {{fct()}} and {{fun()}} and {{fun2()}} and {{fun3()}}
			</div>
		</div>

/ in nodeLinkFn , die van de div.ng-click en die van de #text , is scope=new scope die is create in compositeLinkFn bij nodeLinkFn op <div foo bar>	,
           if (nodeLinkFn.scope) {
              childScope = scope.$new();

/ de link fct van de interpolate dir installs de watcher op deze new scope,	

        var fn=function textInterpolateLinkFn(scope, node) {
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });
/ de interpolateFn krijgt straks de new scope mee

/13	. 

/ de link fcts van foo en bar dir worden called	,
/ eerst die van foo	,
           linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);
/ foo's linkFn.require="foo", dus elk eigen controller, want bar heeft linkFn.require="bar"	,
/ maar wij use ctrl niet nu als 4de arg van link fct	,

		link:function(scope){
			scope.fct=function(){ 
				return "Me" }
			scope.value="You"

/ en daar linkFn bar overwrites deze	,

///////////////////////////////////////////
/ bij controllers: eerst die van bar, dan die van foo	, en overwrites $scope props	, 
/ bij link fct andersom: eerst die van foo, dan die van bar	, en overwrites 

/ 13. 

 /we komen in $rootScope.$digest	,

/ op root scope en ctrl-scope zijn geen watchers, 
/ op new scope wel	,
                    if ((value = watch.get(current)) !== (last = watch.last) &&
/ current=new scope	(uit bar)	,
/c
       fn = function(context) {
              if (typeof (part = parts[i]) == 'function') {
                part = part(context);

/ 7	









/ 7	.

/ see 19c	,

/ ng-click directive	,

    template:'<div ng-click="bar()">Dial {{fct()}}</div>',

/ in angular.js	,
var ngEventDirectives = {};
forEach(
  'click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste'.split(' '),
  function(name) {
    var directiveName = directiveNormalize('ng-' + name);
    ngEventDirectives[directiveName] = ['$parse', function($parse) {
      return {
        compile: function($element, attr) {
/ attr={
	...,
	ngClick:"bar()"
}
          var fn = $parse(attr[directiveName]);
/ fct
/ gen code "bar" + 
/ TODO
          return function(scope, element, attr) {
/ link fct
            element.on(lowercase(name), function(event) {
              scope.$apply(function() {
                fn(scope, {$event:event});
              });
...
/ WH staan al deze dirs in ngEventDirectives[] om de $parse in hun closure scope te hebben	,
/ Meestal is compile	,
        compile: function($element, attr) {
          return function(scope, element, attr) {

/ Maar nu staat er iets tussen	,
        compile: function($element, attr) {
          var fn = $parse(attr[directiveName]);
          return function(scope, element, attr) {

/ Dus in de compile fase, applyDirectivesToNode,
            linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
/ wordt nu $parse called	, en gaat hij "bar()" parse	,

    this.tokens = this.lexer.lex(text);
this: Parser
tokens: Array[3]
0: Object
fn: function (self, locals) {				/ gen code	van "bar"	, 
index: 0
text: "bar"
__proto__: Object
1: Object
index: 3
json: false
text: "("
__proto__: Object
2: Object
index: 4
json: false
text: ")"

    var value = json ? this.primary() : this.statements();
/= primary hieronder, is een fct	,

/ dat gaat zo	,
/ via statements toch in primary	,

  primary: function () {
      var token = this.expect();
/ token van "bar"
      primary = token.fn; 												/ gen code	, is een fct	,
   while ((next = this.expect('(', '[', '.'))) {
      if (next.text === '(') {
        primary = this.functionCall(primary, context);

  functionCall: function(fn, contextGetter) {
->    return function(scope, locals) {
      var args = [];
      var context = contextGetter ? contextGetter(scope, locals) : scope;

/ Dit is value	, een fct dus	, 
/ de gen code van model "bar"  was ook al een fct	, 
/ TODO (bar is toch inj)

/ 13	.

    template:'<div ng-click="bar()">Dial {{fct()}}</div>',

/ Weer $parse, nu result saved op een andere plaats	, niet in de ngClick dir's link fct's closure scope, maar in de interpolate dir's link fct's scope watcher's get fct,	dat is de fn fct, die alle parses afloopt	,

/ 13	.

  <div ng-controller="ctrl">


/ in link fase	,
      instance = $injector.instantiate(expression, locals);
/ expression=
function ($scope,baz){
	$scope.baz=baz
}
/ instantiate calls invoke de ctor, expression,  dan inj $scope en baz,	
/ getService call factory("baz")	,
           var provider = providerInjector.get(servicename + providerSuffix);
"bazProvider"	,
            return instanceInjector.invoke(provider.$get, provider);

/ we deden	,
app.value("baz",function(){
  console.log("I am baz")
})
/ dan is de bazProvider.$get=valueFn(anon fct hier)	, invoke doet bazProvider.$get() en inj zijn er nu niet	, 
/ dus deze anon fct wordt return	, en wordt $scope.baz	,

/ 13	. 

/ in 1ste inst	,
    <div foo bar="baz()" ></div>

/ maar door template in foo dir	,

    <div foo bar="baz()" >
    	<div ng-click="bar()">Dial {{fct()}}</div>
		</div>

.directive("foo",function(me){
  return{
    scope:{ bar:"&", },
    template:'<div ng-click="bar()">Dial {{fct()}}</div>',
    link:function(scope){
      scope.fct=me
      scope.value="You"
    }
  }
})
/ foo is een isol scope dir	,

/ in nodeLinkFn van	, 
    <div foo bar="baz()" >

          isolateScope = scope.$new(true);

          forEach(newIsolateScopeDirective.scope, function(definition, scopeName) {
             case '&':
                parentGet = $parse(attrs[attrName]);
Parser.functionCall	,
attrs[attrName==="bar"]==="baz()"
/ deze is niet parsed	in compile fase, wel is de ngClick create en apply	, maar omdat er nu naar wordt ref	in de isol scope	, wordt hij lazy compile	,
/ "bar()" en "fct()"	uit het template zijn wel parsed in compile fase	,	

               isolateScope[scopeName] = function(locals) {
                  return parentGet(scope, locals);
                };

/ Dus isolateScope.bar=anon fct 	,

//////////////////////////////////
/ Dus bar wordt model in isol scope	, en het is een fct	,
/ WH fct is scope, want bar is def in DOM	,

/////////////////
/ Dus de attr bar wordt model (fct ) is isol scope	,

/ Kijk nog eens naar	,
.directive("foo",function(me){
  return{
    scope:{ bar:"&", },
    template:'<div ng-click="bar()">Dial {{fct()}}</div>',
    link:function(scope){
      scope.value="You"
      scope.fct=me
/////////////////////////
/ Hier zal dus bijgekomen	(eerder dan fct want de link fct execs later dan de child's link fct),
      scope.bar=function(locals) { 				/ see in nodeLinkFn bij isol scope	,
                  return parentGet(scope, locals);
                };

    }
  }
/ In de template staat "bar()" en "fct()"	, beiden zijn dus nu in de isol scope	,

/13	. 

/ nog in nodeLinkFn van	, 
    <div foo bar="baz()" >

       // RECURSION
        // We only pass the isolate scope, if the isolate directive has a template,
        // otherwise the child elements do not belong to the isolate directive.
        var scopeToChild = scope;
        if (newIsolateScopeDirective && (newIsolateScopeDirective.template || newIsolateScopeDirective.templateUrl === null)) {
/ JA
          scopeToChild = isolateScope;
        }

 /er is text child	, de template	,
   <div ng-click="bar()">

/ die heeft ook weer een child	, een #text node	,
   Dial {{fct()}}

/ de link fct op de #text node, uit het template,  doet	,
     scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
     	node[0].nodeValue = value;
     });
/ interpolateFn is de fn	, die calls Parser.functionCall "fct()"	, en fct is een model (fct) in de isol scope	, dus die wordt gevonden door de gen code	,

/ dan de link fct op  <div ng-click="bar()"> , uit het template, doet	,

        compile: function($element, attr) {
          var fn = $parse(attr[directiveName]);
/ Parser.functionCall() "bar()"	,
->        return function(scope, element, attr) {
            element.on(lowercase(name), function(event) {
              scope.$apply(function() {
                fn(scope, {$event:event});
              });
 
/ fn=Parser.functionCall "bar()"	, en bar is een model (fct) in de isol scope	, dus die wordt gevonden door de gen code	,

/ dan de link fct van 
    <div foo bar="baz()">

/ Eerder	,
      if (newIsolateScopeDirective === directive || directive.$$isolateScope) {
          post = cloneAndAnnotateFn(post, {isolateScope: true});
     }
     postLinkFns.push(post);
/ TODO

.directive("foo",function(me){
  return{
    scope:{ bar:"&", },
    template:'<div ng-click="bar()">Dial {{fct()}}</div>',
    link:function(scope){
->    scope.fct=me
      scope.value="You"

/ De isol scope krijgt fct model en value model	,

/ Intermezzo

/ Waar wordt me inj?

/ $provide.provider (en .factory, .value) maken providers	,

/ $CompileProvider.directive maakt directive providers, want calls $provide.provider	,
/ wij	,
app.directive("foo",function(me){
  return{
    scope:{ bar:"&", },
/c
   this.directive = function registerDirective(name, directiveFactory) {
/ maakt "fooDirectiveProvider"	, 
        $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
          function($injector, $exceptionHandler) {
/= "fooDirectiveProvider".$get
                var directive = $injector.invoke(directiveFactory)
/ hier wordt me inj	, dus als de directive wordt create	,

/ directives worden create in de compile fase, in addDirective	,
        for(var directive, directives = $injector.get(name + Suffix),
/= getService, calls factory	,
name+(Suffix==="Directive")="ngControllerDirective"
name+(Suffix==="Directive")="fooDirective"
/c
            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
/c
       $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
          function($injector, $exceptionHandler) {
/= $get 
->            var directives = [];
                var directive = $injector.invoke(directiveFactory)
/c
          : getService(key)
/ key="me"
/c
            var provider = providerInjector.get(servicename + providerSuffix);
/ "meProvider"
            return instanceInjector.invoke(provider.$get, provider);


/ Einde Intermezzo


/ 13	.

/ we waren in	,
      $apply: function(expr) {
          return this.$eval(expr);
/ DONE
            $rootScope.$digest();

/ de root scope en de ctrl-scope hebben $$watchers=[]	,
/ de isol scope heeft er 1	, op {{fct()}} in de #text node	,

     if ((value = watch.get(current)) !== (last = watch.last) &&
/c
/ we komen in Parser.functionCall	,

      var context = contextGetter ? contextGetter(scope, locals) : scope;
/ NEE, dus context===scope===isolate scope	,
      var fnPtr = fn(scope, locals, context) || noop;
function(){
 	return "Me"	
})
/ Want	,
/ =
      token.fn = extend(function(self, locals) {
        return (getter(self, locals));
/c
    fn = function(scope, locals) {
      return evaledFnGetter(scope, locals, promiseWarning);
/c
(function(s,k,pw
/**/) {
var l, fn, p;
if(s === null || s === undefined) return s;
l=s;
s=((k&&k.hasOwnProperty("fct"))?k:s)["fct"];
return s;
/ = 
function(){
 	return "Me"	
})

/ t in Parser.functionCall	,
     var v = fnPtr.apply
            ? fnPtr.apply(context, args)

/ Hier wordt dus isol scope.fct uit "{{fct()}}" called	,

/t in de inner fct fn van $interpolate die get fct is van de isol scope's watcher	,
               part = part(context);
"Me"

/ dan in de fn fct van de watcher	,
           scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;

/ we zien "Dial me"	,

/ 13 

/ we click  de div ng-click 	,

/ SAMENVATTING

	<div foo bar="baz()" ></div>
    <div ng-click="bar()">Dial {{fct()}}</div>

/ het is een 2-staps raket	,

isol scope.bar=function(locals) {
        return parentGet(scope, locals);
     };
ctrl-scope.baz=function(){
	console.log("I am baz")

/ Einde SAMENVATTING

/ we vallen in	,

        compile: function($element, attr) {
          var fn = $parse(attr[directiveName]);
          return function(scope, element, attr) {
            element.on(lowercase(name), function(event) {
->            scope.$apply(function() {
                fn(scope, {$event:event});
              });

/ de stack trace is nu	,

(anonymous function) (angular.js:17734)
(anonymous function) (angular.js:2608)
forEach (angular.js:300)
eventHandler (angular.js:2607)

/ isol scope.$apply is nodig,	 

/ eerst  ng-click="bar()"	,

                fn(scope, {$event:event});
/ c
functionCall	,
      var fnPtr = fn(scope, locals, context) || noop;
/c
      token.fn = extend(function(self, locals) {
        return (getter(self, locals));
/c
    fn = function(scope, locals) {
      return evaledFnGetter(scope, locals, promiseWarning);
/c
(function(s,k,pw
/**/) {
var l, fn, p;
if(s === null || s === undefined) return s;
l=s;
s=((k&&k.hasOwnProperty("bar"))?k:s)["bar"];
return s;
})
/ s= isol scope.bar=function(locals) {
        return parentGet(scope, locals);
     };

/ t in functionCall	, 
            ? fnPtr.apply(context, args)
/c
              case '&':
                parentGet = $parse(attrs[attrName]);
/ attrName="bar", attrs["bar"]="baz()"	,
                isolateScope[scopeName] = function(locals) {
->                  return parentGet(scope, locals);
/ scope = ctrl-scope	, 

/ scope is arg van parentGet, want	,
<div ng-controller="ctrl" class="ng-scope">
		<div foo="" bar="baz()" class="ng-isolate-scope">
			<div ng-click="bar()" class="ng-binding">Dial Me</div></div>
		</div>

/ hij heeft de scope=ctrl-scope nodig om de model , key="baz" te vinden	,

/c
/ weer in functionCall	,
/ nu bar="baz()"

      var fnPtr = fn(scope, locals, context) || noop;
/c
(function(s,k,pw
/**/) {
var l, fn, p;
if(s === null || s === undefined) return s;
l=s;
s=((k&&k.hasOwnProperty("baz"))?k:s)["baz"];
return s;
})
/ s=ctrl-scope.baz=function(){
		console.log("I am baz")
	}

//////////////////////////
/ door
	<div bar="baz()">
	scope:{bar:"&"}
/ Je zegt in het attr welke fct in de parent scope van de isol scope hij moet resolve	,

/ met () in "bar()" zeg je dat het om een fct gaat	, en wordt in functionCall	,
            ? fnPtr.apply(context, args)


/ 7	. 

/ interpolate met args	,

/ 19_2	,

    <div foo bar="baz(msg)" ></div>

app.value("baz",function(m){
  console.log("I am "+m)
})
app.directive("foo",function(me,you){
  return{
    scope:{ bar:"&", },
    template:'<div ng-click="bar({msg:you})">Dial {{fct()}}</div>',

/ Dus	HTML wordt,
    <div foo bar="baz(msg)" >
    	<div ng-click="bar({msg:you})">Dial {{fct()}}</div>
		</div>

/ in compile fase gaat "bar({msg:you})" en fct() parse	, en gaat ng-click dir create	, 
/ "baz(msg)" wordt pas compile in link fase door	,
    scope:{ bar:"&", },

/ 13. 	

/ parse  "bar({msg:you})"	,

forEach( 'click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste'.split(' '),
  function(name) {
    var directiveName = directiveNormalize('ng-' + name);
    ngEventDirectives[directiveName] = ['$parse', function($parse) {
      return {
        compile: function($element, attr) {
->          var fn = $parse(attr[directiveName]);
/ attr={ngClick: "bar({msg:you})", ...}

    this.tokens = this.lexer.lex(text);
tokens: Array[8]
0: Object
fn: function (self, locals) {	/ gen get model code	,
index: 0
text: "bar"
__proto__: Object
1: Object
index: 3
json: false
text: "("
__proto__: Object
2: Object
index: 4
json: false
text: "{"
__proto__: Object
3: Object
fn: function (self, locals) {		/ gen get model code	,
index: 5
json: true
text: "msg"
__proto__: Object
4: Object
index: 8
json: true
text: ":"
__proto__: Object
5: Object
fn: function (self, locals) {		/ gen get model code	,
index: 9
text: "you"
__proto__: Object
6: Object
index: 12
json: true
text: "}"
__proto__: Object
7: Object
index: 13
json: false
text: ")"

    var value = json ? this.primary() : this.statements();
/c
  primary: function () {

      var token = this.expect();
      primary = token.fn;
/ gen get model code van "bar"	,
/ bar wordt straks een model in isolate scope	, omdat scope:{bar:"&"}	,

   while ((next = this.expect('(', '[', '.'))) {
      if (next.text === '(') {
        primary = this.functionCall(primary, context);
/c
        argsFn.push(this.expression());
/c
  primary: function () {
    } else if (this.expect('{')) {
      primary = this.object();
/c
        var token = this.expect(),
        key = token.string || token.text;
"msg"
/ er is token.fn=WH gen get model "msg" uit TODO, maar nu is "msg" nooit in een scope	, en wordt ook niet used	,
        this.consume(':');
        var value = this.expression();
/ value=gen get model "you" uit TODO	, want	,
/c
  primary: function () {
      var token = this.expect();
      primary = token.fn;
    return primary;
/ primary=token.fn=gen get model "you" uit TODO

/t
  object: function () {
        var value = this.expression();
/ D
        keyValues.push({key: key, value: value});
/ key="msg", value=gen get "you" model uit TODO
    this.consume('}');
    return extend(function(self, locals) {
      var object = {};
      for (var i = 0; i < keyValues.length; i++) {
        var keyValue = keyValues[i];
        object[keyValue.key] = keyValue.value(self, locals);
      }
      return object;
    }, {
      literal: true,
      constant: allConstant
    });

/t
  functionCall: function(fn, contextGetter) {
    var argsFn = [];
        argsFn.push(this.expression());
/D
argsFn=[object-fct hierboven]	,
    this.consume(')');
   return function(scope, locals) {
     for (var i = 0; i < argsFn.length; i++) { 	/ heeft argsFn in 'n closure scope	,
        args.push(argsFn[i](scope, locals));
      var fnPtr = fn(scope, locals, context) || noop;

/t
  primary: function () {
   while ((next = this.expect('(', '[', '.'))) {
      if (next.text === '(') {
        primary = this.functionCall(primary, context);
/ D

/t
  filterChain: function() {
    var left = this.expression();
/D

/t
  statements: function() {
        return (statements.length === 1)
            ? statements[0]
/t
Parser.parse
    var value = json ? this.primary() : this.statements();
/D
value=functionCall

/ t
forEach(
  'click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste'.split(' '),
  function(name) {
    var directiveName = directiveNormalize('ng-' + name);
    ngEventDirectives[directiveName] = ['$parse', function($parse) {
      return {
        compile: function($element, attr) {
          var fn = $parse(attr[directiveName]);
functionCall hierboven	,
/ D
          return function(scope, element, attr) {
						...

/ 13	.

/ link fase, nodeLinkFn van 
    <div foo bar="baz(msg)" ></div>

          isolateScope = scope.$new(true);
          forEach(newIsolateScopeDirective.scope, function(definition, scopeName) {
/ voor elke prop in isol scope	,
              case '&':
                parentGet = $parse(attrs[attrName]);
/ attrs[attrName="bar"]="baz(msg)"

    this.tokens = this.lexer.lex(text);
tokens: Array[4]
0: Object
fn: function (self, locals) {
index: 0
text: "baz"
__proto__: Object
1: Object
index: 3
json: false
text: "("
__proto__: Object
2: Object
fn: function (self, locals) {
index: 4
text: "msg"
__proto__: Object
3: Object
index: 7
json: false
text: ")"

    var value = ... : this.statements();
/c
  primary: function () {

      var token = this.expect();
      primary = token.fn;
/= gen get model "baz" code latere scope of locals	, 

    while ((next = this.expect('(', '[', '.'))) {
      if (next.text === '(') {
        primary = this.functionCall(primary, context);
/c
        argsFn.push(this.expression());
argsFn: Array[1]
0: function (self, locals) {
/= gen get model "msg" uit self (=latere scope) of locals 
/ NB. "msg" wordt straks uit locals gehaald, locals={msg:"You"}, een obj dat hij meekrijgt,	 

    this.consume(')');
    var parser = this;
    return function(scope, locals) {
      for (var i = 0; i < argsFn.length; i++) {
        args.push(argsFn[i](scope, locals));
      }
      var fnPtr = fn(scope, locals, context) || noop;
...

/t
  primary: function () {
    while ((next = this.expect('(', '[', '.'))) {
      if (next.text === '(') {
        primary = this.functionCall(primary, context);
/ D

/t
Parser.parse	,
    var value = json ? this.primary() : this.statements();
/ D

/t
             case '&':
                parentGet = $parse(attrs[attrName]);
attrs[attrName='bar']="baz(msg)"
parentGet=functionCall
                isolateScope[scopeName] = function(locals) {
                  return parentGet(scope, locals);
                };
/ Hier staat dus: isolate scope.bar=...
/ Omdat er staat parentGet(scope,...) en scope=ctrl-scope, heet deze fct parentGet	, op andere plaatsen heet hij fn	,

/ 13	.

/ de #text node {{fct()}}'s interpolate dir's link fct installs isol scope's watcher	, 
           scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;

/ in isolate scope's $digest	,
                    if ((value = watch.get(current)) !== (last = watch.last) &&
current=isol-scope	,
/ c
    function $interpolate(text, mustHaveExpression, trustedContext) {
          parts.push(fn = $parse(exp = text.substring(startIndex + startSymbolLength, endIndex)));
       fn = function(context) {
->             part = part(context);
/ part= fct die functionCall returns	,
/c
      var fnPtr = fn(scope, locals, context) || noop;
/ scope=isol-scope	, daarin vindt hij	,
function(){return "Me"}

            ? fnPtr.apply(context, args)

/t in isol-scope's $digest	,
                  if ((value = watch.get(current)) !== (last = watch.last) &&
value="Me"	,
                      watch.fn(value, ((last === initWatchVal) ? value : last), current);
/c
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
->              node[0].nodeValue = value;

/ 7	.

/ we click <div ng-click="bar({msg:you})">

  <div ng-controller="ctrl">
    <div foo bar="baz(msg)" >
    	<div ng-click="bar({msg:you})">Dial {{fct()}}</div>
		</div>

/ "bar({msg:you})" wordt parsed, omdat ng-click een dir is en een compile fct heeft	,  see applyDirectivesToNode	,
       } else if (directive.compile) {
            linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
/ "baz(msg)" wordt parsed, omdat in nodeLinkFn	,
          forEach(newIsolateScopeDirective.scope, function(definition, scopeName) {
             case '&':
                parentGet = $parse(attrs[attrName]);
                isolateScope[scopeName] = function(locals) {
                  return parentGet(scope, locals);
                };

/ ISOLATE SCOPE GENERATED FUNCTIONS 

/ fn (ng-click) en parentGet (bar) zijn hetzelfde: parsed strings, die fct calls zijn, 
/ beide zijn fcts die Parser.functionCall returns, ze hebben fn (heet ook zo) en argsFn in hun closure scope, dat zijn gen code	, 	
/ fn resolves isol-scope.bar en parentGet resolves ctrl-scope.baz	,
/ fn resolves isol-scope.bar, en calls 'm, die calls parentGet, die weer is als fn, en parentGet resolves ctrl-scope.baz	, en calls 'm	,
 



/ er staan inderdaad 2 fct calls	, het is een 2-staps raket	, 
/ in de link fase, in nodeLinkFn van <div foo bar="baz(msg)" > wordt door {bar:"&"} "baz(msg)" parsed (omdat er bar=... staat), en set in de isol-scope.bar als function(scope,locals)	, een fct met gen code erin	,
/ "bar({msg:you})" was als parsed in compile fase, omdat ng-click in de compile fct wordt parsed	,en saved als fn=function(scope,locals) in js closure scope van click handler	, 
/bij click wordt deze fn called, met uit de js closure scope de isol-scope	, en hieruit worden de models "bar" en "you" resolved	, tot isol-scope.bar  en tot "You"	, en dan wordt isol-scope.bar apply,met "You" als arg	, (en met de isol-scope als arg, maar daar doet isol-scope.bar niets mee	,  isol-scope.bar=
///////////////////
function(locals) { 
      return parentGet(scope, locals);	/=parsed "baz(msg)", (net als fn hierboven , die ctrl-scope.baz gaat call	, locals={msg:"You"}, een kleine scope, waaruit msg wordt resolved	,
 };
////////////////////
/ scope=ctrl-scope, uit de js closure scope= local scope van nodeLinkFn	, 
/ dan wordt parsed "baz(msg)" called	, resolves "baz" uit ctrl-scope en msg uit locals, en apply	, 



/ de locals {msg:you} is een kleine scope, baz(msg) resolves msg uit deze , dus you	,

/ scope is extension van DOM, dus baz is te vinden in de ctrl-scope, en bar in de isol-scope, net als fct	, en you	,
/ msg is een local , niet in een scope	,
/ In <div foo bar="baz(msg)" > zien we de def van bar	, 

/ foo is de isol scope dir	, maar de scope van de node is ctrl-scope, bijv baz is een model in de ctrl-scope	, 
/ Maar we zien bij RECURSION dat de template in foo , dat is de div.ng-click, de isol scope krijgt	.
/ isol-scope.bar=parsed "baz(msg)"	,
/ parsing doet niets met scopes, maar de parsed string straks wel	, want bijv baz in "baz(msg)" is model in de ctrl-scope	, en  bar in "bar({msg:you})" is model in isolate scope	, dus daar zijn ze te vinden	,
/ de call is fn=de parsed "bar({msg:you})",  en fn krijgt de isol-scope als args, eerst worden de args resolved: de you model wordt door gen code uit de isol-scope gelezen: "You"	, dan wordt los daarvan de bar model (fct) door gen code uit de isol-scope gehaald (see case "&" in nodeLinkFn),	 
function(locals) {
	return parentGet(scope, locals);	/ parentGet=parsed "baz(msg)", en heet zo omdat krijgt scope=ctrl-scope	, want hij moet model baz uit de ctrl-scope lezen	,
};
/ met	,
parentGet = $parse(attrs[attrName]); / = parsed "baz(msg)"	,

.controller("ctrl",function($scope){
  $scope.baz=function(msg){
    console.log(msg)
  }
app.directive("foo",function(me,you){
  return{
    scope:{ bar:"&", },
   ,template:'<div ng-click="bar({msg:value})">Dial {{fct()}}</div>'
    ,link:function(scope){
      scope.fct=function(){ return "Me" }
      scope.value="You"
    }


/ waarom de volgende constructie	,
      function nodeLinkFn(..., scope,...){
             case '&':
                parentGet = $parse(attrs[attrName]);
                isolateScope[scopeName] = function(locals) {
                  return parentGet(scope, locals);
/ en niet	,
             case '&':
                parentGet = $parse(attrs[attrName]);
                isolateScope[scopeName] = parentGet 

/ foo is een directive op de div node, en van deze node zijn we in de nodeLinkFn	,
/ omdat je isol-scope.bar alleen locals als arg wilt geven, en scope=ctrl-scope wordt uit de closure scope gehaald	,
/c
forEach(
  'click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste'.split(' '),
  function(name) {
    ngEventDirectives[directiveName] = ['$parse', function($parse) {
      return {
       compile: function($element, attr) {			/ called in compile fase
          var fn = $parse(attr[directiveName]); / heeft niets te doen met scope
/ attr["ngClick"]="bar({msg:you})"
/ fn=fct die functionCall returns	,
          return function(scope, element, attr) {	/=link fct , called in link fase, dan is de scope wel bekend, en ng-click is attr op div in template van isol-scope dir foo, dus deze link fct wordt called met de isol-scoe	,
            element.on(lowercase(name), function(event) {
              scope.$apply(function() {
->                fn(scope, {$event:event}); /=parsed "bar({msg:you})" , scope=isol-scope, uit de js closure scope	,
/=
    return function(scope, locals) {		// die Parser.functionCall returns	,
/ scope=isol-scope	, want in template van isol scope dir foo	,
      for (var i = 0; i < argsFn.length; i++) {
        args.push(argsFn[i](scope, locals));
/ calls argsFn[0]=parsed "{msg:you}" , dus geef scope=isol-scope om zo de model "you" te vinden	,
/c
    return extend(function(self, locals) {
      var object = {};
      for (var i = 0; i < keyValues.length; i++) {
        var keyValue = keyValues[i];
"msg"
        object[keyValue.key] = keyValue.value(self, locals);
/= obj {msg:you}, want	,
(function(s,k,pw
/**/) {
var l, fn, p;
if(s === null || s === undefined) return s;
l=s;
s=((k&&k.hasOwnProperty("you"))?k:s)["you"];
return s;
})
/ s=isol scope.you="You"	,


      }
      return object;
{msg:"You"}
    }, {
      literal: true,
      constant: allConstant
    });
      }

      var fnPtr = fn(scope, locals, context) || noop;
/ geen args	,
/c
(function(s,k,pw
/**/) {
var l, fn, p;
if(s === null || s === undefined) return s;
l=s;
s=((k&&k.hasOwnProperty("bar"))?k:s)["bar"];
return s;
})
/ s=isol-scope.bar=
/eerder, in link fase, in nodeLinkFn van <div foo bar="baz(msg"">, werd de isol-scope create	, en 
             case '&':
                parentGet = $parse(attrs[attrName]); / "baz(msg)"
attr["bar"]="baz(msg)"	,
                isolateScope[scopeName] = function(locals) {
                  return parentGet(scope, locals);
                }; 
								/ hier staat:  isol-scope.bar=...

            ? fnPtr.apply(context, args)
/ context=isol-scope	, maar de anon fct hieronder doet er niets mee	, 
/ args={msg:"You"}
/s
             case '&':
                parentGet = $parse(attrs[attrName]);
                isolateScope[scopeName] = function(locals) {
->                  return parentGet(scope, locals);
/ 
/ this=isol-scope, maar de anon fct hier doet er niets mee	,
/ weer in fct die functionCall returns	,= parsed "baz(msg)"	,
    return function(scope, locals) { 	/ die Parsed.functionCall returns 
/scope=ctrl-scope	,
/locals={msg:"You"}	,
/ locals is een soort kleine scope, een key:value collectie	,
      for (var i = 0; i < argsFn.length; i++) {
        args.push(argsFn[i](scope, locals));
/c
(function(s,k,pw
/**/) {
var l, fn, p;
if(s === null || s === undefined) return s;
l=s;
s=((k&&k.hasOwnProperty("msg"))?k:s)["msg"];
return s;
})
/ Nu haalt hij "msg" uit locals, en niet uit de ctrl-scope (msg is niet eens een model in ctrl-scope)	,
/ De debugger valt hier NIET in	,
/ TODO

      var fnPtr = fn(scope, locals, context) || noop;
/ get baz-model uit scope in dit geval, niet uit locals={msg:"You"}, dat is voor de args	,
            ? fnPtr.apply(context, args)
/ context=ctrl-scope, maar fnPtr doet er niets mee	,
/ args="You"
/c
app.value("baz",function(m){
->	console.log("I am "+m)
})
/ this===ctrl-scope, maar doet er niets mee	,


/ 13	.

https://egghead.io/lessons/angularjs-directive-communication


/ Einde ANGULAR COMPILE

/ ANGULAR COMPILE

/ 7	. 

/ In applyDirectivesToNode: als er een new scope dir is, wordt nodeLinkFn.scope=dir set	,
/ In compositeLinkFn, die de list van child nodes heeft	, wordt als nodeLinkFn.scope er is, de new scope create	, en gegeven aan de nodeLinkFn	, 

/ in nodeLinkFn, als er een isol scope dir is, en als er een template in deze dir is , wordt een isol create, en gegeven aan de compositeLinkFn van de child nodes van de node	, waar ook het template in zit/is	TODO,

/ 7	. 

/ 19c5	,

/ we maken in 1 dir, foo, die new/isol scope	, in de andere ook controller/link fcts	,
/ als scope:true, dan alle 3 de parses in 
    {{_fct()}}, {{fct()}}, {{fct_()}}
/ als scope:{},	 dan alleen {{fct()}}	,	

/ de foo dir is controller dir, en heeft aut require:"foo"	, in de link fct is ctrls = Constructor inst, met controller fct als ctor	, 
/ maar als we zelf expliciet in foor dir require:["foo","bar"], 	dan is ctrls ook een array, van de Constructor inst met ctor controller uit de foo dir, en die uit de bar dir	, 

/ als we scope:true, dat hoeft eig. helemaal niet	,

<div ng-app="app">
  <div ng-controller="ctrl as ctrl">
    <div foo bar  ></div>
  </div>
</div>

/ 13	.

.controller("ctrl",function($scope){
  var that=this
  $scope._fct=function(m){ return "_Fct" }
  this._func=function(){return "_Func"}
  $scope._func=function(){ return that._Func()}
})

.directive("foo",function(){
  return{
    scope:{}, // scope:true	,
    //require:["foo","bar"],
    template:"<div>{{_fct()}}, {{fct()}}, {{fct_()}}</div>",
    link:function(scope, elem, attrs, ctrls){
      scope.fct=function(){ return "Fct" }
    },
    controller:function($scope){
      var that=this
      this.func=function(){ return "Func"}
      $scope.func=function(){ return that.func()}
    }
  }
})

.directive("bar",function(){
  return{
    link:function(scope,elem,attrs,ctrls){
      scope.fct_=function(){ return "Fct_" }
      scope.value_="value_"
    },
    controller:function($scope){
      var that=this
      $scope.func_=function(){ return that.func_()}
      this.func_=function(){ return "Func_"}

    }
  }
})

/ 7	. 

/ dir priority	,

/ see 19c3	,

.directive("bar",function(){
  return{
    scope:{},
    template:'<div ng-click="baz(value)">Dial {{fct()}} and {{fun()}} </div>',
    link:function(scope, elem, attrs, ctrls){
      var that=this
      scope.fct=function(){ return "Me" }
    },
    controller:function($scope){
      var that=this
      $scope.fun=function(){ return that.func()}
      this.func=function(){ return "Flowers"}
      //$scope.fun2=function(){ return $scope.hee()}
    }
  }
})
.directive("foo",function(){
  return{
    //priority:1,
    scope:true,
    link:function(scope,elem,attrs,ctrls){
      var that=this
      scope.fct=function(){ return "Me2" }
      scope.value="You2"
    },
    controller:function($scope){
      var that=this
      $scope.fun=function(){ return that.func()}
      this.func=function(){ return "Flowers2"}

    }
  }
})

/in applyDirectivesToNode 	,

      if (directiveValue = directive.scope) {
          newScopeDirective = newScopeDirective || directive;
          if (!directive.templateUrl) {
            assertNoDuplicate('new/isolated scope', newIsolateScopeDirective, directive, $compileNode);
            if (isObject(directiveValue)) {
              newIsolateScopeDirective = directive;
            }
          }

/ als we foo geen priority geven , hebben beide priority 0, en is in directives[], bar vooraan, WH alfabetisch	, 
/ bar wordt newScopeDirective=bar en newIsolateScopeDirective=bar ook	,
/ foo	,doet hij als hij de check of er al een isol scope dir is , dan ERR, want daar kan hij WH niet op new scope	,
/ als we foo priority: 1 geven, doet hij eerst foo	, dan newScopeDirective=foo	, dan bar wordt geen newScopeDirective, want die is er al, maar wel newIsolateScopeDirective, en later wordt isol scope child van new scope, maar geen prototypical	,

/ 7	. 

/ see 19c6	,

<div ng-app="app">
  <div ng-controller="ctrl">
    <div foo bar ></div>
  </div>
</div>

.controller("ctrl",function($scope){
  var that=this
  $scope.fct=function(m){ return "_Fct" }
  this.func=function(){return "_Func"}
  $scope.func=function(){ return that.func()}
})

.directive("foo",function(){
  return{
    scope:true,
    priority:1,
    template:"<div>{{func()}},{{fct()}}</div>",
    link:function(scope, elem, attrs, ctrls){
      scope.fct=function(){ return "Fct" }
    },
    controller:function($scope){
      var that=this
      this.func=function(){ return "Func"}
      $scope.func=function(){ return that.func()}
    }
  }
})

.directive("bar",function(){
  return{
    //priority:1,
    link:function(scope,elem,attrs,ctrls){
      scope.fct=function(){ return "Fct_" }
    },
    controller:function($scope){
      var that=this
      $scope.func=function(){ return that.func()}
      this.func=function(){ return "Func_"}

    }
  }
})



/ in collectDirectives worden de directives sort op priority (maar WH ook alfabetische als priority gelijk)	,
      directives.sort(byPriority);

/ in applyDirectivesToNode 
      for(var i = 0, ii = directives.length; i < ii; i++) {
          controllerDirectives[directiveName] = directive;
...
              addLinkFns(linkFn.pre, linkFn.post, attrStart, attrEnd);

/ De link fct in linFns[] hebben dezelfde volgorde als directives	,  doet push	, 

/ en controllerDirectives is {key:val}, dus geen array	, maar forEach=for in (in chrome) kijkt naar de order waarin de objs zijn insert	,  
/ als we controllerDirectives print, zien we altijd "bar" eerst, dat is misleidend, dat is de print fct die dat doet	,

/ in  nodeLinkFn	,
          forEach(controllerDirectives, function(directive) {
            controllerInstance = $controller(controller, locals);

/ forEach doet for in	, en  deze kijkt WH naar de order waarin ze zijn insert	, 

/ in nodeLinkFn	,
       for(i = postLinkFns.length - 1; i >= 0; i--) {
            linkFn = postLinkFns[i];
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);
  
/ Dus de link fcts zijn van achter naar voren	,

/ Dus als we foo priority 1 en bar 0 (of geen, dan ook 0),	 dan zien we	,
Func_, Fct
/ want directives=foo,bar ->  
/ 77. in controllerDirectives  is eerst foo insert, dan bar	,
/ 77. linkFns=[foo,bar] , 
/ for in kijkt naar order waarin objs insert, dus eerst ctrl foo, dan bar, dus Func_, want bar overwrites foo	,
/ call link fcts van achter naar voor, dus eerst bar dan foo, dus Fct	, want foo overwrites bar	,

/ Dus als we foo priority 0 en bar 1 ,	 dan zien we	,
Func, Fct_
 
/ 7	.

/ see 19c7	,

<div ng-app="app">
  <div foo bar ng-controller="ctrl">
  </div>
</div>

.controller("ctrl",function($scope){
  var that=this
  $scope.fct=function(m){ return "_Fct" }
  this.func=function(){return "_Func"}
  $scope.func=function(){ return that.func()}
})

.directive("foo",function(){
  return{
    priority:502,
    template:"<div>{{func()}},{{fct()}}</div>",
    link:function(scope, elem, attrs, ctrls){
      scope.fct=function(){ return "Fct" }
    },
    controller:function($scope){
      var that=this
      this.func=function(){ return "Func"}
      $scope.func=function(){ return that.func()}
    }
  }
})
.directive("bar",function(){
  return{
    priority:501,
    link:function(scope,elem,attrs,ctrls){
      scope.fct=function(){ return "Fct_" }
    },
    controller:function($scope){
      var that=this
      $scope.func=function(){ return that.func()}
      this.func=function(){ return "Func_"}

    }
  }
})

/ we zien dat .controller hetzelfde is als .directive, controller
/ we weten 	,
var ngControllerDirective = [function() {
  return {
    scope: true,
    controller: '@',
    priority: 500
  };
}];
/ Daarom hebben we foo en bar bijv priority 502, 501 gegeven, 	

/ we zien	,
_Func, Fct
/ want de volgorde van insert in key:values controllerDirectives  is foo, bar, ngController,	 dus ngController overwrites $scope.func uit foo,bar	, 
/ link fcts gaan van achter naar voren, dus de hoogste prio is het laatst, foo's link fct dus en sets $scope:fct	, dus zien we Fct	,


/ in collectDirectives	,
      directives.sort(byPriority);

directives: Array[3]

0: Object
compile: function () {
controller: function ($scope){
index: 0
link: function (scope, elem, attrs, ctrls){
name: "foo"
priority: 502
require: "foo"
restrict: "A"
template: "<div>{{func()}},{{fct()}}</div>"

1: Object
compile: function () {
controller: function ($scope){
index: 0
link: function (scope,elem,attrs,ctrls){
name: "bar"
priority: 501
require: "bar"
restrict: "A"

2: Object
controller: "@"
index: 0
name: "ngController"
priority: 500
require: "ngController"
restrict: "A"
scope: true


/ 7	.

<div ng-app="app">
  <div ng-controller="ctrl">
    <div foo ></div>
  </div>
</div>

.controller("ctrl",function($scope){
  this.func=function(){return "_Func"}
})
.directive("foo",function(){
  return{
    scope:true,
    require:["?^ngController","foo"],
    template:"<div>{{fct()}}</div>",
    link:function(scope, elem, attrs, ctrls){
      scope.fct=function(){
        var s=""
        for(var i=0;i<ctrls.length;i++)
					if(ctrls[i]!=null)
						s+=ctrls[i].func()
        return s
      }
    },
    controller:function($scope){
      this.func=function(){ return "Func"}
    }
  }
})

/ we zien	,
_FuncFunc

/ als we	,
    require:["?^gController","foo"], // OK
/ we zien	,
Func

/ nodeLinkFn calls	,
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);

/ require speelt rol in getControllers	, 
/ ^ : haalt controller uit een van de parent nodes	, ?^ : als er is	, anders null/undefined TODO
/ require normaal alleen controllers uit node	, maar met ^ ook uit een van de parent nodes	,

      function getControllers(require, $element, elementControllers) {
        } else if (isArray(require)) {
          value = [];
          forEach(require, function(require) {
            value.push(getControllers(require, $element, elementControllers));
/c
function forEach(obj, iterator, context) {
  if (obj) {
    } else if (obj.forEach && obj.forEach !== forEach) {
/ JA, als obj is een array	, 
   } else {
/ als obj is een JS object , {key:value, ...}	,
      for (key in obj) {
/c
     function getControllers(require, $element, elementControllers) {
        var value, retrievalMethod = 'data', optional = false;
        if (isString(require)) {
/ JA, require="?^ngController"	,
          while((value = require.charAt(0)) == '^' || value == '?') {
            require = require.substr(1);
            if (value == '^') {
/ NEE 
              retrievalMethod = 'inheritedData';
            }
            optional = optional || value == '?';
true
          while((value = require.charAt(0)) == '^' || value == '?') {
            require = require.substr(1);
            if (value == '^') {
/ JA 
              retrievalMethod = 'inheritedData';
            }
            optional = optional || value == '?';
/ blijft true

/ dus 
retrievalMethod="inheritedData"	,
optional=true

          if (elementControllers && retrievalMethod === 'data') {
/ NEE
            value = elementControllers[require];
/ NIET

          value = value || $element[retrievalMethod]('$' + require + 'Controller');
/= ctrl	,
/ calls $element.inheritedData("$ngControllerController")
/ TODO

/ 7	. 

/ see 19c4	,

<div ng-app="app">
  <div ng-controller="ctrl">
    <div foo bar="{{prop}}">
    	<div>{{prop}}</div>
			<div ng-transclude>{{prop}}</div>

		</div>
  </div>
</div>

/ 7	.

/ see 19c4	,

<div ng-app="app">
  <div ng-controller="ctrl">
    <div foo bar="{{prop}}">{{prop}}</div>
  </div>
</div>

app.value("ctrl","Ctrl")
app.value("fct",function(){return"Fct"})

.controller("ctrl",function($scope,ctrl){
  $scope.prop=ctrl
})

.directive("foo",function(link){
  return{
    scope:{},
    transclude:true,
    link:function(scope,elem,attrs,ctrls){
      scope.prop=ctrls.fct()
    },
    template:'<div>{{prop}}</div><div ng-transclude></div>',
    controller:function($scope,fct){
      this.fct=fct
    }
  }
})

/ Dus de HTML wordt ongeveer	,

<div ng-app="app">
  <div ng-controller="ctrl">
    <div foo bar="{{prop}}">
    	<div>{{prop}}</div>
			<div ng-transclude>
				{{prop}}
			</div>

/ wordt	,

<div ng-app="app">
  <div ng-controller="ctrl">
    <div foo bar="Ctrl">
    	<div>Fct</div>
			<div ng-transclude>Ctrl</div>

/ TODO (scopes)


 
/ Einde ANGULAR COMPILE

/ STRAKS
/ ng-show, ng-template in video 27, templateUrl	,

/ RSYNC

[root@walnut ~]# history | grep rsync
  840  rsync -avz eric@para:Devel/Drupal/Drush .
  887  rsync -avz Devel /run/media/eric/WD/walnut/home/eric/
  894  rsync -avz eric /run/media/eric/WD/walnut/home
  897  rsync -avz etc /run/media/eric/WD/walnut

/ we doen	,


[root@walnut home]# pwd
/home
[root@walnut home]# mount
/dev/sdb1 on /run/media/eric/WD type ext4 (rw,nosuid,nodev,relatime,seclabel,data=ordered,uhelper=udisks2)
[root@walnut home]# rsync -avz eric /run/media/eric/WD/walnut/home/
[root@walnut home]# umount /run/media/eric/WD 



/ Einde RSYNC

/ OPEN 

/home/eric/Devel/Web/angularjs
/home/eric/Devel/Web/angularjs/self
/home/eric/Devel/Web/angularjs/downloads
/home/eric/Devel/Web/angularjs/egghead.io
/home/eric/Devel/Web/angularjs/DevGuide/controller
/home/eric/Devel/Web/angularjs/DevGuide
/home/eric/Devel/Web/angularjs/DevGuide/directive
/home/eric/Devel/Web/angularjs/DevGuide/reference
/home/eric/Devel/Web/angularjs/DevGuide/q
/home/eric/Devel/Web/angularjs/stackoverflow

/home/eric/Devel/Web/Yeoman/gettingstarted/angular
/home/eric/Devel/Web/angularjs/angular-phonecat
/home/eric/Devel/Web/Sass/sass-tutorials/leveluptuts/9
/home/eric/Devel/Web/Bootstrap
/home/eric/Devel/Web/Bootstrap/bootstrap/withgit/bootstrap/dist
/home/eric/Devel/Web/Bootstrap/bootstrap-sass/withgit/bootstrap-sass

/home/eric/Devel/Web/Bootstrap/withgit/bootstrap
/home/eric/Devel/Web/angularjs/stackoverflow/test/unit/220413

/ HIER HIER


/ ANGULAR REFERENCE 

[eric@walnut reference]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/reference

/ we beginnen met deze	,

[eric@walnut reference]$ cat package.json 
{
  "name": "reference",
  "version": "0.0.0",
  "devDependencies": {
  }
}

[eric@walnut reference]$ npm install grunt --save-dev
[eric@walnut reference]$ npm install grunt-contrib-jshint --save-dev
[eric@walnut reference]$ npm install grunt-contrib-uglify --save-dev
[eric@walnut reference]$ npm install grunt-newer --save-dev
[eric@walnut reference]$ npm install grunt-contrib-watch --save-dev

/ De Gruntfile kunnen we cp van q/example	,

[eric@walnut reference]$ mkdir app/js/ngclick
[eric@walnut reference]$ mkdir test/unit/ngclick
[eric@walnut reference]$ mkdir dist
[eric@walnut reference]$ vi dist/ngclick.html

  <body ng-app="">
    <button ng-click="count = count + 1" ng-init="count=0">Increment</button>
    count: {{count}}
  </body>

/ button is geen dir net als input	,

/ 7	.

/ Helemaal in het begin wordt	,
var ngEventDirectives = {};
forEach(
  'click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste'.split(' '),
  function(name) {
    var directiveName = directiveNormalize('ng-' + name);
    ngEventDirectives[directiveName] = ['$parse', function($parse) { / (*)
      return {
        compile: function($element, attr) {
...
/ er is create	,
ngEventDirectives: { 
ngBlur: Array[2]
ngClick: ["$parse",function ($parse) {...}], / = (*) 
ngCopy: Array[2]
ngCut: Array[2]
...
}
/ (*) is de directiveFactory hieronder	, 

/ dan 	,
  angularModule('ng', ['ngLocale'], ['$provide', function ngModule($provide){
          $provide.provider('$compile', $CompileProvider).
        directive(ngEventDirectives);

/ dan maakt hij voor elk een provider dus er is een ngClickDirectiveProvider, een ngCopyDirectiveProvider, ... 

/ compile	,

/ dan in compile fase	, in compileNodes, collectDirectives, addDirective	,
      if (hasDirectives.hasOwnProperty(name)) {
name=ngClick
        for(var directive, directives = $injector.get(name + Suffix),
/c
          return cache[serviceName] = factory(serviceName);
/c
            var provider = providerInjector.get(servicename + providerSuffix);
/ ngClickDirectiveProvider is er	,
            return instanceInjector.invoke(provider.$get, provider);
/c
   this.directive = function registerDirective(name, directiveFactory) {

        $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
/(*)          function($injector, $exceptionHandler) {
            var directives = [];
            forEach(hasDirectives[name], function(directiveFactory, index) {
              try {
                var directive = $injector.invoke(directiveFactory);

/ we komen in (*), de ngClickDirectiveProvider.$get	,
/ die invokes de directiveFactory	(*)	,
    ngEventDirectives[directiveName] = ['$parse', function($parse) { / (*)
      return {
        compile: function($element, attr) {
          var fn = $parse(attr[directiveName]);
          return function(scope, element, attr) {
            element.on(lowercase(name), function(event) {
              scope.$apply(function() {
                fn(scope, {$event:event});
              });
            });
          };
        }
      };
    }]; 

/ Dus straks in applyDirectivesToNode wordt de compile fct called	, en wordt attr["ngClick"]="count=count+1" parse	, en returns anon fct hierboven 	,
            linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
/ Hier zien we dat de directive factory een compile fct heeft	, als deze er niet is	, zal de directive provider hem maken ,  WH is dan de dir factory een fct en dat wordt dan de link fct, want de compile fct die create wordt returns deze link fct	,
               if (isFunction(directive)) {
                  directive = { compile: valueFn(directive) };
                } else if (!directive.compile && directive.link) {
                  directive.compile = valueFn(directive.link);
                }


 

/ dus	in de instanceCache komt onder key "ngClickDirective"	,
directive: { 
compile: function ($element, attr) {
index: 0
name: "ngClick"
priority: 0
require: undefined
restrict: "A"
}

/ er is ook ngInit attr	,
/ weer via ngInitDirectiveProvider , die directiveFactory calls	,

/ eerder is	,
var ngInitDirective = ngDirective({
  priority: 450,
  compile: function() {
    return {
      pre: function(scope, element, attrs) {
        scope.$eval(attrs.ngInit);
      }
    };
  }
});

function ngDirective(directive) {
...
  directive.restrict = directive.restrict || 'AC';
  return valueFn(directive);
}
/ Dus	, ngInitDirective is inner fct (*) in closure	, 
function valueFn(value) {
	function() { 							/ (*)
		return value;
	};
}
/ en value={
  priority: 450,
  compile: function() {
    return {
      pre: function(scope, element, attrs) {
        scope.$eval(attrs.ngInit);
      }
    };
  },
	restrict:"AC"	,
}

/ later, applyDirectivesToNode	,

/ SAMENVATTING PARSE

/ we zien hieronder dat het parse van "count=count+1" achter ng-click= gebeurt in de compile fase	, net als het parse van {{count}}	, dat $interpolate doet 	,
/ ng-click: want applyDirectivesToNode 	,
/c
            linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
/c
var ngEventDirectives = {};
forEach(
  'click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste'.split(' '),
  function(name) {
    var directiveName = directiveNormalize('ng-' + name);
    ngEventDirectives[directiveName] = ['$parse', function($parse) {
      return {
        compile: function($element, attr) {
->          var fn = $parse(attr[directiveName]);
          return function(scope, element, attr) {
            element.on(lowercase(name), function(event) {
              scope.$apply(function() {
                fn(scope, {$event:event});
              });

/ {{count}}, want collectDirectives ,dus in compileNodes voor applyDirectivesToNode	,
/c
          addTextInterpolateDirective(directives, node.nodeValue);
/c
      var interpolateFn = $interpolate(text, true);


/ maar het parse van "count=0" achter ng-init= is pas in de link fase	, want	,
ar ngInitDirective = ngDirective({
  priority: 450,
  compile: function() {
    return {
      pre: function(scope, element, attrs) {			/ linkFn	,
        scope.$eval(attrs.ngInit);
      }
    };
  }
}); 


/ Einde SAMENVATTING PARSE

/ eerst ngInit	,

           linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
/ =
      pre: function(scope, element, attrs) {
        scope.$eval(attrs.ngInit);

           } else if (linkFn) {
              addLinkFns(linkFn.pre, linkFn.post, attrStart, attrEnd);
/c
     function addLinkFns(pre, post, attrStart, attrEnd) {
          pre.require = directive.require;
undefined
          preLinkFns.push(pre);

/ dan ngClick	,
            linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
/c
var ngEventDirectives = {};
forEach(
  'click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste'.split(' '),
  function(name) {
    var directiveName = directiveNormalize('ng-' + name);
    ngEventDirectives[directiveName] = ['$parse', function($parse) {
      return {
        compile: function($element, attr) {
->          var fn = $parse(attr[directiveName]);
          return function(scope, element, attr) {
            element.on(lowercase(name), function(event) {
              scope.$apply(function() {
                fn(scope, {$event:event});
              });
/ =
attr: $get.Attributes
{
$$element: JQLite[1]
0: button
length: 1

$attr: Object
ngClick: "ng-click"
ngInit: "ng-init"

ngClick: "count = count + 1"

ngInit: "count=0"
}

/ directiveName="ngClick"	, 
/ attr[directiveName]="count = count + 1"
/ we gaan	, 

	$parse("count=count+1")	
/c
Parser.prototype = {
  parse: function (text, json) {
/ text="count=count+1"	, json=false

    this.tokens = this.lexer.lex(text);
/=
tokens: Array[5]
0: Object
fn: function (self, locals) { 				/ gen code	,
index: 0
text: "count"
__proto__: Object
1: Object
fn: function noop() {}
index: 6
json: false
text: "="
__proto__: Object
2: Object
fn: function (self, locals) {					/ gen code
index: 8
text: "count"
__proto__: Object
3: Object
fn: function (self, locals, a,b){			
index: 14
json: false
text: "+"
__proto__: Object
4: Object
fn: function () { return number; }
index: 16
json: true
text: 1
__proto__: Object
length: 5
__proto__: Array[0]


    var value = json ? this.primary() : this.statements();
/ =
  assignment: function() {
->      return function(scope, locals) {
        return left.assign(scope, right(scope, locals), locals);
      };
/ Dit is dan uiteindelijk	, 
->          var fn = $parse(attr[directiveName]);
/ die in de closure scope is van de fct die wordt return	, dat de linkFn wordt	,

/ left=     token.fn = extend(function(self, locals) {
        return (getter(self, locals));
      }, {
        assign: function(self, value) {
          return setter(self, ident, value, parser.text, parser.options);
        }
      });
/ right= binary fct (*) hieronder,	want + is binary fct, 	(geen ternary	,) 	
  binaryFn: function(left, fn, right) {
   return extend(function(self, locals) { 	/ (*)
      return fn(self, locals, left, right);
    }, {
      constant:left.constant && right.constant
    });
  },
/ fn=   '+':function(self, locals, a,b){
      a=a(self, locals); b=b(self, locals);
      if (isDefined(a)) {
        if (isDefined(b)) {
          return a + b;
        }
        return a;
      }
/ a=      token.fn = extend(function(self, locals) {
        return (getter(self, locals));
      }, {
        assign: function(self, value) {
          return setter(self, ident, value, parser.text, parser.options);
        }
      });
/ b=      fn: function() { return number; }
/ left=      token.fn = extend(function(self, locals) {
        return (getter(self, locals));
      }
/ right=      fn: function() { return number; }


/t in applyDirectives,	
            linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
/ D
/ =
          return function(scope, element, attr) {
            element.on(lowercase(name), function(event) {
              scope.$apply(function() {
                fn(scope, {$event:event});
              });

              addLinkFns(null, linkFn, attrStart, attrEnd);

/ link fase	,

/ in nodeLinkFn	,

      for(i = 0, ii = preLinkFns.length; i < ii; i++) {
          try {
            linkFn = preLinkFns[i];
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs, linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);
/ linkFn.require=undefined	, dus geen ctrl's	,
/c
var ngInitDirective = ngDirective({
  priority: 450,
  compile: function() {
    return {
      pre: function(scope, element, attrs) {
->        scope.$eval(attrs.ngInit);
/ attrs.ngInit="count=0"
/ c
      $eval: function(expr, locals) {
        return $parse(expr)(this, locals);
/ weer 2-staps raket	, hij calls hem ook meteen	,


/ we komen weer in Parse.prototype.parse	,

    this.tokens = this.lexer.lex(text);
tokens: Array[3]
0: Object
fn: function (self, locals) { 	"count" -> gen code	,
index: 0
text: "count"
__proto__: Object
1: Object
fn: function noop() {}
index: 5
json: false
text: "="
__proto__: Object
2: Object
fn: function () { return number; }
index: 6
json: true
text: 0

    var value = json ? this.primary() : this.statements();
/=
   assignment: function() {
      return function(scope, locals) {
        return left.assign(scope, right(scope, locals), locals);
      };

/t
      $eval: function(expr, locals) {
        return $parse(expr)(this, locals);
/ Hij wordt ook meteen called	,
/c
   assignment: function() {
      return function(scope, locals) {
   ->     return left.assign(scope, right(scope, locals), locals);
      };
/ we hadden	,
  readNumber: function() {
   this.tokens.push({
      index: start,
      text: number,
      json: true,
      fn: function() { return number; } 			/ = right	,
/en	,

  readIdent: function() {
     var getter = getterFn(ident, this.options, this.text);
      token.fn = extend(function(self, locals) {							/ = left	,
        return (getter(self, locals));
      }, {
        assign: function(self, value) {					/ = left.assign	,
          return setter(self, ident, value, parser.text, parser.options);
/c
  obj[key] = setValue;
/obj=root scope	, key="count", setValue=0

/t in nodeLinkFn	, 
/ pre done	,
/ nu post	,
/ c
var ngEventDirectives = {};
forEach(
  'click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste'.split(' '),
  function(name) {
    var directiveName = directiveNormalize('ng-' + name);
    ngEventDirectives[directiveName] = ['$parse', function($parse) {
      return {
        compile: function($element, attr) {
          var fn = $parse(attr[directiveName]);
          return function(scope, element, attr) {
->            element.on(lowercase(name), function(event) {
              scope.$apply(function() {
                fn(scope, {$event:event});
              });
            });
          };
        }
      };
    }];
/name ="click",	 
  assignment: function() {
      return function(scope, locals) {														/ = fn
        return left.assign(scope, right(scope, locals), locals);
      };
/ dus dit is typisch link fct : event handler	, in dit geval click event,	

/ dan	, root scope.__proto__.$digest	,

    function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
      if (interpolateFn) {
        directives.push({
          priority: 0,
          compile: valueFn(function textInterpolateLinkFn(scope, node) {
            var parent = node.parent(),
                bindings = parent.data('$binding') || [];
            bindings.push(interpolateFn);
            safeAddClass(parent.data('$binding', bindings), 'ng-binding');
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
->              node[0].nodeValue = value;
            });

/ zal {{count}} vervangen door 0	, 

/ we geven cont	, 
/ we click op button	, 
/ we komen in	,
var ngEventDirectives = {};
forEach(
  'click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste'.split(' '),
  function(name) {
    var directiveName = directiveNormalize('ng-' + name);
    ngEventDirectives[directiveName] = ['$parse', function($parse) {
      return {
        compile: function($element, attr) {
          var fn = $parse(attr[directiveName]);
          return function(scope, element, attr) {
            element.on(lowercase(name), function(event) {
      ->        scope.$apply(function() {
                fn(scope, {$event:event});
              });
            });
          };
        }
      };
    }];
/c
     $apply: function(expr) {
          return this.$eval(expr);
/ expr=function() {
                fn(scope, {$event:event});
}
/ omdat is fct	, wordt gewoon called	,
/c
  assignment: function() {
    var left = this.ternary();
    var right;
    var token;
    if ((token = this.expect('='))) {
      if (!left.assign) {
        this.throwError('implies assignment but [' +
            this.text.substring(0, token.index) + '] can not be assigned to', token);
      }
      right = this.ternary();
      return function(scope, locals) {
    ->    return left.assign(scope, right(scope, locals), locals);
      };
    }
/ HIER HIER

 
 

 






/ Einde ANGULAR REFERENCE 

/ ANGULAR 

[eric@walnut egghead.io]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io/1b

$ vi index.html

<div ng-app>
  <input type="text" ng-model="data.message">
  <h1>{{data.message}}</h1>
</div>

/ of	,

$ vi index.html

<div ng-app="">
  <input type="text" ng-model="data.message">
  <h1>{{data.message}}</h1>
</div>

/ of	,

$ vi index.html

<div ng-app="app">
  <input type="text" ng-model="data.message">
  <h1>{{data.message}}</h1>
</div>

$ vi script.js

+function(){

angular.module("app",[])

}()

/ 7	.

/ OK, we hoeven niets te doen	,


/ 7	. 

/ we zien in 	angular.js	,

function textInputType(scope, element, attr, ctrl, $sniffer, $browser) {

  var listener = function() {
    var value = element.val();

      scope.$apply(function() {
        ctrl.$setViewValue(value);
      });

/ zonder scope.$apply eromheen wordt $rootScope.$digest niet called, die de wachters' get en fn fct call	, bijv,
   function addTextInterpolateDirective(directives, text) {
      var interpolateFn = $interpolate(text, true);
        directives.push({
          compile: valueFn(function textInterpolateLinkFn(scope, node) {
            scope.$watch(interpolateFn, function interpolateFnWatchAction(value) {
              node[0].nodeValue = value;
            });
 
/ ook was gedaan	, maar dit is voorbij	,
  var doBootstrap = function() {
        scope.$apply(function() {
          element.data('$injector', injector);
          compile(element)(scope);
        });       
 




/ Einde ANGULAR 


/ ANGULAR STACKOVERFLOW

[eric@walnut stackoverflow]$ pwd
/home/eric/Devel/Web/angularjs/stackoverflow

/ 220314

/ 7	.

$ vi 220314/index.html

<div ng-app="app">
<h1>{{foo}}</h1>
<h1>{{bar}}</h1>
</div>


$ vi app/js/220314/script.js

var app=angular.module("app",[])
app.value("foo","Foo")
app.value("bar","Bar")
app.run(function($rootScope,foo,bar){
  $rootScope.foo=foo
  $rootScope.bar=bar
})

/ OK

/ 7	.

<div ng-app="app">
<div ng-controller="ctrl">
<h1>{{foo}}</h1>
</div>
<div ng-controller="ctrl2">
<h1>{{bar}}</h1>
</div>
</div>

var app=angular.module("app",[])
app.value("foo","Foo")
app.value("bar","Bar")
app.controller("ctrl",function($scope){
})
app.controller("ctrl2",function($scope){
})
app.run(function($rootScope,foo,bar){
  $rootScope.foo=foo
  $rootScope.bar=bar
})

/of	,

var app=angular.module("app",[])
app.value("foo","Foo")
app.value("bar","Bar")
app.controller("ctrl",function($scope,foo){
  $scope.foo=foo
})
app.controller("ctrl2",function($scope,bar){
  $scope.bar=bar
  $scope.$$prevSibling.foo="Foo Foo"

})

/ OK

/ we kunnen	,

app.controller("ctrl2",function($scope,bar){
  $scope.bar=bar
  $scope.$$prevSibling.foo="Baz"
})

/ 7

<div ng-app="app">
<div ng-controller="ctrl as ctrl">
<h1>{{foo}}</h1>
<h1>{{ctrl.foo}}</h1>
</div>
<div ng-controller="ctrl2">
<h1>{{bar}}</h1>
</div>
</div>

var app=angular.module("app",[])
app.value("foo","Foo")
app.value("bar","Bar")
app.controller("ctrl",function($scope,foo){
  $scope.foo=foo
  this.foo=foo
})
app.controller("ctrl2",function($scope,bar){
  $scope.bar=bar
})

/ voor this.foo=foo, we moeten 
<div ng-controller="ctrl as ctrl">
/ $scope.foo=foo werkt dan ook nog	,

/ TODO

/ 7	.

/ see	,
http://web/angularjs/stackoverflow/220314/

$ vi index.html

<div ng-app="app">
<div ng-controller="ctrl as ctrl">
<h1>{{foo}}</h1>
<h1>{{ctrl.baz}}</h1>
<h1>{{gee}}</h1>
</div>
<div ng-controller="ctrl2">
<h1>{{bar}}</h1>
</div>
</div>

$ vi app/js/script.js

var app=angular.module("app",[])
app.value("foo","Foo")
app.value("gee",{name:"Gee"})
app.factory("bar",function(){
  return "Bar"
})
app.factory("baz",function(bar){
  return {name:bar+"Baz"}
})
app.controller("ctrl",function($scope,foo,baz,gee){
  $scope.foo=foo
  this.baz=baz.name
  $scope.gee=gee.name
})
app.controller("ctrl2",function($scope,bar){
  $scope.bar=bar
})

$ vi test/unit/script.js

beforeEach(module("app"))

beforeEach(inject(function($rootScope,$controller){
  scope=$rootScope.$new()
  controller=$controller("ctrl",{$scope:scope})
}))

it("foo",inject(function(foo){
  expect(foo).toBe("Foo")
}))
it("baz",inject(function(baz){
  expect(baz.name).toBe("BarBaz")
}))

it("ctrl",function(){
  expect(scope.foo).toBe("Foo")
  expect(controller.baz).toBe("BarBaz")
  expect(scope.gee).toBe("Gee")
})

/ Deze ,
  controller=$controller("ctrl",{$scope:scope})

/ calls de ctor	fct	, 
app.controller("ctrl",function($scope,foo,baz,gee){
  $scope.foo=foo
  this.baz=baz.name
  $scope.gee=gee.name
})
/ dus daarom is er scope.foo	, ...

/ 7	.









/ Einde  ANGULAR STACKOVERFLOW

/ BOOTSTRAP

/ lees ,
https://github.com/twbs/bootstrap

/ of	,
https://github.com/twbs/bootstrap-sass

/ we doen eerst	,
https://github.com/twbs/bootstrap

/ 13	.

[eric@walnut withzip]$ pwd
/home/eric/Devel/Web/Bootstrap/withzip
[eric@walnut withzip]$ unzip  ~/Downloads/bootstrap-3.1.1.zip 

/ 13

[eric@walnut withbower]$ pwd
/home/eric/Devel/Web/Bootstrap/withbower

[eric@walnut withbower]$ sudo npm update -g bower
/usr/local/bin/bower -> /usr/local/lib/node_modules/bower/bin/bower
bower@1.3.1 /usr/local/lib/node_modules/bower
├── is-root@0.1.0
├── junk@0.2.2
├── stringify-object@0.2.0
├── abbrev@1.0.4
├── which@1.0.5
├── chmodr@0.1.0
├── osenv@0.0.3
├── archy@0.0.2
├── graceful-fs@2.0.3
├── rimraf@2.2.6
├── open@0.0.4
├── bower-endpoint-parser@0.2.1
├── lru-cache@2.5.0
├── bower-logger@0.2.2
├── nopt@2.1.2
├── retry@0.6.0
├── mkdirp@0.3.5
├── tmp@0.0.23
├── q@1.0.1
├── chalk@0.4.0 (ansi-styles@1.0.0, has-color@0.1.4, strip-ansi@0.1.1)
├── request-progress@0.3.1 (throttleit@0.0.2)
├── semver@2.2.1
├── fstream@0.1.25 (inherits@2.0.1)
├── p-throttler@0.0.1 (q@0.9.7)
├── bower-json@0.4.0 (deep-extend@0.2.8, intersect@0.0.3)
├── tar@0.1.19 (inherits@2.0.1, block-stream@0.0.7)
├── shell-quote@1.4.1 (array-filter@0.0.1, array-reduce@0.0.0, array-map@0.0.0, jsonify@0.0.0)
├── fstream-ignore@0.0.7 (inherits@2.0.1, minimatch@0.2.14)
├── glob@3.2.9 (inherits@2.0.1, minimatch@0.2.14)
├── decompress-zip@0.0.5 (nopt@2.2.0, mkpath@0.1.0, touch@0.0.2, readable-stream@1.1.11, binary@0.3.0)
├── cardinal@0.4.4 (ansicolors@0.2.1, redeyed@0.4.4)
├── promptly@0.2.0 (read@1.0.5)
├── bower-config@0.5.0 (optimist@0.6.1, mout@0.6.0)
├── mout@0.9.0
├── request@2.33.0 (json-stringify-safe@5.0.0, forever-agent@0.5.2, qs@0.6.6, tunnel-agent@0.3.0, oauth-sign@0.3.0, aws-sign2@0.5.0, node-uuid@1.4.1, mime@1.2.11, form-data@0.1.2, hawk@1.0.0, tough-cookie@0.12.1, http-signature@0.10.0)
├── handlebars@1.3.0 (optimist@0.3.7, uglify-js@2.3.6)
├── insight@0.3.1 (object-assign@0.1.2, async@0.2.10, lodash.debounce@2.4.1, request@2.27.0, configstore@0.2.3)
├── update-notifier@0.1.8 (semver@2.1.0, request@2.27.0, configstore@0.2.3)
├── bower-registry-client@0.1.6 (request-replay@0.2.0, lru-cache@2.3.1, async@0.2.10, request@2.27.0, bower-config@0.4.5)
└── inquirer@0.4.1 (readline2@0.1.0, mute-stream@0.0.4, through@2.3.4, async@0.2.10, lodash@2.4.1, cli-color@0.2.3)

[eric@walnut withbower]$ bower install bootstrap
bower cached        git://github.com/twbs/bootstrap.git#3.1.1
bower validate      3.1.1 against git://github.com/twbs/bootstrap.git#*
bower cached        git://github.com/jquery/jquery.git#2.1.0
bower validate      2.1.0 against git://github.com/jquery/jquery.git#>= 1.9.0
bower install       bootstrap#3.1.1
bower install       jquery#2.1.0

bootstrap#3.1.1 bower_components/bootstrap
└── jquery#2.1.0

jquery#2.1.0 bower_components/jquery

/ 13	.

[eric@walnut withgit]$ pwd
/home/eric/Devel/Web/Bootstrap/withgit
[eric@walnut withgit]$  git clone https://github.com/twbs/bootstrap.git
[eric@walnut withgit]$ cd bootstrap/
[eric@walnut bootstrap]$ ls
bower.json     _config.yml      docs   Gruntfile.js  LICENSE       test-infra
CNAME          CONTRIBUTING.md  fonts  js            package.json
composer.json  dist             grunt  less          README.md

[eric@walnut bootstrap]$ npm install
...
btoa@1.1.1 node_modules/btoa

grunt-contrib-copy@0.5.0 node_modules/grunt-contrib-copy

grunt-banner@0.2.2 node_modules/grunt-banner

canonical-json@0.0.4 node_modules/canonical-json

grunt-exec@0.4.5 node_modules/grunt-exec

grunt-contrib-concat@0.3.0 node_modules/grunt-contrib-concat

time-grunt@0.2.10 node_modules/time-grunt
├── date-time@0.1.1
├── text-table@0.2.0
├── hooker@0.2.3
└── chalk@0.4.0 (has-color@0.1.4, ansi-styles@1.0.0, strip-ansi@0.1.1)

grunt-contrib-clean@0.5.0 node_modules/grunt-contrib-clean
└── rimraf@2.2.6

grunt-jekyll@0.4.1 node_modules/grunt-jekyll
└── tmp@0.0.21

markdown@0.5.0 node_modules/markdown
└── nopt@2.1.2 (abbrev@1.0.4)

grunt-contrib-watch@0.6.1 node_modules/grunt-contrib-watch
├── async@0.2.10
├── tiny-lr-fork@0.0.5 (debug@0.7.4, faye-websocket@0.4.4, noptify@0.0.3, qs@0.5.6)
├── gaze@0.5.1 (globule@0.1.0)
└── lodash@2.4.1

grunt-sed@0.1.1 node_modules/grunt-sed
└── replace@0.2.9 (colors@0.5.1, minimatch@0.2.14, nomnom@1.6.2)

grunt-css-flip@0.2.1 node_modules/grunt-css-flip
└── css-flip@0.3.0 (commander@2.1.0, css@1.6.0)

grunt-contrib-csslint@0.2.0 node_modules/grunt-contrib-csslint
└── csslint@0.10.0 (parserlib@0.2.4)

grunt-contrib-jshint@0.9.2 node_modules/grunt-contrib-jshint
├── hooker@0.2.3
└── jshint@2.4.4 (console-browserify@0.1.6, exit@0.1.2, minimatch@0.2.14, cli@0.4.5, underscore@1.4.4, shelljs@0.1.4, htmlparser2@3.3.0)

grunt-contrib-qunit@0.4.0 node_modules/grunt-contrib-qunit
└── grunt-lib-phantomjs@0.5.0 (eventemitter2@0.4.13, semver@1.0.14, temporary@0.0.8, phantomjs@1.9.7-1)

grunt-contrib-cssmin@0.9.0 node_modules/grunt-contrib-cssmin
├── chalk@0.4.0 (has-color@0.1.4, ansi-styles@1.0.0, strip-ansi@0.1.1)
├── clean-css@2.1.6 (commander@2.1.0)
└── maxmin@0.1.0 (pretty-bytes@0.1.0, gzip-size@0.1.0)

grunt-contrib-uglify@0.4.0 node_modules/grunt-contrib-uglify
├── chalk@0.4.0 (has-color@0.1.4, ansi-styles@1.0.0, strip-ansi@0.1.1)
├── maxmin@0.1.0 (pretty-bytes@0.1.0, gzip-size@0.1.0)
└── uglify-js@2.4.13 (uglify-to-browserify@1.0.2, async@0.2.10, source-map@0.1.33, optimist@0.3.7)

grunt-html-validation@0.1.13 node_modules/grunt-html-validation
├── colors@0.6.2
├── request@2.27.0 (json-stringify-safe@5.0.0, forever-agent@0.5.2, aws-sign@0.3.0, qs@0.6.6, tunnel-agent@0.3.0, oauth-sign@0.3.0, cookie-jar@0.3.0, node-uuid@1.4.1, mime@1.2.11, form-data@0.1.2, hawk@1.0.0, http-signature@0.10.0)
└── w3cjs@0.1.24 (commander@2.0.0, superagent@0.15.7, superagent-proxy@0.2.0)

load-grunt-tasks@0.4.0 node_modules/load-grunt-tasks
├── findup-sync@0.1.3 (glob@3.2.9, lodash@2.4.1)
└── multimatch@0.1.0 (minimatch@0.2.14, lodash@2.4.1)

grunt@0.4.4 node_modules/grunt
├── which@1.0.5
├── dateformat@1.0.2-1.2.3
├── eventemitter2@0.4.13
├── getobject@0.1.0
├── rimraf@2.2.6
├── colors@0.6.2
├── grunt-legacy-util@0.1.2
├── hooker@0.2.3
├── async@0.1.22
├── nopt@1.0.10 (abbrev@1.0.4)
├── exit@0.1.2
├── minimatch@0.2.14 (sigmund@1.0.0, lru-cache@2.5.0)
├── glob@3.1.21 (inherits@1.0.0, graceful-fs@1.2.3)
├── lodash@0.9.2
├── coffee-script@1.3.3
├── underscore.string@2.2.1
├── iconv-lite@0.2.11
├── js-yaml@2.0.5 (esprima@1.0.4, argparse@0.1.15)
└── findup-sync@0.1.3 (glob@3.2.9, lodash@2.4.1)

grunt-autoprefixer@0.7.2 node_modules/grunt-autoprefixer
├── chalk@0.4.0 (has-color@0.1.4, ansi-styles@1.0.0, strip-ansi@0.1.1)
├── diff@1.0.8
└── autoprefixer@1.1.20140319 (fs-extra@0.8.1, postcss@0.3.4)

grunt-csscomb@2.0.1 node_modules/grunt-csscomb
└── csscomb@2.0.4 (commander@2.0.0, vow@0.3.11, gonzales-pe@2.0.2, minimatch@0.2.12, vow-fs@0.2.3)

grunt-contrib-connect@0.7.1 node_modules/grunt-contrib-connect
├── connect-livereload@0.3.2
├── open@0.0.4
├── async@0.2.10
├── portscanner@0.2.2 (async@0.1.15)
└── connect@2.13.1 (uid2@0.0.3, methods@0.1.0, pause@0.0.1, cookie-signature@1.0.1, fresh@0.2.0, qs@0.6.6, debug@0.7.4, bytes@0.2.1, buffer-crc32@0.2.1, raw-body@1.1.3, batch@0.5.0, cookie@0.1.0, compressible@1.0.0, negotiator@0.3.0, send@0.1.4, multiparty@2.2.0)

grunt-jscs-checker@0.4.1 node_modules/grunt-jscs-checker
├── vow@0.4.2
├── hooker@0.2.3
├── jscs@1.3.0 (strip-json-comments@0.1.1, colors@0.6.0-1, vow@0.3.9, esprima@1.0.3, minimatch@0.2.12, xmlbuilder@1.1.2, commander@1.2.0, glob@3.2.7, vow-fs@0.2.3)
└── lodash.assign@2.4.1 (lodash._objecttypes@2.4.1, lodash.keys@2.4.1, lodash._basecreatecallback@2.4.1)

grunt-contrib-jade@0.11.0 node_modules/grunt-contrib-jade
├── chalk@0.4.0 (has-color@0.1.4, ansi-styles@1.0.0, strip-ansi@0.1.1)
├── grunt-lib-contrib@0.6.1 (zlib-browserify@0.0.1)
└── jade@1.2.0 (character-parser@1.2.0, commander@2.1.0, mkdirp@0.3.5, constantinople@2.0.0, with@2.0.0, transformers@2.1.0, monocle@1.1.51)

grunt-contrib-less@0.11.0 node_modules/grunt-contrib-less
├── async@0.2.10
├── lodash@2.4.1
├── chalk@0.4.0 (has-color@0.1.4, ansi-styles@1.0.0, strip-ansi@0.1.1)
├── maxmin@0.1.0 (pretty-bytes@0.1.0, gzip-size@0.1.0)
└── less@1.7.0 (mime@1.2.11, mkdirp@0.3.5, clean-css@2.1.6, source-map@0.1.33, request@2.34.0)

grunt-saucelabs@5.1.0 node_modules/grunt-saucelabs
├── colors@0.6.2
├── saucelabs@0.1.1
├── q@1.0.1
├── lodash@2.4.1
├── request@2.33.0 (json-stringify-safe@5.0.0, aws-sign2@0.5.0, forever-agent@0.5.2, qs@0.6.6, tunnel-agent@0.3.0, oauth-sign@0.3.0, node-uuid@1.4.1, mime@1.2.11, tough-cookie@0.12.1, http-signature@0.10.0, form-data@0.1.2, hawk@1.0.0)
└── sauce-tunnel@1.1.2 (request@2.21.0)

/ we hebben een dir node_modules,	 en die hebben we niet in de bower en zip variants	,

[eric@walnut bootstrap]$ ls node_modules/
btoa                   grunt-contrib-cssmin  grunt-html-validation
canonical-json         grunt-contrib-jade    grunt-jekyll
grunt                  grunt-contrib-jshint  grunt-jscs-checker
grunt-autoprefixer     grunt-contrib-less    grunt-saucelabs
grunt-banner           grunt-contrib-qunit   grunt-sed
grunt-contrib-clean    grunt-contrib-uglify  load-grunt-tasks
grunt-contrib-concat   grunt-contrib-watch   markdown
grunt-contrib-connect  grunt-csscomb         time-grunt
grunt-contrib-copy     grunt-css-flip
grunt-contrib-csslint  grunt-exec

/ we zien dat er al is	, voor dat we een compile hebben gedaan	,

[eric@walnut bootstrap]$ find dist
dist
dist/fonts
dist/fonts/glyphicons-halflings-regular.eot
dist/fonts/glyphicons-halflings-regular.svg
dist/fonts/glyphicons-halflings-regular.woff
dist/fonts/glyphicons-halflings-regular.ttf
dist/css
dist/css/bootstrap.min.css
dist/css/bootstrap-theme.css.map
dist/css/bootstrap-rtl.css
dist/css/bootstrap-theme.css
dist/css/bootstrap-theme.min.css
dist/css/bootstrap.css
dist/css/bootstrap-rtl.min.css
dist/css/bootstrap.css.map
dist/js
dist/js/bootstrap.js
dist/js/bootstrap.min.js

[eric@walnut bootstrap]$ grunt

Running "less:compileCore" (less) task
File dist/css/bootstrap.css.map created.
File dist/css/bootstrap.css created: 128.55 kB → 128.59 kB

Running "less:compileTheme" (less) task
File dist/css/bootstrap-theme.css.map created.
File dist/css/bootstrap-theme.css created: 16.58 kB → 16.63 kB

Running "autoprefixer:core" (autoprefixer) task
File dist/css/bootstrap.css created.
File dist/css/bootstrap.css.map created (source map).

Running "autoprefixer:theme" (autoprefixer) task
File dist/css/bootstrap-theme.css created.
File dist/css/bootstrap-theme.css.map created (source map).

Running "autoprefixer:docs" (autoprefixer) task
File docs/assets/css/src/docs.css created.

Running "autoprefixer:examples" (autoprefixer) task
File docs/examples/blog/blog.css created.
File docs/examples/carousel/carousel.css created.
File docs/examples/cover/cover.css created.
File docs/examples/dashboard/dashboard.css created.
File docs/examples/grid/grid.css created.
File docs/examples/jumbotron-narrow/jumbotron-narrow.css created.
File docs/examples/jumbotron/jumbotron.css created.
File docs/examples/justified-nav/justified-nav.css created.
File docs/examples/navbar-fixed-top/navbar-fixed-top.css created.
File docs/examples/navbar-static-top/navbar-static-top.css created.
File docs/examples/navbar/navbar.css created.
File docs/examples/non-responsive/non-responsive.css created.
File docs/examples/offcanvas/offcanvas.css created.
File docs/examples/rtl/rtl.css created.
File docs/examples/signin/signin.css created.
File docs/examples/starter-template/starter-template.css created.
File docs/examples/sticky-footer-navbar/sticky-footer-navbar.css created.
File docs/examples/sticky-footer/sticky-footer.css created.
File docs/examples/theme/theme.css created.

Running "cssflip:rtl" (cssflip) task
File "dist/css/bootstrap-rtl.css" created.

Running "usebanner:files" (usebanner) task
✔ grunt-banner completed successfully

Running "csscomb:dist" (csscomb) task
>> Using custom config file "less/.csscomb.json"...
>> Sorting file "dist/css/bootstrap-rtl.css"...
>> Sorting file "dist/css/bootstrap-theme.css"...
>> Sorting file "dist/css/bootstrap.css"...

Running "csscomb:examples" (csscomb) task
>> Using custom config file "less/.csscomb.json"...
>> Sorting file "docs/examples/blog/blog.css"...
>> Sorting file "docs/examples/carousel/carousel.css"...
>> Sorting file "docs/examples/cover/cover.css"...
>> Sorting file "docs/examples/dashboard/dashboard.css"...
>> Sorting file "docs/examples/grid/grid.css"...
>> Sorting file "docs/examples/jumbotron-narrow/jumbotron-narrow.css"...
>> Sorting file "docs/examples/jumbotron/jumbotron.css"...
>> Sorting file "docs/examples/justified-nav/justified-nav.css"...
>> Sorting file "docs/examples/navbar-fixed-top/navbar-fixed-top.css"...
>> Sorting file "docs/examples/navbar-static-top/navbar-static-top.css"...
>> Sorting file "docs/examples/navbar/navbar.css"...
>> Sorting file "docs/examples/non-responsive/non-responsive.css"...
>> Sorting file "docs/examples/offcanvas/offcanvas.css"...
>> Sorting file "docs/examples/rtl/rtl.css"...
>> Sorting file "docs/examples/signin/signin.css"...
>> Sorting file "docs/examples/starter-template/starter-template.css"...
>> Sorting file "docs/examples/sticky-footer-navbar/sticky-footer-navbar.css"...
>> Sorting file "docs/examples/sticky-footer/sticky-footer.css"...
>> Sorting file "docs/examples/theme/theme.css"...

Running "csscomb:docs" (csscomb) task
>> Using custom config file "less/.csscomb.json"...
>> Sorting file "docs/assets/css/src/docs.css"...

Running "less:minify" (less) task
File dist/css/bootstrap.min.css created: 129.37 kB → 107.12 kB
File dist/css/bootstrap-rtl.min.css created: 129.5 kB → 107.25 kB
File dist/css/bootstrap-theme.min.css created: 19.7 kB → 17.75 kB

Running "cssmin:docs" (cssmin) task
File docs/assets/css/docs.min.css created: 31.31 kB → 20.2 kB

Running "csslint:src" (csslint) task
>> 2 files lint free.

Running "csslint:examples" (csslint) task
>> 19 files lint free.

Running "csslint:docs" (csslint) task
>> 1 file lint free.

Running "jshint:grunt" (jshint) task
>> 5 files lint free.

Running "jshint:src" (jshint) task
>> 12 files lint free.

Running "jshint:test" (jshint) task
>> 12 files lint free.

Running "jshint:assets" (jshint) task
>> 2 files lint free.

Running "jscs:grunt" (jscs) task
>> 5 files without code style errors.

Running "jscs:src" (jscs) task
>> 12 files without code style errors.

Running "jscs:test" (jscs) task
>> 12 files without code style errors.

Running "jscs:assets" (jscs) task
>> 2 files without code style errors.

Running "qunit:files" (qunit) task
Testing js/tests/index.html Starting test suite
================================================

✔ All tests passed in "alert" module
✔ All tests passed in "button" module
✔ All tests passed in "carousel" module
✔ All tests passed in "collapse" module
✔ All tests passed in "dropdowns" module
✔ All tests passed in "modal" module
✔ All tests passed in "scrollspy" module
✔ All tests passed in "tabs" module
✔ All tests passed in "tooltip" module
✔ All tests passed in "popover" module
✔ All tests passed in "affix" module

================================================
Tests completed in 3114 milliseconds
220 tests of 220 passed, 0 failed.
OK
>> 220 assertions passed (3114ms)

Running "jade:compile" (jade) task
File docs/_includes/customizer-variables.html created.
File docs/_includes/nav/customize.html created.

Running "jekyll:docs" (jekyll) task
Warning: Please install Jekyll before running this task. Use --force to continue.

Aborted due to warnings.


Execution Time (2014-03-21 22:49:49 UTC)
less:compileCore     1.1s  ▇▇▇▇▇ 10%
less:compileTheme   109ms  ▇ 1%
autoprefixer:core   541ms  ▇▇▇ 5%
autoprefixer:theme  135ms  ▇ 1%
csscomb:dist         1.7s  ▇▇▇▇▇▇▇ 16%
csscomb:examples    117ms  ▇ 1%
csscomb:docs        123ms  ▇ 1%
less:minify         495ms  ▇▇ 5%
csslint:src         378ms  ▇▇ 3%
jshint:grunt        142ms  ▇ 1%
jshint:src          438ms  ▇▇ 4%
jshint:test         377ms  ▇▇ 3%
jshint:assets       119ms  ▇ 1%
jscs:grunt          197ms  ▇ 2%
jscs:src            261ms  ▇ 2%
jscs:test           356ms  ▇▇ 3%
qunit:files          3.4s  ▇▇▇▇▇▇▇▇▇▇▇▇▇ 32%
jade:compile        346ms  ▇▇ 3%
Total 10.8s

[eric@walnut bootstrap]$ grunt dist

Running "clean:dist" (clean) task
Cleaning dist...OK
Cleaning docs/dist...OK

Running "less:compileCore" (less) task
File dist/css/bootstrap.css.map created.
File dist/css/bootstrap.css created: 128.55 kB → 128.59 kB

Running "less:compileTheme" (less) task
File dist/css/bootstrap-theme.css.map created.
File dist/css/bootstrap-theme.css created: 16.58 kB → 16.63 kB

Running "autoprefixer:core" (autoprefixer) task
File dist/css/bootstrap.css created.
File dist/css/bootstrap.css.map created (source map).

Running "autoprefixer:theme" (autoprefixer) task
File dist/css/bootstrap-theme.css created.
File dist/css/bootstrap-theme.css.map created (source map).

Running "autoprefixer:docs" (autoprefixer) task
File docs/assets/css/src/docs.css created.

Running "autoprefixer:examples" (autoprefixer) task
File docs/examples/blog/blog.css created.
File docs/examples/carousel/carousel.css created.
File docs/examples/cover/cover.css created.
File docs/examples/dashboard/dashboard.css created.
File docs/examples/grid/grid.css created.
File docs/examples/jumbotron-narrow/jumbotron-narrow.css created.
File docs/examples/jumbotron/jumbotron.css created.
File docs/examples/justified-nav/justified-nav.css created.
File docs/examples/navbar-fixed-top/navbar-fixed-top.css created.
File docs/examples/navbar-static-top/navbar-static-top.css created.
File docs/examples/navbar/navbar.css created.
File docs/examples/non-responsive/non-responsive.css created.
File docs/examples/offcanvas/offcanvas.css created.
File docs/examples/rtl/rtl.css created.
File docs/examples/signin/signin.css created.
File docs/examples/starter-template/starter-template.css created.
File docs/examples/sticky-footer-navbar/sticky-footer-navbar.css created.
File docs/examples/sticky-footer/sticky-footer.css created.
File docs/examples/theme/theme.css created.

Running "cssflip:rtl" (cssflip) task
File "dist/css/bootstrap-rtl.css" created.

Running "usebanner:files" (usebanner) task
✔ grunt-banner completed successfully

Running "csscomb:dist" (csscomb) task
>> Using custom config file "less/.csscomb.json"...
>> Sorting file "dist/css/bootstrap-rtl.css"...
>> Sorting file "dist/css/bootstrap-theme.css"...
>> Sorting file "dist/css/bootstrap.css"...

Running "csscomb:examples" (csscomb) task
>> Using custom config file "less/.csscomb.json"...
>> Sorting file "docs/examples/blog/blog.css"...
>> Sorting file "docs/examples/carousel/carousel.css"...
>> Sorting file "docs/examples/cover/cover.css"...
>> Sorting file "docs/examples/dashboard/dashboard.css"...
>> Sorting file "docs/examples/grid/grid.css"...
>> Sorting file "docs/examples/jumbotron-narrow/jumbotron-narrow.css"...
>> Sorting file "docs/examples/jumbotron/jumbotron.css"...
>> Sorting file "docs/examples/justified-nav/justified-nav.css"...
>> Sorting file "docs/examples/navbar-fixed-top/navbar-fixed-top.css"...
>> Sorting file "docs/examples/navbar-static-top/navbar-static-top.css"...
>> Sorting file "docs/examples/navbar/navbar.css"...
>> Sorting file "docs/examples/non-responsive/non-responsive.css"...
>> Sorting file "docs/examples/offcanvas/offcanvas.css"...
>> Sorting file "docs/examples/rtl/rtl.css"...
>> Sorting file "docs/examples/signin/signin.css"...
>> Sorting file "docs/examples/starter-template/starter-template.css"...
>> Sorting file "docs/examples/sticky-footer-navbar/sticky-footer-navbar.css"...
>> Sorting file "docs/examples/sticky-footer/sticky-footer.css"...
>> Sorting file "docs/examples/theme/theme.css"...

Running "csscomb:docs" (csscomb) task
>> Using custom config file "less/.csscomb.json"...
>> Sorting file "docs/assets/css/src/docs.css"...

Running "less:minify" (less) task
File dist/css/bootstrap.min.css created: 129.37 kB → 107.12 kB
File dist/css/bootstrap-rtl.min.css created: 129.5 kB → 107.25 kB
File dist/css/bootstrap-theme.min.css created: 19.7 kB → 17.75 kB

Running "cssmin:docs" (cssmin) task
File docs/assets/css/docs.min.css created: 31.31 kB → 20.2 kB

Running "copy:fonts" (copy) task
Copied 4 files

Running "concat:bootstrap" (concat) task
File "dist/js/bootstrap.js" created.

Running "uglify:bootstrap" (uglify) task
File dist/js/bootstrap.min.js created: 56.12 kB → 29.71 kB

Running "uglify:customize" (uglify) task
File docs/assets/js/customize.min.js created: 651.16 kB → 637.28 kB

Running "uglify:docsJs" (uglify) task
File docs/assets/js/docs.min.js created: 22.7 kB → 13.89 kB

Running "copy:docs" (copy) task
Copied 10 files

Done, without errors.


Execution Time (2014-03-21 22:52:32 UTC)
less:compileCore     1.1s  ▇▇▇▇▇ 12%
less:compileTheme   108ms  ▇ 1%
autoprefixer:core   571ms  ▇▇▇ 6%
autoprefixer:theme  138ms  ▇ 1%
csscomb:dist         1.7s  ▇▇▇▇▇▇▇▇ 18%
csscomb:examples    117ms  ▇ 1%
csscomb:docs        124ms  ▇ 1%
less:minify         498ms  ▇▇▇ 5%
uglify:bootstrap    491ms  ▇▇▇ 5%
uglify:customize     4.2s  ▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇ 44%
uglify:docsJs       216ms  ▇ 2%
Total 9.7s

/ we zien bij $ grunt dist	, en NIET bij $grunt	,
Running "concat:bootstrap" (concat) task
File "dist/js/bootstrap.js" created.
/ TODO

/ we doen	, en we save js/modal.js in een ander window	,

[eric@walnut bootstrap]$ grunt watch
Running "watch" task
Waiting...
>> File "js/modal.js" changed.
Running "jshint:src" (jshint) task
>> 12 files lint free.

Running "qunit:files" (qunit) task
Testing js/tests/index.html Starting test suite
================================================

✔ All tests passed in "alert" module
✔ All tests passed in "button" module
✔ All tests passed in "carousel" module
✔ All tests passed in "collapse" module
✔ All tests passed in "dropdowns" module
✔ All tests passed in "modal" module
✔ All tests passed in "scrollspy" module
✔ All tests passed in "tabs" module
✔ All tests passed in "tooltip" module
✔ All tests passed in "popover" module
✔ All tests passed in "affix" module

================================================
Tests completed in 2984 milliseconds
220 tests of 220 passed, 0 failed.
OK
>> 220 assertions passed (2984ms)

Done, without errors.


Execution Time (2014-03-21 22:56:57 UTC)
jshint:src   537ms  ▇▇▇▇▇▇▇ 14%
qunit:files   3.3s  ▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇ 86%
Total 3.9s
Completed in 5.105s at Fri Mar 21 2014 23:57:01 GMT+0100 (CET) - Waiting...

/ we zien NIET dat bootstrap.js opnieuw wordt create	,
/ TODO

/ 7	. 

/ we zien	,
./node_modules/grunt-contrib-less/node_modules/less/bin/lessc

/ dit is niet zo bij bootstrap-sass	, daar zit sass en compass in $ gem install	,

/ 7	.

/ Lees	,
http://getbootstrap.com/getting-started/

/ STRAKS 

 


/ Einde BOOTSTRAP

/ BOOTSTRAP-SASS

/ lees	,
https://github.com/twbs/bootstrap-sass

/ bower	,

[eric@walnut withbower]$  pwd
/home/eric/Devel/Web/Bootstrap/bootstrap-sass/withbower
[eric@walnut withbower]$ bower install twbs/bootstrap-sass

/ git	,

[eric@walnut withgit]$ git clone https://github.com/twbs/bootstrap-sass.git
[eric@walnut withgit]$ cd bootstrap-sass

/ we zien geen Gruntfile.js	,



/ Einde BOOTSTRAP-SASS



/ KARMA JASMINE

[eric@walnut example]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/q/example

[eric@walnut example]$ vi test/unit/oefjasmine.js 

/ 7	.

describe("spec",function(){
  it("it",function(){
    expect(undefined).toEqual(null)
    console.log(undefined===null)
  })
})

/ console.log	kan, en we zien	,
LOG: false
/ maar het is geen test, dus zal geen pass/fail geven	,

    expect(undefined).toEqual(null)
/ pass, dus is ==
    expect(undefined).toEqual(null)
/ fails, dus is ===

/ 7	. 

/ describe's runs meteen, en de it's later	,

$ vi test/unit/oefjasmine.js

describe("suite",function(){
  var foo=3
3
  var baz=foo
3
  console.log(foo)
  console.log(baz)
  beforeEach(function(){
    foo+=1
  })
  it("spec",function(){
    expect(foo).toBe(4)
pass
    foo+=2
    expect(foo).toBe(6)
pass
  })
  it("spec",function(){
    expect(foo).toBe(7)
pass
    foo+=3
    expect(foo).toBe(10)
pass
  })
  describe("inner suite",function(){
    var bar=foo
3
  console.log(foo)
  console.log(bar)
    beforeEach(function(){
			foo++
      bar++
    })
    it("spec",function(){
      expect(bar).toBe(4)
pass
      expect(foo).toBe(12)
pass
    })
  })
})

/ eerst execs alle suites, dus iedere describe	,
/ beforeEach execs voor iedere spec	, dus iedere it	,
/ Dus als de inner suite exec, is foo=3, en bar=foo=3,	 maar als de spec in de inner suite exec, is foo=12, want hij was 10 na de 2 outer it's 	, en dan voor de inner it worden 2 beforeEach exec, de outer en de inner!

/ 7	.

$ vi test/unit/oefjasmine2.js

describe("A spy", function() {
  var foo, bar = null

  beforeEach(function() {
    foo = {
      setBar: function(value) {
        bar = value
      }
    }

    spyOn(foo, 'setBar')

    foo.setBar(123)
    foo.setBar(456, 'another param')
  })
  

  it("tracks that the spy was called", function() {
    expect(foo.setBar).toHaveBeenCalled()
  })

  it("tracks all the arguments of its calls", function() {
    expect(foo.setBar).toHaveBeenCalledWith(123)
    expect(foo.setBar).toHaveBeenCalledWith(456, 'another param')
  })

  it("stops all execution on a function", function() {
    expect(bar).toBeNull()
  })
})

/ door de regel	,
/ wordt de fct foo.bar NIET (2 keer ) called	,
/ dus daarom pass laatste test	,

/ als we de regel	,
    spyOn(foo, 'setBar')
/ NIET, dan wordt foo.bar voor iedere it 2 keer called	, maar dan 	,

Chrome 31.0.1650 (Linux) A spy tracks all the arguments of its calls FAILED
	Error: Expected a spy, but got Function.
	    at null.<anonymous> (/home/eric/Devel/Web/angularjs/DevGuide/q/example/test/unit/  beforeEach(function() {
2.js:26:24)

 7	.

/ we hebben jasmine versie 1.3	,

[eric@walnut example]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/q/example

$ vi test/unit/oefjasmine3.js

describe("A spy, when configured to call through", function() {
  var foo, bar, fetchedBar;

  beforeEach(function() {
    foo = {
      setBar: function(value) {
        bar = value;
      },
      getBar: function() {
        return bar;
      }
    };

    spyOn(foo, 'getBar').andCallThrough();

    foo.setBar(123);
    fetchedBar = foo.getBar();
  });
  it("tracks that the spy was called", function() {
    expect(foo.getBar).toHaveBeenCalled();
  });

  it("should not effect other functions", function() {
    expect(bar).toEqual(123);
  });

  it("when called returns the requested value", function() {
    expect(fetchedBar).toEqual(123);
  });
});

/ OK	,

/7	.

$ vi oefjasmine4.js

ddescribe("A spy, when created manually", function() {
  var whatAmI;

debugger
  beforeEach(function() {
debugger
    whatAmI = jasmine.createSpy('whatAmI');
/ een fct,	
    whatAmI("I", "am", "a", "spy");
/ call de fct, 	voor iedere spec	,
  });

  it("is named, which helps in error reporting", function() {
    expect(whatAmI.identity).toEqual('whatAmI');
  });

  it("tracks that the spy was called", function() {
    expect(whatAmI).toHaveBeenCalled();
  });

  it("tracks its number of calls", function() {
    expect(whatAmI.calls.length).toEqual(1);
  });

  it("tracks all the arguments of its calls", function() {
    expect(whatAmI).toHaveBeenCalledWith("I", "am", "a", "spy");
  });

  it("allows access to the most recent call", function() {
    expect(whatAmI.mostRecentCall.args[0]).toEqual("I");
  });
});


    whatAmI = jasmine.createSpy('whatAmI');
/ is een fct	,
 
/ identity is een prop van jasmine.Spy	,

/ 7	.

$ vi test/unit/oefjasmine4.js

ddescribe("Multiple spies, when created manually", function() {
  var tape;

  beforeEach(function() {
debugger
    tape = jasmine.createSpyObj('tape', ['play', 'pause', 'stop', 'rewind']);

    tape.play();
    tape.pause();
    tape.rewind(0);
  });

...
/ het 1ste arg "tape" is base name	, dus van tape.play is de identity="tape.play"	,

jasmine.createSpyObj = function(baseName, methodNames) {
  var obj = {};
  for (var i = 0; i < methodNames.length; i++) {
    obj[methodNames[i]] = jasmine.createSpy(baseName + '.' + methodNames[i]);
  }

/ Dus jasmine.createSpy creates een fct, jasmine.createSpyObj creates een obj (met fcts)

/ ERICJ
 

 


/ Einde KARMA JASMINE

/ ANGULAR TEST FACTORY SERVICES 

/ 7	.

/ we kunnen  debugger set in	,
$ vi test/unit/script4_spec.js

/ Q. Wat is $injector in	,
/ A. Hiet is die created door createInjector, en dus die uit instanceCache	,

 inject(function($injector) {
debugger
    notify = $injector.get('notify');

/ en dan in 
$ vi Gruntfile.js

   jshint:{
      options:{
        asi:true,
        "-W087":true,
      },

/ maar is niet nodig	, we kunnen b's set in 
$ vi angular-mocks.js

$ vi angular.js

function publishExternalAPI(angular){
  extend(angular, {
    'element': jqLite, 
    'injector': createInjector,
...

$ vi angular-mocks.js

 window.inject = angular.mock.inject = function() {
...
    return isSpecRunning() ? workFn() : workFn; 
    function workFn() {
        injector = currentSpec.$injector = angular.injector(modules);

/ c in angular.js	,
function createInjector(modulesToLoad) {

/ die ook wordt called in angular.js	,

  var doBootstrap = function() {
   var injector = createInjector(modules);

/ 7	.

$ vi test/unit/script4_spec.js  

	module('app4')

	module(function($provide) {
    $provide.value('$window', mock);
  });

  inject(function($injector) {
    notify = $injector.get('notify');
  });

/ 13 

module	,

/ 13

inject
/c
        injector = currentSpec.$injector = angular.injector(modules);
/ er wordt een nieuwe $injector create, net als in instanceCache	,

/ in loadModules,	
        } else if (isFunction(module)) {
            runBlocks.push(providerInjector.invoke(module));
/c
function($provide) {
->    $provide.value('$window', mock);
  });
/ hij heeft $provide resolved	, providerInjector.invoke is een fct, die cache=providerCache in closure scope heeft	,

/c
 function value(name, val) { 
->		return factory(name, valueFn(val)); 
/s
function valueFn(value) {
->	return function() {
		return value;
	};
/ value=mock

/ dan $provide.factory, $provide.provider	,	
    return providerCache[name + providerSuffix] = provider_;
"$windowProvider":{$get:function(){
	return value
}
}
/ en value is in closure scope=mock	,



/ Einde ANGULAR TEST SERVICES 

/ DEBUG ANGULAR BOOTSTRAP MODULES PROVIDERS

/ 7	.

http://docs.angularjs.org/guide/providers

Note: A Word on Modules

/ recipes=providers	,

/ 7	.

/ Lees	,
http://docs.angularjs.org/guide/module
Unit Testing

/ we debug	,
http://web/angularjs/DevGuide/q/example/index5.html

$ vi index5.html
<div ng-app="app5">
</div>

$ vi app/js/script5.js
angular.module("helper",[])
angular.module("app5",["helper"])


/ 13	.

function publishExternalAPI(angular){

/maakt angular obj, met element, ... fcts en module fct, en creates ng module	,

  extend(angular, {
    'bootstrap': bootstrap,
    'element': jqLite,
    'injector': createInjector,
...
/ maar de fct module is er niet bij	, dat gaan we nu doen	, 

  angularModule = setupModuleLoader(window);
/s
function setupModuleLoader(window) {
/ creates angular.module fct	,

  function ensure(obj, name, factory) {
    return obj[name] || (obj[name] = factory());
  }
/ def ensure fct,	

  return ensure(angular, 'module', function() {
/ call op ensure	, deze anon fct creates de fct angular.module	, 
    var modules = {};
    return function module(name, requires, configFn) {
/ dit is de fct angular.module	,

      return ensure(modules, name, function() {
/ creates module name	, sets in modules	,

        var moduleInstance = {
          _invokeQueue: invokeQueue,
          _runBlocks: runBlocks,
          provider: invokeLater('$provide', 'provider'),
					config:invokeLater("$injector","invoke")
/ al deze fcts sets al deze provider creation fcts op de run queue, en loadModules calls ze	, 
...
				}
				if (configFn) config(configFn);	
        return  moduleInstance;

      }); // return ensure(modules, name, function() {
    }; // return function module(name, requires, configFn)
  });// return ensure(angular, 'module', function() {

} // setupModuleLoader


/ 13	.

in index5.html	,

<script src="/angularjs/angular.js_cp/build/angular.js"></script>
<script src="app/js/script5.js"></script>

/ en in angular.js	,

  jqLite(document).ready(function() {
    angularInit(document, bootstrap);
  });

/ eerst wordt script5.js exec, hierin wordt angular.module  2 keer called, en wordt modules "helper" en "app5" create	,

/ 13	.

/ angularInit bepaalt de module, app5 uit ng-app="app5"	, en doBootstrap zet er 2 bij,	

		modules.unshift(['$provide', function($provide) {
      $provide.value('$rootElement', element);
    }]);
/ deze wordt strakts $injector.invoke	, ($injector uit providerCache, want in loadModules worden alleen providers create)	,

    modules.unshift('ng');

/ en calls	,
    var injector = createInjector(modules);
////////////////////////////////////////////////////
/ 3 modules dus, 	die hij gaat load	, dwz hij maakt providers ,recipes ,

/ in loadModules ,
        if (isString(module)) { 

           var invokeArgs = invokeQueue[i],
                provider = providerInjector.get(invokeArgs[0]);
            provider[invokeArgs[1]].apply(provider, invokeArgs[2]);
//////////////////////////////////////
/ (*), zie (**)	,
/ hij maakt providers,	ook die van directives	,

        } else if (isArray(module)) {
            runBlocks.push(providerInjector.invoke(module));


/ $provide heeft fct, die allemaal een provider maken en ze in de providerCache set ( ze return niets)	, $provide.provider	, $provide.factory	,

/ 137	.module "ng"	,

/ invokeArgs[0]="$provide"
/ providerInjector.get heeft cache=providerCache (en factory=fct die err geeft) in z'n closure  scope, en hij set provider=providerCache.$provide,
            provider[invokeArgs[1]].apply(provider, invokeArgs[2]);
/ invokeArgs[1]="provider"
/ invokeArgs[2]=["$locale",function $LocaleProvider] 
/ het 1ste arg "$locale" wordt used voor de name, key van de provider, dus "$locale"+"Provider"	,
/ creates een provider "$localeProvider" in de providerCache	,
/ $locale is geen arg van $LocaleProvider, TODO

/ invokeArgs[0]="$injector"
/ kan alleen "$provider" of "$injector" zijn	,
/ providerInjector.get heeft cache=providerCache (en factory=fct die err geeft) in z'n closure  scope, en hij set provider=providerCache.$injector	,
            provider[invokeArgs[1]].apply(provider, invokeArgs[2]);
/ invokeArgs[1]="invoke"
/ invokeArgs[2]=["$provide",function ngModule]
/ itt bij $provide.provider is hier bij $injector.invoke  het 1ste arg "$provide" de inj in de ctor ngModule	,
/ invokes fct ngModule , en injects $provide	,

/ 137	.module, die uit 1 fct bestaat	, in doBootstrap	,

  modules.unshift(['$provide', function($provide) {
      $provide.value('$rootElement', element);
    }]);

/ $injector heeft get fct die een obj maakt (kan fct zijn, is ook een obj), de providerCache en de instanceCache hebben beide een $injector	, 
/ de providerCache.$injector.get heeft in closure scope cache=providerCache en factory=fct die err geeft, want het is de bedoeling dat providerCache.$injector.get alleen $provide en $injector geeft, die er al zijn, en factory niet calls	,
/ de instanceCache.$injector.get heeft in closure scope cache=instanceCache en factory=fct(*) ,

/ $injector heeft invoke fct, die fct invokes en eerst args inject, door de $injector.get van hierboven te call	,

/ 13	.

/ als we injector is create in doBootstrap	, 

    modules = modules || [];
    modules.unshift(['$provide', function($provide) {
      $provide.value('$rootElement', element);
    }]);
    modules.unshift('ng');
    var injector = createInjector(modules);
/ modules zijn verwerkt: de recipes, de providers staan in providerCache, WH zijn de modules zelf niet meer nodig	 TODO,
/ behalve de $injector is de instanceCache nog leeg,	
/ injector=instanceCache.$injector	,
 
    injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate',
       function(scope, element, compile, injector, animate) {
        scope.$apply(function() {
          element.data('$injector', injector);
          compile(element)(scope);
        });
      }]
    );
/ $rootScope wordt 1ste obj in instanceCache,  $injector.get calls factory uit z'n closure scope	,
//////////////////////////////////////
/ (**), see (*)
/ factory maakt instances	, in instanceCache	,
function(servicename) {
     var provider = providerInjector.get(servicename + providerSuffix);
/ de provider uit de providerCache, created door load module, toen injector werd create	,
     return instanceInjector.invoke(provider.$get, provider);
/ call provider.$get	, die maakt de inst	,

/ 13	.

/ De injector kan een module maar 1 keer load	,

  function loadModules(modulesToLoad){
    forEach(modulesToLoad, function(module) {
      if (loadedModules.get(module)) return;

/ 13	.

/ 1 ng-app elem heeft maar zin, van een tweede elem wordt de module nietload, en wordt de DOM tree waar hij root van is niet compiled


/ Einde DEBUG ANGULAR BOOTSTRAP MODULES PROVIDERS

/ ANGULAR TEST MODULES 

/ Lees	,
http://docs.angularjs.org/guide/module

/ 7	.

[eric@walnut egghead.io]$ pwd
/home/eric/Devel/Web/angularjs/egghead.io

[eric@walnut egghead.io]$ vi 4a/script.js 

app.factory("Data",["$window",function($window){
  return{message:"I'm "+$window}
}])
app.controller("ctrl",function($scope,Data){
  $scope.data=Data
})

/ onthoud: de fct in app.factory is de $get fct van de provider	,
/ we komen in	,
 function factory(name, factoryFn) { 
		return provider(name, { 
			$get: factoryFn 
		}); 
	}
/ en	,
factoryFn: Array[2]
0: "$window"
1: function ($window){

/ Wanneer called? als de controller wordt create	,

/ in nodeLinkFn	,
          forEach(controllerDirectives, function(directive) {
            var locals = {
              $scope: ... : scope,
              $element: $element,
              $attrs: attrs,
              $transclude: transcludeFn
            }, controllerInstance;

            controller = directive.controller;
            if (controller == '@') {
              controller = attrs[directive.name];
            }

            controllerInstance = $controller(controller, locals);
/c

function $ControllerProvider() {
  this.$get = ['$injector', '$window', function($injector, $window) {
    return function(expression, locals) {
/ = $controller

      instance = $injector.instantiate(expression, locals);
/c
    instance = new Constructor();
      returnedValue = invoke(Type, instance, locals);
/c
        args.push(
          : getService(key)
/ key="Data"
/c
         return cache[serviceName] = factory(serviceName);
/c
           var provider = providerInjector.get(servicename + providerSuffix);
provider: Object
$get: Array[2]
0: "$window"
1: function ($window){
            return instanceInjector.invoke(provider.$get, provider);
/c
      return fn.apply(self, args);
/ heeft $window resolved	,
/c
	return{message:"I'm "+$window}

/ 7	.

/ we maken eerst app	,

[eric@walnut example]$ pwd
/home/eric/Devel/Web/angularjs/DevGuide/q/example
$ vi index6.html

<div ng-app="app6">
<div ng-controller="ctrl">
  <h1>{{greet}}</h1>
</div>
</div>

$ vi app/js/script6.js

angular.module('app6', []).

  factory('alert', function($window) {
    return function(text) {
      $window.alert(text);
    }
  }).

  value('salutation', 'Hello').

  factory('greet', function(alert, salutation) {
    return function(name) {
      alert(salutation + ' ' + name + '!');
    }
  }).
  controller("ctrl",["$scope","greet",function($scope,greet){
    $scope.greet=greet("foo")
  }])

/ OK



/ Einde ANGULAR TEST MODULES 


/ DEBUG ANGULAR ROUTE 

/ 7	.

var ngRouteModule = angular.module('ngRoute', ['ng']).
                        provider('$route', $RouteProvider);
/ $provide.provider maakt de provider: doet new $RouteProvider	, het js obj met $get fct is de provider	,
      provider_ = providerInjector.instantiate(provider_);
/ dus je kan ook inj in de ctor	,



/ 7	.


/ $provide.provider maakt een provider	 (instantiates, je geeft de ctor mee)
/ $injector.invoke calls a function, en injects param	, die hij eerst oplost	, 
        args.push(
          locals && locals.hasOwnProperty(key)
          ? locals[key]
          : getService(key)
/ locals krijgt invoke mee, en getService is in z'n closure scope, en getService heeft cache en factory in closure scope, als de annotatie nog moet wordt resolved	,

/ 7	.

/ we zien bij de ngRoute module 4 items op de invokeQueue	,

  function loadModules(modulesToLoad){
          for(invokeQueue = moduleFn._invokeQueue, i = 0, ii = invokeQueue.length; i < ii; i++) {
            var invokeArgs = invokeQueue[i], provider = providerInjector.get(invokeArgs[0]);

invokeQueue: Array[4]

0: Array[3]
0: "$provide"
1: "provider"
2: Arguments[2]
0: "$route"
1: function $RouteProvider(){

1: Array[3]
0: "$provide"
1: "provider"
2: Arguments[2]
0: "$routeParams"
1: function $RouteParamsProvider() {

2: Array[3]
0: "$compileProvider"
1: "directive"
2: Arguments[2]
0: "ngView"
1: function ngViewFactory( $route, $anchorScroll, $animate) {

3: Array[3]
0: "$compileProvider"
1: "directive"
2: Arguments[2]
0: "ngView"
1: function ngViewFillContentFactory($compile, $controller, $route) {

/ module app heeft 2 items op de invokeQueue	,

/ app.config=$injector.invoke,	dus de fct wordt meteen invoke bij loadModules("app")	,
/ omdat "ngRoute" een dep, is $routeProvider al create	,

app.config(function($routeProvider){
  $routeProvider.when("/",{
...
=>
invokeQueue: Array[2]
0: Array[3]
0: "$injector"				/ providerInjector , want dat is altijd in loadModules	,
1: "invoke"
2: Arguments[1]
0: function ($routeProvider){

app.controller("ctrl",function($scope){
    $scope.model={
...
->
1: Array[3]
0: "$controllerProvider"
1: "register"
2: Arguments[2]
0: "ctrl"
1: function ($scope){

/ in loadModules worden de 1ste fct invoked	 (bij process invokeQueue),

/=
app.config(function($controllerProvider){
  $controllerProvider.register("ctrl",function($scope){
    $scope.model={
      message:"This is my app!!"
    }
  })
})

/ dus deze fct wordt invoke bij loadModules("app")	, 



/ Einde DEBUG ANGULAR ROUTE 



/ ANGULAR KARMA

http://karma-runner.github.io/0.10/index.html

/ we zien in de slideshow 2 videos	,

/ 1ste video	,
http://www.youtube.com/watch?v=MVw8N3hTfCI

[eric@walnut ]$ karma --help
...

/ we kunnen op 2 plaatsen oefenen	,

/ 7	.

[eric@walnut angular]$ pwd
/home/eric/Devel/Web/Yeoman/gettingstarted/angular
/ Deze hebben we create met $ yo angular	, er is al een karma.config.js	,

/ 7	.

/ lees	,
http://docs.angularjs.org/tutorial

[eric@walnut angularjs]$ git clone https://github.com/angular/angular-phonecat.git
...
[eric@walnut angular-phonecat]$ karma start config/karma.conf.js 
INFO [karma]: Karma v0.10.9 server started at http://localhost:9876/
INFO [launcher]: Starting browser Chrome
INFO [Chrome 31.0.1650 (Linux)]: Connected on socket XKgqOLOrApB0u9bOu7fw
Chrome 31.0.1650 (Linux): Executed 4 of 4 SUCCESS (0.32 secs / 0.041 secs)

/ we zien inderdaad chrome started	, 
/ we openen een ander window	, en geven net als in de video	,
[eric@walnut angular-phonecat]$ find -name "*filter*"
./app/js/filters.js
./test/unit/filtersSpec.js

[eric@walnut angular-phonecat]$ vi app/js/filters.js 
...
/ als we save	, zien we in het 1ste window	,

INFO [watcher]: Removed file "/home/eric/Devel/Web/angularjs/angular-phonecat/app/js/filters.js".
INFO [watcher]: Added file "/home/eric/Devel/Web/angularjs/angular-phonecat/app/js/filters.js".
Chrome 31.0.1650 (Linux): Executed 4 of 4 SUCCESS (0.477 secs / 0.04 secs)

/ of	,

INFO [watcher]: Changed file "/home/eric/Devel/Web/angularjs/angular-phonecat/app/js/filters.js".
Chrome 31.0.1650 (Linux): Executed 4 of 4 SUCCESS (0.359 secs / 0.025 secs)

[eric@walnut angular-phonecat]$ vi test/unit/filtersSpec.js 

  describe('checkmark', function() {
    it('should convert boolean values to unicode checkmark or cross',
        inject(function(checkmarkFilter) {
      expect(checkmarkFilter(true)).toBe('\u2713');
      expect(checkmarkFilter(false)).toBe('\u2718');
    }));
    it("should convert undefined to ?",
        inject(function(checkmarkFilter) {
      expect(checkmarkFilter(undefined)).toBe("?");
    }))
  });

/ let op inject , dit is niet op de video	,

/ en save	 de test	, niet de src file,

/ we zien in karma-window	,

Chrome 31.0.1650 (Linux) filter checkmark should convert undefined to ? FAILED
	ReferenceError: checkmarkFilter is not defined
	    at null.<anonymous> (/home/eric/Devel/Web/angularjs/angular-phonecat/test/unit/filtersSpec.js:18:14)
Chrome 31.0.1650 (Linux): Executed 5 of 5 (1 FAILED) (0.479 secs / 0.046 secs)

/ we edit de source	,

angular.module('phonecatFilters', []).filter('checkmark', function() {
  return function(input) {
    dump(input)
    console.log(input)
    if(angular.isUndefined(input))return "!"
    return input ? '\u2713' : '\u2718';
  };
});

/ we zien in de karma-window, 

INFO [watcher]: Changed file "/home/eric/Devel/Web/angularjs/angular-phonecat/app/js/filters.js".
DUMP: true
LOG: true
DUMP: false
LOG: false
DUMP: undefined
LOG: undefined
Chrome 31.0.1650 (Linux) filter checkmark should convert undefined to ? FAILED
	Expected '!' to be '?'.
	Error: Expected '!' to be '?'.
	    at null.<anonymous> (/home/eric/Devel/Web/angularjs/angular-phonecat/test/unit/filtersSpec.js:19:42)
	    at Object.invoke (/home/eric/Devel/Web/angularjs/angular-phonecat/app/lib/angular/angular.js:3762:17)
	    at workFn (/home/eric/Devel/Web/angularjs/angular-phonecat/app/lib/angular/angular-mocks.js:2144:20)
Chrome 31.0.1650 (Linux): Executed 5 of 5 (1 FAILED) (0.483 secs / 0.046 secs)

/ we zien de chrome's console log ook op de command line	,
/ we zien in chrome's console,	
true 
false 
undefined 

/we edit src	,

angular.module('phonecatFilters', []).filter('checkmark', function() {
  return function(input) {
    dump(input)
    console.log(input)
    if(angular.isUndefined(input))return "?"
    return input ? '\u2713' : '\u2718'
  };
});

/we zien in karma window	,

INFO [watcher]: Changed file "/home/eric/Devel/Web/angularjs/angular-phonecat/app/js/filters.js".
DUMP: true
LOG: true
DUMP: false
LOG: false
DUMP: undefined
LOG: undefined
Chrome 31.0.1650 (Linux): Executed 5 of 5 SUCCESS (0.38 secs / 0.051 secs)

/ 7	.

/ 2de video	,

http://www.youtube.com/watch?v=5mHjJ4xf_K0

/ in angular project zelf, is	,

$ vi src/ng/http.js
...

/ lees / Miscellaneous / Develop	,
http://docs.angularjs.org/misc/contribute

$ grunt test:unit
/ run unit tests 1 keer	,

$ grunt autotest
npm http GET https://registry.npmjs.org/browserstack
npm http 304 https://registry.npmjs.org/browserstack
grunt-jasmine-node@0.1.0 node_modules/grunt-jasmine-node

karma-browserstack-launcher@0.0.8 node_modules/karma-browserstack-launcher
└── browserstack@1.0.1
Running "autotest:jqlite" (autotest) task
INFO [karma]: Karma v0.11.9 server started at http://localhost:9876/
INFO [launcher]: Starting browser Chrome
INFO [Chrome 31.0.1650 (Linux)]: Connected on socket HMX_eNjiXVW7d551lbjg with id 4106423
Chrome 31.0.1650 (Linux): Executed 2683 of 2683 SUCCESS (8.57 secs / 8.949 secs)

/ we save http.js
INFO [watcher]: Changed file "/home/eric/Devel/Web/angularjs/angular.js/src/ng/http.js".
Chrome 31.0.1650 (Linux): Executed 2683 of 2683 SUCCESS (8.576 secs / 8.745 secs)

/ 13	.

[eric@walnut angular.js]$ vi test/ng/httpSpec.js 
...
/ save
/ we zien  in grunt-window	,
INFO [watcher]: Changed file "/home/eric/Devel/Web/angularjs/angular.js/src/ng/http.js".
Chrome 31.0.1650 (Linux): Executed 2683 of 2683 SUCCESS (8.576 secs / 8.745 secs)

/ 13	.

/ als we httpSpec.js edit met ddescribe, dan runs hij alleen de tests in deze suite	,
[eric@walnut angular.js]$ vi test/ng/httpSpec.js 

ddescribe('$http', function() {
...

/ in het grunt-window 	,
 INFO [watcher]: Changed file "/home/eric/Devel/Web/angularjs/angular.js/test/ng/httpSpec.js".
Chrome 31.0.1650 (Linux): Executed 102 of 2683 (skipped 2581) SUCCESS (0.288 secs / 0.265 secs)

/ 13	.

/ als we httpSpec.js edit met iit	, dan runs hij alleen deze test	,

[eric@walnut angular.js]$ vi test/ng/httpSpec.js 

    describe('response interceptors', function() {

      iit('should default to an empty array', module(function($httpProvider) {
        expect($httpProvider.responseInterceptors).toEqual([]);
      }));

/ in het grunt-window 	,
 INFO [watcher]: Changed file "/home/eric/Devel/Web/angularjs/angular.js/test/ng/httpSpec.js".
Chrome 31.0.1650 (Linux): Executed 1 of 2683 (skipped 2682) SUCCESS (0.258 secs / 0.016 secs)

/ 13	.

/ we set console.log niet in de test, maar in de src	,

/ we set in httpSpec.js weer describe,	 maar iit laten we staan, 

$ vi test/ng/httpSpec.js

		describe('$http', function() {
...

   describe('response headers parser', function() {

      iit('should parse basic', function() {
        var parsed = parseHeaders(


$ vi src/ng/http.js

function parseHeaders(headers) {
...
  console.log(parsed)
  console.log(window.innerHeight)
  return parsed;

/ save	,
/ we zien in grunt-window	,

INFO [watcher]: Changed file "/home/eric/Devel/Web/angularjs/angular.js/src/ng/http.js".
LOG: Object{date: 'Thu, 04 Aug 2011 20:23:08 GMT', content-encoding: 'gzip', transfer-encoding: 'chunked', x-cache-info: 'not cacheable; response has already expired, not cacheable; response has already expired', connection: 'Keep-Alive', x-backend-server: 'pm-dekiwiki03', pragma: 'no-cache', server: 'Apache', x-frame-options: 'DENY', content-type: 'text/html; charset=utf-8', vary: 'Cookie, Accept-Encoding', keep-alive: 'timeout=5, max=1000', expires: 'Thu: , 19 Nov 1981 08:52:00 GMT'}
LOG: 422

/ Maar dit zien we ook in de console in chrome	,

/ 13	.

$ vi src/ng/http.js

function parseHeaders(headers) {
  var parsed = {}, key, val, i;

  if (!headers) return parsed;

  debugger

/ save

/ we zien dat in chrome de debugger er inderdaad in valt	,

/ we zien stack van jasmine fcts	, httpSpec.js, http.js	,
./node_modules/karma-jasmine/lib/jasmine.js

/ 13	.

/ we kunnen firefox start, en geef	,
localhost:9876

/ dan zien we in grunt-window	,

INFO [watcher]: Changed file "/home/eric/Devel/Web/angularjs/angular.js/src/ng/http.js".
LOG: Object{date: 'Thu, 04 Aug 2011 20:23:08 GMT', content-encoding: 'gzip', transfer-encoding: 'chunked', x-cache-info: 'not cacheable; response has already expired, not cacheable; response has already expired', connection: 'Keep-Alive', x-backend-server: 'pm-dekiwiki03', pragma: 'no-cache', server: 'Apache', x-frame-options: 'DENY', content-type: 'text/html; charset=utf-8', vary: 'Cookie, Accept-Encoding', keep-alive: 'timeout=5, max=1000', expires: 'Thu: , 19 Nov 1981 08:52:00 GMT'}
Chrome 31.0.1650 (Linux) LOG: Object{date: 'Thu, 04 Aug 2011 20:23:08 GMT', content-encoding: 'gzip', transfer-encoding: 'chunked', x-cache-info: 'not cacheable; response has already expired, not cacheable; response has already expired', connection: 'Keep-Alive', x-backend-server: 'pm-dekiwiki03', pragma: 'no-cache', server: 'Apache', x-frame-options: 'DENY', content-type: 'text/html; charset=utf-8', vary: 'Cookie, Accept-Encoding', keep-alive: 'timeout=5, max=1000', expires: 'Thu: , 19 Nov 1981 08:52:00 GMT'}
Firefox 25.0.0 (Linux): Executed 1 of 2648 (skipped 2647) SUCCESS (0.503 secs / 0.02 secs)
Chrome 31.0.1650 (Linux): Executed 1 of 2683 (skipped 2682) SUCCESS (0.235 secs / 0.026 secs)
TOTAL: 2 SUCCESS

/ 7	.

[eric@walnut angular.js]$  grunt test:e2e
npm http GET https://registry.npmjs.org/browserstack
npm http 304 https://registry.npmjs.org/browserstack
grunt-jasmine-node@0.1.0 node_modules/grunt-jasmine-node

karma-browserstack-launcher@0.0.8 node_modules/karma-browserstack-launcher
└── browserstack@1.0.1
Running "connect:testserver" (connect) task
Started connect web server on 0.0.0.0:8000.

Running "tests:end2end" (tests) task
WARN [config]: "/" is proxied, you should probably change urlRoot to avoid conflicts
WARN [karma]: Port 9876 in use
INFO [karma]: Karma v0.11.9 server started at http://localhost:9877/
INFO [launcher]: Starting browser Chrome
INFO [Chrome 31.0.1650 (Linux)]: Connected on socket TzMoaYkhtIq3oBQG-BCD with id 17602550
Chrome 31.0.1650 (Linux): Executed 240 of 240 SUCCESS (1 min 41.221 secs / 1 min 39.136 secs)

Done, without errors.

/ TODO









/ Lees	,
http://www.yearofmoo.com/2013/09/advanced-testing-and-debugging-in-angularjs.html



/ Einde ANGULAR KARMA

/ MISC

www.ng-conf.org
/ we keken naar	,
http://www.youtube.com/user/ngconfvideos
http://www.youtube.com/watch?v=ZlQp2ttE9mU	/ require
https://www.youtube.com/watch?v=o9Xo_WFAyqg	 / bower
http://www.youtube.com/watch?v=4yulGISBF8w	/require & angular

/ Einde MISC

/ DEBUG ANGULAR MODULE

/ use app.controller om een ctrl register, want deze kunnen we doen in eigen js scope	, var ctrl=function(){...} kan alleen in global scope	, 

/ of var ctrl=function(){...} in de child scope	,
 TODO (hoe doe je dat?)

$ vi 5a/script.js

var app=angular.module("app",[])
app.factory("Data",function(){
  return{message:"I'm from a service"}
})
app.controller("ctrl",function($scope,Data){
  $scope.data=Data
})

/ we komen in	,

  function loadModules(modulesToLoad){
    forEach(modulesToLoad, function(module) {
module="app"
          moduleFn = angularModule(module);
          for(invokeQueue = moduleFn._invokeQueue, i = 0, ii = invokeQueue.length; i < ii; i++) {
            var invokeArgs = invokeQueue[i],
                provider = providerInjector.get(invokeArgs[0]);
            provider[invokeArgs[1]].apply(provider, invokeArgs[2]);

invokeQueue: Array[2]
0: Array[3]

0: "$provide"
1: "factory"
2: Arguments[2]
0: "Data"
1: function (){
  return{message:"I'm from a service"}

1: Array[3]
0: "$controllerProvider"
1: "register"
2: Arguments[2]
0: "ctrl"
1: function ($scope,Data){
  $scope.data=Data

/ in loadModules	,
function $ControllerProvider() {
  var controllers = {}, CNTRL_REG = /^(\S+)(\s+as\s+(\w+))?$/;
  this.register = function(name, constructor) {
      controllers[name] = constructor;

/ in nodeLinkFn	,
           controller = directive.controller;
            if (controller == '@') {
/ JA
              controller = attrs[directive.name];
"ctrl"
            }
            controllerInstance = $controller(controller, locals);
/s
/ $controller=$ControllerProvider.$get(...)	, =
   return function(expression, locals) {
      if(isString(expression)) {
...
        expression = controllers.hasOwnProperty(constructor)
/ constructor="ctrl"
            ? controllers[constructor]
            : getter(locals.$scope, constructor, true) || getter($window, constructor, true);
/ getter vindt "ctrl" in child scope of in global js scope	,  

/ nodeLinkFn is called in compositeLinkFn, die alle (child) nodes afgaat, en als hij een nodeLinkFn.scope tegenkomt, doet hij childScope = scope.$new(), en calls nodeLinkFn die hij deze child scope meegeeft	,

/ we zien dat in ons script.js als we dit doen	, hij in global js scope moet staan	,

var ctrl=function(){
...
}

/ als we in ons script.js willen	, dan moeten we app.controller use	,

!function(){
...
}()

/ dus we doen	,

$ vi 5a/script.js

!function(){

var app=angular.module("app",[])
app.factory("Data",function(){
  return{message:"I'm from a service"}
})
app.controller("ctrl",function($scope,Data){
  $scope.data=Data
})
app.controller("ctrl2",function($scope,Data){
  $scope.data=Data
  $scope.reverseMessage=function(){
    return $scope.data.message.split("").reverse().join("")
  }
  //  return Data.message.split("").reverse().join("")
/
/*
  $scope.reverseMessage2=function(m){
    return m.split("").reverse().join("")
  }
*/
})

}()


/ Einde DEBUG ANGULAR MODULE

/ DEBUG ANGULAR DIRECTIVE 

$ vi 10/index.html

<div ng-app="app">
  <foo></foo>
</div>

$ vi 10/script.js

app.directive("foo",function(){
  return{
    restrict:"E",
    template:"<div>Here I am, foo</div>"
  }
})

/ SAMENVATTING

  var doBootstrap = function() {

    var injector = createInjector(modules); 
/ loadModules	, die creates directive provider "fooDirectiveProvider"	,

    injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate', function(scope, element, compile, injector, animate) {
        scope.$apply(function() {
          element.data('$injector', injector);
          compile(element)(scope);
/ de compile fase compile(element) , element=$("[ng-app]")	, doet	,
	foo.html("<div>Here I am, foo</div>")	,
/ de link fase doet niets	,

/ we zien uiteindelijk in HTML	,
<foo><div>Here I am, foo</div></foo>

/ Als we een link fct add aan de directive	, dan wel in de link fase wordt deze postLinkFn called	,


/ Einde SAMENVATTING

/ app.directive doet een post op app._invokeQueue, 
/ we zijn nu in loadModules	,

  function loadModules(modulesToLoad){
    forEach(modulesToLoad, function(module) {
          moduleFn = angularModule(module);
          for(invokeQueue = moduleFn._invokeQueue, i = 0, ii = invokeQueue.length; i < ii; i++) {
            var invokeArgs = invokeQueue[i],
                provider = providerInjector.get(invokeArgs[0]);

            provider[invokeArgs[1]].apply(provider, invokeArgs[2]);

invokeQueue: Array[1]
0: Array[3]
0: "$compileProvider"
1: "directive"
2: Arguments[2]
0: "foo"
1: function (){

/ $compileProvider is al in de providerCache	,

/ providerInjector was created	, dus getService kent de providerCache via closure scope	,
  function createInternalInjector(cache, factory) {
    function getService(serviceName) {
        return cache[serviceName];

/ we komen in	,
function $CompileProvider($provide, $$sanitizeUriProvider) {
   this.directive = function registerDirective(name, directiveFactory) {
name="foo"
directiveFactory=function(){
  return{
    restrict:"E",
    template:"<div>Here I am, foo</div>"
  }
}

   this.directive = function registerDirective(name, directiveFactory) {
     if (!hasDirectives.hasOwnProperty(name)) {
        hasDirectives[name] = [];
        $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
          function($injector, $exceptionHandler) {
/= "fooDirectiveProvider"'s $get fct	, = (*)
            forEach(hasDirectives[name], function(directiveFactory, index) {
/ later , als called , komen we op deze regel, en hij kent dan directiveFactory in closure scope,	in deze local scope van $compileProvider.directive	,

      hasDirectives[name].push(directiveFactory);


/ 13.

/ compileNodes met list text,foo,text	,

        directives = collectDirectives(nodeList[i], [], attrs, i === 0 ? maxPriority : undefined, ignoreDirective);
/ i=1
/s
    function addDirective(tDirectives, name, location, maxPriority, ignoreDirective, startAttrName, endAttrName) {
      if (hasDirectives.hasOwnProperty(name)) {
/ NEE
        for(var directive, directives = $injector.get(name + Suffix),
name + Suffix="fooDirective"
/s
  function createInternalInjector(cache, factory) {
    function getService(serviceName) {
->          return cache[serviceName] = factory(serviceName);
/s
            var provider = providerInjector.get(servicename + providerSuffix);
servicename + providerSuffix="fooDirectiveProvider"
/= (*) hierboven	,
            return instanceInjector.invoke(provider.$get, provider);
/s
     this.directive = function registerDirective(name, directiveFactory) {
          function($injector, $exceptionHandler) {
/ =(*)
           forEach(hasDirectives[name], function(directiveFactory, index) {
/ directiveFactory uit de closure scope kent hij niet, WH omdat deze niet wordt used	, hij haalt 'm uit hasDirectives	(TODO),
              try {
                var directive = $injector.invoke(directiveFactory);
function (){
	return{
		restrict:"E",
		template:"<div>Here I am, foo</div>"
	}
}
/s
function (){
->	return{
		restrict:"E",
		template:"<div>Here I am, foo</div>"
	}

/t
directive={
    restrict:"E",
    template:"<div>Here I am, foo</div>"
}

/t
   function compileNodes(nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective, previousCompileContext) {
      var linkFns = [], nodeLinkFn, childLinkFn, directives, attrs, linkFnFound;

        directives = collectDirectives(nodeList[i], [], attrs, i === 0 ? maxPriority : undefined, ignoreDirective);
/ D
        nodeLinkFn = (directives.length)
            ? applyDirectivesToNode(directives, nodeList[i], attrs, transcludeFn, $rootElement, null, [], [], previousCompileContext) : null;
/s
    function applyDirectivesToNode(directives, compileNode, templateAttrs, transcludeFn, jqCollection, originalReplaceDirective, preLinkFns, postLinkFns, previousCompileContext) {

         directiveValue = (isFunction(directive.template))
/NEE
              ? directive.template($compileNode, templateAttrs)
              : directive.template;
directiveValue: "<div>Here I am, foo</div>"
         } else {
            $compileNode.html(directiveValue);
/s
	html: function( value ) {
/ = jQuery.prototype.html
		return jQuery.access( this, function( value ) {
			var elem = this[0] || {},
foo
							elem.innerHTML = value;

/t
    function applyDirectivesToNode(directives, compileNode, templateAttrs, transcludeFn, jqCollection, originalReplaceDirective, preLinkFns, postLinkFns, previousCompileContext) {

          } else {
            $compileNode.html(directiveValue);
/ D

      nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;
/ NEE, nu	,

/t in compileNodes	,

        nodeLinkFn = (directives.length)
            ? applyDirectivesToNode(directives, nodeList[i], attrs, transcludeFn, $rootElement, null, [], [], previousCompileContext) : null;
/ D

        childLinkFn =  ...
            ? null
            : compileNodes(nodeList[i].childNodes, nodeLinkFn ? nodeLinkFn.transclude : transcludeFn);
/ JA, hij had oorspronkelijk geen children, want 
	<foo></foo>
/ maar nu wel	,

/s
    function compileNodes(nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective, previousCompileContext) {
/ nodeList = div, met een text child	, maar beide geven geen nodeLinkFn of compositeLinkFn	,

/t in doBootstrap	,
  injector.invoke(['$rootScope', '$rootElement', '$compile', '$injector', '$animate', function(scope, element, compile, injector, animate) {
          compile(element)(scope);

/ we komen in de link phase van compile	,

/ alleen foo elem heeft een nodeLinkFn	, (er zijn ook compositeLinkFn's)	,

     function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
          attrs = templateAttrs;

/ maar deze nodeLinkFn doet niets	,

/ Intermezzo

/ templateAttrs komen uit closure scope= local scope van  applyDirectivesToNode	, templateAttrs is param van applyDirectivesToNode	,

    function compileNodes(nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective, previousCompileContext) {
      var linkFns = [], nodeLinkFn, childLinkFn, directives, attrs, linkFnFound;

      for(var i = 0; i < nodeList.length; i++) {
        attrs = new Attributes();

        directives = collectDirectives(nodeList[i], [], attrs, i === 0 ? maxPriority : undefined, ignoreDirective);

        nodeLinkFn = (directives.length)
            ? applyDirectivesToNode(directives, nodeList[i], attrs, transcludeFn, $rootElement, null, [], [], previousCompileContext) : null;

/ TODO(waar worden attrs set?)

/ Einde Intermezzo

/ Einde DEBUG ANGULAR DIRECTIVE 

/ DEBUG ANGULAR DIRECTIVE 

$ vi 11/index.html

<div ng-app="app">
  <div foo bar>I am content</div>
</div>

$ vi 11/script.js

var app=angular.module("app",[])
app.directive("foo",function(){
  return{
    restrict:"A"
    ,link:function(sc,el,at){
      console.log("I am foo")
    }
  }
})
app.directive("bar",function(){
  return{
    restrict:"A"
    ,link:function(){
      console.log("I am bar")
    }
  }
})

/ 13	.

  var doBootstrap = function() {
    var injector = createInjector(modules);
          compile(element)(scope);
									^

/ eerst createInjector, die calls loadModules	, die de providers van de 2 attr dirs creates	,
    


 function loadModules(modulesToLoad){

invokeQueue: Array[2]
0: Array[3]
0: "$compileProvider"
1: "directive"
2: Arguments[2]
0: "foo"
1: function (){

1: Array[3]
0: "$compileProvider"
1: "directive"
2: Arguments[2]
0: "bar"
1: function (){

/ dan compile fase van compile	,

   function compileNodes(nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective, previousCompileContext) {
        directives = collectDirectives(nodeList[i], [], attrs, i === 0 ? maxPriority : undefined, ignoreDirective);
/s
    function collectDirectives(node, directives, attrs, maxPriority, ignoreDirective) {
          attrsMap = attrs.$attr,

          for (var attr, name, nName, ngAttrName, value, nAttrs = node.attributes,
nAttrs: NamedNodeMap
0: foo
1: bar

             attrsMap[nName] = name;
              attrs[nName] = ... 
                : attr.value);
/ (**) Hier wordt attrs write	,

              addDirective(directives, nName, 'A', maxPriority, ignoreDirective, attrStartName, attrEndName);
/s
    function addDirective(tDirectives, name, location, maxPriority, ignoreDirective, startAttrName, endAttrName) {
/ name="foo"
      if (hasDirectives.hasOwnProperty(name)) {
        for(var directive, directives = $injector.get(name + Suffix),
/s
  function createInternalInjector(cache, factory) {
    function getService(serviceName) {
          return cache[serviceName] = factory(serviceName);
serviceName: "fooDirective"
/ s
            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
/s
          function($injector, $exceptionHandler) {
            var directives = [];
            forEach(hasDirectives[name], function(directiveFactory, index) {
              try {
                var directive = $injector.invoke(directiveFactory);
directiveFactory=function(){
  return{
    restrict:"A"
    ,link:function(sc,el,at){
      console.log("I am foo")
    }
  }
}
                } else if (!directive.compile && directive.link) {
/ JA
                  directive.compile = valueFn(directive.link);

/t
   function compileNodes(nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective, previousCompileContext) {
        directives = collectDirectives(nodeList[i], [], attrs, i === 0 ? maxPriority : undefined, ignoreDirective);
/ D
attrs: $get.Attributes
$$element: undefined
$attr: Object
bar: "bar"
foo: "foo"
/ set bij (**)




/ Einde DEBUG ANGULAR DIRECTIVE 

/ DEBUG ANGULAR DIRECTIVE 

$ vi 12/index.html

<div ng-app="app">
  <div e="label" l>I am content</div>
</div>

$ 12/script.js

var app=angular.module("app",[])
app.directive("e",function(){
  return function(scope,element,attrs){
      element.bind("mouseenter",function(){
        var b=scope
        element.addClass(attrs.e)
      })
    }
  }
})

/ je kunt ook	, maar dat zijn defaults	,

app.directive("e",function(){
  return{
    restrict:"A"
    ,link:function(scope,element,attrs){
      element.bind("mouseenter",function(){
        var b=scope
        element.addClass(attrs.e)
      })
    }
  }
})

/ waar is dat in de code	?

/ we komen in	de compile fase van compile, in "fooDirectiveProvider"'s $get	,

       $provide.factory(name + Suffix, ['$injector', '$exceptionHandler',
->         function($injector, $exceptionHandler) {
            var directives = [];
            forEach(hasDirectives[name], function(directiveFactory, index) {
              try {
                var directive = $injector.invoke(directiveFactory);
directive=function(scope,element,attrs){
      element.bind("mouseenter",function(){
        var b=scope
        element.addClass(attrs.e)
      })
  }

               if (isFunction(directive)) {
                  directive = { compile: valueFn(directive) };
directive={
	compile:function(){
		return value
	}
}
/ en value is wat directive was	, die nu in de closure scope is	,

                directive.restrict = directive.restrict || 'A';

/ Einde DEBUG ANGULAR DIRECTIVE 

/ DEBUG ANGULAR CONTROLLER & DIRECTIVE 

/ 14
/ TODO

/ Einde DEBUG ANGULAR CONTROLLER & DIRECTIVE 

/ DEBUG ANGULAR CONTROLLER & DIRECTIVE 

$ vi 15/index.html

<div ng-app="app">
  <foo fl sp str>just some text</foo>
</div>

$ vi 15/script.js

var app=angular.module("app",[])

app.directive("foo",function(){
  return{
    restrict:"E"
    ,controller:function($scope){
      $scope.ab=[]
      this.addStr=function(){					
        $scope.ab.push("str") }
      this.addSp=function(){
        $scope.ab.push("sp") }
      this.addFl=function(){
        $scope.ab.push("fl") }
    }
    ,link:function(sc,el){
      el.on("mouseenter",function(){
        el.addClass("label")
        console.log(sc.ab)
      })
    }
  }
})

app.directive("str",function(){
  return{
    require:"foo"
    ,link:function(sc,el,at,ctrl){
      ctrl.addStr()
    }
  }
})
app.directive("sp",function(){
  return{
    require:"foo"
    ,link:function(sc,el,at,ctrl){
      ctrl.addSp()
    }
  }
})
app.directive("fl",function(){
  return{
    require:"foo"
    ,link:function(sc,el,at,ctrl){
      ctrl.addFl()
    }
  }
})

/ als we met de mouse over de div gaan, zien we op de console de attrs van de div print	,
["str","sp","fl"]

/ SAMENVATTING

/ 13	.

/ we zien hierboven dat er een controller wordt create, net als bij ng-model, 
/ er wordt geen nieuwe scope create	, dat is alleen zo bij ng-controller	,

/ 13	.

/ in controller:function($scope){
    ,link:function(sc,el){
/ Waarom staat er $scope in de controller fct, en sc in de link fct	?

/ in compositeLinkFn wordt per (child) node de scope bepaald	,
            if (nodeLinkFn.scope) {
              childScope = scope.$new();
            } else {
              childScope = scope;
            }
            nodeLinkFn(childLinkFn, childScope, node, $rootElement, boundTranscludeFn);

/ in nodeLinkFn	,
            var locals = {
              $scope: directive === newIsolateScopeDirective || directive.$$isolateScope ? isolateScope : scope,
            controllerInstance = $controller(controller, locals);

            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);


/ Dus in locals is de key $scope	, en de value scope	, 
/ Dan	,
            controllerInstance = $controller(controller, locals);
/s
      instance = $injector.instantiate(expression, locals);
/ en invoke doet di	, en daarom staat	er dus	,
    ,controller:function($scope){
/ want de key in locals is "$scope"	,
 
/ maar de linkFn call is een directe call, geen di	,
/ TODO

/ 13	.

/ in	,
   ,controller:function($scope){
      $scope.ab=[]
      this.addStr=function(){
        $scope.ab.push("str") }
...

/ this= de controller, 'n Constructor inst met deze 3 fcts, maar met een closure scope waar $scope in zit	,	

/ 13	. 

/ we kunnen ook

$ vi 15/script.js

    ,controller:["$scope",function(scope){
      scope.ab=[]
      this.addStr=function(){
        scope.ab.push("str") }
      this.addSp=function(){
        scope.ab.push("sp") }
      this.addFl=function(){
        scope.ab.push("fl") }
    }]


/ Einde SAMENVATTING

/ 13

/ Debug, 

/ in loadModules verandert niets	,

/ dan in compile fase van compile	,

    function compileNodes(nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective, previousCompileContext) {
        directives = collectDirectives(nodeList[i], [], attrs, i === 0 ? maxPriority : undefined, ignoreDirective);
/s
    function collectDirectives(node, directives, attrs, maxPriority, ignoreDirective) {
/ node = foo

          addDirective(directives, directiveNormalize(nodeName_(node).toLowerCase()), 'E', maxPriority, ignoreDirective);
/ het elem zelf geeft ook den dir	,
/s
    function addDirective(tDirectives, name, location, maxPriority, ignoreDirective, startAttrName, endAttrName) {
        for(var directive, directives = $injector.get(name + Suffix),
name + Suffix="fooDirective"
/ s
  function createInternalInjector(cache, factory) {
    function getService(serviceName) {
          return cache[serviceName] = factory(serviceName);
/s
            var provider = providerInjector.get(servicename + providerSuffix);
            return instanceInjector.invoke(provider.$get, provider);
/s
          function($injector, $exceptionHandler) {
            forEach(hasDirectives[name], function(directiveFactory, index) {
                var directive = $injector.invoke(directiveFactory);
directiveFactory=function(){
  return{
    restrict:"E"
    ,controller:function($scope){
      $scope.ab=[]
      this.addStr=function(){
...
/ dus directive={
    restrict:"E"
    ,controller:function($scope){
      $scope.ab=[]
      this.addStr=function(){
...

                } else if (!directive.compile && directive.link) {
                  directive.compile = valueFn(directive.link);

/t
    function compileNodes(nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective, previousCompileContext) {
        directives = collectDirectives(nodeList[i], [], attrs, i === 0 ? maxPriority : undefined, ignoreDirective);
/ D
/ de dir's zijn create	, de attrs zoals controller worden nu hieronder process	,

        nodeLinkFn = (directives.length) ? applyDirectivesToNode(directives, nodeList[i], attrs, transcludeFn, $rootElement, null, [], [], previousCompileContext) : null;
/s
   function applyDirectivesToNode(directives, compileNode, templateAttrs, transcludeFn, jqCollection, originalReplaceDirective, preLinkFns, postLinkFns, previousCompileContext) {

/ dir's fl, str, sp	, 

        } else if (directive.compile) {
            linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
linkFn=function(sc,el,at,ctrl){
      ctrl.addFl()
}
              addLinkFns(null, linkFn, attrStart, attrEnd);

/ dir foo

       if (!directive.templateUrl && directive.controller) {
          controllerDirectives[directiveName] = directive;

           linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
              addLinkFns(null, linkFn, attrStart, attrEnd);

/ alle 4 dirs processed,	

      nodeLinkFn.scope = newScopeDirective && newScopeDirective.scope === true;
false

/t
    function compileNodes(nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective, previousCompileContext) {

        nodeLinkFn = (directives.length) ? applyDirectivesToNode(directives, nodeList[i], attrs, transcludeFn, $rootElement, null, [], [], previousCompileContext)
/ D

/ 13	.

/ link fase compile	,

/ van foo elem	,
      function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
          attrs = templateAttrs;
templateAttrs: $get.Attributes
$$element: jQuery.fn.jQuery.init
$attr: Object
fl: "fl"
sp: "sp"
str: "str"
__proto__: Object
fl: ""
sp: ""
str: ""

        if (controllerDirectives) {
          forEach(controllerDirectives, function(directive) {
/ uit closure scope=deze local scope  van applyDirectivesToNode	,
controllerDirectives={foo:
{
compile: function () {return value;}
controller: function ($scope){
index: 0
link: function (sc,el){
name: "foo"
priority: 0
require: "foo"
restrict: "E"
}

            controller = directive.controller;
            controllerInstance = $controller(controller, locals);
/ we komen in $controller service=$ControllerProvider.$get(...)	,
/s
      instance = $injector.instantiate(expression, locals);
instance: Constructor
addFl: function (){
addSp: function (){
addStr: function (){

/t
           controllerInstance = $controller(controller, locals);
/D
            elementControllers[directive.name] = controllerInstance;
directive.name="foo"

       for(i = postLinkFns.length - 1; i >= 0; i--) {
            linkFn = postLinkFns[i];
            linkFn(linkFn.isolateScope ? isolateScope : scope, $element, attrs,
                linkFn.require && getControllers(linkFn.require, $element, elementControllers), transcludeFn);
/ Hier wordt de link fct exec	,
/s
      function getControllers(require, $element, elementControllers) {
            value = elementControllers[require];
/ zojuist set	,
value: Constructor
addFl: function (){
addSp: function (){
addStr: function (){

/t
/s
		,link:function(sc,el,at,ctrl){ 
			ctrl.addStr() 
/s
			this.addStr=function(){
				$scope.ab.push("str") }

/ Einde DEBUG ANGULAR CONTROLLER & DIRECTIVE 

/ DEBUG ANGULAR CONTROLLER & DIRECTIVE 

/ weer 15	, maar nu met isolated scope	,

$ vi 15/script.js

app.directive("foo",function(){
  return{
    restrict:"E"
    ,scope:{}
    ,controller:["$scope",function(scope){
      scope.ab=[]
      this.addStr=function(){
        scope.ab.push("str") }
      this.addSp=function(){
        scope.ab.push("sp") }
      this.addFl=function(){
        scope.ab.push("fl") }
    }]
    ,link:function(sc,el){
      el.on("mouseenter",function(){
        el.addClass("label")
        console.log(sc.ab)
      })
    }
  }
})

/ TODO

/ Einde DEBUG ANGULAR CONTROLLER & DIRECTIVE 

/ MORGEN

/ REQUIREJS

/ 7	.

/we zijn op	,
https://github.com/jrburke/requirejs

[eric@walnut requirejs]$ pwd
/home/eric/Devel/Web/requirejs
[eric@walnut requirejs]$ git clone https://github.com/jrburke/requirejs.git

/we hebben ook	,
[eric@walnut requirejs]$ git clone https://github.com/requirejs/text.git
[eric@walnut requirejs]$ git clone https://github.com/requirejs/i18n.git
[eric@walnut requirejs]$ git clone https://github.com/requirejs/domReady.git

/ maar	we proberen	,
[eric@walnut requirejs]$ git clone https://github.com/requirejs/requirejs.git require2
Cloning into 'require2'...
Username for 'https://github.com': ^C
/TODO

/ in de root van requirejs git repo is require.js, version 2.11.1	,

/ Geef	,
http://web/requirejs/requirejs/tests/
/ click > linksboven	,



 /7	.

/ kijk naar	,
http://www.youtube.com/watch?v=VGlDR1QiV3A

/ we zien hieronder dat main.js niet wordt reload als we de page reload	,
/ lees	,
http://stackoverflow.com/questions/8315088/prevent-requirejs-from-caching-required-scripts

$ vi main.js

require.config({
  urlArgs:"bust="+(new Date()).getTime()
})
...


[eric@walnut video1]$ pwd
/home/eric/Devel/Web/requirejs/apidocs1

[eric@walnut apidocs1]$ cp ../requirejs/require.js .

/ 13	.

[eric@walnut apidocs1]$ cat index.html 
<!doctype html>
<html lang="en">
	<head>
		<script data-main="main" src="require.js"></script>
	</head>
	<body>
	</body>
</html>

[eric@walnut apidocs1]$ cat main.js 
require.config({
  urlArgs:"bust="+(new Date()).getTime()
})

console.log("foo")

/ we zien in de console inderdaad
foo
/ Dus main.js is loaded na require.js is loaded	,

/ 13	.

[eric@walnut apidocs1]$ cp ../../jquery/jquery-2.0.3.js jquery.js

$ vi apidocs1/index.html

<!doctype html>
<html lang="en">
  <head>
    <script data-main="main" src="require.js"></script>
  </head>
  <body>
    <div id="output"></div>
  </body>
</html>

$ vi main.js

require.config({
  urlArgs:"bust="+(new Date()).getTime()
})

require(["jquery"],function($){
  $("#output").html("Foo bar")
})

/ Inderdaad	, $ is de jquery fct	,
/ TODO

/ De html wordt	,
<div id="output">Foo bar</div>

/ OK

/ 13	.

$ vi main.js

require.config({
  urlArgs:"bust="+(new Date()).getTime()
})


require(["jquery","message"],function($,message){
	$("#output").html(message)
})

$ cat message.js

define(function(){
	return "Foo bar baz"
})

/ de html wordt	,

<div id="output">Foo bar baz</div>

/ OK

/ 13	. 

/ wat bij ons NIET 	,

$ vi main.js

require.config({
  urlArgs:"bust="+(new Date()).getTime()
})
require(["jquery","message","another"],function($,message,another){
  $("#output").html(message).append(another)
})

$ vi message.js

define(function(){
  return "Foo bar baz"
});
define("another",function(){
  return "Gee fee"
})
~     
/ requirejs verwacht een another.js
/ we moeten in another.js NIET als 1ste arg "another" geven	,
/ TODO

$ vi another.js
define(function(){
  return "Gee fee"
})
/ OK


/ TODO

/ Einde REQUIREJS

/ REQUIREJS API


[eric@walnut apidocs1]$ pwd
/home/eric/Devel/Web/requirejs/apidocs1

/ 7	.

[eric@walnut apidocs1]$ ls
index.html  js  require.js
[eric@walnut apidocs1]$ ls js
another.js  jquery.js  main.js  message.js

$ vi index.html

	<head>
		<script data-main="js/main" src="require.js"></script>
	</head>
	<body>
		<div id="output"></div>
	</body>

/ OK

/ wat ook kan is	,

$ vi index.html

    <script data-main="js/main" src="js/require.js"></script>

[eric@walnut apidocs1]$ ls 
index.html  js
[eric@walnut apidocs1]$ ls js
another.js  jquery.js  main.js  message.js  require.js

/ 7	.

[eric@walnut apidocs1]$ cat index.html 
<!doctype html>
<html lang="en">
	<head>
		<script data-main="js/main" src="js/require.js"></script>
	</head>
	<body>
		<div id="output"></div>
	</body>
</html>

[eric@walnut apidocs1]$ cat js/main.js 
require.config({
	urlArgs:"bust="+(new Date()).getTime(),
	baseUrl:"js/lib",
	paths:{foo:"../app"}
})
require(["jquery","foo/message","foo/another"],function($,message,another){
	$("#output").html(message).append(another)
})

[eric@walnut apidocs1]$ ls
index.html  js
[eric@walnut apidocs1]$ ls js
app  lib  main.js  require.js
[eric@walnut apidocs1]$ ls js/app
another.js  message.js
[eric@walnut apidocs1]$ ls js/lib
jquery.js

/ 7	.

/ in paths kan blijkbaar een dir of een file staan, 
/ want ze doen ook	,

require.config({
    paths: {
        foo: 'libs/foo-1.1.3'
    }
});

/ en dan wordt libs/foo-1.1.3.js loaded	,

/ TODO

/ 7	.

/ in another return we een string, 
/ kan dat alleen met een function?
/ TODO

/ Nu een obj	, dan geen fct nodig, kan wel	,

$ vi js/app/other.js

define({name:"ericj"})


$ vi js/main.js

require.config({
  urlArgs:"bust="+(new Date()).getTime(),
  baseUrl:"js/lib",
  paths:{foo:"../app"}
})
require(["jquery","foo/message","foo/other"],function($,message,other){
  $("#output").html(message).append(other.name)
})

 /OK

/ 7	.

/ Dep in een module	,

$ cat js/main.js

require.config({
  urlArgs:"bust="+(new Date()).getTime(),
  baseUrl:"js/lib",
  paths:{foo:"../app"}
})
require(["jquery","foo/message","foo/use"],function($,message,use){
  $("#output").html(message).append(use.name)
})

$ vi js/app/use.js

define(["./other"],function(other){
  return{name:other.name}
})

/ OK

/ 7	.

/ met fcts	,

$ vi js/main.js

require(["jquery","foo/message","foo/use"],function($,message,use){
  $("#output").html(message).append(use.change())
})

$ vi js/app/use.js

define(["./other"],function(other){
  return{
    name:other.name,
    change:function(){return other.change}
  }
})

$ vi js/app/other.js

define({
  name:"ericj",
  change:function(){
    return "change"
  }
})

/ of	,


$ vi js/main.js

require(["jquery","foo/message","foo/use"],function($,message,use){
  $("#output").html(message).append(use.change)
})

$ vi js/app/use.js

define(["./other"],function(other){
  return{
    name:other.name,
    change:other.change()
  }
})

$ vi js/app/other.js

define({
  name:"ericj",
  change:function(){
    return "change"
  }
})

/ 7	.

/ we kunnen ook met een closure , en dan de closure scope als dep	,

$ vi js/main.js

require.config({
  urlArgs:"bust="+(new Date()).getTime(),
  baseUrl:"js/lib",
  paths:{foo:"../app"}
})
require(["jquery","foo/other"],function($,other){
  $("#output").html(other.get())
})

$ vi js/app/other.js

define(["./spec"],function(spec){
    var that={}
    that.get=function(){
      return spec.name
    }
    that.set=function(name){
      spec.name=name
    }
    return that
})

$ vi js/app/spec.js

define({
  name:"ericj"
})

/ 7	.

/ we kunnen nog een closure erbij doen	,

$ vi js/main.js

require.config({
  urlArgs:"bust="+(new Date()).getTime(),
  baseUrl:"js/lib",
  paths:{foo:"../app"}
})
require(["jquery","foo/use"],function($,use){
  $("#output").html(use.get())
})

$ vi js/app/other.js

define(["./spec"],function(spec){
    var that={}
    that.get=function(){
      return spec.name
    }
    that.set=function(name){
      spec.name=name
    }
    return that
})

$ vi js/app/spec.js

define({
  name:"ericj"
})

$ vi js/app/use.js

define(["./other"],function(other){
  var that={}
  other.set("saskia")
  that.get=function(){
    return other.get()
  }
  return that
})

/ 7	.

/ Zonder closure	,

$ vi js/main.js

require.config({
  urlArgs:"bust="+(new Date()).getTime(),
  baseUrl:"js/lib",
  paths:{foo:"../app"}
})
require(["jquery","foo/obj"],function($,obj){
  $("#output").html(obj.name)
})

/ of	,

require(["jquery","foo/use2"],function($,use2){
  $("#output").html(use2.name)
})

$ vi js/app/obj.js

define({
    name:"ericj",
    set:function(name){
      this.name=name
    }
})

$ vi js/app/use2.js


define(["./obj"],function(obj){
  obj.set("saskia")
  return obj
})

/ we lezen	,
The return object from the function call defines the "my/shirt" module. By defining modules in this way, "my/shirt" does not exist as a global object.
/ Klopt, hij kan worden injected	,

/ 7	.

[eric@walnut apidoc2]$ pwd
/home/eric/Devel/Web/requirejs/apidoc2

$ vi js/main.js


require.config({
  urlArgs:"bust="+(new Date()).getTime(),
  baseUrl:"js",
})
require(["lib/jquery"],function($){
  $("#output").html("<h1>foo</h1>")
})
/ ERR (lib/jquery.js wordt niet gevonden)

/ Maar 	,

$ vi js/main.js

require.config({
  urlArgs:"bust="+(new Date()).getTime(),
  baseUrl:"js",
  paths:{jquery:"lib/jquery"}
})
require(["jquery"],function($){
  $("#output").html("<h1>foo</h1>")
})
/ OK

/ 7	.

/ def a module which returns a function	,

/ doordat baseUrl js is	, is de dep my/bar in app/shirt.js gevonden	, hij start de baseUrl	, 

$ vi js/main.js

require.config({
  urlArgs:"bust="+(new Date()).getTime(),
  baseUrl:"js",
  paths:{
    jquery:"lib/jquery",
    foo:"app"
  }
})
require(["jquery","foo/shirt"],function($,shirt){
  $("#output").html(shirt("saskia"))
})

$ vi app/shirt.js

define(["my/bar"],function(bar){
  return function(title){
    return bar.name+" "+title
  }
})

$ vi my/bar.js

define({
  name:"ericj"
})

/ OK

/ 7	.

/ named module	,

$ vi js/main.js

require.config({
  urlArgs:"bust="+(new Date()).getTime(),
  baseUrl:"js",
  paths:{
    jquery:"lib/jquery",
  }
})
require(["jquery","app/shirt"],function($,shirt){
  $("#output").html(shirt("saskia"))
})

$ vi js/app/shirt.js

define("app/shirt",["my/bar"],function(bar){
  return function(title){
    return bar.name+" "+title
  }
})

/ of	,

$ vi js/main.js

require.config({
  urlArgs:"bust="+(new Date()).getTime(),
  baseUrl:"js",
  paths:{
    jquery:"lib/jquery",
		shirt:"app/shirt"
  }
})
require(["jquery","shirt"],function($,shirt){
  $("#output").html(shirt("saskia"))
})

$ vi js/app/shirt.js

define("shirt",["my/bar"],function(bar){
  return function(title){
    return bar.name+" "+title
  }
})






/ Einde REQUIREJS API








/ ANGULAR-SEED

/ Ga naar	,
https://github.com/angular/angular-seed

[eric@walnut angularjs]$ pwd
/home/eric/Devel/Web/angularjs
[eric@walnut angularjs]$ git clone https://github.com/angular/angular-seed.git

# vi /etc/httpd/conf/httpd.conf

<VirtualHost *:80>
    DocumentRoot /home/eric/Devel/Web/angularjs/angular-seed/app
    ServerName my-angular-seed-app
</VirtualHost>
<Directory /home/eric/Devel/Web/angularjs/angular-seed>
        Require all granted
        AllowOverride All
</Directory>

# vi /etc/hosts

127.0.0.1 my-angular-seed-app
::1 my-angular-seed-app

/ we kunnen geven	,
http://my-angular-seed-app

/ of we doen /etc/httpd/conf/httpd.conf en /etc/hosts niet, en we doen	,
[eric@walnut angular-seed]$ node  scripts/web-server.js 
/ maar dan moeten we voluit geven	,
http://localhost:8000/app/index.html

/ 7	.


/ tests	,

/ lees	,
[eric@walnut angular-seed]$ pwd
/home/eric/Devel/Web/angularjs/angular-seed
[eric@walnut angular-seed]$ vi README.md 

[eric@walnut jquery]$ sudo npm install -g karma

karma-script-launcher@0.1.0 /usr/local/lib/node_modules/karma-script-launcher

karma-chrome-launcher@0.1.2 /usr/local/lib/node_modules/karma-chrome-launcher

karma-firefox-launcher@0.1.3 /usr/local/lib/node_modules/karma-firefox-launcher

karma-html2js-preprocessor@0.1.0 /usr/local/lib/node_modules/karma-html2js-preprocessor

karma-jasmine@0.1.5 /usr/local/lib/node_modules/karma-jasmine

karma-coffee-preprocessor@0.1.3 /usr/local/lib/node_modules/karma-coffee-preprocessor
└── coffee-script@1.7.1 (mkdirp@0.3.5)

requirejs@2.1.11 /usr/local/lib/node_modules/requirejs

karma-requirejs@0.2.1 /usr/local/lib/node_modules/karma-requirejs

karma-phantomjs-launcher@0.1.2 /usr/local/lib/node_modules/karma-phantomjs-launcher
└── phantomjs@1.9.7-1 (rimraf@2.2.6, which@1.0.5, kew@0.1.7, ncp@0.4.2, mkdirp@0.3.5, adm-zip@0.2.1, npmconf@0.0.24)

karma@0.10.9 /usr/local/lib/node_modules/karma
├── di@0.0.1
├── colors@0.6.0-1
├── rimraf@2.1.4
├── graceful-fs@1.2.3
├── chokidar@0.8.1
├── mime@1.2.11
├── q@0.9.7
├── coffee-script@1.6.3
├── glob@3.1.21 (inherits@1.0.0)
├── optimist@0.3.7 (wordwrap@0.0.2)
├── minimatch@0.2.14 (sigmund@1.0.0, lru-cache@2.5.0)
├── lodash@1.1.1
├── useragent@2.0.7 (lru-cache@2.2.4)
├── connect@2.8.8 (methods@0.0.1, uid2@0.0.2, pause@0.0.1, cookie-signature@1.0.1, fresh@0.2.0, qs@0.6.5, debug@0.7.4, bytes@0.2.0, buffer-crc32@0.2.1, cookie@0.1.0, formidable@1.0.14, send@0.1.4)
├── http-proxy@0.10.4 (pkginfo@0.3.0, optimist@0.6.1, utile@0.2.1)
├── log4js@0.6.10 (semver@1.1.4, async@0.1.15, readable-stream@1.0.25)
└── socket.io@0.9.16 (base64id@0.1.0, policyfile@0.0.4, redis@0.7.3, socket.io-client@0.9.16)

/dan	,

$ vi README.md
* start `scripts/test.sh` (on windows: `scripts\test.bat`)

$ vi scripts/test.sh

#$BASE_DIR/../node_modules/karma/bin/karma start $BASE_DIR/../config/karma.conf.js $*
karma start $BASE_DIR/../config/karma.conf.js $*
/ TODO (we moesten karma install -g)

[eric@walnut angular-seed]$ ./scripts/test.sh 

Starting Karma Server (http://karma-runner.github.io)
-------------------------------------------------------------------
WARN [plugin]: Cannot find plugin "karma-junit-reporter".
  Did you forget to install it ?
  npm install karma-junit-reporter --save-dev
INFO [karma]: Karma v0.10.9 server started at http://localhost:9876/
INFO [launcher]: Starting browser Chrome
INFO [Chrome 31.0.1650 (Linux)]: Connected on socket 2VolNEpGP0y4zlzC5NYX
Chrome 31.0.1650 (Linux): Executed 5 of 5 SUCCESS (0.285 secs / 0.038 secs)
 ^C[eric@walnut angular-seed]$

/ we zien	,
$ vi package.json

  "devDependencies": {
    "karma-junit-reporter" : "~0.1",
...

/ Dus deze verwacht hij inderdaad	,

[eric@walnut angular-seed]$ sudo npm i -g karma-junit-reporter 
karma-junit-reporter@0.2.1 /usr/local/lib/node_modules/karma-junit-reporter
└── xmlbuilder@0.4.2



/ Einde ANGULAR-SEED

/ NPM

[eric@walnut jquery]$ sudo npm install -g karma

npm http GET https://registry.npmjs.org/karma
npm http 200 https://registry.npmjs.org/karma
npm http GET https://registry.npmjs.org/karma/-/karma-0.10.9.tgz
npm http 200 https://registry.npmjs.org/karma/-/karma-0.10.9.tgz
npm http GET https://registry.npmjs.org/chokidar
npm http GET https://registry.npmjs.org/http-proxy
npm http GET https://registry.npmjs.org/colors/0.6.0-1
npm http GET https://registry.npmjs.org/log4js
npm http GET https://registry.npmjs.org/useragent
npm http GET https://registry.npmjs.org/connect
npm http GET https://registry.npmjs.org/glob
npm http GET https://registry.npmjs.org/di
npm http GET https://registry.npmjs.org/socket.io
npm http GET https://registry.npmjs.org/optimist
npm http GET https://registry.npmjs.org/minimatch
npm http GET https://registry.npmjs.org/q
npm http GET https://registry.npmjs.org/coffee-script
npm http GET https://registry.npmjs.org/mime
npm http GET https://registry.npmjs.org/graceful-fs
npm http GET https://registry.npmjs.org/rimraf
npm http GET https://registry.npmjs.org/lodash
npm http 200 https://registry.npmjs.org/colors/0.6.0-1
npm http GET https://registry.npmjs.org/colors/-/colors-0.6.0-1.tgz
npm http 200 https://registry.npmjs.org/log4js
npm http 200 https://registry.npmjs.org/http-proxy
npm http 200 https://registry.npmjs.org/chokidar
npm http GET https://registry.npmjs.org/log4js/-/log4js-0.6.10.tgz
npm http GET https://registry.npmjs.org/http-proxy/-/http-proxy-0.10.4.tgz
npm http GET https://registry.npmjs.org/chokidar/-/chokidar-0.8.1.tgz
npm http 200 https://registry.npmjs.org/di
npm http GET https://registry.npmjs.org/di/-/di-0.0.1.tgz
npm http 200 https://registry.npmjs.org/http-proxy/-/http-proxy-0.10.4.tgz
npm http 200 https://registry.npmjs.org/colors/-/colors-0.6.0-1.tgz
npm http 200 https://registry.npmjs.org/connect
npm http 200 https://registry.npmjs.org/log4js/-/log4js-0.6.10.tgz
npm http GET https://registry.npmjs.org/connect/-/connect-2.8.8.tgz
npm http 200 https://registry.npmjs.org/optimist
npm http 200 https://registry.npmjs.org/di/-/di-0.0.1.tgz
npm http 200 https://registry.npmjs.org/connect/-/connect-2.8.8.tgz
npm http 200 https://registry.npmjs.org/useragent
npm http GET https://registry.npmjs.org/useragent/-/useragent-2.0.7.tgz
npm http 200 https://registry.npmjs.org/chokidar/-/chokidar-0.8.1.tgz
npm http 200 https://registry.npmjs.org/socket.io
npm http 200 https://registry.npmjs.org/coffee-script
npm http GET https://registry.npmjs.org/socket.io/-/socket.io-0.9.16.tgz
npm http GET https://registry.npmjs.org/coffee-script/-/coffee-script-1.6.3.tgz
npm http 200 https://registry.npmjs.org/minimatch
npm http GET https://registry.npmjs.org/minimatch/-/minimatch-0.2.14.tgz
npm http 200 https://registry.npmjs.org/graceful-fs
npm http 200 https://registry.npmjs.org/glob
npm http 200 https://registry.npmjs.org/mime
npm http 200 https://registry.npmjs.org/rimraf
npm http 200 https://registry.npmjs.org/useragent/-/useragent-2.0.7.tgz
npm http 200 https://registry.npmjs.org/lodash
npm http GET https://registry.npmjs.org/lodash/-/lodash-1.1.1.tgz
npm http 200 https://registry.npmjs.org/q
npm http 200 https://registry.npmjs.org/coffee-script/-/coffee-script-1.6.3.tgz
npm http 200 https://registry.npmjs.org/minimatch/-/minimatch-0.2.14.tgz
npm http 200 https://registry.npmjs.org/socket.io/-/socket.io-0.9.16.tgz
npm http 200 https://registry.npmjs.org/lodash/-/lodash-1.1.1.tgz

> chokidar@0.8.1 postinstall /usr/local/lib/node_modules/karma/node_modules/chokidar
> node setup-deps.js

npm http GET https://registry.npmjs.org/lru-cache
npm http GET https://registry.npmjs.org/sigmund
npm http GET https://registry.npmjs.org/inherits
npm http GET https://registry.npmjs.org/wordwrap
npm http GET https://registry.npmjs.org/socket.io-client/0.9.16
npm http GET https://registry.npmjs.org/policyfile/0.0.4
npm http GET https://registry.npmjs.org/base64id/0.1.0
npm http GET https://registry.npmjs.org/redis/0.7.3
npm http 200 https://registry.npmjs.org/sigmund
npm http 200 https://registry.npmjs.org/inherits
npm http GET https://registry.npmjs.org/pkginfo
npm http GET https://registry.npmjs.org/utile
npm http 200 https://registry.npmjs.org/wordwrap
npm http GET https://registry.npmjs.org/optimist/-/optimist-0.6.1.tgz
npm http GET https://registry.npmjs.org/async/0.1.15
npm http 200 https://registry.npmjs.org/lru-cache
npm http GET https://registry.npmjs.org/cookie-signature/1.0.1
npm http GET https://registry.npmjs.org/formidable/1.0.14
npm http GET https://registry.npmjs.org/buffer-crc32/0.2.1
npm http GET https://registry.npmjs.org/cookie/0.1.0
npm http GET https://registry.npmjs.org/readable-stream
npm http 200 https://registry.npmjs.org/base64id/0.1.0
npm http GET https://registry.npmjs.org/send/0.1.4
npm http GET https://registry.npmjs.org/bytes/0.2.0
npm http GET https://registry.npmjs.org/fresh/0.2.0
npm http GET https://registry.npmjs.org/pause/0.0.1
npm http GET https://registry.npmjs.org/uid2/0.0.2
npm http GET https://registry.npmjs.org/debug
npm http 200 https://registry.npmjs.org/policyfile/0.0.4
npm http GET https://registry.npmjs.org/methods/0.0.1
npm http GET https://registry.npmjs.org/semver
npm http GET https://registry.npmjs.org/base64id/-/base64id-0.1.0.tgz
npm http GET https://registry.npmjs.org/policyfile/-/policyfile-0.0.4.tgz
npm http GET https://registry.npmjs.org/qs/0.6.5
npm http 200 https://registry.npmjs.org/optimist/-/optimist-0.6.1.tgz
npm http 200 https://registry.npmjs.org/socket.io-client/0.9.16
npm http 200 https://registry.npmjs.org/redis/0.7.3
npm http GET https://registry.npmjs.org/socket.io-client/-/socket.io-client-0.9.16.tgz
npm http GET https://registry.npmjs.org/redis/-/redis-0.7.3.tgz
npm http 200 https://registry.npmjs.org/pkginfo
npm http GET https://registry.npmjs.org/pkginfo/-/pkginfo-0.3.0.tgz
npm http 200 https://registry.npmjs.org/async/0.1.15
npm http GET https://registry.npmjs.org/async/-/async-0.1.15.tgz
npm http 200 https://registry.npmjs.org/policyfile/-/policyfile-0.0.4.tgz
npm http 200 https://registry.npmjs.org/base64id/-/base64id-0.1.0.tgz
npm http 200 https://registry.npmjs.org/utile
npm http GET https://registry.npmjs.org/utile/-/utile-0.2.1.tgz
npm http 200 https://registry.npmjs.org/cookie-signature/1.0.1
npm http GET https://registry.npmjs.org/cookie-signature/-/cookie-signature-1.0.1.tgz
npm http 200 https://registry.npmjs.org/cookie/0.1.0
npm http GET https://registry.npmjs.org/cookie/-/cookie-0.1.0.tgz
npm http 200 https://registry.npmjs.org/formidable/1.0.14
npm http 200 https://registry.npmjs.org/socket.io-client/-/socket.io-client-0.9.16.tgz
npm http GET https://registry.npmjs.org/formidable/-/formidable-1.0.14.tgz
npm http 200 https://registry.npmjs.org/async/-/async-0.1.15.tgz
npm http 200 https://registry.npmjs.org/pkginfo/-/pkginfo-0.3.0.tgz
npm http 200 https://registry.npmjs.org/redis/-/redis-0.7.3.tgz
npm http 200 https://registry.npmjs.org/buffer-crc32/0.2.1
npm http GET https://registry.npmjs.org/buffer-crc32/-/buffer-crc32-0.2.1.tgz
npm http 200 https://registry.npmjs.org/send/0.1.4
npm http GET https://registry.npmjs.org/send/-/send-0.1.4.tgz
npm http 200 https://registry.npmjs.org/cookie-signature/-/cookie-signature-1.0.1.tgz
npm http 200 https://registry.npmjs.org/bytes/0.2.0
npm http GET https://registry.npmjs.org/bytes/-/bytes-0.2.0.tgz
npm http 200 https://registry.npmjs.org/pause/0.0.1
npm http GET https://registry.npmjs.org/pause/-/pause-0.0.1.tgz
npm http 200 https://registry.npmjs.org/fresh/0.2.0
npm http 200 https://registry.npmjs.org/readable-stream
npm http GET https://registry.npmjs.org/fresh/-/fresh-0.2.0.tgz
npm http 200 https://registry.npmjs.org/cookie/-/cookie-0.1.0.tgz
npm http GET https://registry.npmjs.org/readable-stream/-/readable-stream-1.0.25.tgz
npm http GET https://registry.npmjs.org/lru-cache/-/lru-cache-2.2.4.tgz
npm http 200 https://registry.npmjs.org/formidable/-/formidable-1.0.14.tgz
npm http 200 https://registry.npmjs.org/buffer-crc32/-/buffer-crc32-0.2.1.tgz
npm http 200 https://registry.npmjs.org/methods/0.0.1
npm http 200 https://registry.npmjs.org/send/-/send-0.1.4.tgz
npm http 200 https://registry.npmjs.org/uid2/0.0.2
npm http GET https://registry.npmjs.org/methods/-/methods-0.0.1.tgz
npm http GET https://registry.npmjs.org/uid2/-/uid2-0.0.2.tgz
npm http 200 https://registry.npmjs.org/utile/-/utile-0.2.1.tgz
npm http 200 https://registry.npmjs.org/bytes/-/bytes-0.2.0.tgz
npm http 200 https://registry.npmjs.org/qs/0.6.5
npm http GET https://registry.npmjs.org/qs/-/qs-0.6.5.tgz
npm http 200 https://registry.npmjs.org/pause/-/pause-0.0.1.tgz
npm http 200 https://registry.npmjs.org/fresh/-/fresh-0.2.0.tgz
npm http 200 https://registry.npmjs.org/readable-stream/-/readable-stream-1.0.25.tgz
npm http 200 https://registry.npmjs.org/debug
npm http 200 https://registry.npmjs.org/methods/-/methods-0.0.1.tgz
npm http 200 https://registry.npmjs.org/uid2/-/uid2-0.0.2.tgz
npm http GET https://registry.npmjs.org/debug/-/debug-0.7.4.tgz
npm http 200 https://registry.npmjs.org/qs/-/qs-0.6.5.tgz
npm http 200 https://registry.npmjs.org/lru-cache/-/lru-cache-2.2.4.tgz
npm http GET https://registry.npmjs.org/deep-equal
npm http GET https://registry.npmjs.org/i
npm http GET https://registry.npmjs.org/ncp
npm http GET https://registry.npmjs.org/async
npm http GET https://registry.npmjs.org/mkdirp
npm http GET https://registry.npmjs.org/minimist
npm http 200 https://registry.npmjs.org/debug/-/debug-0.7.4.tgz
npm http GET https://registry.npmjs.org/range-parser/0.0.4
npm http 200 https://registry.npmjs.org/semver
npm http GET https://registry.npmjs.org/semver/-/semver-1.1.4.tgz
npm http 200 https://registry.npmjs.org/deep-equal
npm http GET https://registry.npmjs.org/deep-equal/-/deep-equal-0.2.1.tgz
npm http 200 https://registry.npmjs.org/minimist
npm http GET https://registry.npmjs.org/minimist/-/minimist-0.0.7.tgz
npm http 200 https://registry.npmjs.org/mkdirp
npm http 200 https://registry.npmjs.org/range-parser/0.0.4
npm http GET https://registry.npmjs.org/range-parser/-/range-parser-0.0.4.tgz
npm http 200 https://registry.npmjs.org/i
npm http GET https://registry.npmjs.org/i/-/i-0.3.2.tgz
npm http 200 https://registry.npmjs.org/deep-equal/-/deep-equal-0.2.1.tgz
npm http 200 https://registry.npmjs.org/semver/-/semver-1.1.4.tgz
npm http 200 https://registry.npmjs.org/async
npm http 200 https://registry.npmjs.org/minimist/-/minimist-0.0.7.tgz
npm http GET https://registry.npmjs.org/async/-/async-0.2.10.tgz
npm http 200 https://registry.npmjs.org/range-parser/-/range-parser-0.0.4.tgz
npm http 200 https://registry.npmjs.org/i/-/i-0.3.2.tgz
npm http 200 https://registry.npmjs.org/ncp
npm http GET https://registry.npmjs.org/ncp/-/ncp-0.4.2.tgz
npm http 200 https://registry.npmjs.org/async/-/async-0.2.10.tgz
npm http 200 https://registry.npmjs.org/ncp/-/ncp-0.4.2.tgz
npm http GET https://registry.npmjs.org/string_decoder
npm http 200 https://registry.npmjs.org/string_decoder
npm http GET https://registry.npmjs.org/string_decoder/-/string_decoder-0.10.25-1.tgz
npm http 200 https://registry.npmjs.org/string_decoder/-/string_decoder-0.10.25-1.tgz
npm http GET https://registry.npmjs.org/ws
npm http GET https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http GET https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http GET https://registry.npmjs.org/uglify-js/1.2.5
npm http 200 https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http 200 https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http GET https://registry.npmjs.org/xmlhttprequest/-/xmlhttprequest-1.4.2.tgz
npm http GET https://registry.npmjs.org/active-x-obfuscator/-/active-x-obfuscator-0.0.1.tgz
npm http 200 https://registry.npmjs.org/uglify-js/1.2.5
npm http GET https://registry.npmjs.org/uglify-js/-/uglify-js-1.2.5.tgz
npm http 200 https://registry.npmjs.org/xmlhttprequest/-/xmlhttprequest-1.4.2.tgz
npm http 200 https://registry.npmjs.org/uglify-js/-/uglify-js-1.2.5.tgz
npm http 200 https://registry.npmjs.org/active-x-obfuscator/-/active-x-obfuscator-0.0.1.tgz
npm http 200 https://registry.npmjs.org/ws
npm http GET https://registry.npmjs.org/ws/-/ws-0.4.31.tgz
npm http 200 https://registry.npmjs.org/ws/-/ws-0.4.31.tgz
npm http GET https://registry.npmjs.org/zeparser/0.0.5
npm http GET https://registry.npmjs.org/nan
npm http GET https://registry.npmjs.org/tinycolor
npm http GET https://registry.npmjs.org/options
npm http 200 https://registry.npmjs.org/zeparser/0.0.5
npm http GET https://registry.npmjs.org/zeparser/-/zeparser-0.0.5.tgz
npm http GET https://registry.npmjs.org/commander
npm http 200 https://registry.npmjs.org/zeparser/-/zeparser-0.0.5.tgz
npm http 200 https://registry.npmjs.org/tinycolor
npm http GET https://registry.npmjs.org/tinycolor/-/tinycolor-0.0.1.tgz
npm http 200 https://registry.npmjs.org/options
npm http GET https://registry.npmjs.org/options/-/options-0.0.5.tgz
npm http 200 https://registry.npmjs.org/tinycolor/-/tinycolor-0.0.1.tgz
npm http 200 https://registry.npmjs.org/options/-/options-0.0.5.tgz
npm http 200 https://registry.npmjs.org/commander
npm http GET https://registry.npmjs.org/commander/-/commander-0.6.1.tgz
npm http 200 https://registry.npmjs.org/nan
npm http GET https://registry.npmjs.org/nan/-/nan-0.3.2.tgz
npm http 200 https://registry.npmjs.org/commander/-/commander-0.6.1.tgz
npm http 200 https://registry.npmjs.org/nan/-/nan-0.3.2.tgz

> ws@0.4.31 install /usr/local/lib/node_modules/karma/node_modules/socket.io/node_modules/socket.io-client/node_modules/ws
> (node-gyp rebuild 2> builderror.log) || (exit 0)

make: Entering directory `/usr/local/lib/node_modules/karma/node_modules/socket.io/node_modules/socket.io-client/node_modules/ws/build'
  CXX(target) Release/obj.target/bufferutil/src/bufferutil.o
  SOLINK_MODULE(target) Release/obj.target/bufferutil.node
  SOLINK_MODULE(target) Release/obj.target/bufferutil.node: Finished
  COPY Release/bufferutil.node
  CXX(target) Release/obj.target/validation/src/validation.o
  SOLINK_MODULE(target) Release/obj.target/validation.node
  SOLINK_MODULE(target) Release/obj.target/validation.node: Finished
  COPY Release/validation.node
make: Leaving directory `/usr/local/lib/node_modules/karma/node_modules/socket.io/node_modules/socket.io-client/node_modules/ws/build'
/usr/local/bin/karma -> /usr/local/lib/node_modules/karma/bin/karma
npm http GET https://registry.npmjs.org/karma-script-launcher
npm http GET https://registry.npmjs.org/karma-jasmine
npm http GET https://registry.npmjs.org/karma-requirejs
npm http GET https://registry.npmjs.org/karma-coffee-preprocessor
npm http GET https://registry.npmjs.org/karma-html2js-preprocessor
npm http GET https://registry.npmjs.org/karma-chrome-launcher
npm http GET https://registry.npmjs.org/karma-firefox-launcher
npm http GET https://registry.npmjs.org/karma-phantomjs-launcher
npm http 200 https://registry.npmjs.org/karma-html2js-preprocessor
npm http GET https://registry.npmjs.org/karma-html2js-preprocessor/-/karma-html2js-preprocessor-0.1.0.tgz
npm http 200 https://registry.npmjs.org/karma-requirejs
npm http GET https://registry.npmjs.org/karma-requirejs/-/karma-requirejs-0.2.1.tgz
npm http 200 https://registry.npmjs.org/karma-jasmine
npm http GET https://registry.npmjs.org/karma-jasmine/-/karma-jasmine-0.1.5.tgz
npm http 200 https://registry.npmjs.org/karma-chrome-launcher
npm http 200 https://registry.npmjs.org/karma-script-launcher
npm http GET https://registry.npmjs.org/karma-chrome-launcher/-/karma-chrome-launcher-0.1.2.tgz
npm http GET https://registry.npmjs.org/karma-script-launcher/-/karma-script-launcher-0.1.0.tgz
npm http 200 https://registry.npmjs.org/karma-coffee-preprocessor
npm http GET https://registry.npmjs.org/karma-coffee-preprocessor/-/karma-coffee-preprocessor-0.1.3.tgz
npm http 200 https://registry.npmjs.org/karma-chrome-launcher/-/karma-chrome-launcher-0.1.2.tgz
npm http 200 https://registry.npmjs.org/karma-script-launcher/-/karma-script-launcher-0.1.0.tgz
npm http 200 https://registry.npmjs.org/karma-phantomjs-launcher
npm http 200 https://registry.npmjs.org/karma-requirejs/-/karma-requirejs-0.2.1.tgz
npm http 200 https://registry.npmjs.org/karma-coffee-preprocessor/-/karma-coffee-preprocessor-0.1.3.tgz
npm http GET https://registry.npmjs.org/karma-phantomjs-launcher/-/karma-phantomjs-launcher-0.1.2.tgz
npm http 200 https://registry.npmjs.org/karma-firefox-launcher
npm http 200 https://registry.npmjs.org/karma-jasmine/-/karma-jasmine-0.1.5.tgz
npm http GET https://registry.npmjs.org/karma-firefox-launcher/-/karma-firefox-launcher-0.1.3.tgz
npm http 200 https://registry.npmjs.org/karma-phantomjs-launcher/-/karma-phantomjs-launcher-0.1.2.tgz
npm http 200 https://registry.npmjs.org/karma-firefox-launcher/-/karma-firefox-launcher-0.1.3.tgz
npm http 200 https://registry.npmjs.org/karma-html2js-preprocessor/-/karma-html2js-preprocessor-0.1.0.tgz
npm http GET https://registry.npmjs.org/phantomjs
npm http GET https://registry.npmjs.org/coffee-script
npm http GET https://registry.npmjs.org/requirejs
npm http 304 https://registry.npmjs.org/coffee-script
npm http GET https://registry.npmjs.org/coffee-script/-/coffee-script-1.7.1.tgz
npm http 200 https://registry.npmjs.org/coffee-script/-/coffee-script-1.7.1.tgz
npm http 200 https://registry.npmjs.org/phantomjs
npm http 200 https://registry.npmjs.org/requirejs
npm http GET https://registry.npmjs.org/phantomjs/-/phantomjs-1.9.7-1.tgz
npm http GET https://registry.npmjs.org/requirejs/-/requirejs-2.1.11.tgz
npm http 200 https://registry.npmjs.org/phantomjs/-/phantomjs-1.9.7-1.tgz
npm http 200 https://registry.npmjs.org/requirejs/-/requirejs-2.1.11.tgz
npm http GET https://registry.npmjs.org/kew
npm http GET https://registry.npmjs.org/ncp/0.4.2
npm http GET https://registry.npmjs.org/npmconf/0.0.24
npm http GET https://registry.npmjs.org/mkdirp/0.3.5
npm http GET https://registry.npmjs.org/rimraf
npm http GET https://registry.npmjs.org/adm-zip/0.2.1
npm http GET https://registry.npmjs.org/which
npm http 200 https://registry.npmjs.org/npmconf/0.0.24
npm http GET https://registry.npmjs.org/npmconf/-/npmconf-0.0.24.tgz
npm http 200 https://registry.npmjs.org/ncp/0.4.2
npm http GET https://registry.npmjs.org/ncp/-/ncp-0.4.2.tgz
npm http 200 https://registry.npmjs.org/kew
npm http GET https://registry.npmjs.org/kew/-/kew-0.1.7.tgz
npm http GET https://registry.npmjs.org/mkdirp
npm http 200 https://registry.npmjs.org/mkdirp/0.3.5
npm http GET https://registry.npmjs.org/mkdirp/-/mkdirp-0.3.5.tgz
npm http 200 https://registry.npmjs.org/adm-zip/0.2.1
npm http GET https://registry.npmjs.org/adm-zip/-/adm-zip-0.2.1.tgz
npm http 304 https://registry.npmjs.org/rimraf
npm http 200 https://registry.npmjs.org/npmconf/-/npmconf-0.0.24.tgz
npm http GET https://registry.npmjs.org/rimraf/-/rimraf-2.2.6.tgz
npm http 200 https://registry.npmjs.org/mkdirp/-/mkdirp-0.3.5.tgz
npm http 200 https://registry.npmjs.org/which
npm http 200 https://registry.npmjs.org/rimraf/-/rimraf-2.2.6.tgz
npm http 200 https://registry.npmjs.org/ncp/-/ncp-0.4.2.tgz
npm http 200 https://registry.npmjs.org/kew/-/kew-0.1.7.tgz
npm http 304 https://registry.npmjs.org/mkdirp
npm http 200 https://registry.npmjs.org/adm-zip/-/adm-zip-0.2.1.tgz
npm http GET https://registry.npmjs.org/once
npm http GET https://registry.npmjs.org/config-chain
npm http GET https://registry.npmjs.org/ini
npm http GET https://registry.npmjs.org/inherits
npm http GET https://registry.npmjs.org/semver
npm http GET https://registry.npmjs.org/nopt
npm http GET https://registry.npmjs.org/osenv/0.0.3
npm http 200 https://registry.npmjs.org/once
npm http 200 https://registry.npmjs.org/ini
npm http 304 https://registry.npmjs.org/semver
npm http 304 https://registry.npmjs.org/inherits
npm http GET https://registry.npmjs.org/once/-/once-1.1.1.tgz
npm http GET https://registry.npmjs.org/ini/-/ini-1.1.0.tgz
/usr/local/bin/r.js -> /usr/local/lib/node_modules/requirejs/bin/r.js
npm http 200 https://registry.npmjs.org/osenv/0.0.3
npm http GET https://registry.npmjs.org/osenv/-/osenv-0.0.3.tgz
npm http 200 https://registry.npmjs.org/config-chain
npm http 200 https://registry.npmjs.org/nopt
npm http GET https://registry.npmjs.org/nopt/-/nopt-2.2.0.tgz
npm http GET https://registry.npmjs.org/config-chain/-/config-chain-1.1.8.tgz
npm http 200 https://registry.npmjs.org/once/-/once-1.1.1.tgz
npm http 200 https://registry.npmjs.org/ini/-/ini-1.1.0.tgz
npm http 200 https://registry.npmjs.org/osenv/-/osenv-0.0.3.tgz
npm http 200 https://registry.npmjs.org/config-chain/-/config-chain-1.1.8.tgz
npm http 200 https://registry.npmjs.org/nopt/-/nopt-2.2.0.tgz
npm http GET https://registry.npmjs.org/proto-list
npm http GET https://registry.npmjs.org/abbrev
npm http 200 https://registry.npmjs.org/abbrev
npm http 200 https://registry.npmjs.org/proto-list
npm http GET https://registry.npmjs.org/proto-list/-/proto-list-1.2.2.tgz
npm http 200 https://registry.npmjs.org/proto-list/-/proto-list-1.2.2.tgz

> phantomjs@1.9.7-1 install /usr/local/lib/node_modules/karma-phantomjs-launcher/node_modules/phantomjs
> node install.js

Downloading http://cdn.bitbucket.org/ariya/phantomjs/downloads/phantomjs-1.9.7-linux-x86_64.tar.bz2
Saving to /usr/local/lib/node_modules/karma-phantomjs-launcher/node_modules/phantomjs/phantomjs/phantomjs-1.9.7-linux-x86_64.tar.bz2
Receiving...
Received 781K...
Received 1563K...
Received 2345K...
Received 3127K...
Received 3909K...
Received 4691K...
Received 5473K...
Received 6255K...
Received 7037K...
Received 7819K...
Received 8601K...
Received 9383K...
Received 10165K...
Received 10947K...
Received 11729K...
Received 12511K...
Received 12852K total.
Extracting tar contents (via spawned process)
Copying extracted folder /usr/local/lib/node_modules/karma-phantomjs-launcher/node_modules/phantomjs/phantomjs/phantomjs-1.9.7-linux-x86_64.tar.bz2-extract-1392824668036/phantomjs-1.9.7-linux-x86_64 -> /usr/local/lib/node_modules/karma-phantomjs-launcher/node_modules/phantomjs/lib/phantom
Writing location.js file
Done. Phantomjs binary available at /usr/local/lib/node_modules/karma-phantomjs-launcher/node_modules/phantomjs/lib/phantom/bin/phantomjs
karma-script-launcher@0.1.0 /usr/local/lib/node_modules/karma-script-launcher

karma-chrome-launcher@0.1.2 /usr/local/lib/node_modules/karma-chrome-launcher

karma-firefox-launcher@0.1.3 /usr/local/lib/node_modules/karma-firefox-launcher

karma-html2js-preprocessor@0.1.0 /usr/local/lib/node_modules/karma-html2js-preprocessor

karma-jasmine@0.1.5 /usr/local/lib/node_modules/karma-jasmine

karma-coffee-preprocessor@0.1.3 /usr/local/lib/node_modules/karma-coffee-preprocessor
└── coffee-script@1.7.1 (mkdirp@0.3.5)

requirejs@2.1.11 /usr/local/lib/node_modules/requirejs

karma-requirejs@0.2.1 /usr/local/lib/node_modules/karma-requirejs

karma-phantomjs-launcher@0.1.2 /usr/local/lib/node_modules/karma-phantomjs-launcher
└── phantomjs@1.9.7-1 (rimraf@2.2.6, which@1.0.5, kew@0.1.7, ncp@0.4.2, mkdirp@0.3.5, adm-zip@0.2.1, npmconf@0.0.24)

karma@0.10.9 /usr/local/lib/node_modules/karma
├── di@0.0.1
├── colors@0.6.0-1
├── rimraf@2.1.4
├── graceful-fs@1.2.3
├── chokidar@0.8.1
├── mime@1.2.11
├── q@0.9.7
├── coffee-script@1.6.3
├── glob@3.1.21 (inherits@1.0.0)
├── optimist@0.3.7 (wordwrap@0.0.2)
├── minimatch@0.2.14 (sigmund@1.0.0, lru-cache@2.5.0)
├── lodash@1.1.1
├── useragent@2.0.7 (lru-cache@2.2.4)
├── connect@2.8.8 (methods@0.0.1, uid2@0.0.2, pause@0.0.1, cookie-signature@1.0.1, fresh@0.2.0, qs@0.6.5, debug@0.7.4, bytes@0.2.0, buffer-crc32@0.2.1, cookie@0.1.0, formidable@1.0.14, send@0.1.4)
├── http-proxy@0.10.4 (pkginfo@0.3.0, optimist@0.6.1, utile@0.2.1)
├── log4js@0.6.10 (semver@1.1.4, async@0.1.15, readable-stream@1.0.25)
└── socket.io@0.9.16 (base64id@0.1.0, policyfile@0.0.4, redis@0.7.3, socket.io-client@0.9.16)

[eric@walnut angular-seed]$ sudo npm i -g karma-junit-reporter 
npm http GET https://registry.npmjs.org/karma-junit-reporter
npm http 200 https://registry.npmjs.org/karma-junit-reporter
npm http GET https://registry.npmjs.org/karma-junit-reporter/-/karma-junit-reporter-0.2.1.tgz
npm http 200 https://registry.npmjs.org/karma-junit-reporter/-/karma-junit-reporter-0.2.1.tgz
npm http GET https://registry.npmjs.org/xmlbuilder/0.4.2
npm http 200 https://registry.npmjs.org/xmlbuilder/0.4.2
npm http GET https://registry.npmjs.org/xmlbuilder/-/xmlbuilder-0.4.2.tgz
npm http 200 https://registry.npmjs.org/xmlbuilder/-/xmlbuilder-0.4.2.tgz
karma-junit-reporter@0.2.1 /usr/local/lib/node_modules/karma-junit-reporter
└── xmlbuilder@0.4.2






/ Einde NPM

/ JASMINE

/ docs	,
http://jasmine.github.io/
/kies 2.0	,
http://jasmine.github.io/2.0/introduction.html



/ lees	,
https://github.com/pivotal/jasmine/tree/master

[eric@walnut Jasmine]$ pwd
/home/eric/Devel/Web/Jasmine
[eric@walnut Jasmine]$ git clone  https://github.com/pivotal/jasmine.git
[eric@walnut Jasmine]$ cd jasmine/
[eric@walnut jasmine]$ ls
CONTRIBUTING.md  grunt                 lib           README.md      src
dist             Gruntfile.js          MIT.LICENSE   RELEASE.md     travis-core-script.sh
Gemfile          images                package.json  release_notes  travis-docs-script.sh
GOALS_2.0.md     jasmine-core.gemspec  Rakefile      spec           travis-node-script.sh

/ de standalone dists	, 
[eric@walnut Jasmine]$ unzip  jasmine/dist/jasmine-standalone-2.0.0.zip  -d v2.0.0/
/ Geef	,
http://web/Jasmine/v2.0.0/SpecRunner.html





/ Einde JASMINE

/ JAVASCRIPTS & SCOPES 

/ RECURSIVE SCOPE

$ vi rec3.html

!function(){

console.log("ns 3b")

var fs=[]

function f(n){
  fs.push({f:f,h:h})
  if(n===1)return 1
  var r=n*f(n-1) 				/ (*)
  console.log("r:"+n)		/ (**)
  return r
  function h(){
    f.n=n
    h.n=n
  }
}
var r=f(3)
for(var i=0;i<fs.length;i++){
  fs[i].h()
}
for(var i=0;i<fs.length;i++){
  console.log(fs[i].f.n,fs[i].h.n)
}

}()

/ we zien	,

r:2 
r:3
1 3
1 2
1 1 

/ er is 1 fct obj f, en 3 fct objs h	,
/ f heeft 3 keer een andere local scope, nl in elke rec call een	, er wordt in elke rec call een h fct create, met een local scope, en de closure scope is die van f, want f is de closure	, en dus het h fct obj met een local scope en een closure scope blijft,	 en daar zijn er 3 van 	, en f wisselt van local scope	, 
//////////////////////////////////////////////////////////////////
/ op (**) wordt de eerdere local scope weer terug gezet op f	, 


 3 -------------------------------------
f2 ------------------------4
 1 ------5
    |||||             |||||					|||||
			|                 |             |
h - ||||| 				h - |||||			h - |||||

/ de 3 h's blijven, en de scope en closure scope op elk ook	, f krijgt steeds een andere local scope, eerst 1, dan 2, dan 3 en als terugkeert uit rec krijgt hij de eerdere scopes weer, bij 4 en 5	,

/ Einde JAVASCRIPT & SCOPES

/ DRUPAL SERVICES ANDROID APP 

/ geef in google
android apps drupal

/ lees	,
https://drupal.org/node/1865012
https://drupal.org/project/services
/ kijk	,
http://www.youtube.com/watch?v=6-2kw7iXf1U

/ kijk	, 
http://www.youtube.com/watch?v=ezk_21sfEQM

/ kijk	, OAUTH , Drupal Services 
http://www.youtube.com/watch?v=D0mEzjN7wxU
http://www.youtube.com/watch?v=RUylSUkz8o4

/ Einde DRUPAL SERVICES ANDROID APP 



/ FROM PARA

[eric@walnut Devel]$ rsync -avz eric@para:Devel/OpenSSL .
[eric@walnut ~]$ rsync -avz eric@para:bin .
[eric@walnut ~]$ rsync -avz eric@para:tmp .
[eric@walnut Drupal]# rsync -avz eric@para:Devel/Drupal/Drush .
[eric@walnut Drush]# chown -R eric.eric . 
[eric@walnut Misc]$ rsync -avz eric@para:/etc/httpd/conf/httpd.conf  .

[eric@localhost build]$ df -h
Filesystem               Size  Used Avail Use% Mounted on
devtmpfs                 3.8G     0  3.8G   0% /dev
tmpfs                    3.8G  668K  3.8G   1% /dev/shm
tmpfs                    3.8G   85M  3.8G   3% /run
tmpfs                    3.8G     0  3.8G   0% /sys/fs/cgroup
/dev/mapper/fedora-root   50G   40G  7.4G  85% /
tmpfs                    3.8G  2.2M  3.8G   1% /tmp
/dev/sda3                477M  138M  310M  31% /boot
/dev/mapper/fedora-home  331G   25G  290G   8% /home
/dev/sdb1                466G  106G  361G  23% /run/media/eric/My Passport

[eric@localhost build]$ mkdir -p /run/media/eric/My\ Passport/walnut/home/eric

/ onze my passport heeft geen linux fs	, dus we kunnen niet de permissions set	,
/ lees	,
http://www.linuxforums.org/forum/red-hat-fedora-linux/186574-cant-change-permission-files-my-new-wd-passport-fedora-16-a.html
/ we moeten	,

1. Boot system.
2. Plug drive in.
3. After it automounts, right click on the icon and check the properties to see what device it is, such as /dev/sdb1, etc.
4. Since you already downloaded the application (probably as a compressed tar file), then copy that to your system drive. Copying it to /tmp would be just fine. That way you won't have to download it again. 
5. Right click on the icon again, and select "unmount". This will make the icon go away - that's ok.
6. Open a terminal / command-line window and switch to root with the command "su -" - it will ask for your root password. Not necessary if you originally logged in as root.
7. Now, format the file system. The current preferred file system for Linux is ext4, so do this (assuming the drive's file system was on /dev/sdb1):
Code:
mkfs -t ext4 -c /dev/sdb1
The -c option will scan the hard drive for bad sectors and map those out of use if it finds any, before it creates the actual file system. This is optional, but good practice, and will give you time to go get a nice cup of coffee while you wait! 

Once the file system is created, you should be able to remove it, plug it back in, and verify that it will still auto-mount ok. Assuming it does, then you can create a user-accessible directory on the drive (which will be mounted in /media) to hold your data, and move the file you copied to /tmp there. I do stuff like this all the time, and I create a link in my user space to the directory so when it is connected to the system all I have to do is cd to that directory in order to configure and build stuff I loaded there.

[eric@walnut ~]$ rsync -avz Misc /run/media/eric/My\ Passport/walnut/home/eric
[eric@walnut ~]$ rsync -avz Devel /run/media/eric/My\ Passport/walnut/home/eric









/ Einde FROM PARA

/ EGGHEAD.IO

/ video 40


/ Einde EGGHEAD.IO

/ DRUPAL ZURB

/ ga naar ,
https://drupal.org/project/zurb-foundation
/ click 'in the wild' ,
http://zurb.com/responsive
/maak smaller ,
/ we zien slide menu  ,

/ ga naar ,
https://drupal.org/project/bootstrap

/ Einde DRUPAL ZURB


/ FOUNDATION

/ we zijn op	,
http://foundation.zurb.com/docs/index.html

/ beter is	,
http://foundation.zurb.com/develop/download.html

/ 7	. 

Install Foundation SCSS

$ gem install foundation

[eric@para foundation]$ pwd
/home/eric/Devel/Web/Sass/Foundation

$ [sudo] npm install -g bower grunt-cli

[eric@walnut Foundation]$ foundation new my_sass
Creating ./my_sass
      create  my_sass
remote: Counting objects: 62, done.
remote: Compressing objects: 100% (40/40), done.
remote: Total 62 (delta 19), reused 57 (delta 15)
Unpacking objects: 100% (62/62), done.
Installing dependencies with bower...
         run  compass compile from "./my_sass"
directory stylesheets/ 
   create stylesheets/app.css 
./my_sass was created

/ geef  , 
http://web/Sass/Foundation/my_sass

/ we zien responsive grid	,
/ OK

/ 7	.

Download Foundation CSS

[eric@walnut default_css]$ pwd
/home/eric/Devel/Web/Sass/Foundation/default_css
[eric@walnut default_css]$ unzip  ~/Downloads/foundation-5.0.2.zip 

/ 7	. 

Custom CSS

[eric@walnut custom_css]$ unzip ~/Downloads/foundation-5.0.2.custom.zip 

/ 7	.

/ we hebben	,
[eric@walnut Foundation]$ ls
custom_css  default_css  my_sass 

/ 7	. 

/ we lezen	,
http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/foundation-for-beginners-the-top-bar/

[eric@walnut Foundation]$ foundation new webdesign.tutsplus.com
Creating ./webdesign.tutsplus.com
      create  webdesign.tutsplus.com
remote: Counting objects: 62, done.
remote: Compressing objects: 100% (40/40), done.
remote: Total 62 (delta 19), reused 57 (delta 15)
Unpacking objects: 100% (62/62), done.
Installing dependencies with bower...
         run  compass compile from "./webdesign.tutsplus.com"
directory stylesheets/ 
   create stylesheets/app.css 
./webdesign.tutsplus.com was created

[eric@walnut webdesign.tutsplus.com]$ cp index.html my.html
/ en gaan my.html aanpassen	,











/ Einde FOUNDATION

/ OPEN IN CHROME

http://web/Sass/Singularity/wiki/first/
https://github.com/Team-Sass/Singularity/wiki/Creating-Grids
http://web/Sass/Susy/second/

http://foundation.zurb.com/develop/download.html
http://foundation.zurb.com/develop/download.html
http://foundation.zurb.com/docs/sass.html

http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository

https://www.youtube.com/watch?v=iUQ1fvdO9GY
/ yeoman

http://ryanchristiani.com/getting-started-with-grunt-and-sass/
https://github.com/gruntjs/grunt-contrib-sass

http://web/Sass/compass-tutorials/leveluptuts/5/
http://sass-lang.com/documentation/file.SASS_REFERENCE.html
http://net.tutsplus.com/tutorials/html-css-techniques/developing-with-sass-and-chrome-devtools/
/ paul irish video, 

https://www.youtube.com/watch?v=25HkrDjg6sQ
/ video google drive
https://www.youtube.com/watch?v=ZZNb1NOPTp8
/ laura

https://www.youtube.com/watch?v=bntNYzCrzvE
/ grunt video

http://developer.android.com/training/basics/firstapp/creating-project.html
/android docs
https://www.linux.com/learn/tutorials/735985-android-app-development-for-beginners-layout-and-ui-options-part-one
/ android
http://developer.android.com/training/basics/firstapp/index.html
http://developer.android.com/design/patterns/multi-pane-layouts.html
http://developer.android.com/design/get-started/ui-overview.html
http://developer.android.com/sdk/installing/bundle.html

http://virt-tools.org/learning/install-with-command-line/
http://nfolamp.wordpress.com/2010/08/16/mounting-raw-image-files-and-kpartx/
http://www.packtpub.com/manage-disk-space-partitions-with-gparted/book#overview
http://gparted.sourceforge.net/
http://www.rdoxenham.com/?p=275
http://mytechdepot.wordpress.com/2013/02/22/enabling-clipboard-copy-paste-in-redhat-kvm/
http://docs.fedoraproject.org/en-US/Fedora/18/html/Virtualization_Administration_Guide/sec-directory-based-storage-pools.html
http://libvirt.org/storage.html
http://serverfault.com/questions/324281/how-do-you-increase-a-kvm-guests-disk-space
http://docs.fedoraproject.org/en-US/Fedora/13/html/Virtualization_Guide/sect-Virtualization-Installing_Windows_Server_2003_as_a_fully_virtualized_guest.htmlhttp://docs.fedoraproject.org/en-US/Fedora_Draft_Documentation/0.1/pdf/Virtualization_Deployment_and_Administration_Guide/Fedora-19-Virtualization_Deployment_and_Administration_Guide-en-US.pdf
http://wiki.xen.org/wiki/Fedora_Test_Days
http://docs.fedoraproject.org/en-US/Fedora/18/html/Virtualization_Getting_Started_Guide/ch05s02.html

http://docs.nvidia.com/cuda/cuda-getting-started-guide-for-linux/index.html
http://www.nvidia.com/object/cuda_home_new.html

http://docs.openstack.org/trunk/openstack-compute/install/yum/content/terminology.html
http://docs.openstack.org/grizzly/basic-install/yum/content/basic-install_architecture.html


http://docs.fedoraproject.org/en-US/Fedora/16/html/System_Administrators_Guide/s2-email-mta-sendmail.html

http://mustardseedmedia.com/podcast
/ Drupal feeds module
http://www.linkedin.com/groups?gid=3199704&goback=%2Enmp_*1_*1_*1_*1_*1_*1_*1_*1_*1_*1&trk=nmp_rg_group

http://www.alfresco.com/tour


https://fedoraproject.org/wiki/How_to_use_PreUpgrade?rd=PreUpgrade#Method_2:_Trick_preupgrade_into_downloading_the_installer
https://fedoraproject.org/wiki/How_to_use_PreUpgrade?rd=PreUpgrade
http://www.if-not-true-then-false.com/2012/upgrade-fedora-16-to-fedora-17-with-preupgrade/





/ Einde OPEN IN CHROME

/ LIVE RELOAD

/ ga naar	,
http://livereload.com/



/ Einde LIVE RELOAD

/ EXPRESS

[eric@localhost hello]$ pwd
/home/eric/Devel/Express/hello
[eric@localhost Express]$  mkdir hello-world
[eric@localhost Express]$  npm info express version
3.4.6
[eric@localhost Express]$  cd hello-world/
[eric@localhost hello-world]$ vi package.json
{
  "name": "hello-world",
  "description": "hello world test app",
  "version": "0.0.1",
  "private": true,
  "dependencies": {
    "express": "3.4.6"
  }
}

[eric@localhost hello-world]$  npm install
express@3.4.6 node_modules/express
├── methods@0.1.0
├── range-parser@0.0.4
├── cookie-signature@1.0.1
├── fresh@0.2.0
├── debug@0.7.4
├── buffer-crc32@0.2.1
├── cookie@0.1.0
├── mkdirp@0.3.5
├── commander@1.3.2 (keypress@0.1.0)
├── send@0.1.4 (mime@1.2.11)
└── connect@2.11.2 (uid2@0.0.3, pause@0.0.1, qs@0.6.5, bytes@0.2.1, raw-body@1.1.2, negotiator@0.3.0, multiparty@2.2.0)

/ Afmaken
/ TODO





/ Einde EXPRESS

/ LAMP

[root@localhost ~]# yum install httpd
[root@localhost ~]# systemctl enable httpd.service 
[root@localhost ~]# systemctl restart httpd.service 
[root@localhost ~]# yum install mysql-server
[root@localhost ~]# systemctl enable mysqld.service 
ln -s '/usr/lib/systemd/system/mysqld.service' '/etc/systemd/system/multi-user.target.wants/mysqld.service'
[root@localhost ~]# systemctl restart mysqld.service 



/ Einde LAMP

/ COUCHDB

/ we lezen	,
http://wiki.apache.org/couchdb/Installing_on_Fedora17

[root@localhost ~]#  yum install couchdb
Installing:
 couchdb                x86_64   1.2.1-2.fc18                 updates   737 k
Installing for dependencies:
 erlang-appmon          x86_64   R15B-03.3.fc18               updates   153 k
 erlang-asn1            x86_64   R15B-03.3.fc18               updates   1.0 M
 erlang-compiler        x86_64   R15B-03.3.fc18               updates   1.0 M
 erlang-crypto          x86_64   R15B-03.3.fc18               updates    62 k
 erlang-erts            x86_64   R15B-03.3.fc18               updates   2.0 M
 erlang-et              x86_64   R15B-03.3.fc18               updates   222 k
 erlang-eunit           x86_64   R15B-03.3.fc18               updates   149 k
 erlang-gs              x86_64   R15B-03.3.fc18               updates   625 k
 erlang-hipe            x86_64   R15B-03.3.fc18               updates   1.0 M
 erlang-ibrowse         x86_64   2.2.0-6.fc18                 fedora    100 k
 erlang-inets           x86_64   R15B-03.3.fc18               updates   799 k
 erlang-kernel          x86_64   R15B-03.3.fc18               updates   1.1 M
 erlang-mnesia          x86_64   R15B-03.3.fc18               updates   697 k
 erlang-mochiweb        x86_64   1.4.1-7.fc18                 fedora    351 k
 erlang-oauth           x86_64   1.1.1-2.fc18                 fedora     30 k
 erlang-observer        x86_64   R15B-03.3.fc18               updates   541 k
 erlang-os_mon          x86_64   R15B-03.3.fc18               updates   111 k
 erlang-otp_mibs        x86_64   R15B-03.3.fc18               updates    29 k
 erlang-public_key      x86_64   R15B-03.3.fc18               updates   508 k
 erlang-runtime_tools   x86_64   R15B-03.3.fc18               updates   247 k
 erlang-sasl            x86_64   R15B-03.3.fc18               updates   291 k
 erlang-snappy          x86_64   1.0.3-0.2.git80db168.fc18    fedora     13 k
 erlang-snmp            x86_64   R15B-03.3.fc18               updates   1.5 M
 erlang-ssl             x86_64   R15B-03.3.fc18               updates   356 k
 erlang-stdlib          x86_64   R15B-03.3.fc18               updates   2.2 M
 erlang-syntax_tools    x86_64   R15B-03.3.fc18               updates   334 k
 erlang-tools           x86_64   R15B-03.3.fc18               updates   555 k
 erlang-webtool         x86_64   R15B-03.3.fc18               updates    47 k
 erlang-wx              x86_64   R15B-03.3.fc18               updates   2.9 M
 erlang-xmerl           x86_64   R15B-03.3.fc18               updates   979 k
 tcl                    x86_64   1:8.5.13-1.fc18              fedora    1.9 M
 tk                     x86_64   1:8.5.13-1.fc18              fedora    1.4 M
 wxBase                 x86_64   2.8.12-5.fc18                fedora    569 k
 wxGTK                  x86_64   2.8.12-5.fc18                fedora    2.9 M
 wxGTK-gl               x86_64   2.8.12-5.fc18                fedora     33 k



/ Einde COUCHDB

/ GOOGLE CLOUD 

https://cloud.google.com/
/ click Try it now
My First Cloud Project
Project ID: evocative-tube-225

/we komen op	,
https://cloud.google.com/console#c=p&pid=apps~evocative-tube-225
/ we zien list 
app engine
compute engine
...

/op de header staat 
Get started with sample applications
/ click
/ we Deploy de Photofeed sample app
/ we download de SDK , sample app,	
-rw-rw-r--. 1 eric eric   74941300 Jun  1 21:47 appengine-java-sdk-1.7.3.zip.crdownload
-rw-rw-r--. 1 eric eric     860160 Jun  1 21:47 photo-sharing-demo-1.0.tar

/ click Documentation,
https://developers.google.com/cloud/samples/photofeed/

/bij Required Setup we click 'Set up a Google Cloud Storage bucket '	,
https://developers.google.com/appengine/docs/python/googlestorage/overview#Prerequisites
/ we click 'Activate the Cloud Storage service',
https://developers.google.com/storage/docs/signup
/ we click de link 'Log in to the Google APIs Console.'
https://code.google.com/apis/console/#project:82176463406
/ deze kennen we, Dashboard, select 'My First Cloud Project',
/ bij services, we zien dat al aan staat,
Google Cloud Storage 
/ en 
Google Cloud SQL

/ we hebben naast 'My First Cloud Project', ook 'API Project', daar hebben we v2 en v3 van Google Maps services on, 
/ TODO

Turn on billing.
/ TODO

/ Nu,
Create a bucket.
/click ' online Google Storage browser ',
https://developers.google.com/storage/docs/gsmanager
https://storage.cloud.google.com
/ WH is deze url niet OK, we moeten naar dashboard, kies
Google cloud storage
/ OK

/ Lees
https://developers.google.com/storage/docs/accesscontrol
/ TODO

/ we click 'gsutil tool '
https://developers.google.com/storage/docs/gsutil
/ we click 'download and install',
https://developers.google.com/storage/docs/gsutil_install

[eric@localhost laptop_walnut]$  tar xfz ~/Downloads/gsutil.tar.gz -C $HOME
[eric@localhost laptop_walnut]$ ls ~
...
Devel    Downloads  gsutil   Pictures  Templates  Videos

[eric@localhost laptop_walnut]$ vi ~/.bash_profile 
PATH=$PATH:$HOME/gsutil
[eric@localhost laptop_walnut]$ . ~/.bash_profile 

[eric@localhost laptop_walnut]$ gsutil update
Checking for software update...
You already have the latest gsutil release installed.

[eric@localhost laptop_walnut]$ gsutil config -b
This script will create a boto config file at
/home/eric/.boto
containing your credentials, based on your responses to the following questions.

Attempting to launch a browser with the OAuth2 approval dialog at URL: https://accounts.google.com/o/oauth2/auth?scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdevstorage.full_control&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob&response_type=code&client_id=909320924072.apps.googleusercontent.com&access_type=offline

In your browser you should see a page that requests you to authorize gsutil to access
Google Cloud Storage on your behalf. After you approve, an authorization code will be displayed.
Enter the authorization code: 

/ we zien ff , en we moeten inloggen met google account, 
/ wezien,
 gsutil allow access to  access Google Cloud Storage.
Kopieer deze code, schakel over naar uw applicatie en plak de code daar:
4/ISysa8rILi8fUXvbCNBmeU6ymCQe.siH0gfy54nESOl05ti8ZT3b9JlMJfgI

/ nu terug naar cmd line, $ gsutil config -b
Enter the authorization code: 4/ISysa8rILi8fUXvbCNBmeU6ymCQe.siH0gfy54nESOl05ti8ZT3b9JlMJfgI
Attempting to launch a browser to open the Google API console at URL: http://code.google.com/apis/console

[Note: due to a Python bug, you may see a spurious error message "object is not
 callable [...] in [...] Popen.__del__" which can be ignored.]

In your browser you should see the API Console. Click "Storage" and look for the value under "Identifying your project

What is your project-id? 

/ we gaan naar de dashboard,
https://code.google.com/apis/console/?pli=1#project:82176463406:overview

/ we doen nu op de cmd line,
What is your project-id? evocative-tube-225

Boto config file "/home/eric/.boto" created.

/ klaar,
/ we zijn nog op
https://developers.google.com/storage/docs/gsutil_install

/ dan lezen we,
it is recommended that you switch to using OAuth 2.0 authentication ,
https://developers.google.com/accounts/docs/OAuth2
/ TODO
https://developers.google.com/storage/docs/gsutil_install

/we gaan terug naar,
https://developers.google.com/storage/docs/gsutil
/ we geven,
[eric@localhost laptop_walnut]$ gsutil ls gs://uspto-pair/applications/0800401*
gs://uspto-pair/applications/08004010.zip
gs://uspto-pair/applications/08004011.zip
gs://uspto-pair/applications/08004012.zip
gs://uspto-pair/applications/08004013.zip
gs://uspto-pair/applications/08004016.zip
gs://uspto-pair/applications/08004017.zip
gs://uspto-pair/applications/08004019.zip

/ we gaan terug naar,
https://developers.google.com/storage/docs/gsmanager
/ we zien de link,
https://storage.cloud.google.com
/ WH is deze url niet OK, we moeten naar dashboard, kies
Google cloud storage
/ OK
/ we zien bovenin,
command line tool
/ dat is gsutil
/ en we zien ,
online browser , of Google Cloud Storage Manager.
https://cloud.google.com/console#c=cloudstorage&pid=82176463406

This URL loads the contents of your default project
https://developers.google.com/storage/docs/reference/v1/apiversion1#enabling
/ we zien de link Log in to the 'Storage Access' pane in the Google APIs Console'
https://code.google.com/apis/console/#project:82176463406:storage:access
/ onderin we click button, zodat
This is your default project for interoperable access.

/ we lezen nog,
https://developers.google.com/storage/docs/gsmanager

/ als we nu
https://storage.cloud.google.com/
/ dan OK
/ TODO
/ er staat,
This URL loads the contents of your default project
/ WH hebben we die pas hierboven set,

/ we hebben,
https://developers.google.com/storage/docs/gsmanager
https://storage.cloud.google.com/
https://cloud.google.com/console#c=cloudstorage&pid=82176463406
https://code.google.com/apis/console/#project:82176463406:storage

/ op
https://developers.google.com/storage/index
/ is er een video,
https://www.youtube.com/watch?feature=player_embedded&v=cI35BAdKrr4#!

/ we waren op google cloud storage	,
https://developers.google.com/storage/
Tools
	Google storage manager

/ Nu gaan we naar google cloud storage
Google cloud storage
	Hello google cloud storage
https://developers.google.com/storage/docs/hellogooglestorage

/ als we doen,
$ gsutil mb gs://cats gs://dogs
Failure: GSCreateError: 409 Conflict
BucketNameUnavailableThe requested bucket name is not available. The bucket namespace is shared by all users of the system. Please select a different name and try again..

/ we gaan eerst naar Google Cloud Console,
https://cloud.google.com/console#c=l
/ click het project,
https://cloud.google.com/console#c=p&pid=apps~evocative-tube-225
/ click Cloud storage,
https://cloud.google.com/console#c=cloudstorage&pid=apps~evocative-tube-225
/ we maken een bucket in de cloud storage manager	,
/ click New Bucket,
evocative-tube-225
/we komen op	,
https://cloud.google.com/console#c=cloudstorage&pid=82176463406&gcsh=evocative-tube-225%2F
/ we zien New Folder, Upload buttons	,

/ als we later terugkomen op	,
https://cloud.google.com/console#c=cloudstorage&pid=apps~evocative-tube-225
/ dan click we de entry 'evocative-tube-225' in het rood, en we zien  
/ we zien New Folder, Upload buttons	,
/ als we ook check zien we	,
Delete Bucket , ... , dus kunnen we de bucket delete	,

/ we click 
Upload, Folder
/ we kiezen ~/Pictures
/ In de bucket verschijnt de Pictures folder met de 4 images erin	,

/ KLAD
18154  1384  1384 18154 pts/19    1384 S+    1000   0:00 vim LOG_11_dec_2012.txt
  404  2330  2330   404 pts/28    2330 S+    1000   0:00 vim modules/node/node.module
 2444  2432  2432  2444 pts/1     2432 S+    1000   0:08 vim LOG_22_mei_2012.txt
 2273  2443  2443  2273 pts/0     2443 S+    1000   0:06 vim LOG_23_apr_2013.txt
 2576  2641  2641  2576 pts/3     2641 S+    1000   0:07 vim LOG_25_feb_2013.txt
 2642  2715  2715  2642 pts/4     2715 S+    1000   0:00 vim LOG_11_apr.txt
30646  4326  4326 30646 pts/27    4326 S+    1000   0:00 vim webform/webform.module
 4468  4528  4527  4366 pts/37    4527 S+       0   0:00 grep --color=auto vim
10843 10503 10503 10843 pts/29   10503 S+    1000   0:03 vim LOG_4_jun_2013.txt
 2510 14687 14687  2510 pts/2    14687 S+    1000   0:29 vim LOG_28_mrt_2013.txt
25060 25201 25201 25060 pts/35   25201 S+    1000   0:00 vim widget.html
22223 25866 25866 22223 pts/33   25866 S+    1000   0:00 vim follow.html
 9053 26881 26881  9053 pts/17   26881 S+    1000   0:00 vim LOG_15_mrt_2012.txt
 3517 29277 29277  3517 pts/11   29277 S+    1000   0:00 vim inh.html
29199 31804 31804 29199 pts/23   31804 S+    1000   0:03 vim LOG_2_dec_2012.txt

/ we zien in ff open	,
https://accounts.google.com/o/oauth2/approval?as=75797080f56b80cc&hl=nl&pageId=none&xsrfsign=APsBz4gAAAAAUasz-5aNS-fwfvST_ZhFFiLLTEsBX82M
/ TODO

/ Einde GOOGLE CLOUD

/ YUM UPDATE

/ 16 juni 2013
# yum update

Removed:
  kernel.x86_64 0:3.8.4-202.fc18                                                

Installed:
  kernel.x86_64 0:3.9.5-201.fc18                                                
  mesa-filesystem.x86_64 0:9.2-0.7.20130528.fc18                                
  system-config-printer-libs.noarch 0:1.3.13-1.fc18                             

Dependency Installed:
  abrt-addon-uefioops.x86_64 0:2.1.4-3.fc18                                     
  opencv-core.x86_64 0:2.4.5-1.fc18                                             
  rdesktop.x86_64 0:1.7.1-1.fc18                                                
  xorg-x11-glamor.x86_64 0:0.5.0-5.20130401git81aadb8.fc18                      

Updated:
  GConf2.x86_64 0:3.2.6-2.fc18                                                  
  LibRaw.x86_64 0:0.14.8-2.fc18                                                 
  NetworkManager.x86_64 1:0.9.8.1-3.git20130514.fc18                            
  NetworkManager-glib.x86_64 1:0.9.8.1-3.git20130514.fc18                       
  PackageKit.x86_64 0:0.8.9-1.fc18                                              
  PackageKit-command-not-found.x86_64 0:0.8.9-1.fc18                            
  PackageKit-device-rebind.x86_64 0:0.8.9-1.fc18                                
  PackageKit-glib.x86_64 0:0.8.9-1.fc18                                         
  PackageKit-gstreamer-plugin.x86_64 0:0.8.9-1.fc18                             
  PackageKit-gtk3-module.x86_64 0:0.8.9-1.fc18                                  
  PackageKit-yum.x86_64 0:0.8.9-1.fc18                                          
  PackageKit-yum-plugin.x86_64 0:0.8.9-1.fc18                                   
  abrt.x86_64 0:2.1.4-3.fc18                                                    
  abrt-addon-ccpp.x86_64 0:2.1.4-3.fc18                                         
  abrt-addon-kerneloops.x86_64 0:2.1.4-3.fc18                                   
  abrt-addon-python.x86_64 0:2.1.4-3.fc18                                       
  abrt-addon-vmcore.x86_64 0:2.1.4-3.fc18                                       
  abrt-addon-xorg.x86_64 0:2.1.4-3.fc18                                         
  abrt-dbus.x86_64 0:2.1.4-3.fc18                                               
  abrt-desktop.x86_64 0:2.1.4-3.fc18                                            
  abrt-gui.x86_64 0:2.1.4-3.fc18                                                
  abrt-libs.x86_64 0:2.1.4-3.fc18                                               
  abrt-plugin-bodhi.x86_64 0:2.1.4-3.fc18                                       
  abrt-retrace-client.x86_64 0:2.1.4-3.fc18                                     
  audit.x86_64 0:2.3.1-2.fc18                                                   
  audit-libs.x86_64 0:2.3.1-2.fc18                                              
  audit-libs-python.x86_64 0:2.3.1-2.fc18                                       
  brasero.x86_64 0:3.6.1-2.fc18                                                 
  brasero-libs.x86_64 0:3.6.1-2.fc18                                            
  brasero-nautilus.x86_64 0:3.6.1-2.fc18                                        
  btrfs-progs.x86_64 0:0.20.rc1.20121017git91d9eec-3.fc18                       
  cairo.x86_64 0:1.12.14-2.fc18                                                 
  cairo-gobject.x86_64 0:1.12.14-2.fc18                                         
  clutter.x86_64 0:1.12.2-2.fc18                                                
  control-center.x86_64 1:3.6.3-2.fc18                                          
  control-center-filesystem.x86_64 1:3.6.3-2.fc18                               
  createrepo.noarch 0:0.9.9-21.fc18                                             
  cryptopp.x86_64 0:5.6.2-2.fc18                                                
  curl.x86_64 0:7.27.0-10.fc18                                                  
  dmidecode.x86_64 1:2.12-3.fc18                                                
  dosfstools.x86_64 0:3.0.16-3.fc18                                             
  dvb-apps.x86_64 0:1.1.2-4.1488.f3a70b206f0f.fc18                              
  ed.x86_64 0:1.8-1.fc18                                                        
  emacs-filesystem.noarch 1:24.2-18.fc18                                        
  empathy.x86_64 0:3.6.4-3.fc18                                                 
  espeak.x86_64 0:1.47.11-1.fc18                                                
  evolution-data-server.x86_64 0:3.6.4-4.fc18                                   
  fedora-bookmarks.noarch 0:15-2.fc18                                           
  firefox.x86_64 0:21.0-3.fc18                                                  
  fpaste.noarch 0:0.3.7.1-8.fc18                                                
  gcr.x86_64 0:3.6.2-4.fc18                                                     
  gdb.x86_64 0:7.5.1-38.fc18                                                    
  glibc.x86_64 0:2.16-31.fc18                                                   
  glibc-common.x86_64 0:2.16-31.fc18                                            
  glusterfs.x86_64 0:3.3.1-15.fc18                                              
  glusterfs-fuse.x86_64 0:3.3.1-15.fc18                                         
  gnome-abrt.x86_64 0:0.2.12-2.fc18                                             
  gnome-bluetooth.x86_64 1:3.6.1-3.fc18                                         
  gnome-bluetooth-libs.x86_64 1:3.6.1-3.fc18                                    
  gnutls.x86_64 0:2.12.23-2.fc18                                                
  gnutls-utils.x86_64 0:2.12.23-2.fc18                                          
  google-chrome-stable.x86_64 0:27.0.1453.110-202711                            
  gstreamer1.x86_64 0:1.0.7-1.fc18                                              
  gstreamer1-plugins-bad-free.x86_64 0:1.0.7-1.fc18                             
  gstreamer1-plugins-base.x86_64 0:1.0.7-1.fc18                                 
  gstreamer1-plugins-good.x86_64 0:1.0.7-1.fc18                                 
  gtk2.x86_64 0:2.24.18-1.fc18                                                  
  gtk2-immodule-xim.x86_64 0:2.24.18-1.fc18                                     
  gvfs.x86_64 0:1.14.2-4.fc18                                                   
  gvfs-afc.x86_64 0:1.14.2-4.fc18                                               
  gvfs-fuse.x86_64 0:1.14.2-4.fc18                                              
  gvfs-gphoto2.x86_64 0:1.14.2-4.fc18                                           
  gvfs-obexftp.x86_64 0:1.14.2-4.fc18                                           
  gvfs-smb.x86_64 0:1.14.2-4.fc18                                               
  hardlink.x86_64 1:1.0-16.fc18                                                 
  httpd.x86_64 0:2.4.4-3.fc18                                                   
  httpd-tools.x86_64 0:2.4.4-3.fc18                                             
  ibus-anthy.x86_64 0:1.5.3-1.fc18                                              
  ibus-libpinyin.x86_64 0:1.6.91-1.fc18                                         
  ibus-m17n.x86_64 0:1.3.4-8.fc18                                               
  ibus-typing-booster.noarch 0:0.0.32-1.fc18                                    
  icedtea-web.x86_64 0:1.4-0.fc18                                               
  im-chooser.x86_64 0:1.6.3-1.fc18                                              
  im-chooser-common.x86_64 0:1.6.3-1.fc18                                       
  iwl100-firmware.noarch 0:39.31.5.1-23.fc18                                    
  iwl1000-firmware.noarch 1:39.31.5.1-23.fc18                                   
  iwl105-firmware.noarch 0:18.168.6.1-23.fc18                                   
  iwl135-firmware.noarch 0:18.168.6.1-23.fc18                                   
  iwl2000-firmware.noarch 0:18.168.6.1-23.fc18                                  
  iwl2030-firmware.noarch 0:18.168.6.1-23.fc18                                  
  iwl3945-firmware.noarch 0:15.32.2.9-23.fc18                                   
  iwl4965-firmware.noarch 0:228.61.2.24-23.fc18                                 
  iwl5000-firmware.noarch 0:8.83.5.1_1-23.fc18                                  
  iwl5150-firmware.noarch 0:8.24.2.2-23.fc18                                    
  iwl6000-firmware.noarch 0:9.221.4.1-23.fc18                                   
  iwl6000g2a-firmware.noarch 0:17.168.5.3-23.fc18                               
  iwl6000g2b-firmware.noarch 0:17.168.5.2-23.fc18                               
  iwl6050-firmware.noarch 0:41.28.5.1-23.fc18                                   
  java-1.7.0-openjdk.x86_64 1:1.7.0.19-2.3.9.8.fc18                             
  kmod.x86_64 0:12-3.fc18                                                       
  kmod-libs.x86_64 0:12-3.fc18                                                  
  krb5-libs.x86_64 0:1.10.3-17.fc18                                             
  krb5-workstation.x86_64 0:1.10.3-17.fc18                                      
  lftp.x86_64 0:4.4.6-1.fc18                                                    
  libX11.x86_64 0:1.5.99.901-3.20130524gita3bdd2b09.fc18                        
  libX11-common.noarch 0:1.5.99.901-3.20130524gita3bdd2b09.fc18                 
  libXcursor.x86_64 0:1.1.13-5.20130524git8f677eaea.fc18                        
  libXext.x86_64 0:1.3.1-3.20130524gitdfe6e1f3b.fc18                            
  libXfixes.x86_64 0:5.0-6.20130524gitc480fe327.fc18                            
  libXi.x86_64 0:1.6.2.901-1.fc18                                               
  libXinerama.x86_64 0:1.1.2-5.20130524git99c644fc8.fc18                        
  libXrandr.x86_64 0:1.4.0-4.20130524gitc90f74497.fc18                          
  libXrender.x86_64 0:0.9.7-5.20130524git786f78fd8.fc18                         
  libXres.x86_64 0:1.0.6-5.20130524gitf46818496.fc18                            
  libXt.x86_64 0:1.1.3-4.20130524git1f4802b74.fc18                              
  libXtst.x86_64 0:1.2.1-6.20130524gite7e04b7be.fc18                            
  libXv.x86_64 0:1.0.7-5.20130524git50fc4cb18.fc18                              
  libXvMC.x86_64 0:1.0.7-6.20130524gite9415ddef.fc18                            
  libXxf86dga.x86_64 0:1.1.3-5.20130524gita8dc6be32.fc18                        
  libXxf86vm.x86_64 0:1.1.2-5.20130524git4c4123441.fc18                         
  libcacard.x86_64 2:1.2.2-11.fc18                                              
  libcap.x86_64 0:2.22-5.fc18                                                   
  libcurl.x86_64 0:7.27.0-10.fc18                                               
  libdmx.x86_64 0:1.1.2-4.20130524git5074d9d64.fc18                             
  libdrm.x86_64 0:2.4.45-1.fc18                                                 
  libertas-usb8388-firmware.noarch 2:20130418-0.1.gitb584174.fc18               
  libgphoto2.x86_64 0:2.5.2-1.fc18                                              
  libgsf.x86_64 0:1.14.24-4.fc18                                                
  libgudev1.x86_64 0:201-2.fc18.7                                               
  libipa_hbac.x86_64 0:1.9.4-8.fc18                                             
  libiscsi.x86_64 0:1.7.0-4.fc18                                                
  libnm-gtk.x86_64 0:0.9.8.1-4.git20130514.fc18                                 
  libogg.x86_64 2:1.3.0-5.fc18                                                  
  libpinyin.x86_64 0:0.9.91-1.fc18                                              
  libpinyin-data.x86_64 0:0.9.91-1.fc18                                         
  librdmacm.x86_64 0:1.0.17-1.fc18                                              
  libreport.x86_64 0:2.1.4-4.fc18                                               
  libreport-fedora.x86_64 0:2.1.4-4.fc18                                        
  libreport-filesystem.x86_64 0:2.1.4-4.fc18                                    
  libreport-gtk.x86_64 0:2.1.4-4.fc18                                           
  libreport-newt.x86_64 0:2.1.4-4.fc18                                          
  libreport-plugin-bugzilla.x86_64 0:2.1.4-4.fc18                               
  libreport-plugin-kerneloops.x86_64 0:2.1.4-4.fc18                             
  libreport-plugin-logger.x86_64 0:2.1.4-4.fc18                                 
  libreport-plugin-reportuploader.x86_64 0:2.1.4-4.fc18                         
  libreport-plugin-ureport.x86_64 0:2.1.4-4.fc18                                
  libreport-python.x86_64 0:2.1.4-4.fc18                                        
  libreport-web.x86_64 0:2.1.4-4.fc18                                           
  libsmbclient.x86_64 2:4.0.6-2.fc18                                            
  libsss_idmap.x86_64 0:1.9.4-8.fc18                                            
  libtevent.x86_64 0:0.9.18-1.fc18                                              
  libtiff.x86_64 0:4.0.3-6.fc18                                                 
  libvirt.x86_64 0:0.10.2.5-1.fc18                                              
  libvirt-client.x86_64 0:0.10.2.5-1.fc18                                       
  libvirt-daemon.x86_64 0:0.10.2.5-1.fc18                                       
  libvirt-daemon-config-network.x86_64 0:0.10.2.5-1.fc18                        
  libvirt-daemon-config-nwfilter.x86_64 0:0.10.2.5-1.fc18                       
  libvirt-daemon-driver-interface.x86_64 0:0.10.2.5-1.fc18                      
  libvirt-daemon-driver-libxl.x86_64 0:0.10.2.5-1.fc18                          
  libvirt-daemon-driver-lxc.x86_64 0:0.10.2.5-1.fc18                            
  libvirt-daemon-driver-network.x86_64 0:0.10.2.5-1.fc18                        
  libvirt-daemon-driver-nodedev.x86_64 0:0.10.2.5-1.fc18                        
  libvirt-daemon-driver-nwfilter.x86_64 0:0.10.2.5-1.fc18                       
  libvirt-daemon-driver-qemu.x86_64 0:0.10.2.5-1.fc18                           
  libvirt-daemon-driver-secret.x86_64 0:0.10.2.5-1.fc18                         
  libvirt-daemon-driver-storage.x86_64 0:0.10.2.5-1.fc18                        
  libvirt-daemon-driver-uml.x86_64 0:0.10.2.5-1.fc18                            
  libvirt-daemon-driver-xen.x86_64 0:0.10.2.5-1.fc18                            
  libvirt-daemon-kvm.x86_64 0:0.10.2.5-1.fc18                                   
  libvirt-gconfig.x86_64 0:0.1.6-1.fc18                                         
  libvirt-glib.x86_64 0:0.1.6-1.fc18                                            
  libvirt-gobject.x86_64 0:0.1.6-1.fc18                                         
  libvirt-python.x86_64 0:0.10.2.5-1.fc18                                       
  libwacom.x86_64 0:0.7.1-2.fc18                                                
  libwacom-data.noarch 0:0.7.1-2.fc18                                           
  libwbclient.x86_64 2:4.0.6-2.fc18                                             
  libxcb.x86_64 0:1.9-3.fc18                                                    
  libxml2.x86_64 0:2.9.1-1.fc18.1                                               
  libxml2-python.x86_64 0:2.9.1-1.fc18.1                                        
  linux-firmware.noarch 0:20130418-0.1.gitb584174.fc18                          
  llvm-libs.x86_64 0:3.3-0.4.rc2.fc18                                           
  lockdev.x86_64 0:1.0.4-0.6.20111007git.fc18                                   
  lohit-oriya-fonts.noarch 0:2.5.3-3.fc18                                       
  mesa-dri-drivers.x86_64 0:9.2-0.7.20130528.fc18                               
  mesa-libEGL.x86_64 0:9.2-0.7.20130528.fc18                                    
  mesa-libGL.x86_64 0:9.2-0.7.20130528.fc18                                     
  mesa-libgbm.x86_64 0:9.2-0.7.20130528.fc18                                    
  mesa-libglapi.x86_64 0:9.2-0.7.20130528.fc18                                  
  mesa-libxatracker.x86_64 0:9.2-0.7.20130528.fc18                              
  ncurses.x86_64 0:5.9-11.20130511.fc18                                         
  ncurses-base.noarch 0:5.9-11.20130511.fc18                                    
  ncurses-libs.x86_64 0:5.9-11.20130511.fc18                                    
  network-manager-applet.x86_64 0:0.9.8.1-4.git20130514.fc18                    
  nm-connection-editor.x86_64 0:0.9.8.1-4.git20130514.fc18                      
  nspr.x86_64 0:4.9.6-1.fc18                                                    
  nss.x86_64 0:3.14.3-2.fc18                                                    
  nss-sysinit.x86_64 0:3.14.3-2.fc18                                            
  nss-tools.x86_64 0:3.14.3-2.fc18                                              
  ntfs-3g.x86_64 2:2013.1.13-4.fc18                                             
  ntfsprogs.x86_64 2:2013.1.13-4.fc18                                           
  opencc.x86_64 0:0.4.3-1.fc18                                                  
  opencv.x86_64 0:2.4.5-1.fc18                                                  
  openldap.x86_64 0:2.4.35-4.fc18.1                                             
  openssh.x86_64 0:6.1p1-8.fc18                                                 
  openssh-clients.x86_64 0:6.1p1-8.fc18                                         
  openssh-server.x86_64 0:6.1p1-8.fc18                                          
  openvpn.x86_64 0:2.3.2-1.fc18                                                 
  os-prober.x86_64 0:1.58-1.fc18                                                
  p11-kit.x86_64 0:0.14-2.fc18                                                  
  parted.x86_64 0:3.1-12.fc18                                                   
  pcre.x86_64 0:8.31-5.fc18                                                     
  perl.x86_64 4:5.16.3-244.fc18                                                 
  perl-CPAN.noarch 0:1.9800-244.fc18                                            
  perl-Carp.noarch 0:1.26-243.fc18                                              
  perl-Data-Dumper.x86_64 0:2.135.06-244.fc18                                   
  perl-Digest.noarch 0:1.17-244.fc18                                            
  perl-ExtUtils-Install.noarch 0:1.58-244.fc18                                  
  perl-ExtUtils-MakeMaker.noarch 0:6.63.2-244.fc18                              
  perl-ExtUtils-Manifest.noarch 0:1.61-243.fc18                                 
  perl-ExtUtils-ParseXS.noarch 1:3.16-244.fc18                                  
  perl-Filter.x86_64 0:1.49-1.fc18                                              
  perl-HTTP-Tiny.noarch 0:0.017-244.fc18                                        
  perl-Module-Pluggable.noarch 1:4.00-244.fc18                                  
  perl-PathTools.x86_64 0:3.39.2-244.fc18                                       
  perl-Pod-Escapes.noarch 1:1.04-244.fc18                                       
  perl-Pod-Parser.noarch 0:1.51-244.fc18                                        
  perl-Pod-Perldoc.noarch 0:3.17.00-244.fc18                                    
  perl-Pod-Simple.noarch 1:3.20-244.fc18                                        
  perl-Scalar-List-Utils.x86_64 0:1.25-244.fc18                                 
  perl-Test-Harness.noarch 0:3.23-244.fc18                                      
  perl-Test-Simple.noarch 0:0.98-243.fc18                                       
  perl-devel.x86_64 4:5.16.3-244.fc18                                           
  perl-libs.x86_64 4:5.16.3-244.fc18                                            
  perl-macros.x86_64 4:5.16.3-244.fc18                                          
  perl-parent.noarch 1:0.225-243.fc18                                           
  perl-threads.x86_64 0:1.86-243.fc18                                           
  perl-threads-shared.x86_64 0:1.40-244.fc18                                    
  php.x86_64 0:5.4.15-1.fc18                                                    
  php-cli.x86_64 0:5.4.15-1.fc18                                                
  php-common.x86_64 0:5.4.15-1.fc18                                             
  php-mysql.x86_64 0:5.4.15-1.fc18                                              
  php-pdo.x86_64 0:5.4.15-1.fc18                                                
  polkit.x86_64 0:0.107-5.fc18                                                  
  procps-ng.x86_64 0:3.3.3-4.20120807git.fc18                                   
  python-pycurl.x86_64 0:7.19.0-13.1.fc18                                       
  qemu-common.x86_64 2:1.2.2-11.fc18                                            
  qemu-img.x86_64 2:1.2.2-11.fc18                                               
  qemu-kvm.x86_64 2:1.2.2-11.fc18                                               
  qemu-system-x86.x86_64 2:1.2.2-11.fc18                                        
  qt.x86_64 1:4.8.4-17.fc18                                                     
  qt-settings.noarch 0:4.9-21.fc18                                              
  qt-x11.x86_64 1:4.8.4-17.fc18                                                 
  samba-client.x86_64 2:4.0.6-2.fc18                                            
  samba-common.x86_64 2:4.0.6-2.fc18                                            
  samba-libs.x86_64 2:4.0.6-2.fc18                                              
  selinux-policy.noarch 0:3.11.1-97.fc18                                        
  selinux-policy-devel.noarch 0:3.11.1-97.fc18                                  
  selinux-policy-doc.noarch 0:3.11.1-97.fc18                                    
  selinux-policy-targeted.noarch 0:3.11.1-97.fc18                               
  sendmail.x86_64 0:8.14.7-1.fc18                                               
  setroubleshoot.x86_64 0:3.2.3-3.fc18                                          
  setroubleshoot-server.x86_64 0:3.2.3-3.fc18                                   
  smartmontools.x86_64 1:6.1-1.fc18                                             
  socat.x86_64 0:1.7.2.2-1.fc18                                                 
  spice-vdagent.x86_64 0:0.14.0-1.fc18                                          
  sssd.x86_64 0:1.9.4-8.fc18                                                    
  sssd-client.x86_64 0:1.9.4-8.fc18                                             
  system-config-printer.x86_64 0:1.3.13-1.fc18                                  
  system-config-printer-udev.x86_64 0:1.3.13-1.fc18                             
  systemd.x86_64 0:201-2.fc18.7                                                 
  systemd-libs.x86_64 0:201-2.fc18.7                                            
  systemd-python.x86_64 0:201-2.fc18.7                                          
  systemd-sysv.x86_64 0:201-2.fc18.7                                            
  systemtap-sdt-devel.x86_64 0:2.2.1-1.fc18                                     
  telepathy-gabble.x86_64 0:0.16.6-1.fc18                                       
  telepathy-glib.x86_64 0:0.20.2-1.fc18                                         
  telepathy-haze.x86_64 0:0.6.0-3.fc18                                          
  telepathy-idle.x86_64 0:0.1.16-1.fc18                                         
  tzdata.noarch 0:2013c-1.fc18                                                  
  tzdata-java.noarch 0:2013c-1.fc18                                             
  vim-minimal.x86_64 2:7.3.944-1.fc18                                           
  vinagre.x86_64 0:3.6.2-2.fc18                                                 
  wpa_supplicant.x86_64 1:1.1-1.fc18                                            
  xen-libs.x86_64 0:4.2.2-6.fc18                                                
  xen-licenses.x86_64 0:4.2.2-6.fc18                                            
  xkeyboard-config.noarch 0:2.6-8.fc18                                          
  xorg-x11-drv-ati.x86_64 0:7.1.0-5.20130408git6e74aacc5.fc18                   
  xorg-x11-drv-intel.x86_64 0:2.21.8-1.fc18                                     
  xorg-x11-drv-nouveau.x86_64 1:1.0.7-1.fc18                                    
  xorg-x11-drv-openchrome.x86_64 0:0.3.3-1.fc18                                 
  xorg-x11-drv-synaptics.x86_64 0:1.6.3-3.fc18                                  
  xorg-x11-server-Xorg.x86_64 0:1.13.3-3.fc18                                   
  xorg-x11-server-common.x86_64 0:1.13.3-3.fc18                                 
  xulrunner.x86_64 0:21.0-4.fc18                                                

Replaced:
  mesa-dri-filesystem.x86_64 0:9.1-3.fc18                                       
  system-config-printer-libs.x86_64 0:1.3.12-8.fc18                             



/ Einde YUM UPDATE

#  nmap -sP 192.168.123.1-254
/ welke computers in mijn netwerk	?

/ FEDORA OPENSTACK 

/ we lezen	,
https://fedoraproject.org/wiki/Getting_started_with_OpenStack_on_Fedora_18

[eric@localhost Getting_started_with_OpenStack_on_Fedora_18]$ pwd
/home/eric/Devel/OpenStack/wiki/Getting_started_with_OpenStack_on_Fedora_18


# yum install openstack-utils openstack-keystone openstack-nova openstack-cinder openstack-glance openstack-swift openstack-swift-proxy openstack-swift-account openstack-swift-container openstack-swift-object openstack-quantum openstack-quantum-linuxbridge openstack-quantum-openvswitch openstack-dashboard openstack-tempo

Installed:
  openstack-cinder.noarch 0:2012.2.4-1.fc18                                     
  openstack-dashboard.noarch 0:2012.2.3-1.fc18                                  
  openstack-glance.noarch 0:2012.2.4-2.fc18                                     
  openstack-keystone.noarch 0:2012.2.4-3.fc18                                   
  openstack-nova.noarch 0:2012.2.3-2.fc18                                       
  openstack-quantum.noarch 0:2012.2.3-2.fc18                                    
  openstack-quantum-linuxbridge.noarch 0:2012.2.3-2.fc18                        
  openstack-quantum-openvswitch.noarch 0:2012.2.3-2.fc18                        
  openstack-swift.noarch 0:1.7.4-1.fc18                                         
  openstack-swift-account.noarch 0:1.7.4-1.fc18                                 
  openstack-swift-container.noarch 0:1.7.4-1.fc18                               
  openstack-swift-object.noarch 0:1.7.4-1.fc18                                  
  openstack-swift-proxy.noarch 0:1.7.4-1.fc18                                   
  openstack-tempo.noarch 0:0-0.2.20110909git940d9dba.fc18                       
  openstack-utils.noarch 0:2013.1-8.fc18                                        

Dependency Installed:
  MySQL-python.x86_64 0:1.2.3-6.fc18                                            
  PyPAM.x86_64 0:0.5.0-16.fc18                                                  
  SLOF.noarch 0:0.1.git20120731-1.fc18                                          
  dnsmasq-utils.x86_64 0:2.65-5.fc18                                            
  febootstrap-supermin-helper.x86_64 0:3.21-2.fc18                              
  gfs2-utils.x86_64 0:3.1.5-1.fc18                                              
  hexedit.x86_64 0:1.2.12-14.fc18                                               
  hfsplus-tools.x86_64 0:540.1.linux3-2.fc18                                    
  hivex.x86_64 0:1.3.7-2.fc18                                                   
  icoutils.x86_64 0:0.30.0-1.fc18                                               
  jfsutils.x86_64 0:1.1.13-10.fc18                                              
  kernel-modules-extra.x86_64 0:3.9.5-201.fc18                                  
  libfdt.x86_64 0:1.3.0-5.fc18                                                  
  libguestfs.x86_64 1:1.20.6-2.fc18                                             
  libguestfs-tools-c.x86_64 1:1.20.6-2.fc18                                     
  libldm.x86_64 0:0.2.3-1.fc18                                                  
  libvirt-daemon-qemu.x86_64 0:0.10.2.5-1.fc18                                  
  lsscsi.x86_64 0:0.26-2.fc18                                                   
  mod_wsgi.x86_64 0:3.4-6.fc18                                                  
  netpbm.x86_64 0:10.61.01-2.fc18                                               
  netpbm-progs.x86_64 0:10.61.01-2.fc18                                         
  nilfs-utils.x86_64 0:2.1.4-2.fc18                                             
  openbios.noarch 0:1.0.svn1063-1.fc18                                          
  openstack-nova-api.noarch 0:2012.2.3-2.fc18                                   
  openstack-nova-cert.noarch 0:2012.2.3-2.fc18                                  
  openstack-nova-common.noarch 0:2012.2.3-2.fc18                                
  openstack-nova-compute.noarch 0:2012.2.3-2.fc18                               
  openstack-nova-console.noarch 0:2012.2.3-2.fc18                               
  openstack-nova-network.noarch 0:2012.2.3-2.fc18                               
  openstack-nova-objectstore.noarch 0:2012.2.3-2.fc18                           
  openstack-nova-scheduler.noarch 0:2012.2.3-2.fc18                             
  openstack-nova-volume.noarch 0:2012.2.3-2.fc18                                
  openstack-swift-plugin-swift3.noarch 0:1.0.0-0.20120613git.fc18               
  openvswitch.x86_64 0:1.9.0-1.fc18                                             
  perl-Config-General.noarch 0:2.51-1.fc18                                      
  perl-Digest-MD5.x86_64 0:2.51-244.fc18                                        
  perl-Encode-Locale.noarch 0:1.03-3.fc18                                       
  perl-File-Listing.noarch 0:6.04-3.fc18                                        
  perl-HTML-Parser.x86_64 0:3.69-8.fc18                                         
  perl-HTML-Tagset.noarch 0:3.20-13.fc18                                        
  perl-HTTP-Cookies.noarch 0:6.01-3.fc18                                        
  perl-HTTP-Daemon.noarch 0:6.01-3.fc18                                         
  perl-HTTP-Date.noarch 0:6.02-3.fc18                                           
  perl-HTTP-Message.noarch 0:6.03-5.fc18                                        
  perl-HTTP-Negotiate.noarch 0:6.01-3.fc18                                      
  perl-LWP-MediaTypes.noarch 0:6.01-6.fc18                                      
  perl-TimeDate.noarch 1:1.20-8.fc18                                            
  perl-URI.noarch 0:1.60-4.fc18                                                 
  perl-WWW-RobotRules.noarch 0:6.02-3.fc18                                      
  perl-libwww-perl.noarch 0:6.05-1.fc18                                         
  pyparsing.noarch 0:1.5.6-8.fc18                                               
  pysendfile.x86_64 0:2.0.0-4.fc18                                              
  python-amqplib.noarch 0:1.0.2-6.fc18                                          
  python-anyjson.noarch 0:0.3.3-2.fc18                                          
  python-cheetah.x86_64 0:2.4.4-3.fc18                                          
  python-cinder.noarch 0:2012.2.4-1.fc18                                        
  python-cinderclient.noarch 0:1.0.1-1.fc18                                     
  python-cliff.noarch 0:1.3-1.fc18                                              
  python-cmd2.noarch 0:0.6.4-4.fc18                                             
  python-configobj.noarch 0:4.7.2-5.fc18                                        
  python-crypto.x86_64 0:2.6-4.fc18                                             
  python-dateutil.noarch 0:1.5-5.fc18                                           
  python-django.noarch 0:1.4.5-2.fc18                                           
  python-django-appconf.noarch 0:0.5-1.fc18                                     
  python-django-compressor.noarch 0:1.2-2.fc18                                  
  python-django-horizon.noarch 0:2012.2.3-1.fc18                                
  python-django-openstack-auth.noarch 0:1.0.7-1.fc18                            
  python-eventlet.noarch 0:0.9.17-2.fc18                                        
  python-glance.noarch 0:2012.2.4-2.fc18                                        
  python-glanceclient.noarch 1:0.8.0-1.fc18                                     
  python-greenlet.x86_64 0:0.3.1-12.fc18                                        
  python-httplib2.noarch 0:0.7.7-1.fc18                                         
  python-iso8601.noarch 0:0.1.4-5.fc18                                          
  python-jsonschema.noarch 0:1.3.0-1.fc18                                       
  python-keystone.noarch 0:2012.2.4-3.fc18                                      
  python-keystoneclient.noarch 1:0.2.0-1.fc18                                   
  python-kombu.noarch 0:2.4.7-1.fc18                                            
  python-ldap.x86_64 0:2.4.6-3.fc18                                             
  python-lxml.x86_64 0:3.2.1-1.fc18                                             
  python-markdown.noarch 0:2.2.1-1.fc18                                         
  python-memcached.noarch 0:1.47-4.fc18                                         
  python-migrate.noarch 0:0.7.2-4.fc18                                          
  python-netaddr.noarch 0:0.7.5-5.fc18                                          
  python-netifaces.x86_64 0:0.5-3.fc18                                          
  python-nova.noarch 0:2012.2.3-2.fc18                                          
  python-novaclient.noarch 1:2.10.0-2.fc18                                      
  python-paramiko.noarch 0:1.10.1-1.fc18                                        
  python-passlib.noarch 0:1.5.3-3.fc18                                          
  python-paste-deploy.noarch 0:1.5.0-8.fc18                                     
  python-prettytable.noarch 0:0.6.1-1.fc18                                      
  python-pygments.noarch 0:1.4-7.fc18                                           
  python-pyudev.noarch 0:0.15-3.fc18                                            
  python-qpid.noarch 0:0.20-1.fc18                                              
  python-quantum.noarch 0:2012.2.3-2.fc18                                       
  python-quantumclient.noarch 2:2.1-1.fc18                                      
  python-routes.noarch 0:1.12.3-4.fc18                                          
  python-simplejson.x86_64 0:2.6.2-1.fc18                                       
  python-sqlalchemy.x86_64 0:0.7.10-1.fc18                                      
  python-swiftclient.noarch 0:1.4.0-1.fc18                                      
  python-versiontools.noarch 0:1.9.1-3.fc18                                     
  python-warlock.noarch 0:0.4.0-2.fc18                                          
  python-webob.noarch 0:1.1.1-4.fc18                                            
  pytz.noarch 0:2012d-2.fc18                                                    
  qemu.x86_64 2:1.2.2-11.fc18                                                   
  qemu-system-alpha.x86_64 2:1.2.2-11.fc18                                      
  qemu-system-arm.x86_64 2:1.2.2-11.fc18                                        
  qemu-system-cris.x86_64 2:1.2.2-11.fc18                                       
  qemu-system-lm32.x86_64 2:1.2.2-11.fc18                                       
  qemu-system-m68k.x86_64 2:1.2.2-11.fc18                                       
  qemu-system-microblaze.x86_64 2:1.2.2-11.fc18                                 
  qemu-system-mips.x86_64 2:1.2.2-11.fc18                                       
  qemu-system-or32.x86_64 2:1.2.2-11.fc18                                       
  qemu-system-ppc.x86_64 2:1.2.2-11.fc18                                        
  qemu-system-s390x.x86_64 2:1.2.2-11.fc18                                      
  qemu-system-sh4.x86_64 2:1.2.2-11.fc18                                        
  qemu-system-sparc.x86_64 2:1.2.2-11.fc18                                      
  qemu-system-unicore32.x86_64 2:1.2.2-11.fc18                                  
  qemu-system-xtensa.x86_64 2:1.2.2-11.fc18                                     
  qemu-user.x86_64 2:1.2.2-11.fc18                                              
  reiserfs-utils.x86_64 2:3.6.21-7.fc18                                         
  scrub.x86_64 0:2.5.2-2.fc18                                                   
  scsi-target-utils.x86_64 0:1.0.32-5.fc18                                      
  sg3_utils.x86_64 0:1.34-1.fc18                                                
  strace.x86_64 0:4.7-2.fc18                                                    
  zerofree.x86_64 0:1.0.1-11.fc18                                               
  zfs-fuse.x86_64 0:0.7.0-11.fc18                                               

# yum install mysql-server qpid-cpp-server memcached nbd wget

Installed:
  memcached.x86_64 0:1.4.15-2.fc18            nbd.x86_64 0:2.9.20-4.fc18       
  qpid-cpp-server.x86_64 0:0.20-3.fc18       

Dependency Installed:
  boost.x86_64 0:1.50.0-5.fc18                                                  
  boost-date-time.x86_64 0:1.50.0-5.fc18                                        
  boost-filesystem.x86_64 0:1.50.0-5.fc18                                       
  boost-graph.x86_64 0:1.50.0-5.fc18                                            
  boost-iostreams.x86_64 0:1.50.0-5.fc18                                        
  boost-locale.x86_64 0:1.50.0-5.fc18                                           
  boost-math.x86_64 0:1.50.0-5.fc18                                             
  boost-program-options.x86_64 0:1.50.0-5.fc18                                  
  boost-python.x86_64 0:1.50.0-5.fc18                                           
  boost-random.x86_64 0:1.50.0-5.fc18                                           
  boost-regex.x86_64 0:1.50.0-5.fc18                                            
  boost-serialization.x86_64 0:1.50.0-5.fc18                                    
  boost-signals.x86_64 0:1.50.0-5.fc18                                          
  boost-test.x86_64 0:1.50.0-5.fc18                                             
  boost-timer.x86_64 0:1.50.0-5.fc18                                            
  boost-wave.x86_64 0:1.50.0-5.fc18                                             
  qpid-cpp-client.x86_64 0:0.20-3.fc18                                          

# yum install python-nova-adminclient

Installed:
  python-nova-adminclient.noarch 0:0.1.8-3.fc18                                 


# yum install rubygem-openstack rubygem-openstack-compute rubygem-openstack-quantum-client

Installed:
  rubygem-openstack.noarch 0:1.0.9-2.fc18                                       
  rubygem-openstack-compute.noarch 0:1.1.5-3.fc18                               
  rubygem-openstack-quantum-client.noarch 0:0.1.5-3.fc18                        

Dependency Installed:
  libyaml.x86_64 0:0.1.4-3.fc18                                                 
  ruby.x86_64 0:1.9.3.429-30.fc18                                               
  ruby-irb.noarch 0:1.9.3.429-30.fc18                                           
  ruby-libs.x86_64 0:1.9.3.429-30.fc18                                          
  rubygem-bigdecimal.x86_64 0:1.1.0-30.fc18                                     
  rubygem-httparty.noarch 0:0.8.1-2.fc18                                        
  rubygem-io-console.x86_64 0:0.3-30.fc18                                       
  rubygem-json.x86_64 0:1.6.8-1.fc18                                            
  rubygem-multi_json.noarch 0:1.3.6-2.fc18                                      
  rubygem-multi_xml.noarch 0:0.4.1-5.fc18                                       
  rubygem-rdoc.noarch 0:3.12-6.fc18                                             
  rubygems.noarch 0:1.8.25-6.fc18  

# yum install appliance-tools appliance-tools-minimizer febootstrap rubygem-boxgrinder-build

Installed:
  appliance-tools.noarch 0:006.2-1.fc18                                         
  appliance-tools-minimizer.noarch 0:006.2-1.fc18                               
  febootstrap.x86_64 0:3.21-2.fc18                                              
  rubygem-boxgrinder-build.noarch 0:0.10.4-1.fc18                               

Dependency Installed:
  dumpet.x86_64 0:2.1-5.fc18                                                    
  euca2ools.noarch 0:2.1.3-1.fc18                                               
  fedup-dracut.x86_64 0:0.7.2-1.fc18                                            
  fedup-dracut-plymouth.noarch 0:0.7.2-1.fc18                                   
  isomd5sum.x86_64 1:1.0.9-2.fc18                                               
  livecd-tools.x86_64 1:18.15-1.fc18                                            
  lorax.x86_64 0:18.31-1.fc18                                                   
  m2crypto.x86_64 0:0.21.1-9.fc18                                               
  pykickstart.noarch 0:1.99.22-1.fc18                                           
  pyparted.x86_64 0:3.8-5.fc18                                                  
  python-imgcreate.x86_64 1:18.15-1.fc18                                        
  ruby-libguestfs.x86_64 1:1.20.6-2.fc18                                        
  ruby-libvirt.x86_64 0:0.4.0-4.fc18                                            
  rubygem-aws-sdk.noarch 0:1.8.0-1.fc18                                         
  rubygem-boxgrinder-core.noarch 0:0.3.14-1.fc18                                
  rubygem-builder.noarch 0:3.0.0-1.fc18                                         
  rubygem-kwalify.noarch 0:0.7.2-6.fc18                                         
  rubygem-mime-types.noarch 0:1.16-8.fc18                                       
  rubygem-net-sftp.noarch 0:2.0.5-6.fc18                                        
  rubygem-net-ssh.noarch 0:2.2.1-4.fc18                                         
  rubygem-netrc.noarch 0:0.7.1-2.fc18                                           
  rubygem-nokogiri.x86_64 0:1.5.9-1.fc18                                        
  rubygem-open4.noarch 0:1.3.0-3.fc18                                           
  rubygem-progressbar.noarch 0:0.11.0-1.fc18                                    
  rubygem-rest-client.noarch 0:1.6.7-1.fc18                                     
  rubygem-term-ansicolor.noarch 0:1.0.7-4.fc18                                  
  rubygem-uuidtools.noarch 0:2.1.2-4.fc18                                       
  squashfs-tools.x86_64 0:4.2-5.fc18                                            
  syslinux.x86_64 0:4.05-4.fc18                                                 
  syslinux-extlinux.x86_64 0:4.05-4.fc18                                        

# yum install openstack-keystone-doc openstack-nova-doc \
  openstack-cinder-doc openstack-glance-doc openstack-swift-doc \
  python-keystoneclient-doc python-novaclient-doc \
  python-swiftclient-doc python-django-horizon-doc \
  rubygem-openstack-doc rubygem-openstack-quantum-client-doc

Installed:
  openstack-cinder-doc.noarch 0:2012.2.4-1.fc18                                 
  openstack-glance-doc.noarch 0:2012.2.4-2.fc18                                 
  openstack-keystone-doc.noarch 0:2012.2.4-3.fc18                               
  openstack-nova-doc.noarch 0:2012.2.3-2.fc18                                   
  openstack-swift-doc.noarch 0:1.7.4-1.fc18                                     
  python-django-horizon-doc.noarch 0:2012.2.3-1.fc18                            
  python-keystoneclient-doc.noarch 1:0.2.0-1.fc18                               
  python-novaclient-doc.noarch 1:2.10.0-2.fc18                                  
  python-swiftclient-doc.noarch 0:1.4.0-1.fc18                                  
  rubygem-openstack-doc.noarch 0:1.0.9-2.fc18                                   
  rubygem-openstack-quantum-client-doc.noarch 0:0.1.5-3.fc18                    

# systemctl start mysqld.service && sudo systemctl enable mysqld.service
# systemctl start qpidd.service && sudo systemctl enable qpidd.service
# systemctl start libvirtd.service && sudo systemctl enable libvirtd.service
# systemctl status mysqld.service 
# systemctl status qpidd.service 
# systemctl status libvirtd.service 

# openstack-db --service keystone --init
Please enter the password for the 'root' MySQL user: 
Verified connectivity to MySQL.
Creating 'keystone' database.
Initializing the keystone database, please wait...
Complete!

[eric@localhost ~]$ cat > ./.keystonerc << _EOF
export ADMIN_TOKEN=$(openssl rand -hex 10)
export OS_USERNAME=admin
export OS_PASSWORD=vlWalnoot27
export OS_TENANT_NAME=admin
export OS_AUTH_URL=http://127.0.0.1:5000/v2.0/
export SERVICE_ENDPOINT=http://127.0.0.1:35357/v2.0/
export SERVICE_TOKEN=\$ADMIN_TOKEN
_EOF

[eric@localhost ~]$ cat .keystonerc 
export ADMIN_TOKEN=fa4e3b70e26af36918e3
export OS_USERNAME=admin
export OS_PASSWORD=vlWalnoot27
export OS_TENANT_NAME=admin
export OS_AUTH_URL=http://127.0.0.1:5000/v2.0/
export SERVICE_ENDPOINT=http://127.0.0.1:35357/v2.0/
export SERVICE_TOKEN=$ADMIN_TOKEN

# . /home/eric/.keystonerc 

# openstack-config --set /etc/keystone/keystone.conf DEFAULT admin_token $ADMIN_TOKEN

# vi /etc/keystone/keystone.conf
[DEFAULT]
log_file = /var/log/keystone/keystone.log
onready = keystone.common.systemd
admin_token = fa4e3b70e26af36918e3
# A "shared secret" between keystone and other openstack services
# admin_token = ADMIN
...

# systemctl start openstack-keystone.service && sudo systemctl enable openstack-keystone.service
ln -s '/usr/lib/systemd/system/openstack-keystone.service' '/etc/systemd/system/multi-user.target.wants/openstack-keystone.service'

/ Inderdaad	,
lrwxrwxrwx. 1 root root 50 Jun 23 21:52 /etc/systemd/system/multi-user.target.wants/openstack-keystone.service -> /usr/lib/systemd/system/openstack-keystone.service

# ADMIN_PASSWORD=$OS_PASSWORD SERVICE_PASSWORD=servicepass openstack-keystone-sample-data
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
+-------------+------------------------------------------------------+
|   Property  |                        Value                         |
+-------------+------------------------------------------------------+
|   adminurl  | http://localhost:$(compute_port)s/v1.1/$(tenant_id)s |
|      id     |           0d9458db5a764a05a3abd3143e3b2fcd           |
| internalurl | http://localhost:$(compute_port)s/v1.1/$(tenant_id)s |
|  publicurl  | http://localhost:$(compute_port)s/v1.1/$(tenant_id)s |
|    region   |                      RegionOne                       |
|  service_id |           483a047519b74cfb94b118baf9a42423           |
+-------------+------------------------------------------------------+
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
+-------------+--------------------------------------+
|   Property  |                Value                 |
+-------------+--------------------------------------+
|   adminurl  | http://localhost:8773/services/Admin |
|      id     |   55b3e3ffbf7349009cb147e04086df2e   |
| internalurl | http://localhost:8773/services/Cloud |
|  publicurl  | http://localhost:8773/services/Cloud |
|    region   |              RegionOne               |
|  service_id |   911521dda4ae4980944c5845ad632b0e   |
+-------------+--------------------------------------+
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
+-------------+----------------------------------+
|   Property  |              Value               |
+-------------+----------------------------------+
|   adminurl  |     http://localhost:9292/v1     |
|      id     | d42f779065284f0dbe97a36955156379 |
| internalurl |     http://localhost:9292/v1     |
|  publicurl  |     http://localhost:9292/v1     |
|    region   |            RegionOne             |
|  service_id | 177c5598a4ec4148a241a53e1bf05d79 |
+-------------+----------------------------------+
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
+-------------+---------------------------------------+
|   Property  |                 Value                 |
+-------------+---------------------------------------+
|   adminurl  |  http://localhost:$(admin_port)s/v2.0 |
|      id     |    8939bf1b10be468ea62d38cbc37b3795   |
| internalurl | http://localhost:$(public_port)s/v2.0 |
|  publicurl  | http://localhost:$(public_port)s/v2.0 |
|    region   |               RegionOne               |
|  service_id |    082f6cb517d34331bb070ce7c56f3734   |
+-------------+---------------------------------------+
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
+-------------+----------------------------------------+
|   Property  |                 Value                  |
+-------------+----------------------------------------+
|   adminurl  | http://localhost:8776/v1/$(tenant_id)s |
|      id     |    7bf0de888d9c4fa99d2aed5d20a1b960    |
| internalurl | http://localhost:8776/v1/$(tenant_id)s |
|  publicurl  | http://localhost:8776/v1/$(tenant_id)s |
|    region   |               RegionOne                |
|  service_id |    2e5eb5cc85684dde991d78ee44b1eeff    |
+-------------+----------------------------------------+
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
+-------------+----------------------------------+
|   Property  |              Value               |
+-------------+----------------------------------+
| description |       OpenStack Dashboard        |
|      id     | 6cfcd46180cf4af4bd10264b85b9ad04 |
|     name    |             horizon              |
|     type    |            dashboard             |
+-------------+----------------------------------+

# locate openstack-keystone-sample-data
/usr/bin/openstack-keystone-sample-data
# vi /usr/bin/openstack-keystone-sample-data 
#!/bin/bash
ENABLE_ENDPOINTS=1 /usr/share/openstack-keystone/sample_data.sh "$@"

# keystone user-list
WARNING: Bypassing authentication using a token & endpoint (authentication credentials are being ignored).
+----------------------------------+--------+---------+--------------------+
|                id                |  name  | enabled |       email        |
+----------------------------------+--------+---------+--------------------+
| 02cee404a402465386e1aaa2714ca1cf | admin  |   True  | admin@example.com  |
| 15e947d353ab432e92fa289d6037594e |  nova  |   True  |  nova@example.com  |
| 9008f4ebac284ae48a691e6e2b910e17 |  demo  |   True  | admin@example.com  |
| b41b2523219a472493ba7b11416dbc00 | glance |   True  | glance@example.com |

# openstack-db --service glance --init
Please enter the password for the 'root' MySQL user: 
Verified connectivity to MySQL.
Creating 'glance' database.
Initializing the glance database, please wait...
Complete!

openstack-config --set /etc/glance/glance-api.conf paste_deploy flavor keystone
openstack-config --set /etc/glance/glance-registry.conf paste_deploy flavor keystone
openstack-config --set /etc/glance/glance-api-paste.ini filter:authtoken admin_tenant_name service
openstack-config --set /etc/glance/glance-api-paste.ini filter:authtoken admin_user glance
openstack-config --set /etc/glance/glance-api-paste.ini filter:authtoken admin_password servicepass
openstack-config --set /etc/glance/glance-registry-paste.ini filter:authtoken admin_tenant_name service
openstack-config --set /etc/glance/glance-registry-paste.ini filter:authtoken admin_user glance
openstack-config --set /etc/glance/glance-registry-paste.ini filter:authtoken admin_password servicepass

# for svc in api registry; do sudo systemctl start openstack-glance-$svc.service; done
# for svc in api registry; do sudo systemctl enable openstack-glance-$svc.service; done
ln -s '/usr/lib/systemd/system/openstack-glance-api.service' '/etc/systemd/system/multi-user.target.wants/openstack-glance-api.service'
ln -s '/usr/lib/systemd/system/openstack-glance-registry.service' '/etc/systemd/system/multi-user.target.wants/openstack-glance-registry.service'

ln -s '/usr/lib/systemd/system/openstack-glance-registry.service' '/etc/systemd/system/multi-user.target.wants/openstack-glance-registry.service'
# glance index
ID                                   Name                           Disk Format          Container Format     Size          
------------------------------------ ------------------------------ -------------------- -------------------- --------------
/ TODO

#  openstack-db --service cinder --init
Please enter the password for the 'root' MySQL user: 
Verified connectivity to MySQL.
Creating 'cinder' database.
Initializing the cinder database, please wait...
Complete!

# mkdir -p /var/lib/cinder
# truncate --size=20G /var/lib/cinder/cinder-volumes.img
# ls -hl /var/lib/cinder/cinder-volumes.img 
-rw-r--r--. 1 root root 20G Jun 24 20:44 /var/lib/cinder/cinder-volumes.img

# losetup --show -f /var/lib/cinder/cinder-volumes.img
/dev/loop0
# losetup -a
/dev/loop0: [64769]:2235335 (/var/lib/cinder/cinder-volumes.img)
# CINDER_VOL_DEVICE=$(losetup -a | grep "/var/lib/cinder/cinder-volumes.img" | cut -d':' -f1)
/dev/loop0
# vgcreate cinder-volumes /dev/loop0 
  Volume group "cinder-volumes" successfully created
# vgremove cinder-volumes 
  Volume group "cinder-volumes" successfully removed


# mkdir /usr/libexec/cinder
# curl https://raw.github.com/openstack-fedora/openstack-configuration/master/systemd/cinder-demo-disk-image.service -o /usr/lib/systemd/system/cinder-demo-disk-image.service
# curl https://raw.github.com/openstack-fedora/openstack-configuration/master/bin/voladm -o /usr/libexec/cinder/voladm 
# chmod -R a+rx /usr/libexec/cinder 

# vi  /usr/libexec/cinder/voladm
#!/bin/sh
...
# [ERICJ]
#VOLUME_FILE=/data/virtualisation/volumes/cinder-volumes.img
VOLUME_FILE=/var/lib/cinder/cinder-volumes.img
...

# systemctl start cinder-demo-disk-image.service 
# systemctl enable cinder-demo-disk-image.service 

# systemctl status cinder-demo-disk-image.service
cinder-demo-disk-image.service - OpenStack Cinder demo disk image
   Loaded: loaded (/usr/lib/systemd/system/cinder-demo-disk-image.service; enabled)
   Active: active (exited) since Mon 2013-06-24 22:49:57 CEST; 3min 9s ago
  Process: 8649 ExecStart=/usr/libexec/cinder/voladm attach (code=exited, status=0/SUCCESS)

Jun 24 22:49:57 localhost.localdomain systemd[1]: Starting OpenStack Cinder d...
Jun 24 22:49:57 localhost.localdomain voladm[8649]: Mounting the /var/lib/cin...
Jun 24 22:49:57 localhost.localdomain systemd[1]: Started OpenStack Cinder de...
/ TODO (exited)

# systemctl start openstack-cinder-volume.service
# systemctl enable openstack-cinder-volume.service
ln -s '/usr/lib/systemd/system/openstack-cinder-volume.service' '/etc/systemd/system/multi-user.target.wants/openstack-cinder-volume.service'
# systemctl status openstack-cinder-volume.service
openstack-cinder-volume.service - OpenStack Cinder Volume Server
   Loaded: loaded (/usr/lib/systemd/system/openstack-cinder-volume.service; enabled)
   Active: active (running) since Mon 2013-06-24 22:54:17 CEST; 23s ago
 Main PID: 8783 (cinder-volume)
   CGroup: name=systemd:/system/openstack-cinder-volume.service
           └─8783 /usr/bin/python /usr/bin/cinder-volume --config-file /etc/c...

Jun 24 22:54:17 localhost.localdomain systemd[1]: Starting OpenStack Cinder V...
Jun 24 22:54:17 localhost.localdomain systemd[1]: Started OpenStack Cinder Vo...
Jun 24 22:54:17 localhost.localdomain cinder-volume[8783]: 2013-06-24 22:54:1...
Jun 24 22:54:17 localhost.localdomain sudo[8788]: cinder : TTY=unknown ; PWD=...
Jun 24 22:54:18 localhost.localdomain cinder-volume[8783]: 2013-06-24 22:54:1...

# openstack-db --service nova --init
Please enter the password for the 'root' MySQL user: 
Verified connectivity to MySQL.
Creating 'nova' database.
Initializing the nova database, please wait...
Complete!

# nova-manage db sync

# openstack-config --set /etc/nova/api-paste.ini filter:authtoken admin_tenant_name service
# openstack-config --set /etc/nova/api-paste.ini filter:authtoken admin_user nova
# openstack-config --set /etc/nova/api-paste.ini filter:authtoken admin_password servicepass
# openstack-config --set /etc/nova/nova.conf DEFAULT auth_strategy keystone

# for svc in api objectstore compute network scheduler cert; do systemctl start openstack-nova-$svc.service; done
# for svc in api objectstore compute network scheduler cert; do systemctl enable openstack-nova-$svc.service; done
ln -s '/usr/lib/systemd/system/openstack-nova-api.service' '/etc/systemd/system/multi-user.target.wants/openstack-nova-api.service'
ln -s '/usr/lib/systemd/system/openstack-nova-objectstore.service' '/etc/systemd/system/multi-user.target.wants/openstack-nova-objectstore.service'
ln -s '/usr/lib/systemd/system/openstack-nova-compute.service' '/etc/systemd/system/multi-user.target.wants/openstack-nova-compute.service'
ln -s '/usr/lib/systemd/system/openstack-nova-network.service' '/etc/systemd/system/multi-user.target.wants/openstack-nova-network.service'
ln -s '/usr/lib/systemd/system/openstack-nova-scheduler.service' '/etc/systemd/system/multi-user.target.wants/openstack-nova-scheduler.service'
ln -s '/usr/lib/systemd/system/openstack-nova-cert.service' '/etc/systemd/system/multi-user.target.wants/openstack-nova-cert.service'



# nova flavor-list
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+-------------+
| ID | Name      | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | extra_specs |
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+-------------+
| 1  | m1.tiny   | 512       | 0    | 0         |      | 1     | 1.0         | True      | {}          |
| 2  | m1.small  | 2048      | 20   | 0         |      | 1     | 1.0         | True      | {}          |
| 3  | m1.medium | 4096      | 40   | 0         |      | 2     | 1.0         | True      | {}          |
| 4  | m1.large  | 8192      | 80   | 0         |      | 4     | 1.0         | True      | {}          |
| 5  | m1.xlarge | 16384     | 160  | 0         |      | 8     | 1.0         | True      | {}          |
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+-------------+

# nova-manage network create demonet 10.0.0.0/24 1 256 --bridge=demonetbr0

# wget http://berrange.fedorapeople.org/images/2012-11-15/f17-x86_64-openstack-sda.qcow2


/ Einde FEDORA OPENSTACK

/ OPENSTACK

/ 7	.

/ Ga naar 
http://docs.openstack.org

/ Daar zien we 	,
Basic Installation Guide for Fedora 18
http://docs.openstack.org/grizzly/basic-install/yum/content/


/ 7	.

http://www.openstack.org/
/click Community	,
http://www.openstack.org/community/
/ Beneden in de footer 'Getting started'	,
http://www.openstack.org/software/start/
/ rechts, devstack.org
http://devstack.org/

/ we hebben 	,
# visudo
## Allow root to run any commands anywhere
root    ALL=(ALL)       ALL
eric    ALL=(ALL)       ALL

/ nu kan eric	,
[eric@localhost OpenStack]$ cd devstack && ./stack.sh 2>&1 | tee LOG_stack.sh.txt

/ 7	.

/ we gaan het eerst doen in een VM	,

/ we lezen	,
https://bugs.launchpad.net/devstack/+bug/1083475

[eric@localhost devstack]$ sudo yum install python-pip
[eric@localhost devstack]$ sudo pip install netaddr

[eric@localhost OpenStack]$ cd devstack && ./stack.sh 2>&1 | tee LOG_stack.sh.txt

################################################################################
ENTER A PASSWORD TO USE FOR THE DATABASE.
################################################################################
This value will be written to your localrc file so you don't have to enter it 
again.  Use only alphanumeric characters.
If you leave this blank, a random default value will be used.
Enter a password now:
vlWalnoot27db
Using mysql database backend

################################################################################
ENTER A PASSWORD TO USE FOR RABBIT.
################################################################################
This value will be written to your localrc file so you don't have to enter it 
again.  Use only alphanumeric characters.
If you leave this blank, a random default value will be used.
Enter a password now:
vlWalnoot27rb

################################################################################
ENTER A SERVICE_TOKEN TO USE FOR THE SERVICE ADMIN TOKEN.
################################################################################
This value will be written to your localrc file so you don't have to enter it 
again.  Use only alphanumeric characters.
If you leave this blank, a random default value will be used.
Enter a password now:
vlWalnoot27sat

################################################################################
ENTER A SERVICE_PASSWORD TO USE FOR THE SERVICE AUTHENTICATION.
################################################################################
This value will be written to your localrc file so you don't have to enter it 
again.  Use only alphanumeric characters.
If you leave this blank, a random default value will be used.
Enter a password now:
vlWalnoot27sa

################################################################################
ENTER A PASSWORD TO USE FOR HORIZON AND KEYSTONE (20 CHARS OR LESS).
################################################################################
This value will be written to your localrc file so you don't have to enter it 
again.  Use only alphanumeric characters.
If you leave this blank, a random default value will be used.
Enter a password now:
vlWalnoot27hk

/ Lees LOG_stack.sh.txt

/ Dashboard	,
/ we geven in browser	,
localhost
login: 
admin
vlWalnoot27hk

/ 7	.

/ we kijken naar 2 uit 11 serie van video's	,
https://www.youtube.com/watch?v=dclcFiVvO7g&feature=c4-overview&playnext=1&list=TLEXaR2FUjRic

/management tools
Stratus
Rightscale
Cloudscale

/ 7	.

/ we zijn in de VM	,
http://localhost/auth/login/?next=/project/volumes/

/ we kijken naar video	, deel 1 uit serie	,
https://www.youtube.com/watch?v=p4eW78gHfCg

/ ga naar	,
localhost
/ login	
admin	
vlWalnoot27hk







/ Einde OPENSTACK

/ SASS

[eric@localhost ~]$ which gem
/usr/bin/gem
[eric@localhost ~]$ gem install sass
Fetching: sass-3.2.9.gem (100%)
Successfully installed sass-3.2.9
1 gem installed
Installing ri documentation for sass-3.2.9...
Installing RDoc documentation for sass-3.2.9...
[eric@localhost ~]$ which sass
~/bin/sass

/ Einde SASS

/ SENDMAIL

/ 7	. 

/ Op f18first-clone	,
[root@localhost ~]# yum install sendmail-cf
[root@localhost ~]# make all -C /etc/mail/
[root@localhost ~]# systemctl restart sendmail.service 


/ Einde SENDMAIL

/ SUSPEND TO RAM

/bugzilla redhat account
ericjvandervelden
vlWalnoot27

/ suspend to RAM problems
/ can't wake from suspend
/ fails to resume after hibernate


Aug 18 13:35:22 localhost dbus-daemon[601]: ** Message: entering main loop
/ line 95


/ we zien 	,
gnome-settings-daemon crashed
process /usr/libexec/gnome-settings-daemon was killed by signal 5 (SIGTRAP)
version gnome-settings-daemon-3.6.4-3fc18

https://bugzilla.redhat.com/show_bug.cgi?id=876563
https://retrace.fedoraproject.org/faf/reports/38678/

/ als we de laptop sluit en open , zien we in /var/log/messages	,


Aug 18 13:35:52 localhost dbus-daemon[601]: ** Message: No devices in use, exit
Aug 18 13:36:54 localhost systemd-logind[592]: Lid closed.
Aug 18 13:36:54 localhost kernel: [53232.877008] traps: gnome-settings-[1896] trap int3 ip:35bc24ec67 sp:7fffd7ee38c0 error:0
Aug 18 13:36:54 localhost abrt[32016]: File '/usr/libexec/gnome-settings-daemon.#prelink#.vAIj2K' seems to be deleted
Aug 18 13:36:54 localhost abrt[32016]: File '/usr/libexec/gnome-settings-daemon.#prelink#.vAIj2K' seems to be a prelink temporary file
Aug 18 13:36:55 localhost abrt[32016]: Saved core dump of pid 1896 (/usr/libexec/gnome-settings-daemon) to /var/tmp/abrt/ccpp-2013-08-18-13:36:54-1896 (46264320 bytes)
Aug 18 13:36:55 localhost abrtd: Directory 'ccpp-2013-08-18-13:36:54-1896' creation detected
Aug 18 13:36:55 localhost systemd-logind[592]: Suspending...
Aug 18 13:36:55 localhost gnome-session[1690]: WARNING: Application 'gnome-settings-daemon.desktop' killed by signal 5
Aug 18 13:36:55 localhost colord: device removed: xrandr-LVDS1
Aug 18 13:36:55 localhost NetworkManager[694]: <info> sleep requested (sleeping: no  enabled: yes)
Aug 18 13:36:55 localhost NetworkManager[694]: <info> sleeping or disabling...
Aug 18 13:36:55 localhost NetworkManager[694]: <info> (wlan0): device state change: disconnected -> unmanaged (reason 'sleeping') [30 10 37]
Aug 18 13:36:55 localhost NetworkManager[694]: <info> (wlan0): cleaning up...
Aug 18 13:36:55 localhost NetworkManager[694]: <info> (wlan0): taking down device.
Aug 18 13:36:55 localhost colord: device removed: xrandr-VGA-2
Aug 18 13:36:55 localhost colord: Profile removed: icc-57760c3f002a37ce1e782750cdf35844
Aug 18 13:36:55 localhost NetworkManager[694]: <info> (p5p1): device state change: activated -> unmanaged (reason 'sleeping') [100 10 37]
Aug 18 13:36:55 localhost NetworkManager[694]: <info> (p5p1): deactivating device (reason 'sleeping') [37]
Aug 18 13:36:55 localhost NetworkManager[694]: <info> (p5p1): canceled DHCP transaction, DHCP client pid 1029
Aug 18 13:36:55 localhost avahi-daemon[600]: Withdrawing address record for 192.168.123.170 on p5p1.
Aug 18 13:36:55 localhost avahi-daemon[600]: Leaving mDNS multicast group on interface p5p1.IPv4 with address 192.168.123.170.
Aug 18 13:36:55 localhost avahi-daemon[600]: Interface p5p1.IPv4 no longer relevant for mDNS.
Aug 18 13:36:55 localhost NetworkManager[694]: <info> (p5p1): cleaning up...
Aug 18 13:36:55 localhost NetworkManager[694]: <info> (p5p1): taking down device.
Aug 18 13:36:55 localhost dbus-daemon[601]: dbus[601]: [system] Activating service name='org.freedesktop.PackageKit' (using servicehelper)
Aug 18 13:36:55 localhost dbus[601]: [system] Activating service name='org.freedesktop.PackageKit' (using servicehelper)
Aug 18 13:36:55 localhost avahi-daemon[600]: Withdrawing address record for fe80::ca60:ff:fe0c:64b4 on p5p1.
Aug 18 13:36:55 localhost dbus-daemon[601]: dbus[601]: [system] Successfully activated service 'org.freedesktop.PackageKit'
Aug 18 13:36:55 localhost dbus[601]: [system] Successfully activated service 'org.freedesktop.PackageKit'
Aug 18 13:36:55 localhost colord: Device added: xrandr-LVDS1
Aug 18 13:36:55 localhost colord: Device added: xrandr-VGA-2
Aug 18 13:36:55 localhost colord: Profile added: icc-57760c3f002a37ce1e782750cdf35844
Aug 18 13:36:55 localhost dbus-daemon[601]: dbus[601]: [system] Activating via systemd: service name='org.freedesktop.nm_dispatcher' unit='dbus-org.freedesktop.nm-dispatcher.service'
Aug 18 13:36:55 localhost dbus[601]: [system] Activating via systemd: service name='org.freedesktop.nm_dispatcher' unit='dbus-org.freedesktop.nm-dispatcher.service'
Aug 18 13:36:55 localhost dbus-daemon[601]: dbus[601]: [system] Activation via systemd failed for unit 'dbus-org.freedesktop.nm-dispatcher.service': Unit dbus-org.freedesktop.nm-dispatcher.service failed to load: No such file or directory. See system logs and 'systemctl status dbus-org.freedesktop.nm-dispatcher.service' for details.
Aug 18 13:36:55 localhost dbus[601]: [system] Activation via systemd failed for unit 'dbus-org.freedesktop.nm-dispatcher.service': Unit dbus-org.freedesktop.nm-dispatcher.service failed to load: No such file or directory. See system logs and 'systemctl status dbus-org.freedesktop.nm-dispatcher.service' for details.
Aug 18 13:36:55 localhost NetworkManager[694]: <warn> Dispatcher failed: (32) Unit dbus-org.freedesktop.nm-dispatcher.service failed to load: No such file or directory. See system logs and 'systemctl status dbus-org.freedesktop.nm-dispatcher.service' for details.
Aug 18 13:36:55 localhost systemd[1]: Starting Sleep.
Aug 18 13:36:55 localhost systemd[1]: Reached target Sleep.
Aug 18 13:36:55 localhost systemd[1]: Starting Suspend...
Aug 18 13:36:55 localhost systemd-sleep[32050]: Suspending system...
Aug 18 13:36:56 localhost abrtd: Generating core_backtrace
Aug 18 13:36:56 localhost abrtd: Generating backtrace
Aug 18 13:36:58 localhost abrtd: Backtrace is generated, 31652 bytes
Aug 18 13:36:58 localhost abrtd: Core backtrace is generated and saved, 4017 bytes
Aug 18 13:36:58 localhost kernel: [53233.866419] PM: Syncing filesystems ... done.
Aug 18 13:37:09 localhost kernel: [53236.979971] Freezing user space processes ... (elapsed 0.01 seconds) done.
Aug 18 13:37:09 localhost kernel: [53236.991233] Freezing remaining freezable tasks ... (elapsed 0.01 seconds) done.
Aug 18 13:37:09 localhost kernel: [53237.002602] Suspending console(s) (use no_console_suspend to debug)
Aug 18 13:37:09 localhost kernel: [53237.003141] sd 0:0:0:0: [sda] Synchronizing SCSI cache
Aug 18 13:37:09 localhost kernel: [53237.015781] nouveau  [     DRM] suspending fbcon...
Aug 18 13:37:09 localhost kernel: [53237.015787] nouveau  [     DRM] suspending display...
Aug 18 13:37:09 localhost kernel: [53237.015793] nouveau  [     DRM] unpinning framebuffer(s)...
Aug 18 13:37:09 localhost kernel: [53237.015877] nouveau  [     DRM] evicting buffers...
Aug 18 13:37:09 localhost kernel: [53237.016983] mei_me 0000:00:16.0: suspend
Aug 18 13:37:09 localhost kernel: [53237.031766] nouveau  [     DRM] waiting for kernel channels to go idle...
Aug 18 13:37:09 localhost kernel: [53237.031774] nouveau  [     DRM] suspending client object trees...
Aug 18 13:37:09 localhost kernel: [53237.032101] nouveau  [     DRM] suspending kernel object tree...
Aug 18 13:37:09 localhost kernel: [53237.198688] sd 0:0:0:0: [sda] Stopping disk
Aug 18 13:37:09 localhost kernel: [53237.935272] nouveau 0000:01:00.0: power state changed by ACPI to D3hot
Aug 18 13:37:09 localhost kernel: [53237.935478] PM: suspend of devices complete after 931.666 msecs
Aug 18 13:37:09 localhost kernel: [53237.935783] PM: late suspend of devices complete after 0.300 msecs
Aug 18 13:37:09 localhost kernel: [53237.947172] xhci_hcd 0000:04:00.0: System wakeup enabled by ACPI
Aug 18 13:37:09 localhost kernel: [53237.969205] ehci-pci 0000:00:1d.0: System wakeup enabled by ACPI
Aug 18 13:37:09 localhost kernel: [53237.980296] ehci-pci 0000:00:1a.0: System wakeup enabled by ACPI
Aug 18 13:37:09 localhost kernel: [53238.002165] PM: noirq suspend of devices complete after 66.310 msecs
Aug 18 13:37:09 localhost kernel: [53238.002471] ACPI: Preparing to enter system sleep state S3
Aug 18 13:37:09 localhost kernel: [53238.083369] PM: Saving platform NVS memory
Aug 18 13:37:09 localhost kernel: [53238.084597] Disabling non-boot CPUs ...
Aug 18 13:37:09 localhost kernel: [53238.086097] smpboot: CPU 1 is now offline
Aug 18 13:37:09 localhost kernel: [53238.086401] CPU 1 offline: Remove Rx thread
Aug 18 13:37:09 localhost kernel: [53238.088582] smpboot: CPU 2 is now offline
Aug 18 13:37:09 localhost kernel: [53238.089157] CPU 2 offline: Remove Rx thread
Aug 18 13:37:09 localhost kernel: [53238.090189] Broke affinity for irq 55
Aug 18 13:37:09 localhost kernel: [53238.091255] smpboot: CPU 3 is now offline
Aug 18 13:37:09 localhost kernel: [53238.091918] CPU 3 offline: Remove Rx thread
Aug 18 13:37:09 localhost kernel: [53238.094913] smpboot: CPU 4 is now offline
Aug 18 13:37:09 localhost kernel: [53238.095271] CPU 4 offline: Remove Rx thread
Aug 18 13:37:09 localhost kernel: [53238.095568] Broke affinity for irq 16
Aug 18 13:37:09 localhost kernel: [53238.096633] smpboot: CPU 5 is now offline
Aug 18 13:37:09 localhost kernel: [53238.096813] CPU 5 offline: Remove Rx thread
Aug 18 13:37:09 localhost kernel: [53238.097154] Broke affinity for irq 23
Aug 18 13:37:09 localhost kernel: [53238.097158] Broke affinity for irq 45
Aug 18 13:37:09 localhost kernel: [53238.098216] smpboot: CPU 6 is now offline
Aug 18 13:37:09 localhost kernel: [53238.098488] CPU 6 offline: Remove Rx thread
Aug 18 13:37:09 localhost kernel: [53238.099801] smpboot: CPU 7 is now offline
Aug 18 13:37:09 localhost kernel: [53238.100048] CPU 7 offline: Remove Rx thread
Aug 18 13:37:09 localhost kernel: [53238.101358] ACPI: Low-level resume complete
Aug 18 13:37:09 localhost kernel: [53238.101400] PM: Restoring platform NVS memory
Aug 18 13:37:09 localhost kernel: [53238.102070] microcode: CPU0 sig=0x206a7, pf=0x10, revision=0x28
Aug 18 13:37:09 localhost kernel: [53238.102099] Enabling non-boot CPUs ...
Aug 18 13:37:09 localhost kernel: [53238.102162] smpboot: Booting Node 0 Processor 1 APIC 0x2
Aug 18 13:37:09 localhost kernel: [53238.113246] CPU1 microcode updated early to revision 0x28, date = 2012-04-24
Aug 18 13:37:09 localhost kernel: [53238.115737] microcode: CPU1 sig=0x206a7, pf=0x10, revision=0x28
Aug 18 13:37:09 localhost kernel: [53238.115890] bnx2i: CPU 1 online: Create Rx thread
Aug 18 13:37:09 localhost kernel: [53238.115923] CPU1 is up
Aug 18 13:37:09 localhost kernel: [53238.115943] smpboot: Booting Node 0 Processor 2 APIC 0x4
Aug 18 13:37:09 localhost kernel: [53238.126705] CPU2 microcode updated early to revision 0x28, date = 2012-04-24
Aug 18 13:37:09 localhost kernel: [53238.129721] microcode: CPU2 sig=0x206a7, pf=0x10, revision=0x28
Aug 18 13:37:09 localhost kernel: [53238.130115] bnx2i: CPU 2 online: Create Rx thread
Aug 18 13:37:09 localhost kernel: [53238.130217] CPU2 is up
Aug 18 13:37:09 localhost kernel: [53238.130283] smpboot: Booting Node 0 Processor 3 APIC 0x6
Aug 18 13:37:09 localhost kernel: [53238.141457] CPU3 microcode updated early to revision 0x28, date = 2012-04-24
Aug 18 13:37:09 localhost kernel: [53238.144209] microcode: CPU3 sig=0x206a7, pf=0x10, revision=0x28
Aug 18 13:37:09 localhost kernel: [53238.144365] bnx2i: CPU 3 online: Create Rx thread
Aug 18 13:37:09 localhost kernel: [53238.144418] CPU3 is up
Aug 18 13:37:09 localhost kernel: [53238.144479] smpboot: Booting Node 0 Processor 4 APIC 0x1
Aug 18 13:37:09 localhost kernel: [53238.155235] CPU4 microcode updated early to revision 0x28, date = 2012-04-24
Aug 18 13:37:09 localhost kernel: [53238.158024] microcode: CPU4 sig=0x206a7, pf=0x10, revision=0x28
Aug 18 13:37:09 localhost kernel: [53238.158189] bnx2i: CPU 4 online: Create Rx thread
Aug 18 13:37:09 localhost kernel: [53238.158255] CPU4 is up
Aug 18 13:37:09 localhost kernel: [53238.158310] smpboot: Booting Node 0 Processor 5 APIC 0x3
Aug 18 13:37:09 localhost kernel: [53238.172310] microcode: CPU5 sig=0x206a7, pf=0x10, revision=0x28
Aug 18 13:37:09 localhost kernel: [53238.172687] bnx2i: CPU 5 online: Create Rx thread
Aug 18 13:37:09 localhost kernel: [53238.172771] CPU5 is up
Aug 18 13:37:09 localhost kernel: [53238.172826] smpboot: Booting Node 0 Processor 6 APIC 0x5
Aug 18 13:37:09 localhost kernel: [53238.187369] microcode: CPU6 sig=0x206a7, pf=0x10, revision=0x28
Aug 18 13:37:09 localhost kernel: [53238.187748] bnx2i: CPU 6 online: Create Rx thread
Aug 18 13:37:09 localhost kernel: [53238.187818] CPU6 is up
Aug 18 13:37:09 localhost kernel: [53238.187867] smpboot: Booting Node 0 Processor 7 APIC 0x7
Aug 18 13:37:09 localhost kernel: [53238.202534] microcode: CPU7 sig=0x206a7, pf=0x10, revision=0x28
Aug 18 13:37:09 localhost kernel: [53238.202912] bnx2i: CPU 7 online: Create Rx thread
Aug 18 13:37:09 localhost kernel: [53238.202997] CPU7 is up
Aug 18 13:37:09 localhost kernel: [53238.211319] ACPI: Waking up from system sleep state S3
Aug 18 13:37:09 localhost kernel: [53238.278403] ehci-pci 0000:00:1a.0: System wakeup disabled by ACPI
Aug 18 13:37:09 localhost kernel: [53238.300420] ehci-pci 0000:00:1d.0: System wakeup disabled by ACPI
Aug 18 13:37:09 localhost kernel: [53238.311542] nouveau 0000:01:00.0: power state changed by ACPI to D0
Aug 18 13:37:09 localhost kernel: [53238.344523] xhci_hcd 0000:04:00.0: System wakeup disabled by ACPI
Aug 18 13:37:09 localhost kernel: [53238.355629] PM: noirq resume of devices complete after 109.867 msecs
Aug 18 13:37:09 localhost kernel: [53238.355927] PM: early resume of devices complete after 0.230 msecs
Aug 18 13:37:09 localhost kernel: [53238.356240] usb usb1: root hub lost power or was reset
Aug 18 13:37:09 localhost kernel: [53238.356247] usb usb3: root hub lost power or was reset
Aug 18 13:37:09 localhost kernel: [53238.356253] usb usb4: root hub lost power or was reset
Aug 18 13:37:09 localhost kernel: [53238.363235] usb usb2: root hub lost power or was reset
Aug 18 13:37:09 localhost kernel: [53238.363358] nouveau  [     DRM] re-enabling device...
Aug 18 13:37:09 localhost kernel: [53238.363387] nouveau  [     DRM] resuming kernel object tree...
Aug 18 13:37:09 localhost kernel: [53238.363394] nouveau  [   VBIOS][0000:01:00.0] running init tables
Aug 18 13:37:09 localhost kernel: [53238.383885] [drm] Wrong MCH_SSKPD value: 0x16040307
Aug 18 13:37:09 localhost kernel: [53238.383887] [drm] This can cause pipe underruns and display issues.
Aug 18 13:37:09 localhost kernel: [53238.383888] [drm] Please upgrade your BIOS to fix this.
Aug 18 13:37:09 localhost kernel: [53238.641400] nouveau  [     DRM] resuming client object trees...
Aug 18 13:37:09 localhost kernel: [53238.641575] nouveau  [     DRM] resuming display...
Aug 18 13:37:09 localhost kernel: [53238.670759] ata3: SATA link up 1.5 Gbps (SStatus 113 SControl 300)
Aug 18 13:37:09 localhost kernel: [53238.674402] ata3.00: ACPI cmd ef/10:03:00:00:00:a0 (SET FEATURES) filtered out
Aug 18 13:37:09 localhost kernel: [53238.674773] usb 1-1: reset high-speed USB device number 2 using ehci-pci
Aug 18 13:37:09 localhost kernel: [53238.682056] ata3.00: ACPI cmd ef/10:03:00:00:00:a0 (SET FEATURES) filtered out
Aug 18 13:37:09 localhost kernel: [53238.685211] ata3.00: configured for UDMA/133
Aug 18 13:37:09 localhost kernel: [53238.891089] usb 2-1: reset high-speed USB device number 2 using ehci-pci
Aug 18 13:37:09 localhost kernel: [53239.078388] usb 1-1.2: reset high-speed USB device number 3 using ehci-pci
Aug 18 13:37:09 localhost kernel: [53239.638832] ata1: SATA link up 3.0 Gbps (SStatus 123 SControl 300)
Aug 18 13:37:09 localhost kernel: [53239.640062] ata1.00: ACPI cmd f5/00:00:00:00:00:a0 (SECURITY FREEZE LOCK) filtered out
Aug 18 13:37:09 localhost kernel: [53239.640137] ata1.00: ACPI cmd ef/10:03:00:00:00:a0 (SET FEATURES) filtered out
Aug 18 13:37:09 localhost kernel: [53239.642200] ata1.00: ACPI cmd f5/00:00:00:00:00:a0 (SECURITY FREEZE LOCK) filtered out
Aug 18 13:37:09 localhost kernel: [53239.642277] ata1.00: ACPI cmd ef/10:03:00:00:00:a0 (SET FEATURES) filtered out
Aug 18 13:37:09 localhost kernel: [53239.642939] ata1.00: configured for UDMA/100
Aug 18 13:37:09 localhost kernel: [53239.643258] sd 0:0:0:0: [sda] Starting disk
Aug 18 13:37:09 localhost kernel: [53239.668060] PM: resume of devices complete after 1310.765 msecs
Aug 18 13:37:09 localhost systemd[1]: Time has been changed
Aug 18 13:37:09 localhost kernel: [53239.668641] Restarting tasks ... done.
Aug 18 13:37:09 localhost systemd-logind[592]: Lid opened.
Aug 18 13:37:09 localhost kernel: [53239.715538] video LNXVIDEO:00: Restoring backlight state
Aug 18 13:37:09 localhost kernel: [53239.715827] video LNXVIDEO:01: Restoring backlight state
Aug 18 13:37:09 localhost systemd-sleep[32050]: System resumed.
Aug 18 13:37:09 localhost systemd[1]: Started Suspend.
Aug 18 13:37:09 localhost systemd[1]: Service sleep.target is not needed anymore. Stopping.
Aug 18 13:37:09 localhost systemd[1]: Stopping Sleep.
Aug 18 13:37:09 localhost systemd[1]: Stopped target Sleep.
Aug 18 13:37:09 localhost systemd[1]: Starting Suspend.
Aug 18 13:37:09 localhost systemd[1]: Reached target Suspend.
Aug 18 13:37:09 localhost systemd-logind[592]: Operation finished.
Aug 18 13:37:09 localhost NetworkManager[694]: <info> wake requested (sleeping: yes  enabled: yes)
Aug 18 13:37:09 localhost NetworkManager[694]: <info> waking up and re-enabling...
Aug 18 13:37:09 localhost NetworkManager[694]: <info> WWAN now enabled by management service
Aug 18 13:37:09 localhost NetworkManager[694]: <info> (wlan0): device state change: unmanaged -> unavailable (reason 'managed') [10 20 2]
Aug 18 13:37:09 localhost NetworkManager[694]: <info> (wlan0): bringing up device.
Aug 18 13:37:09 localhost kernel: [53239.761928] iwlwifi 0000:03:00.0: L1 Disabled; Enabling L0S
Aug 18 13:37:09 localhost kernel: [53239.769276] iwlwifi 0000:03:00.0: Radio type=0x0-0x0-0x3
Aug 18 13:37:09 localhost kernel: [53239.897030] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
Aug 18 13:37:09 localhost NetworkManager[694]: <info> (wlan0): preparing device.
Aug 18 13:37:09 localhost NetworkManager[694]: <info> (wlan0): deactivating device (reason 'managed') [2]
Aug 18 13:37:09 localhost NetworkManager[694]: <info> (p5p1): device state change: unmanaged -> unavailable (reason 'managed') [10 20 2]
Aug 18 13:37:09 localhost kernel: [53239.901029] [drm] Enabling RC6 states: RC6 on, RC6p off, RC6pp off
Aug 18 13:37:09 localhost NetworkManager[694]: <info> (p5p1): bringing up device.
Aug 18 13:37:09 localhost kernel: [53239.915676] IPv6: ADDRCONF(NETDEV_UP): p5p1: link is not ready
Aug 18 13:37:09 localhost NetworkManager[694]: <info> (p5p1): preparing device.
Aug 18 13:37:09 localhost NetworkManager[694]: <info> (p5p1): deactivating device (reason 'managed') [2]
Aug 18 13:37:09 localhost NetworkManager[694]: <info> (wlan0) supports 5 scan SSIDs
Aug 18 13:37:09 localhost NetworkManager[694]: <info> (wlan0): supplicant interface state: starting -> ready
Aug 18 13:37:09 localhost NetworkManager[694]: <info> (wlan0): device state change: unavailable -> disconnected (reason 'supplicant-available') [20 30 42]
Aug 18 13:37:09 localhost NetworkManager[694]: <warn> Trying to remove a non-existant call id.
Aug 18 13:37:09 localhost NetworkManager[694]: <info> (wlan0): supplicant interface state: ready -> inactive
Aug 18 13:37:09 localhost NetworkManager[694]: <info> (wlan0) supports 5 scan SSIDs
Aug 18 13:37:10 localhost abrtd: Duplicate: core backtrace
Aug 18 13:37:10 localhost abrtd: DUP_OF_DIR: /var/tmp/abrt/ccpp-2013-08-17-21:39:26-2069
Aug 18 13:37:10 localhost abrtd: Deleting problem directory ccpp-2013-08-18-13:36:54-1896 (dup of ccpp-2013-08-17-21:39:26-2069)
Aug 18 13:37:10 localhost NetworkManager[694]: <info> (p5p1): carrier now ON (device state 20)
Aug 18 13:37:10 localhost dnsmasq[1570]: no servers found in /etc/resolv.conf, will retry
Aug 18 13:37:10 localhost NetworkManager[694]: <info> (p5p1): device state change: unavailable -> disconnected (reason 'carrier-changed') [20 30 40]
Aug 18 13:37:10 localhost NetworkManager[694]: <info> Auto-activating connection 'p5p1'.
Aug 18 13:37:10 localhost NetworkManager[694]: <info> Activation (p5p1) starting connection 'p5p1'
Aug 18 13:37:10 localhost kernel: [53240.421572] atl1c 0000:05:00.0: atl1c: p5p1 NIC Link is Up<10 Mbps Half Duplex>
Aug 18 13:37:10 localhost kernel: [53240.421602] IPv6: ADDRCONF(NETDEV_CHANGE): p5p1: link becomes ready
Aug 18 13:37:10 localhost NetworkManager[694]: <info> (p5p1): device state change: disconnected -> prepare (reason 'none') [30 40 0]
Aug 18 13:37:10 localhost NetworkManager[694]: <info> Activation (p5p1) Stage 1 of 5 (Device Prepare) scheduled...
Aug 18 13:37:10 localhost NetworkManager[694]: <info> Activation (p5p1) Stage 1 of 5 (Device Prepare) started...
Aug 18 13:37:10 localhost NetworkManager[694]: <info> Activation (p5p1) Stage 2 of 5 (Device Configure) scheduled...
Aug 18 13:37:10 localhost NetworkManager[694]: <info> Activation (p5p1) Stage 1 of 5 (Device Prepare) complete.
Aug 18 13:37:10 localhost NetworkManager[694]: <info> Activation (p5p1) Stage 2 of 5 (Device Configure) starting...
Aug 18 13:37:10 localhost NetworkManager[694]: <info> (p5p1): device state change: prepare -> config (reason 'none') [40 50 0]
Aug 18 13:37:10 localhost NetworkManager[694]: <info> Activation (p5p1) Stage 2 of 5 (Device Configure) successful.
Aug 18 13:37:10 localhost NetworkManager[694]: <info> Activation (p5p1) Stage 2 of 5 (Device Configure) complete.
Aug 18 13:37:10 localhost NetworkManager[694]: <info> Activation (p5p1) Stage 3 of 5 (IP Configure Start) scheduled.
Aug 18 13:37:10 localhost NetworkManager[694]: <info> Activation (p5p1) Stage 3 of 5 (IP Configure Start) started...
Aug 18 13:37:10 localhost NetworkManager[694]: <info> (p5p1): device state change: config -> ip-config (reason 'none') [50 70 0]
Aug 18 13:37:10 localhost NetworkManager[694]: <info> Activation (p5p1) Beginning DHCPv4 transaction (timeout in 45 seconds)
Aug 18 13:37:10 localhost NetworkManager[694]: <info> dhclient started with pid 32194
Aug 18 13:37:10 localhost NetworkManager[694]: <info> Activation (p5p1) Beginning IP6 addrconf.
Aug 18 13:37:10 localhost NetworkManager[694]: <info> Activation (p5p1) Stage 3 of 5 (IP Configure Start) complete.
Aug 18 13:37:10 localhost dhclient[32194]: Internet Systems Consortium DHCP Client 4.2.5
Aug 18 13:37:10 localhost dhclient[32194]: Copyright 2004-2013 Internet Systems Consortium.
Aug 18 13:37:10 localhost dhclient[32194]: All rights reserved.
Aug 18 13:37:10 localhost dhclient[32194]: For info, please visit https://www.isc.org/software/dhcp/
Aug 18 13:37:10 localhost dhclient[32194]: 
Aug 18 13:37:10 localhost NetworkManager[694]: <info> (p5p1): DHCPv4 state changed nbi -> preinit
Aug 18 13:37:10 localhost dhclient[32194]: Listening on LPF/p5p1/c8:60:00:0c:64:b4
Aug 18 13:37:10 localhost dhclient[32194]: Sending on   LPF/p5p1/c8:60:00:0c:64:b4
Aug 18 13:37:10 localhost dhclient[32194]: Sending on   Socket/fallback
Aug 18 13:37:10 localhost dhclient[32194]: DHCPREQUEST on p5p1 to 255.255.255.255 port 67 (xid=0x6e95de3)
Aug 18 13:37:10 localhost dhclient[32194]: DHCPACK from 192.168.123.254 (xid=0x6e95de3)
Aug 18 13:37:10 localhost dhclient[32194]: bound to 192.168.123.170 -- renewal in 2805866 seconds.
Aug 18 13:37:10 localhost NetworkManager[694]: <info> (p5p1): DHCPv4 state changed preinit -> reboot
Aug 18 13:37:10 localhost NetworkManager[694]: <info>   address 192.168.123.170
Aug 18 13:37:10 localhost NetworkManager[694]: <info>   prefix 24 (255.255.255.0)
Aug 18 13:37:10 localhost NetworkManager[694]: <info>   gateway 192.168.123.254
Aug 18 13:37:10 localhost NetworkManager[694]: <info>   nameserver '213.46.228.196'
Aug 18 13:37:10 localhost NetworkManager[694]: <info>   nameserver '192.168.123.254'
Aug 18 13:37:10 localhost NetworkManager[694]: <info>   domain name 'arnhem.chello.nl'
Aug 18 13:37:10 localhost NetworkManager[694]: <info> Activation (p5p1) Stage 5 of 5 (IPv4 Configure Commit) scheduled...
Aug 18 13:37:10 localhost NetworkManager[694]: <info> Activation (p5p1) Stage 5 of 5 (IPv4 Commit) started...
Aug 18 13:37:10 localhost avahi-daemon[600]: Joining mDNS multicast group on interface p5p1.IPv4 with address 192.168.123.170.
Aug 18 13:37:10 localhost avahi-daemon[600]: New relevant interface p5p1.IPv4 for mDNS.
Aug 18 13:37:10 localhost avahi-daemon[600]: Registering new address record for 192.168.123.170 on p5p1.IPv4.
Aug 18 13:37:11 localhost NetworkManager[694]: <info> (p5p1): device state change: ip-config -> secondaries (reason 'none') [70 90 0]
Aug 18 13:37:11 localhost NetworkManager[694]: <info> Activation (p5p1) Stage 5 of 5 (IPv4 Commit) complete.
Aug 18 13:37:11 localhost NetworkManager[694]: <info> (p5p1): device state change: secondaries -> activated (reason 'none') [90 100 0]
Aug 18 13:37:11 localhost avahi-daemon[600]: Registering new address record for fe80::ca60:ff:fe0c:64b4 on p5p1.*.
Aug 18 13:37:11 localhost NetworkManager[694]: <info> Policy set 'p5p1' (p5p1) as default for IPv4 routing and DNS.
Aug 18 13:37:11 localhost NetworkManager[694]: <info> Activation (p5p1) successful, device activated.
Aug 18 13:37:11 localhost dbus-daemon[601]: dbus[601]: [system] Activating via systemd: service name='org.freedesktop.nm_dispatcher' unit='dbus-org.freedesktop.nm-dispatcher.service'
Aug 18 13:37:11 localhost dbus[601]: [system] Activating via systemd: service name='org.freedesktop.nm_dispatcher' unit='dbus-org.freedesktop.nm-dispatcher.service'
Aug 18 13:37:11 localhost dbus[601]: [system] Activation via systemd failed for unit 'dbus-org.freedesktop.nm-dispatcher.service': Unit dbus-org.freedesktop.nm-dispatcher.service failed to load: No such file or directory. See system logs and 'systemctl status dbus-org.freedesktop.nm-dispatcher.service' for details.
Aug 18 13:37:11 localhost NetworkManager[694]: <warn> Dispatcher failed: (32) Unit dbus-org.freedesktop.nm-dispatcher.service failed to load: No such file or directory. See system logs and 'systemctl status dbus-org.freedesktop.nm-dispatcher.service' for details.
Aug 18 13:37:11 localhost dbus-daemon[601]: dbus[601]: [system] Activation via systemd failed for unit 'dbus-org.freedesktop.nm-dispatcher.service': Unit dbus-org.freedesktop.nm-dispatcher.service failed to load: No such file or directory. See system logs and 'systemctl status dbus-org.freedesktop.nm-dispatcher.service' for details.
Aug 18 13:37:31 localhost NetworkManager[694]: <info> (p5p1): IP6 addrconf timed out or failed.
Aug 18 13:37:31 localhost NetworkManager[694]: <info> Activation (p5p1) Stage 4 of 5 (IPv6 Configure Timeout) scheduled...
Aug 18 13:37:31 localhost NetworkManager[694]: <info> Activation (p5p1) Stage 4 of 5 (IPv6 Configure Timeout) started...
Aug 18 13:37:31 localhost NetworkManager[694]: <info> Activation (p5p1) Stage 4 of 5 (IPv6 Configure Timeout) complete.
Aug 18 13:37:44 localhost dbus-daemon[601]: dbus[601]: [system] Activating service name='org.freedesktop.problems' (using servicehelper)
Aug 18 13:37:44 localhost dbus[601]: [system] Activating service name='org.freedesktop.problems' (using servicehelper)
Aug 18 13:37:44 localhost dbus-daemon[601]: dbus[601]: [system] Successfully activated service 'org.freedesktop.problems'
Aug 18 13:37:44 localhost dbus[601]: [system] Successfully activated service 'org.freedesktop.problems'
Aug 18 13:37:51 localhost chronyd[1338]: Selected source 46.19.33.6
Aug 18 13:40:10 localhost dbus-daemon[601]: dbus[601]: [system] Activating service name='org.fedoraproject.Setroubleshootd' (using servicehelper)
Aug 18 13:40:10 localhost dbus[601]: [system] Activating service name='org.fedoraproject.Setroubleshootd' (using servicehelper)
Aug 18 13:40:10 localhost dbus[601]: [system] Successfully activated service 'org.fedoraproject.Setroubleshootd'
Aug 18 13:40:10 localhost dbus-daemon[601]: dbus[601]: [system] Successfully activated service 'org.fedoraproject.Setroubleshootd'
Aug 18 13:40:12 localhost setroubleshoot: SELinux is preventing /opt/google/chrome/chrome from append access on the file /home/eric/libpeerconnection.log. For complete SELinux messages. run sealert -l a88342b4-3078-4bba-8dea-3413826b3e76
Aug 18 13:40:12 localhost setroubleshoot: SELinux is preventing /opt/google/chrome/chrome from append access on the file /home/eric/libpeerconnection.log. For complete SELinux messages. run sealert -l a88342b4-3078-4bba-8dea-3413826b3e76
Aug 18 13:40:12 localhost setroubleshoot: SELinux is preventing /opt/google/chrome/chrome from getattr access on the file /home/eric/libpeerconnection.log. For complete SELinux messages. run sealert -l bb1e3e14-69c6-42eb-8455-69b57d306087
Aug 18 13:42:54 localhost dbus-daemon[601]: dbus[601]: [system] Activating service name='org.fedoraproject.Setroubleshootd' (using servicehelper)
Aug 18 13:42:54 localhost dbus[601]: [system] Activating service name='org.fedoraproject.Setroubleshootd' (using servicehelper)
Aug 18 13:42:55 localhost dbus[601]: [system] Successfully activated service 'org.fedoraproject.Setroubleshootd'
Aug 18 13:42:55 localhost dbus-daemon[601]: dbus[601]: [system] Successfully activated service 'org.fedoraproject.Setroubleshootd'
Aug 18 13:42:56 localhost setroubleshoot: SELinux is preventing /opt/google/chrome/chrome from append access on the file /home/eric/libpeerconnection.log. For complete SELinux messages. run sealert -l a88342b4-3078-4bba-8dea-3413826b3e76
Aug 18 13:42:56 localhost setroubleshoot: SELinux is preventing /opt/google/chrome/chrome from append access on the file /home/eric/libpeerconnection.log. For complete SELinux messages. run sealert -l a88342b4-3078-4bba-8dea-3413826b3e76
Aug 18 13:42:57 localhost setroubleshoot: SELinux is preventing /opt/google/chrome/chrome from getattr access on the file /home/eric/libpeerconnection.log. For complete SELinux messages. run sealert -l bb1e3e14-69c6-42eb-8455-69b57d306087
Aug 18 13:43:48 localhost dbus-daemon[601]: dbus[601]: [system] Activating service name='org.fedoraproject.Setroubleshootd' (using servicehelper)
Aug 18 13:43:48 localhost dbus[601]: [system] Activating service name='org.fedoraproject.Setroubleshootd' (using servicehelper)
Aug 18 13:43:49 localhost dbus-daemon[601]: dbus[601]: [system] Successfully activated service 'org.fedoraproject.Setroubleshootd'
Aug 18 13:43:49 localhost dbus[601]: [system] Successfully activated service 'org.fedoraproject.Setroubleshootd'
Aug 18 13:43:50 localhost setroubleshoot: SELinux is preventing /opt/google/chrome/chrome from append access on the file /home/eric/libpeerconnection.log. For complete SELinux messages. run sealert -l a88342b4-3078-4bba-8dea-3413826b3e76
Aug 18 13:43:50 localhost setroubleshoot: SELinux is preventing /opt/google/chrome/chrome from append access on the file /home/eric/libpeerconnection.log. For complete SELinux messages. run sealert -l a88342b4-3078-4bba-8dea-3413826b3e76
Aug 18 13:43:50 localhost setroubleshoot: SELinux is preventing /opt/google/chrome/chrome from getattr access on the file /home/eric/libpeerconnection.log. For complete SELinux messages. run sealert -l bb1e3e14-69c6-42eb-8455-69b57d306087
Aug 18 13:45:25 localhost chronyd[1338]: Can't synchronise: no majority
Aug 18 13:45:31 localhost chronyd[1338]: Selected source 95.211.195.245
Aug 18 13:45:31 localhost chronyd[1338]: System clock wrong by 1.479569 seconds, adjustment started
Aug 18 13:45:48 localhost dbus-daemon[601]: dbus[601]: [system] Activating service name='org.fedoraproject.Setroubleshootd' (using servicehelper)
Aug 18 13:45:48 localhost dbus[601]: [system] Activating service name='org.fedoraproject.Setroubleshootd' (using servicehelper)
Aug 18 13:45:48 localhost dbus[601]: [system] Successfully activated service 'org.fedoraproject.Setroubleshootd'
Aug 18 13:45:48 localhost dbus-daemon[601]: dbus[601]: [system] Successfully activated service 'org.fedoraproject.Setroubleshootd'
Aug 18 13:45:50 localhost setroubleshoot: SELinux is preventing /opt/google/chrome/chrome from append access on the file /home/eric/libpeerconnection.log. For complete SELinux messages. run sealert -l a88342b4-3078-4bba-8dea-3413826b3e76
Aug 18 13:45:50 localhost setroubleshoot: SELinux is preventing /opt/google/chrome/chrome from append access on the file /home/eric/libpeerconnection.log. For complete SELinux messages. run sealert -l a88342b4-3078-4bba-8dea-3413826b3e76
Aug 18 13:45:50 localhost setroubleshoot: SELinux is preventing /opt/google/chrome/chrome from getattr access on the file /home/eric/libpeerconnection.log. For complete SELinux messages. run sealert -l bb1e3e14-69c6-42eb-8455-69b57d306087
Aug 18 13:50:54 localhost dbus-daemon[601]: dbus[601]: [system] Activating service name='net.reactivated.Fprint' (using servicehelper)
Aug 18 13:50:54 localhost dbus[601]: [system] Activating service name='net.reactivated.Fprint' (using servicehelper)
Aug 18 13:50:54 localhost dbus-daemon[601]: dbus[601]: [system] Successfully activated service 'net.reactivated.Fprint'
Aug 18 13:50:54 localhost dbus[601]: [system] Successfully activated service 'net.reactivated.Fprint'
Aug 18 13:50:54 localhost dbus-daemon[601]: Launching FprintObject
Aug 18 13:50:54 localhost dbus-daemon[601]: ** Message: D-Bus service launched with name: net.reactivated.Fprint
Aug 18 13:50:54 localhost dbus-daemon[601]: ** Message: entering main loop
Aug 18 13:51:25 localhost dbus-daemon[601]: ** Message: No devices in use, exit

/ 7	.

/ We hebben bug updated	,
https://bugzilla.redhat.com/show_bug.cgi?id=998264

Email sent to:
jonathan@jonmasters.org, 
jforbes@redhat.com, 
kerneloopses@gmail.com, 
itamar@ispbrasil.com.br, 
amdfx.world@gmail.com, 
madhu.chinakonda@gmail.com, 
kernel-maint@redhat.com, 
bugbot@bugzilla.org, 
rkrcmar@redhat.com, 
drjones@redhat.com

Dear Josh,

When I do, I see

$ ps ajx --width 2000
    1   590   590   590 ?           -1 Ss       0   0:00 /usr/bin/abrt-watch-log -F BUG: WARNING: at INFO: possible recursive locking detected ernel BUG at list_del corruption list_add corruption do_IRQ: stack overflow: ear stack overflow (cur: eneral protection fault nable to handle kernel ouble fault: RTNL: assertion failed eek! page_mapcount(page) went negative! adness at NETDEV WATCHDOG ysctl table check failed : nobody cared IRQ handler type mismatch Machine Check Exception divide error: bounds: coprocessor segment overrun: invalid TSS: segment not present: invalid opcode: alignment check: stack segment: fpu exception: simd exception: iret exception: /var/log/messages -- /usr/bin/abrt-dump-oops -xD

When I do, I see

[eric@localhost ~]$ yum list installed \*kernel\*
Loaded plugins: langpacks, presto, refresh-packagekit
Installed Packages
abrt-addon-kerneloops.x86_64                 2.1.5-1.fc18               @updates
kernel.x86_64                                3.9.11-200.fc18            @updates
kernel.x86_64                                3.10.6-100.fc18            @updates
kernel.x86_64                                3.10.7-100.fc18            @updates
kernel-headers.x86_64                        3.10.7-100.fc18            @updates
kernel-modules-extra.x86_64                  3.9.11-200.fc18            @updates
kernel-modules-extra.x86_64                  3.10.6-100.fc18            @updates
kernel-modules-extra.x86_64                  3.10.7-100.fc18            @updates
libreport-plugin-kerneloops.x86_64           2.1.5-1.fc18               @updates

I have an ASUS K53S.

Also I have (but maybe I already had it before the resume started to fail),

gnome-settings-daemon crashed
process /usr/libexec/gnome-settings-daemon was killed by signal 5 (SIGTRAP)
version gnome-settings-daemon-3.6.4-3fc18.


Also when I have a terminal open, close the laptop and open it again, I see on my desktop next to Activities, Terminal. When I leave gnome and look on the command line, gnome-terminal still runs. But the terminal is not to be seen on my desktop. 

/7	. 

[root@localhost ~]# systemctl status NetworkManager.service 
NetworkManager.service - Network Manager
   Loaded: loaded (/usr/lib/systemd/system/NetworkManager.service; enabled)
   Active: active (running) since Sun 2013-08-18 15:38:09 CEST; 1 day 5h ago
 Main PID: 701 (NetworkManager)
   CGroup: name=systemd:/system/NetworkManager.service
           ├─  701 /usr/sbin/NetworkManager --no-daemon
           └─11785 /sbin/dhclient -d -sf /usr/libexec/nm-dhcp-client.action -...

[root@localhost ~]# systemctl status NetworkManager-dispatcher.service 
NetworkManager-dispatcher.service - Network Manager Script Dispatcher Service
   Loaded: loaded (/usr/lib/systemd/system/NetworkManager-dispatcher.service; enabled)
   Active: inactive (dead)

/ Lees	,
https://bugzilla.redhat.com/show_bug.cgi?id=974811

[root@localhost ~]# systemctl enable NetworkManager-dispatcher.service 
[root@localhost ~]# systemctl restart NetworkManager-dispatcher.service 
[root@localhost ~]# systemctl status NetworkManager-dispatcher.service 
NetworkManager-dispatcher.service - Network Manager Script Dispatcher Service
   Loaded: loaded (/usr/lib/systemd/system/NetworkManager-dispatcher.service; enabled)
   Active: active (running) since Mon 2013-08-19 22:01:54 CEST; 2s ago
 Main PID: 15046 (nm-dispatcher.a)
   CGroup: name=systemd:/system/NetworkManager-dispatcher.service
           └─15046 /usr/libexec/nm-dispatcher.action



/TODO

/ 7	.

/ Lees bug 917081 over mei-mi	,

/ Einde SUSPEND TO RAM

/ FEDORA

/ 24 aug 2013

[root@localhost ~]# yum update
Loaded plugins: langpacks, presto, refresh-packagekit
10gen                                                    |  951 B     00:00     
fedora/18/x86_64/metalink                                |  35 kB     00:00     
google-chrome                                            |  951 B     00:00     
updates/18/x86_64/metalink                               |  30 kB     00:00     
updates                                                  | 4.7 kB     00:00     
updates/primary_db                                         |  10 MB   00:13     
google-chrome/primary                                      | 1.8 kB   00:00     
google-chrome                                                               3/3
Resolving Dependencies
--> Running transaction check
---> Package abrt.x86_64 0:2.1.5-1.fc18 will be updated
---> Package abrt.x86_64 0:2.1.6-3.fc18 will be an update
--> Processing Dependency: satyr >= 0.5 for package: abrt-2.1.6-3.fc18.x86_64
--> Processing Dependency: libsatyr.so.1()(64bit) for package: abrt-2.1.6-3.fc18.x86_64
---> Package abrt-addon-ccpp.x86_64 0:2.1.5-1.fc18 will be updated
---> Package abrt-addon-ccpp.x86_64 0:2.1.6-3.fc18 will be an update
---> Package abrt-addon-kerneloops.x86_64 0:2.1.5-1.fc18 will be updated
---> Package abrt-addon-kerneloops.x86_64 0:2.1.6-3.fc18 will be an update
---> Package abrt-addon-python.x86_64 0:2.1.5-1.fc18 will be updated
---> Package abrt-addon-python.x86_64 0:2.1.6-3.fc18 will be an update
---> Package abrt-addon-uefioops.x86_64 0:2.1.5-1.fc18 will be updated
---> Package abrt-addon-uefioops.x86_64 0:2.1.6-3.fc18 will be an update
---> Package abrt-addon-vmcore.x86_64 0:2.1.5-1.fc18 will be updated
---> Package abrt-addon-vmcore.x86_64 0:2.1.6-3.fc18 will be an update
---> Package abrt-addon-xorg.x86_64 0:2.1.5-1.fc18 will be updated
---> Package abrt-addon-xorg.x86_64 0:2.1.6-3.fc18 will be an update
---> Package abrt-dbus.x86_64 0:2.1.5-1.fc18 will be updated
---> Package abrt-dbus.x86_64 0:2.1.6-3.fc18 will be an update
---> Package abrt-desktop.x86_64 0:2.1.5-1.fc18 will be updated
---> Package abrt-desktop.x86_64 0:2.1.6-3.fc18 will be an update
---> Package abrt-gui.x86_64 0:2.1.5-1.fc18 will be updated
---> Package abrt-gui.x86_64 0:2.1.6-3.fc18 will be an update
---> Package abrt-libs.x86_64 0:2.1.5-1.fc18 will be updated
---> Package abrt-libs.x86_64 0:2.1.6-3.fc18 will be an update
---> Package abrt-plugin-bodhi.x86_64 0:2.1.5-1.fc18 will be updated
---> Package abrt-plugin-bodhi.x86_64 0:2.1.6-3.fc18 will be an update
---> Package abrt-retrace-client.x86_64 0:2.1.5-1.fc18 will be updated
---> Package abrt-retrace-client.x86_64 0:2.1.6-3.fc18 will be an update
---> Package gnome-abrt.x86_64 0:0.2.12-2.fc18 will be updated
---> Package gnome-abrt.x86_64 0:0.3.0-2.fc18 will be an update
---> Package kernel.x86_64 0:3.10.9-100.fc18 will be installed
---> Package kernel-headers.x86_64 0:3.10.7-100.fc18 will be updated
---> Package kernel-headers.x86_64 0:3.10.9-100.fc18 will be an update
---> Package kernel-modules-extra.x86_64 0:3.10.9-100.fc18 will be installed
---> Package libreport.x86_64 0:2.1.5-1.fc18 will be updated
---> Package libreport.x86_64 0:2.1.6-2.fc18 will be an update
---> Package libreport-fedora.x86_64 0:2.1.5-1.fc18 will be updated
---> Package libreport-fedora.x86_64 0:2.1.6-2.fc18 will be an update
---> Package libreport-filesystem.x86_64 0:2.1.5-1.fc18 will be updated
---> Package libreport-filesystem.x86_64 0:2.1.6-2.fc18 will be an update
---> Package libreport-gtk.x86_64 0:2.1.5-1.fc18 will be updated
---> Package libreport-gtk.x86_64 0:2.1.6-2.fc18 will be an update
--> Processing Dependency: fros >= 1.0 for package: libreport-gtk-2.1.6-2.fc18.x86_64
---> Package libreport-newt.x86_64 0:2.1.5-1.fc18 will be updated
---> Package libreport-newt.x86_64 0:2.1.6-2.fc18 will be an update
---> Package libreport-plugin-bugzilla.x86_64 0:2.1.5-1.fc18 will be updated
---> Package libreport-plugin-bugzilla.x86_64 0:2.1.6-2.fc18 will be an update
---> Package libreport-plugin-kerneloops.x86_64 0:2.1.5-1.fc18 will be updated
---> Package libreport-plugin-kerneloops.x86_64 0:2.1.6-2.fc18 will be an update
---> Package libreport-plugin-logger.x86_64 0:2.1.5-1.fc18 will be updated
---> Package libreport-plugin-logger.x86_64 0:2.1.6-2.fc18 will be an update
---> Package libreport-plugin-reportuploader.x86_64 0:2.1.5-1.fc18 will be updated
---> Package libreport-plugin-reportuploader.x86_64 0:2.1.6-2.fc18 will be an update
---> Package libreport-plugin-ureport.x86_64 0:2.1.5-1.fc18 will be updated
---> Package libreport-plugin-ureport.x86_64 0:2.1.6-2.fc18 will be an update
---> Package libreport-python.x86_64 0:2.1.5-1.fc18 will be updated
---> Package libreport-python.x86_64 0:2.1.6-2.fc18 will be an update
---> Package libreport-web.x86_64 0:2.1.5-1.fc18 will be updated
---> Package libreport-web.x86_64 0:2.1.6-2.fc18 will be an update
--> Running transaction check
---> Package fros.noarch 0:1.0-1.fc18 will be installed
---> Package satyr.x86_64 0:0.5-2.fc18 will be installed
--> Finished Dependency Resolution
--> Running transaction check
---> Package kernel.x86_64 0:3.9.11-200.fc18 will be erased
---> Package kernel-modules-extra.x86_64 0:3.9.11-200.fc18 will be erased
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package                           Arch     Version            Repository  Size
================================================================================
Installing:
 kernel                            x86_64   3.10.9-100.fc18    updates     29 M
 kernel-modules-extra              x86_64   3.10.9-100.fc18    updates    2.1 M
Updating:
 abrt                              x86_64   2.1.6-3.fc18       updates    353 k
 abrt-addon-ccpp                   x86_64   2.1.6-3.fc18       updates    175 k
 abrt-addon-kerneloops             x86_64   2.1.6-3.fc18       updates     87 k
 abrt-addon-python                 x86_64   2.1.6-3.fc18       updates     84 k
 abrt-addon-uefioops               x86_64   2.1.6-3.fc18       updates     79 k
 abrt-addon-vmcore                 x86_64   2.1.6-3.fc18       updates     84 k
 abrt-addon-xorg                   x86_64   2.1.6-3.fc18       updates     80 k
 abrt-dbus                         x86_64   2.1.6-3.fc18       updates     91 k
 abrt-desktop                      x86_64   2.1.6-3.fc18       updates     71 k
 abrt-gui                          x86_64   2.1.6-3.fc18       updates    171 k
 abrt-libs                         x86_64   2.1.6-3.fc18       updates     91 k
 abrt-plugin-bodhi                 x86_64   2.1.6-3.fc18       updates     79 k
 abrt-retrace-client               x86_64   2.1.6-3.fc18       updates    104 k
 gnome-abrt                        x86_64   0.3.0-2.fc18       updates    196 k
 kernel-headers                    x86_64   3.10.9-100.fc18    updates    875 k
 libreport                         x86_64   2.1.6-2.fc18       updates    309 k
 libreport-fedora                  x86_64   2.1.6-2.fc18       updates     30 k
 libreport-filesystem              x86_64   2.1.6-2.fc18       updates     27 k
 libreport-gtk                     x86_64   2.1.6-2.fc18       updates     81 k
 libreport-newt                    x86_64   2.1.6-2.fc18       updates     35 k
 libreport-plugin-bugzilla         x86_64   2.1.6-2.fc18       updates     64 k
 libreport-plugin-kerneloops       x86_64   2.1.6-2.fc18       updates     37 k
 libreport-plugin-logger           x86_64   2.1.6-2.fc18       updates     40 k
 libreport-plugin-reportuploader   x86_64   2.1.6-2.fc18       updates     42 k
 libreport-plugin-ureport          x86_64   2.1.6-2.fc18       updates     39 k
 libreport-python                  x86_64   2.1.6-2.fc18       updates     54 k
 libreport-web                     x86_64   2.1.6-2.fc18       updates     37 k
Removing:
 kernel                            x86_64   3.9.11-200.fc18    @updates   124 M
 kernel-modules-extra              x86_64   3.9.11-200.fc18    @updates   8.4 M
Installing for dependencies:
 fros                              noarch   1.0-1.fc18         updates     22 k
 satyr                             x86_64   0.5-2.fc18         updates    474 k

Transaction Summary
================================================================================
Install   2 Packages (+2 Dependent packages)
Upgrade  27 Packages
Remove    2 Packages

Total download size: 35 M
Is this ok [y/N]: y
Downloading Packages:
Setting up and reading Presto delta metadata
updates/prestodelta                                      | 2.4 MB     00:03     
Processing delta metadata
Download delta size: 8.2 M
(1/20): abrt-addon-python-2.1.5-1.fc18_2.1.6-3.fc18.x86_64 |  79 kB   00:00     
(2/20): abrt-addon-vmcore-2.1.5-1.fc18_2.1.6-3.fc18.x86_64 |  76 kB   00:00     
(3/20): abrt-addon-ccpp-2.1.5-1.fc18_2.1.6-3.fc18.x86_64.d | 132 kB   00:00     
(4/20): abrt-2.1.5-1.fc18_2.1.6-3.fc18.x86_64.drpm         | 133 kB   00:01     
(5/20): abrt-gui-2.1.5-1.fc18_2.1.6-3.fc18.x86_64.drpm     |  98 kB   00:00     
(6/20): abrt-libs-2.1.5-1.fc18_2.1.6-3.fc18.x86_64.drpm    |  82 kB   00:00     
(7/20): abrt-retrace-client-2.1.5-1.fc18_2.1.6-3.fc18.x86_ |  89 kB   00:00     
(8/20): gnome-abrt-0.2.12-2.fc18_0.3.0-2.fc18.x86_64.drpm  |  69 kB   00:00     
(9/20): abrt-dbus-2.1.5-1.fc18_2.1.6-3.fc18.x86_64.drpm    |  85 kB   00:01     
(10/20): libreport-2.1.5-1.fc18_2.1.6-2.fc18.x86_64.drpm   |  59 kB   00:00     
(11/20): libreport-gtk-2.1.5-1.fc18_2.1.6-2.fc18.x86_64.dr |  71 kB   00:00     
(12/20): libreport-plugin-kerneloops-2.1.5-1.fc18_2.1.6-2. |  34 kB   00:00     
(13/20): kernel-headers-3.10.7-100.fc18_3.10.9-100.fc18.x8 | 132 kB   00:00     
(14/20): libreport-plugin-logger-2.1.5-1.fc18_2.1.6-2.fc18 |  36 kB   00:00     
(15/20): libreport-plugin-reportuploader-2.1.5-1.fc18_2.1. |  36 kB   00:00     
(16/20): libreport-web-2.1.5-1.fc18_2.1.6-2.fc18.x86_64.dr |  32 kB   00:00     
(17/20): libreport-plugin-ureport-2.1.5-1.fc18_2.1.6-2.fc1 |  36 kB   00:00     
(18/20): libreport-python-2.1.5-1.fc18_2.1.6-2.fc18.x86_64 |  36 kB   00:00     
(19/20): libreport-plugin-bugzilla-2.1.5-1.fc18_2.1.6-2.fc |  57 kB   00:02     
(20/20): kernel-3.10.7-100.fc18_3.10.9-100.fc18.x86_64.drp | 6.9 MB   00:37     
Finishing rebuild of rpms, from deltarpms
<locally rebuilding deltarpms>                           |  32 MB     00:24     
Presto reduced the update size by 75% (from 32 M to 8.2 M).
Package(s) data still to download: 489 k
(1/11): abrt-desktop-2.1.6-3.fc18.x86_64.rpm               |  71 kB   00:00     
(2/11): abrt-addon-uefioops-2.1.6-3.fc18.x86_64.rpm        |  79 kB   00:00     
(3/11): fros-1.0-1.fc18.noarch.rpm                         |  22 kB   00:00     
(4/11): abrt-addon-xorg-2.1.6-3.fc18.x86_64.rpm            |  80 kB   00:00     
(5/11): abrt-plugin-bodhi-2.1.6-3.fc18.x86_64.rpm          |  79 kB   00:00     
(6/11): libreport-filesystem-2.1.6-2.fc18.x86_64.rpm       |  27 kB   00:00     
(7/11): abrt-addon-kerneloops-2.1.6-3.fc18.x86_64.rpm      |  87 kB   00:01     
(8/11): libreport-fedora-2.1.6-2.fc18.x86_64.rpm           |  30 kB   00:00     
(9/11): libreport-newt-2.1.6-2.fc18.x86_64.rpm             |  35 kB   00:01     
(10/11): satyr-0.5-2.fc18.x86_64.rpm                       | 474 kB   00:01     
(11/11): kernel-modules-extra-3.10.9-100.fc18.x86_64.rpm   | 2.1 MB   00:03     
--------------------------------------------------------------------------------
Total                                           711 kB/s | 3.0 MB     00:04     
Running Transaction Check
Running Transaction Test
Transaction Test Succeeded
Running Transaction
  Installing : satyr-0.5-2.fc18.x86_64                                     1/60 
  Installing : fros-1.0-1.fc18.noarch                                      2/60 
  Updating   : libreport-filesystem-2.1.6-2.fc18.x86_64                    3/60 
  Updating   : libreport-python-2.1.6-2.fc18.x86_64                        4/60 
  Updating   : libreport-2.1.6-2.fc18.x86_64                               5/60 
  Updating   : abrt-libs-2.1.6-3.fc18.x86_64                               6/60 
  Updating   : abrt-2.1.6-3.fc18.x86_64                                    7/60 
  Updating   : libreport-web-2.1.6-2.fc18.x86_64                           8/60 
  Updating   : abrt-retrace-client-2.1.6-3.fc18.x86_64                     9/60 
  Updating   : abrt-addon-ccpp-2.1.6-3.fc18.x86_64                        10/60 
  Updating   : libreport-plugin-ureport-2.1.6-2.fc18.x86_64               11/60 
  Updating   : libreport-plugin-bugzilla-2.1.6-2.fc18.x86_64              12/60 
  Updating   : libreport-plugin-reportuploader-2.1.6-2.fc18.x86_64        13/60 
  Updating   : libreport-gtk-2.1.6-2.fc18.x86_64                          14/60 
  Updating   : gnome-abrt-0.3.0-2.fc18.x86_64                             15/60 
  Updating   : libreport-plugin-kerneloops-2.1.6-2.fc18.x86_64            16/60 
  Updating   : abrt-addon-kerneloops-2.1.6-3.fc18.x86_64                  17/60 
  Updating   : abrt-addon-uefioops-2.1.6-3.fc18.x86_64                    18/60 
  Updating   : abrt-addon-vmcore-2.1.6-3.fc18.x86_64                      19/60 
  Updating   : abrt-plugin-bodhi-2.1.6-3.fc18.x86_64                      20/60 
  Updating   : abrt-addon-xorg-2.1.6-3.fc18.x86_64                        21/60 
  Updating   : abrt-addon-python-2.1.6-3.fc18.x86_64                      22/60 
  Updating   : abrt-dbus-2.1.6-3.fc18.x86_64                              23/60 
  Updating   : abrt-gui-2.1.6-3.fc18.x86_64                               24/60 
  Updating   : libreport-plugin-logger-2.1.6-2.fc18.x86_64                25/60 
  Updating   : libreport-fedora-2.1.6-2.fc18.x86_64                       26/60 
  Installing : kernel-3.10.9-100.fc18.x86_64                              27/60 
  Installing : kernel-modules-extra-3.10.9-100.fc18.x86_64                28/60 
  Updating   : abrt-desktop-2.1.6-3.fc18.x86_64                           29/60 
  Updating   : libreport-newt-2.1.6-2.fc18.x86_64                         30/60 
  Updating   : kernel-headers-3.10.9-100.fc18.x86_64                      31/60 
  Cleanup    : abrt-desktop-2.1.5-1.fc18.x86_64                           32/60 
  Cleanup    : abrt-addon-vmcore-2.1.5-1.fc18.x86_64                      33/60 
  Cleanup    : kernel-modules-extra-3.9.11-200.fc18.x86_64                34/60 
  Cleanup    : abrt-gui-2.1.5-1.fc18.x86_64                               35/60 
  Cleanup    : abrt-addon-ccpp-2.1.5-1.fc18.x86_64                        36/60 
  Cleanup    : abrt-addon-uefioops-2.1.5-1.fc18.x86_64                    37/60 
  Cleanup    : abrt-addon-kerneloops-2.1.5-1.fc18.x86_64                  38/60 
  Cleanup    : libreport-plugin-kerneloops-2.1.5-1.fc18.x86_64            39/60 
  Cleanup    : abrt-dbus-2.1.5-1.fc18.x86_64                              40/60 
  Cleanup    : abrt-addon-xorg-2.1.5-1.fc18.x86_64                        41/60 
  Cleanup    : abrt-plugin-bodhi-2.1.5-1.fc18.x86_64                      42/60 
  Cleanup    : libreport-plugin-bugzilla-2.1.5-1.fc18.x86_64              43/60 
  Cleanup    : libreport-plugin-ureport-2.1.5-1.fc18.x86_64               44/60 
  Cleanup    : abrt-retrace-client-2.1.5-1.fc18.x86_64                    45/60 
  Cleanup    : gnome-abrt-0.2.12-2.fc18.x86_64                            46/60 
  Cleanup    : libreport-gtk-2.1.5-1.fc18.x86_64                          47/60 
  Cleanup    : libreport-plugin-reportuploader-2.1.5-1.fc18.x86_64        48/60 
  Cleanup    : abrt-addon-python-2.1.5-1.fc18.x86_64                      49/60 
  Cleanup    : abrt-2.1.5-1.fc18.x86_64                                   50/60 
  Cleanup    : abrt-libs-2.1.5-1.fc18.x86_64                              51/60 
  Cleanup    : libreport-web-2.1.5-1.fc18.x86_64                          52/60 
  Cleanup    : libreport-plugin-logger-2.1.5-1.fc18.x86_64                53/60 
  Cleanup    : libreport-newt-2.1.5-1.fc18.x86_64                         54/60 
  Cleanup    : kernel-3.9.11-200.fc18.x86_64                              55/60 
  Cleanup    : libreport-fedora-2.1.5-1.fc18.x86_64                       56/60 
  Cleanup    : kernel-headers-3.10.7-100.fc18.x86_64                      57/60 
  Cleanup    : libreport-python-2.1.5-1.fc18.x86_64                       58/60 
  Cleanup    : libreport-2.1.5-1.fc18.x86_64                              59/60 
  Cleanup    : libreport-filesystem-2.1.5-1.fc18.x86_64                   60/60 
  Verifying  : gnome-abrt-0.3.0-2.fc18.x86_64                              1/60 
  Verifying  : satyr-0.5-2.fc18.x86_64                                     2/60 
  Verifying  : abrt-2.1.6-3.fc18.x86_64                                    3/60 
  Verifying  : abrt-retrace-client-2.1.6-3.fc18.x86_64                     4/60 
  Verifying  : libreport-plugin-ureport-2.1.6-2.fc18.x86_64                5/60 
  Verifying  : abrt-addon-xorg-2.1.6-3.fc18.x86_64                         6/60 
  Verifying  : libreport-web-2.1.6-2.fc18.x86_64                           7/60 
  Verifying  : abrt-libs-2.1.6-3.fc18.x86_64                               8/60 
  Verifying  : libreport-plugin-bugzilla-2.1.6-2.fc18.x86_64               9/60 
  Verifying  : libreport-filesystem-2.1.6-2.fc18.x86_64                   10/60 
  Verifying  : libreport-gtk-2.1.6-2.fc18.x86_64                          11/60 
  Verifying  : libreport-python-2.1.6-2.fc18.x86_64                       12/60 
  Verifying  : libreport-plugin-logger-2.1.6-2.fc18.x86_64                13/60 
  Verifying  : kernel-3.10.9-100.fc18.x86_64                              14/60 
  Verifying  : libreport-2.1.6-2.fc18.x86_64                              15/60 
  Verifying  : abrt-desktop-2.1.6-3.fc18.x86_64                           16/60 
  Verifying  : abrt-addon-python-2.1.6-3.fc18.x86_64                      17/60 
  Verifying  : libreport-plugin-reportuploader-2.1.6-2.fc18.x86_64        18/60 
  Verifying  : libreport-plugin-kerneloops-2.1.6-2.fc18.x86_64            19/60 
  Verifying  : libreport-newt-2.1.6-2.fc18.x86_64                         20/60 
  Verifying  : abrt-addon-uefioops-2.1.6-3.fc18.x86_64                    21/60 
  Verifying  : fros-1.0-1.fc18.noarch                                     22/60 
  Verifying  : abrt-dbus-2.1.6-3.fc18.x86_64                              23/60 
  Verifying  : kernel-modules-extra-3.10.9-100.fc18.x86_64                24/60 
  Verifying  : libreport-fedora-2.1.6-2.fc18.x86_64                       25/60 
  Verifying  : abrt-plugin-bodhi-2.1.6-3.fc18.x86_64                      26/60 
  Verifying  : abrt-addon-kerneloops-2.1.6-3.fc18.x86_64                  27/60 
  Verifying  : abrt-addon-ccpp-2.1.6-3.fc18.x86_64                        28/60 
  Verifying  : abrt-addon-vmcore-2.1.6-3.fc18.x86_64                      29/60 
  Verifying  : kernel-headers-3.10.9-100.fc18.x86_64                      30/60 
  Verifying  : abrt-gui-2.1.6-3.fc18.x86_64                               31/60 
  Verifying  : gnome-abrt-0.2.12-2.fc18.x86_64                            32/60 
  Verifying  : libreport-fedora-2.1.5-1.fc18.x86_64                       33/60 
  Verifying  : abrt-gui-2.1.5-1.fc18.x86_64                               34/60 
  Verifying  : abrt-retrace-client-2.1.5-1.fc18.x86_64                    35/60 
  Verifying  : abrt-dbus-2.1.5-1.fc18.x86_64                              36/60 
  Verifying  : kernel-headers-3.10.7-100.fc18.x86_64                      37/60 
  Verifying  : libreport-plugin-logger-2.1.5-1.fc18.x86_64                38/60 
  Verifying  : abrt-plugin-bodhi-2.1.5-1.fc18.x86_64                      39/60 
  Verifying  : abrt-addon-uefioops-2.1.5-1.fc18.x86_64                    40/60 
  Verifying  : libreport-2.1.5-1.fc18.x86_64                              41/60 
  Verifying  : libreport-plugin-reportuploader-2.1.5-1.fc18.x86_64        42/60 
  Verifying  : abrt-addon-vmcore-2.1.5-1.fc18.x86_64                      43/60 
  Verifying  : libreport-newt-2.1.5-1.fc18.x86_64                         44/60 
  Verifying  : kernel-modules-extra-3.9.11-200.fc18.x86_64                45/60 
  Verifying  : libreport-web-2.1.5-1.fc18.x86_64                          46/60 
  Verifying  : libreport-python-2.1.5-1.fc18.x86_64                       47/60 
  Verifying  : abrt-addon-ccpp-2.1.5-1.fc18.x86_64                        48/60 
  Verifying  : abrt-2.1.5-1.fc18.x86_64                                   49/60 
  Verifying  : abrt-addon-xorg-2.1.5-1.fc18.x86_64                        50/60 
  Verifying  : abrt-addon-python-2.1.5-1.fc18.x86_64                      51/60 
  Verifying  : libreport-filesystem-2.1.5-1.fc18.x86_64                   52/60 
  Verifying  : libreport-plugin-bugzilla-2.1.5-1.fc18.x86_64              53/60 
  Verifying  : abrt-libs-2.1.5-1.fc18.x86_64                              54/60 
  Verifying  : abrt-desktop-2.1.5-1.fc18.x86_64                           55/60 
  Verifying  : libreport-plugin-kerneloops-2.1.5-1.fc18.x86_64            56/60 
  Verifying  : libreport-gtk-2.1.5-1.fc18.x86_64                          57/60 
  Verifying  : libreport-plugin-ureport-2.1.5-1.fc18.x86_64               58/60 
  Verifying  : kernel-3.9.11-200.fc18.x86_64                              59/60 
  Verifying  : abrt-addon-kerneloops-2.1.5-1.fc18.x86_64                  60/60 

Removed:
  kernel.x86_64 0:3.9.11-200.fc18 kernel-modules-extra.x86_64 0:3.9.11-200.fc18

Installed:
  kernel.x86_64 0:3.10.9-100.fc18 kernel-modules-extra.x86_64 0:3.10.9-100.fc18

Dependency Installed:
  fros.noarch 0:1.0-1.fc18               satyr.x86_64 0:0.5-2.fc18              

Updated:
  abrt.x86_64 0:2.1.6-3.fc18                                                    
  abrt-addon-ccpp.x86_64 0:2.1.6-3.fc18                                         
  abrt-addon-kerneloops.x86_64 0:2.1.6-3.fc18                                   
  abrt-addon-python.x86_64 0:2.1.6-3.fc18                                       
  abrt-addon-uefioops.x86_64 0:2.1.6-3.fc18                                     
  abrt-addon-vmcore.x86_64 0:2.1.6-3.fc18                                       
  abrt-addon-xorg.x86_64 0:2.1.6-3.fc18                                         
  abrt-dbus.x86_64 0:2.1.6-3.fc18                                               
  abrt-desktop.x86_64 0:2.1.6-3.fc18                                            
  abrt-gui.x86_64 0:2.1.6-3.fc18                                                
  abrt-libs.x86_64 0:2.1.6-3.fc18                                               
  abrt-plugin-bodhi.x86_64 0:2.1.6-3.fc18                                       
  abrt-retrace-client.x86_64 0:2.1.6-3.fc18                                     
  gnome-abrt.x86_64 0:0.3.0-2.fc18                                              
  kernel-headers.x86_64 0:3.10.9-100.fc18                                       
  libreport.x86_64 0:2.1.6-2.fc18                                               
  libreport-fedora.x86_64 0:2.1.6-2.fc18                                        
  libreport-filesystem.x86_64 0:2.1.6-2.fc18                                    
  libreport-gtk.x86_64 0:2.1.6-2.fc18                                           
  libreport-newt.x86_64 0:2.1.6-2.fc18                                          
  libreport-plugin-bugzilla.x86_64 0:2.1.6-2.fc18                               
  libreport-plugin-kerneloops.x86_64 0:2.1.6-2.fc18                             
  libreport-plugin-logger.x86_64 0:2.1.6-2.fc18                                 
  libreport-plugin-reportuploader.x86_64 0:2.1.6-2.fc18                         
  libreport-plugin-ureport.x86_64 0:2.1.6-2.fc18                                
  libreport-python.x86_64 0:2.1.6-2.fc18                                        
  libreport-web.x86_64 0:2.1.6-2.fc18                                           

Complete!
[root@localhost ~]# 

/current kernel	,
[eric@localhost ~]$ uname  -r
3.10.9-100.fc18.x86_64

[eric@localhost ~]$ ll /boot/vmlinuz-3.10.
vmlinuz-3.10.6-100.fc18.x86_64  vmlinuz-3.10.9-100.fc18.x86_64
vmlinuz-3.10.7-100.fc18.x86_64  

[root@localhost ~]# less /boot/grub2/grub.cfg 
...





/ Einde FEDORA

/ FEDORA UPDATE

/ 28 oct 2013

================================================================================
 Package                         Arch   Version             Repository     Size
================================================================================
Installing:
 abrt-addon-pstoreoops           x86_64 2.1.7-1.fc18        updates        84 k
     replacing  abrt-addon-uefioops.x86_64 2.1.6-3.fc18
 kernel                          x86_64 3.11.4-101.fc18     updates        30 M
 kernel-modules-extra            x86_64 3.11.4-101.fc18     updates       2.1 M
 qpid-cpp-client                 x86_64 0.24-3.fc18.1       updates       1.1 M
     replacing  qpid-cpp-client-ssl.x86_64 0.22-2.fc18
Updating:
 abrt                            x86_64 2.1.7-1.fc18        updates       360 k
 abrt-addon-ccpp                 x86_64 2.1.7-1.fc18        updates       181 k
 abrt-addon-kerneloops           x86_64 2.1.7-1.fc18        updates        91 k
 abrt-addon-python               x86_64 2.1.7-1.fc18        updates        88 k
 abrt-addon-vmcore               x86_64 2.1.7-1.fc18        updates        89 k
 abrt-addon-xorg                 x86_64 2.1.7-1.fc18        updates        84 k
 abrt-dbus                       x86_64 2.1.7-1.fc18        updates        95 k
 abrt-desktop                    x86_64 2.1.7-1.fc18        updates        75 k
 abrt-gui                        x86_64 2.1.7-1.fc18        updates       176 k
 abrt-libs                       x86_64 2.1.7-1.fc18        updates        92 k
 abrt-plugin-bodhi               x86_64 2.1.7-1.fc18        updates        83 k
 abrt-retrace-client             x86_64 2.1.7-1.fc18        updates       108 k
 colord                          x86_64 0.1.34-1.fc18       updates       342 k
 colord-libs                     x86_64 0.1.34-1.fc18       updates       138 k
 dnsmasq                         x86_64 2.65-8.fc18         updates       211 k
 dnsmasq-utils                   x86_64 2.65-8.fc18         updates        20 k
 dracut                          x86_64 029-1.fc18.2        updates       259 k
 euca2ools                       noarch 2.1.4-1.fc18        updates       319 k
 firefox                         x86_64 24.0-1.fc18         updates        27 M
 freetype                        x86_64 2.4.10-5.fc18       updates       380 k
 gdisk                           x86_64 0.8.7-2.fc18        updates       186 k
 glusterfs                       x86_64 3.4.1-1.fc18        updates       854 k
 glusterfs-fuse                  x86_64 3.4.1-1.fc18        updates        92 k
 glusterfs-libs                  x86_64 3.4.1-1.fc18        updates       227 k
 gnome-abrt                      x86_64 0.3.1-1.fc18        updates       198 k
 gnupg2                          x86_64 2.0.22-1.fc18       updates       1.5 M
 google-chrome-stable            x86_64 30.0.1599.114-1     google-chrome  54 M
 gstreamer1                      x86_64 1.0.10-1.fc18       updates       910 k
 gstreamer1-plugins-bad-free     x86_64 1.0.10-1.fc18       updates       820 k
 gstreamer1-plugins-base         x86_64 1.0.10-1.fc18       updates       1.2 M
 gstreamer1-plugins-good         x86_64 1.0.10-1.fc18       updates       1.6 M
 hpijs                           x86_64 1:3.13.9-2.fc18     updates       4.7 M
 hplip                           x86_64 3.13.9-2.fc18       updates       6.0 M
 hplip-common                    x86_64 3.13.9-2.fc18       updates        85 k
 hplip-libs                      x86_64 3.13.9-2.fc18       updates       165 k
 ibus-typing-booster             noarch 1.2.5-1.fc18        updates       128 k
 icedtea-web                     x86_64 1.4.1-0.fc18        updates       916 k
 java-1.7.0-openjdk              x86_64 1:1.7.0.60-2.4.3.0.fc18
                                                            updates        25 M
 kernel-headers                  x86_64 3.11.4-101.fc18     updates       881 k
 libdrm                          x86_64 2.4.46-1.fc18       updates       115 k
 libgpg-error                    x86_64 1.11-1.fc18         updates        86 k
 libguestfs                      x86_64 1:1.20.12-1.fc18    updates       1.8 M
 libguestfs-tools-c              x86_64 1:1.20.12-1.fc18    updates       1.3 M
 libicu                          x86_64 49.1.1-12.fc18      updates       5.4 M
 libreport                       x86_64 2.1.7-1.fc18        updates       331 k
 libreport-fedora                x86_64 2.1.7-1.fc18        updates        31 k
 libreport-filesystem            x86_64 2.1.7-1.fc18        updates        29 k
 libreport-gtk                   x86_64 2.1.7-1.fc18        updates        80 k
 libreport-newt                  x86_64 2.1.7-1.fc18        updates        37 k
 libreport-plugin-bugzilla       x86_64 2.1.7-1.fc18        updates        67 k
 libreport-plugin-kerneloops     x86_64 2.1.7-1.fc18        updates        37 k
 libreport-plugin-logger         x86_64 2.1.7-1.fc18        updates        39 k
 libreport-plugin-reportuploader x86_64 2.1.7-1.fc18        updates        41 k
 libreport-plugin-ureport        x86_64 2.1.7-1.fc18        updates        39 k
 libreport-python                x86_64 2.1.7-1.fc18        updates        57 k
 libreport-web                   x86_64 2.1.7-1.fc18        updates        38 k
 libsane-hpaio                   x86_64 3.13.9-2.fc18       updates       102 k
 libtar                          x86_64 1.2.11-25.fc18      updates        32 k
 libvirt                         x86_64 0.10.2.8-1.fc18     updates        34 k
 libvirt-client                  x86_64 0.10.2.8-1.fc18     updates       4.0 M
 libvirt-daemon                  x86_64 0.10.2.8-1.fc18     updates       1.8 M
 libvirt-daemon-config-network   x86_64 0.10.2.8-1.fc18     updates        33 k
 libvirt-daemon-config-nwfilter  x86_64 0.10.2.8-1.fc18     updates        37 k
 libvirt-daemon-driver-interface x86_64 0.10.2.8-1.fc18     updates        60 k
 libvirt-daemon-driver-libxl     x86_64 0.10.2.8-1.fc18     updates       104 k
 libvirt-daemon-driver-lxc       x86_64 0.10.2.8-1.fc18     updates        93 k
 libvirt-daemon-driver-network   x86_64 0.10.2.8-1.fc18     updates        76 k
 libvirt-daemon-driver-nodedev   x86_64 0.10.2.8-1.fc18     updates        67 k
 libvirt-daemon-driver-nwfilter  x86_64 0.10.2.8-1.fc18     updates        91 k
 libvirt-daemon-driver-qemu      x86_64 0.10.2.8-1.fc18     updates       326 k
 libvirt-daemon-driver-secret    x86_64 0.10.2.8-1.fc18     updates        61 k
 libvirt-daemon-driver-storage   x86_64 0.10.2.8-1.fc18     updates       102 k
 libvirt-daemon-driver-uml       x86_64 0.10.2.8-1.fc18     updates        72 k
 libvirt-daemon-driver-xen       x86_64 0.10.2.8-1.fc18     updates       114 k
 libvirt-daemon-kvm              x86_64 0.10.2.8-1.fc18     updates        33 k
 libvirt-daemon-qemu             x86_64 0.10.2.8-1.fc18     updates        33 k
 libvirt-python                  x86_64 0.10.2.8-1.fc18     updates       356 k
 livecd-tools                    x86_64 1:18.17-1.fc18      updates        77 k
 microcode_ctl                   x86_64 2:2.0-5.fc18        updates       467 k
 mongo-10gen                     x86_64 2.4.7-mongodb_1     10gen          72 M
 mongo-10gen-server              x86_64 2.4.7-mongodb_1     10gen          12 M
 nspr                            x86_64 4.10.1-1.fc18       updates       121 k
 nss                             x86_64 3.15.2-1.fc18       updates       842 k
 nss-softokn                     x86_64 3.15.2-1.fc18       updates       293 k
 nss-softokn-freebl              x86_64 3.15.2-1.fc18       updates       159 k
 nss-sysinit                     x86_64 3.15.2-1.fc18       updates        43 k
 nss-tools                       x86_64 3.15.2-1.fc18       updates       465 k
 nss-util                        x86_64 3.15.2-1.fc18       updates        68 k
 opencv                          x86_64 2.4.6.1-1.fc18      updates       3.9 M
 opencv-core                     x86_64 2.4.6.1-1.fc18      updates       1.7 M
 openssl                         x86_64 1:1.0.1e-28.fc18    updates       699 k
 openssl-devel                   x86_64 1:1.0.1e-28.fc18    updates       1.1 M
 openssl-libs                    x86_64 1:1.0.1e-28.fc18    updates       904 k
 perl-threads                    x86_64 1.89-1.fc18         updates        49 k
 php                             x86_64 5.4.20-1.fc18       updates       2.7 M
 php-cli                         x86_64 5.4.20-1.fc18       updates       2.7 M
 php-common                      x86_64 5.4.20-1.fc18       updates       871 k
 php-mysql                       x86_64 5.4.20-1.fc18       updates       142 k
 php-pdo                         x86_64 5.4.20-1.fc18       updates       131 k
 python-boto                     noarch 2.13.3-1.fc18       updates       1.4 M
 python-crypto                   x86_64 2.6.1-1.fc18        updates       470 k
 python-cups                     x86_64 1.9.63-1.fc18       updates        74 k
 python-imgcreate                x86_64 1:18.17-1.fc18      updates        99 k
 python-qpid                     noarch 0.24-1.fc18         updates       240 k
 qpid-cpp-client-rdma            x86_64 0.24-3.fc18.1       updates        95 k
 qpid-cpp-server                 x86_64 0.24-3.fc18.1       updates       1.8 M
 qt                              x86_64 1:4.8.5-10.fc18     updates       4.5 M
 qt-qdbusviewer                  x86_64 1:4.8.5-10.fc18     updates        57 k
 qt-x11                          x86_64 1:4.8.5-10.fc18     updates        12 M
 rtkit                           x86_64 0.11-7.fc18         updates        49 k
 ruby-libguestfs                 x86_64 1:1.20.12-1.fc18    updates       199 k
 rubygems                        noarch 1.8.25-8.fc18       updates       175 k
 sane-backends                   x86_64 1.0.23-18.fc18      updates       661 k
 sane-backends-doc               noarch 1.0.23-18.fc18      updates       268 k
 sane-backends-drivers-scanners  x86_64 1.0.23-18.fc18      updates       2.2 M
 sane-backends-libs              x86_64 1.0.23-18.fc18      updates        92 k
 satyr                           x86_64 0.9-1.fc18          updates       477 k
 selinux-policy                  noarch 3.11.1-106.fc18     updates       252 k
 selinux-policy-devel            noarch 3.11.1-106.fc18     updates       1.8 M
 selinux-policy-doc              noarch 3.11.1-106.fc18     updates       906 k
 selinux-policy-targeted         noarch 3.11.1-106.fc18     updates       3.9 M
 telepathy-gabble                x86_64 0.16.7-1.fc18       updates       625 k
 tzdata                          noarch 2013g-1.fc18        updates       444 k
 tzdata-java                     noarch 2013g-1.fc18        updates       155 k
 xdg-utils                       noarch 1.1.0-0.18.20131005git.fc18
                                                            updates        71 k
 xen-libs                        x86_64 4.2.3-4.fc18        updates       417 k
 xen-licenses                    x86_64 4.2.3-4.fc18        updates        78 k
 xulrunner                       x86_64 24.0-2.fc18         updates        22 M
Removing:
 kernel                          x86_64 3.10.10-100.fc18    @updates      126 M
 kernel-modules-extra            x86_64 3.10.10-100.fc18    @updates      8.3 M
Installing for dependencies:
 abrt-gui-libs                   x86_64 2.1.7-1.fc18        updates        84 k
 dracut-network                  x86_64 029-1.fc18.2        updates        62 k
 kexec-tools                     x86_64 2.0.3-64.fc18.2     updates       287 k
 libdb4-cxx                      x86_64 4.8.30-5.fc18       fedora        610 k
 python-qpid-common              noarch 0.24-1.fc18         updates       202 k
 qpid-proton-c                   x86_64 0.5-2.fc18          updates       115 k

Transaction Summary
================================================================================
Install    4 Packages (+6 Dependent packages)
Upgrade  128 Packages
Remove     2 Packages

Total size: 337 M
Total download size: 45 M

depmod: WARNING: /lib/modules/3.11.4-101.fc18.x86_64/kernel/drivers/char/crash.ko needs unknown symbol page_is_ram

 


/ Einde FEDORA UPDATE

/ UNICODE

/ 7	.

[eric@localhost ~]$ od -t x1 <(iconv -f utf8  -t iso-8859-1 <(echo  "é") )
0000000 e9 0a
/ OK

[eric@localhost ~]$ iconv -f utf8  -t iso-8859-1 <(echo  "é")
/ lege regel	, want ... kan alleen utf8	, geen latin1	, dus \xe9 snapt hij niet	,

[eric@localhost ~]$ for i in $(awk '{printf gensub(/\/\/$/," ","g")}' <(iconv -l )); do echo "$i";od -t x1 <(iconv -t "$i" -f utf8 <(echo "é")); done

/ let op $(awk ...) ipv <(awk ...), want for wil een string van enc's gescheiden door een space	,

[eric@localhost ~]$ od -t x1 <(iconv -t utf-16be -f utf-8 <(echo "€"))
0000000 20 ac 00 0a

/ we kunnen in php	,

$a=bin2hex(mb_convert_encoding("\x20\xac","utf-8","utf-16be"));
print "$a\n";
$a=bin2hex(iconv("utf-16be","utf-8","\x20\xac"));
print "$a\n";
e282ac
e282ac
/ Dit is utf-8, en dat is wat php kent	,
$a=(mb_convert_encoding("\x20\xac","utf-8","utf-16be"));
print "$a\n";
€
$a=(iconv("utf-16be","utf-8","\x20\xac"));
print "$a\n";
€

/ Einde UNICODE

/ ASM

/ geef in google
randall assembly,
http://www.plantation-productions.com/Webster/
/kies
Art of assembly book,
/kies dos 16bit versie,
/clic hard copy,
http://www.plantation-productions.com/Webster/www.artofasm.com/DOS/HardCopy.html/ click pdf file	,

[eric@localhost pdfaoa]$ pwd
/home/eric/Documents/pdfaoa
[eric@localhost pdfaoa]$ unzip ~/Downloads/pdfaoa.zip 

/ er is ook	,
http://www.plantation-productions.com/Webster/www.artofasm.com/DOS/AoADosIndex.html
/ WH is dit	,
/we hebben ook download	,
-rw-rw-r--. 1 eric eric    1708235 Nov  4 22:30 aoahtml.zip


/ Einde ASM

/ ANDROID

/ 7

/ lees

[eric@localhost Android]$ pwd
/home/eric/Eclipse/Android
[eric@localhost Android]$ unzip ~/Downloads/adt-bundle-linux-x86_64-20131030.zip
[eric@localhost adt-bundle-linux-x86_64-20131030]$ ls
eclipse  sdk
[eric@localhost adt-bundle-linux-x86_64-20131030]$ ls sdk/tools
adb_has_moved.txt  emulator64-arm   hprof-conv    proguard
android            emulator64-mips  jobb          source.properties
ant                emulator64-x86   lib           sqlite3
apps               emulator-arm     lint          support
ddms               emulator-mips    mksdcard      templates
dmtracedump        emulator-x86     monitor       traceview
draw9patch         etc1tool         monkeyrunner  uiautomatorviewer
emulator           hierarchyviewer  NOTICE.txt    zipalign

/ we start eclipse	,

[eric@localhost adt-bundle-linux-x86_64-20131030]$ eclipse/eclipse 

/ workspace
/home/eric/Eclipse/Android/workspacke

/ we zien in eclipse de help page	,
Build your first app	,
http://developer.android.com/training/basics/firstapp/index.html
Design your app,
http://developer.android.com/design/index.html
Test your app	,
http://developer.android.com/tools/testing/testing_android.html

/ 7	.

http://developer.android.com/training/basics/firstapp/index.html

/ Einde ANDROID

/ ECLIPSE PHP

/ Lees	,
http://www.eclipse.org/pdt/downloads/
/ we zien de link	,
/ Download van  
http://www.zend.com/en/company/community/pdt/downloads

[eric@localhost Zend]$ pwd
/home/eric/Eclipse/Zend
[eric@localhost Zend]$ tar -xvzf ~/Downloads/zend-eclipse-php-3.2.0-x86_64.tar.gz 
[eric@localhost Zend]$ zend-eclipse-php/zend-eclipse-php 

/we lezen       ,
http://drupal.org/node/75242
General->Content Types, 
/ select Text->PHP Content type
Add...
*.engine
*.install
*.module
*.profile
*.test
*.theme

/we lezen       ,
http://forums.zend.com/viewtopic.php?f=59&t=12423
/we moeten      ,
[root@peacan conf]# ln -s /usr/lib64/libssl.so /usr/lib64/libssl.so.0.9.8
[root@peacan conf]# ln -s /usr/lib64/libcrypto.so /usr/lib64/libcrypto.so.0.9.8
/ Dit hoeft NIET meer, is al in orde	,

/ Lees	,
http://httpd.apache.org/docs/2.4/upgrading.html

[root@localhost ~]# vi /etc/httpd/conf/httpd.conf 

Listen 80
<VirtualHost *:80>
    DocumentRoot /home/eric/Devel/Web
    ServerName web
</VirtualHost>
<Directory "/home/eric/Devel/Web">
        Require all granted
</Directory>

/ we maken info.php met phpinfo() call in Devel/Web	, 
/ geef in chrome
http://web/info.php
/ OK

/ we save,
http://www.eclipse.org/pdt/documents/XDebugGuideForPDT2.0.pdf

/ window,prefs, PHP, Debug
PHP debugger : XDebug
PHP Exec: PHP Version 5.4.21
/ WH hoeft dit alleen voor debug cli	,
/ TODO
/lees	,
http://stackoverflow.com/questions/16655967/what-is-the-appropriate-sapi-type-to-debug-php-web-applications-when-configuring
/ Help->PDT user guide	,
/ Doe Help, Help contents
Workbench User Guide
PDT User Guide
	Tasks	
		Debugging Files and Applications
			Locally Debugging a PHP Script
			Debugging a PHP Web Page.
/TODO

/ create php project	,
/ in PHP mode	,
file, new , php proj from existing dir
proj name: web
location: /home/eric/Devel/Web
Next
Host: http://
Base path: web
/ probeer uit,
/ TODO 




PHP Server Preference page
PHP or JavaScript Libraries Preferences page
/ TODO

/ Dus GEEN 
NameVirtualHost *:80

/ Lees	,
http://httpd.apache.org/docs/2.4/mod/mod_ssl.html

[root@localhost ~]# yum install mod_ssl
  Installing : 1:mod_ssl-2.4.6-2.fc18.x86_64        

[root@localhost ~]# vi /etc/httpd/conf.d/ssl.conf 
...



/ Einde ECLIPSE PHP

/ XDEBUG

/ we moeten phpize, php-config
/ phpize zit in php-cli	,
/ php-config in php-devel

[root@localhost ~]# yum install php-devel

/ er is een nieuwe versie voor xdebug	,
/ Eig moeten we de oude versie update	,
/ TODO

[eric@localhost Xdebug]$ pwd
/home/eric/Devel/Xdebug
[eric@localhost Xdebug]$ git clone git://github.com/derickr/xdebug.git xdebug-2.2.3

[eric@localhost Xdebug]$ cd xdebug-2.2.3/
[eric@localhost xdebug-2.2.3]$ phpize 
Configuring for:
PHP Api Version:         20100412
Zend Module Api No:      20100525
Zend Extension Api No:   220100525
[eric@localhost xdebug-2.2.3]$ ./configure --enable-xdebug 
[eric@localhost xdebug-2.2.3]$ make
$ make test

[root@localhost xdebug-2.2.3]# make install
Installing shared extensions:     /usr/lib64/php/modules/

  +----------------------------------------------------------------------+
  |                                                                      |
  |   INSTALLATION INSTRUCTIONS                                          |
  |   =========================                                          |
  |                                                                      |
  |   See http://xdebug.org/install.php#configure-php for instructions   |
  |   on how to enable Xdebug for PHP.                                   |
  |                                                                      |
  |   Documentation is available online as well:                         |
  |   - A list of all settings:  http://xdebug.org/docs-settings.php     |
  |   - A list of all functions: http://xdebug.org/docs-functions.php    |
  |   - Profiling instructions:  http://xdebug.org/docs-profiling2.php   |
  |   - Remote debugging:        http://xdebug.org/docs-debugger.php     |
  |                                                                      |
  |                                                                      |
  |   NOTE: Please disregard the message                                 |
  |       You should add "extension=xdebug.so" to php.ini                |
  |   that is emitted by the PECL installer. This does not work for      |
  |   Xdebug.                                                            |
  |                                                                      |
  +----------------------------------------------------------------------+

/ Inderdaad	,
[root@localhost xdebug-2.2.3]# ls /usr/lib64/php/modules/
curl.so        mbstring.so    pdo_mysql.so   phar.so        zip.so
fileinfo.so    mysqli.so      pdo.so         sqlite3.so     
json.so        mysql.so       pdo_sqlite.so  xdebug.so      




/ Einde XDEBUG

/ BACKUP FROM PARA 

/ 7	.

/ we doen op para	,

[eric@localhost Backup]$ pwd
/home/eric/bin/Backup
./backup_dbs.bash

/ we halen ze op	,

[eric@localhost Backup]$ pwd
/home/eric/bin/Backup
[eric@localhost Backup]$ vi import_dbs.bash

#!/bin/bash

src="/home/eric/Backup/Database"

cd "$src"
bash -x \
<(awk '{print "mysql","-u""root","< <(echo \"grant all on "$0".* to "$0"@localhost identified by \\\""$0"\\\"\")"}
    {print "mysql","-u"$0,"-p"$0,"<",src"/"$0".sql"}' src="$src" \
  <(awk '{match($0,/\.\/(.*).sql/,m)}$0=m[1]' \
    <(find -type f)))

$ ./import_dbs.bash
...

/ OK




/ Einde BACKUP FROM PARA

/ DRUPAL APACHE

/ 7	.

/ we zien in ~ .drush/ 
/ hoe komt deze daar	?
/ TODO

/ 7

$ drush -d dl drush
version

Install location /home/eric/Devel/Drupal/Drush/omega4/sites/all/themes/omega already exists. Do you want to overwrite it? (y/n): y

Project omega contains 2 themes: omega, ohm.
 
[eric@localhost omega4]$ drush help --filter=omega
All commands in omega: (omega)
 omega-export (oexp)   Exports the theme settings of a given theme from the    
                       database to the .info file.                             
 omega-guard (ogrd)    Runs guard for the given theme including Compass and    
                       LiveReload by default.                                  
 omega-revert (orev)   Reverts the theme settings of a given theme by deleting 
                       them from the database.                                 
 omega-subtheme        Creates a Omega subtheme.                               
 (osub)                                                                        
 omega-wizard (owiz)   Guides you through a wizard for generating a subtheme.  

[eric@localhost omega4]$ mysql -uroot
mysql> grant all on omega4.* to omega4@localhost identified by "omega4";
mysql> \. ~/Backup/Database/omega4.sql

[eric@localhost omega4]$  drush -d owiz
Please enter the name of the new sub-theme [Omega Subtheme]: first
Please enter a machine-readable name for your new theme [first]: 
Please choose a base theme for your new theme
 [0]  :  Cancel                                                               
 [1]  :  First Omega theme (Subtheme of Omega) - Please provide a description 
         for your theme.                                                      
 [2]  :  Ohm (Subtheme of Omega) - Omega based demonstration theme. Serves as 
         a best-practice reference for the Omega documentation. Ohm will be   
         constantly updated as best practice evolves so shouldn't be used in  
         production.                                                          
 [3]  :  Omega - A powerful HTML5 base theme framework utilizing tools like   
         Sass, Compass, Grunt, Bower, Ruby Version Manager, Bundler and more. 
3
Please choose a starterkit for your new theme
 [0]  :  Cancel                                                            
 [1]  :  Default: Comes with a well organized Sass setup with heavy use of 
         partials. (Provided by Omega)                                     

1
Please choose a destination. This is where your sub-theme will be placed
Please choose a destination type.
 [0]  :  Cancel                             
 [1]  :  Site (e.g. 'all' or 'example.com') 
 [2]  :  Installation profile               
 [3]  :  Parent theme                       

1
Please choose a site.
 [0]  :  Cancel 
 [1]  :  all    

1
Do you want to keep the starterkit's readme files? (y/n): n
Do you want to enable your new theme? (y/n): y
Do you want to make your new theme the default theme? (y/n): y
Undefined offset: 2 omega.drush.inc:642 [685.21 sec, 22.56 MB]         [notice]
Undefined offset: 2 omega.drush.inc:642 [685.21 sec, 22.59 MB]         [notice]
Beginning to build libraries.make. [688.17 sec, 5.44 MB]            [ok]
html5shiv downloaded from                                           [ok]
respond downloaded from                                             [ok]
matchmedia downloaded from                                          [ok]
pie downloaded from https://github.com/fubhy/pie/archive/master.zip.[ok]
[eric@localhost omega4]$ 

/ 7

/ install new site

[eric@localhost Drush]$ drush -d dl drupal --drupal-project-rename=lia
[eric@localhost Drush]$ cd lia
[eric@localhost lia]$ drush -d si standard --db-url=mysql://lia:lia@localhost/lia --site-name="Lia" --db-su=root --db-su-pw= --account-pass=alLdh10

Drupal requires you to enable the PHP extensions in the following list (see the <a href="http://drupal.org/requirements">system requirements page</a> for more information):
<div class="item-list">
<ul>
<li class="first">dom</li>
<li class="last">gd</li>

/ we gaan naar	,
https://drupal.org/requirements

Web server
Database server
PHP
Browser requirements

[root@localhost ~]# yum install php-xml php-gd

Installing:
 php-gd           x86_64          5.4.21-1.fc18          updates          148 k
 php-xml          x86_64          5.4.21-1.fc18          updates          185 k
Installing for dependencies:
 t1lib            x86_64          5.1.2-10.fc18          fedora           163 k

/ Nu gaat de install OK	,

lia/?q=admin/config/search/clean-urls

/ we lezen	,
https://drupal.org/node/1572984
/ en zien over clean urls	,
https://drupal.org/node/15365

$ apachectl -M
/ of
$ httpd -M
...
 core_module (static)
 rewrite_module (shared)
...
/ list alle modules	,
/ we hoeven GEEN in httpd.conf	,
LoadModule ...

/ 7	. 

///////////////////////////////////////////////////
<VirtualHost *:80>
    DocumentRoot /home/eric/Devel/Web
    ServerName web
</VirtualHost>
<Directory /home/eric/Devel/Web>
        Require all granted
        AllowOverride All
</Directory>

/ lees	,
http://httpd.apache.org/docs/2.4/mod/core.html#allowoverride
/ we moeten 
        AllowOverride All
/ want anders ziet httpd .htaccess niet, en dan  geen clean urls in Drupal
/ TODO


/ Einde DRUPAL APACHE

/ DRUPAL MYSQL

/ lees	,
Administration & Security Guide, 
	Managing site performance
		Optimizing database performance
Tools, tips and links on optimizing mySQL
https://drupal.org/node/85768
Tuning MySQL
https://drupal.org/node/51263

/ 7	.

/ lees	,
http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html

$ mysql -uroot
mysql> show variables;

| tx_isolation                                      | REPEATABLE-READ 
| autocommit                                        | ON 
| default_storage_engine                            | InnoDB                    

/ storage engine is OK	,
/ we hadden set	,
autcommit off
tx_isolation read-commited

/ je kunt vragen	,
mysql> select @@tx_isolation;
+-----------------+
| @@tx_isolation  |
+-----------------+
| REPEATABLE-READ |


/ root doet in /etc/	,

[root@localhost etc]# mv my.cnf my.cnf.fedora
[root@localhost etc]# cp /usr/share/mysql/my-innodb-heavy-4G.cnf .
[root@localhost etc]# ln -sfn my-innodb-heavy-4G.cnf my.cnf
[root@localhost etc]# systemctl restart mysqld.service 
/ Maar dan zien we	,
mysql> show create table users;
ERROR 1286 (42000): Unknown storage engine 'InnoDB'

/ lees	,
http://blog.dlcware.com/2011/09/mysql-unknown-table-engine-innodb%E2%80%8F.html
/ refs naar	,
http://www.turnkeylinux.org/forum/support/20090111/drupal-6-problem-enable-innodb#comment-131

/ we hebben in my-innodb-heavy-4G.cnf comment out	,
#default-storage-engine = MYISAM
/ zodat het InnoDB wordt , dat is de default	,

/ we moesten	,
[root@localhost mysql]# pwd
/var/lib/mysql
[root@localhost mysql]# systemctl stop mysqld.service 
[root@localhost mysql]# mv ib_logfile0 ib_logfile0.bak
[root@localhost mysql]# mv ib_logfile1 ib_logfile1.bak
[root@localhost mysql]# systemctl start mysqld.service 
[root@localhost mysql]#  ls
ib_logfile0      
ib_logfile0.bak  
ib_logfile1      
ib_logfile1.bak  
ib_logfile2      

/ Nu OK	,

/ TODO

/ 7	.



/ 7	.




/ Einde DRUPAL MYSQL

/ SASS

[eric@localhost Web]$  gem install sass 
Fetching: sass-3.2.12.gem (100%)
Successfully installed sass-3.2.12
Parsing documentation for sass-3.2.12
Installing ri documentation for sass-3.2.12
1 gem installed



/ Einde SASS


/ OMEGA 4

/ kijk naar	,
http://www.youtube.com/watch?v=mAbNK4A2fKg

/ we hebben omega theme create	,  second	,
$ drush owiz 

/ click in GUI settings ,	
Layouts
Enable Layouts extension : check	,
/ Kies simple
/ Inderdaad, anders layout als dat je 
Enable Layouts extension : uncheck

/ we zien over susy bij simple	,

/ Einde OMEGA 4

/ SUSY


/ Einde SUSY

/ DRUSH

/ 7	.

[eric@localhost Tmp]$ pwd
/home/eric/Devel/Drupal/Drush/Tmp
/ we late ivm rsync drush hier 	,

[eric@localhost Tmp]$ git clone https://github.com/drush-ops/drush.git
$ cd drush
[eric@localhost drush]$ git tag -l
...
[eric@localhost drush]$ git checkout 7.x-5.9
/ of	,
[eric@localhost drush]$ git checkout tags/7.x-5.9
Note: checking out '7.x-5.9'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b new_branch_name

HEAD is now at cea2ca0... Prepare for 5.9

[eric@localhost drush]$ vi ~/.bash_profile 
PATH=$PATH:/home/eric/Devel/Drupal/Drush/Tmp/drush

 



/ Einde DRUSH

/ BUNDLER

/ 7	.

/ ga naar	,
http://bundler.io/

$ gem install bundler
Fetching: bundler-1.3.5.gem (100%)
Successfully installed bundler-1.3.5
Parsing documentation for bundler-1.3.5
Installing ri documentation for bundler-1.3.5
1 gem installed

/ lees	,
http://bundler.io/v1.5/gemfile.html

[eric@walnut start]$ pwd
/home/eric/Devel/Web/Bundler/start
[eric@walnut start]$ which bundle
~/.rvm/gems/ruby-2.0.0-p247/bin/bundle

[eric@walnut start]$ bundle init
Writing new Gemfile to /home/eric/Devel/Web/Bundler/start/Gemfile

[eric@walnut start]$ cat Gemfile 
# A sample Gemfile
source "https://rubygems.org"

# gem "rails"

[eric@walnut start]$ cat Gemfile 
# A sample Gemfile
source "https://rubygems.org"

gem 'nokogiri' 
gem 'rack', '~>1.1' 
gem 'rspec', :require => 'spec'

[eric@walnut start]$ bundle install
Fetching gem metadata from https://rubygems.org/.........
Fetching gem metadata from https://rubygems.org/..
Resolving dependencies...
Installing diff-lcs (1.2.5) 
Installing mini_portile (0.5.2) 
Installing nokogiri (1.6.1) 
Installing rack (1.5.2) 
Installing rspec-core (2.14.7) 
Installing rspec-expectations (2.14.4) 
Installing rspec-mocks (2.14.4) 
Installing rspec (2.14.1) 
Using bundler (1.3.5) 
Your bundle is complete!
Use `bundle show [gemname]` to see where a bundled gem is installed.

[eric@walnut start]$ bundle show nokogiri
/home/eric/.rvm/gems/ruby-2.0.0-p247/gems/nokogiri-1.6.1

[eric@walnut start]$ ls
Gemfile  Gemfile.lock

/ TODO (app)












/ Einde BUNDLER

/ SINGULARITY 

/ 7	.

/ lees	,
https://github.com/Team-Sass/Singularity

/ we gaan naar	,
https://github.com/Team-Sass/Singularity/wiki

[eric@walnut wiki]$ pwd
/home/eric/Devel/Web/Sass/Singularity/wiki
[eric@walnut wiki]$ bundle ini
Writing new Gemfile to /home/eric/Devel/Web/Sass/Singularity/wiki/Gemfile

/ edit,	
$ vi Gemfile

# A sample Gemfile
source "https://rubygems.org"

gem "sass", "~>3.2.0"
gem "compass", "~>0.12.0"
gem "singularitygs", "~>1.1.2"

/ evt.
$ gem update bundle

[eric@walnut wiki]$ bundle install
Fetching gem metadata from https://rubygems.org/.............
Fetching gem metadata from https://rubygems.org/..
Resolving dependencies...
Using chunky_png (1.2.9) 
Using fssm (0.2.10) 
Installing sass (3.2.13) 
Using compass (0.12.2) 
Installing breakpoint (2.0.7) 
Installing singularitygs (1.1.2) 
Using bundler (1.3.5) 
Your bundle is complete!
Use `bundle show [gemname]` to see where a bundled gem is installed.

/ inderdaad, nieuwe sass versie	,

/ 7	.

[eric@walnut wiki]$ bundle exec compass create first -r singularitygs --using singularitygs
directory first/ 
directory first/javascripts/ 
directory first/sass/ 
directory first/sass/partials/ 
directory first/stylesheets/ 
   create first/config.rb 
   create first/sass/style.scss 
   create first/sass/partials/_base.scss 
   create first/javascripts/grid.min.js 
   create first/javascripts/grid.js 
   create first/stylesheets/style.css 

*********************************************************************
Congratulations! Your compass project has been created.

You may now add and edit sass stylesheets in the sass subdirectory of your project.

Sass files beginning with an underscore are called partials and won't be
compiled to CSS, but they can be imported into other sass stylesheets.

You can configure your project by editing the config.rb configuration file.

You must compile your sass stylesheets into CSS when they change.
This can be done in one of the following ways:
  1. To compile on demand:
     compass compile [path/to/project]
  2. To monitor your project for changes and automatically recompile:
     compass watch [path/to/project]

More Resources:
  * Website: http://compass-style.org/
  * Sass: http://sass-lang.com
  * Community: http://groups.google.com/group/compass-users/


  Welcome to Singularity! Grids Without Limits.

  See our Getting Started guide at http://singularity.gs to get started and for full documentation.

  If you need support for IE6/7, you should install the Border Box polyfill. Simply type `compass install singularitygs/box-sizing` in your command line from the root of your project folder (where config.rb is).


  For help with Singularity, please ask a question on Stack Overflow (http://stackoverflow.com/questions/ask) tagged with "singularitygs".

  To file an issue with Singularity, please use our GitHub Issue Queue (https://github.com/Team-Sass/Singularity/issues).

To import your new stylesheets add the following lines of HTML (or equivalent) to your webpage:
<head>
  <link href="/stylesheets/style.css" rel="stylesheet" type="text/css" />
</head>

[eric@walnut wiki]$  ls
first  Gemfile  Gemfile.lock

$ cd first
$ vi config.rb
require 'singularitygs'
/ al

[eric@walnut first]$  vi sass/partials/_base.scss 
@import "singularitygs";
/al

$ vi sass/style.scss
@import "partials/base";
/ Dus via deze de import singularitygs	,

/ 7	.

[eric@walnut wiki]$ bundle exec compass create demos -r singularitygs --using singularitygs/demos 

/ geef	,
http://web/Sass/Singularity/wiki/demos/float.html
http://web/Sass/Singularity/wiki/demos/isolation.html

/ 7	.

/ ga naar	,
https://github.com/Team-Sass/Singularity
/ we zien link naar wiki	,
https://github.com/Team-Sass/Singularity/wiki
/ we zien link naar video	,
http://vimeo.com/63509346

/ Lees
https://github.com/Team-Sass/Singularity/wiki/Creating-Grids

/ kijk naar de video	,
http://vimeo.com/63509346

/ SAMENVATTING

/ 7	.

$grids:2 	# aantal columns
$gutters:1 # width rel to column width
/ we zien 2 columns, met een gutter ertussen, maar dat is altijd, en de gutter is even breed als de columns	,

$grids:4 	# aantal columns
$gutters:2 # width rel to column width
/ we zien 4 columns, met 3 gutters ertussen, maar dat is logisch, en de gutters zijn 2 keer zo breed als de columns	,

/we hebben sass/style.scss edit,	
[eric@walnut first]$ git -a -m "v1.1 show grid"
[eric@walnut first]$ git tag -f v1.1
Updated tag 'v1.1' (was 357c001)

/ 7	.

/ 50em is een breakpoint en 12, dus 12 columns is dan de context (net als $grids:4)	,
/ hij zegt	,
$grids:add-grid(6 at 30em); // 6-context at 30em-bp 	, 
...
aside{
  @include grid-span(2,3);
  background:green;
	@include breakpoint(30em){
		@include grid-span(2,5); // ctx aware: weet dat het in de 6-ctx is	, want dat is de ctx bij 30em	, zelf vormt aside een 2 ctx	, die begint op de 5de col van de 6 ctx	, dat is voor belang als er in de aside een DOM elem is (zie .nest-1/2 hieronder)	
// @include grid-span(2,5,6);	 // we geven hier de ctx expliciet op , want dat is hij bij 30em	, maar het hoeft niet, 
		background:red;
	}
/ @include grid-span(2,3)=...	, op de plaats van ... staat stylesheet, dus slaat het op aside zelf, net als background:green dat doet	,


/ 7	.

      <aside>
        SIDEBAR
        <section>
          <div class="nest-1">
            Nest 1
          </div>
          <div class="nest-2">
            Nest 2
          </div>
        </section>
      </aside>

$grids:add-grid(6 at 30em);
...
$grids:add-grid(12 at 50em);

aside{
  @include grid-span(2,3);
  background:green;
  @include breakpoint(30em){
    @include grid-span(2,5);   // aside vormt een 2-ctx in de 6-ctx die begint op col 5	, hij ziet aan 30em-bp dat er dan een 6-ctx is	,
// ==
//    @include grid-span(2,5,6); // we geven de 6-ctx expl	,
    background:red;
  }
  @include breakpoint(50em){
    @include grid-span(6,7); // aside vormt een 6-ctx in de 12-ctx die begint op col 7	, hij ziet aan 50em-bp dat er dan een 12-ctx is	,
// ==
//  @include grid-span(6,7,12); // geven de 12-ctx expliciet op 	, 
    background:red;
  }

}

.nest-1{
  @include breakpoint(50em){
    @include grid-span(3,3,6);	// de aside vormde een 6-ctx, daarom staat hier een 6-ctx als parent, en zelf vormt de .nest-1 een 2-ctx	,
    background:green;
  }
}
/ .nest-1 is dus een 3-ctx die start op col 3, in de 6-ctx die aside is (vormt). 

/ 7	.

/ we kunnen ook een niet uniform grid, en dan kunnen we een sub ctx nemen	,

$grids:4; 														// mobile first
$grids:add-grid(6 at 30em);
...
$grids:add-grid(1 2 3 4 5 1 2 3 4 5 1 2 at 50em);

aside{
  @include grid-span(2,3);
  background:green;
  @include breakpoint(30em){
    @include grid-span(2,5); // is ctx aware, want we kunnen ook explicit	,
// ==
//    @include grid-span(2,5,6); 
    background:red;
  }
  @include breakpoint(50em){
    @include grid-span(6,7);// is ctx aware, want we kunnen ook explicit	,
// ==
//    @include grid-span(6,7,1 2 3 4 5 1 2 3 4 5 1 2);
    background:red;
  }

}
/  @include grid-span(6,7,1 2 3 4 5 1 2 3 4 5 1 2); betekent: 6 columns van 1 2 3 4 5 1 2 3 4 5 1 2, te beginnen bij de 7de column, 	

/ bij 50em vormt aside een  sub ctx 2 3 4 5 1 2	, dit gaan we use in .nest-1 en .nest-2	,
/ dan net zo	,

.nest-1{
  @include breakpoint(50em){
    @include grid-span(3,3,2 3 4 5 1 2); // in aside-ctx bij 50em= ctx 2 3 4 5 1 2 , vormt .nest-1 een sub ctx van 3 cols te beginnen bij col 3	, dus 4 5 1	, 
/ =
    //@include grid-span(3,3);/ bij 50 em is 2 3 4 5 1 2 de ctx, en hij is context aware	,
    background:green;
  }
}
/ als we in .nest-1 nog een DOM elem hebben , moet je een sub ctx van 4 5 1 maken	,

.nest-2{
  @include breakpoint(50em){
    @include grid-span(2,1, 2 3 4 5 1 2);// in aside-ctx bij 50em= ctx 2 3 4 5 1 2 , vormt .nest-2 een sub ctx van 2 cols te beginnen bij col 1	, dus 2 3	, 
    background:blue;
  }
}
/ als we in .nest-2 nog een DOM elem hebben , moet je een sub ctx van 2 3 maken	,



/ Einde SAMENVATTING



/ we gaan verder in first 	,

$ vi index.html
<!doctype html>
<html>
  <head>
    <title>Singularity First</title>
    <link rel="stylesheet" href="stylesheets/style.css">
  </head>
  <body>
    <div class="container">
    </div>
  </body>
</html>

/ we hoeven geen grid.js te <script>	, alleen in 

$ compass watch

$ vi sass/style.scss

.container{
  margin:0 auto;
  min-height:100%;
  @include background-grid;
}
html,body{
  height:100%;
  margin:0;
  padding:0;
}

$ vi sass/style.scss

$grids:6;

/ OK

/ als 
$grids:4;
/ dan zien we dat de column 21.05263% is en met een gutter 26.3159%, dus gutter is 5%, en column 20%, 
/ TODO

/ met 
$grids:4 
/ zien we columns, allen dezelfde kleur, met gutters ertussen	, 
/ met  
$grids:60px 60px 60px 60px 60px;
/ zien we 5 gelijke columns, met afwisselende kleuren, omdat er geen gutters zijn	, 
/ er zijn nu inderdaad geen gutters	, dat komt omdat we px geven	,

$grids: 1 1 1 1;
/ we zien aut. gutters	,
$grids: 1px 1px 1px 1px;
/ we zien geen gutters	,

/ wel als we expl.	,
$grids:1px 1px 1px 1px;
$gutters:1px;

/ met  
$grids:60px 60px 60px 60px 60px;
$gutters:1px;
/ hebben de 5 columns dezelfde kleur	,

/ 7	.

/ we kunnen ook max-width 	,

$ vi index.html

<!doctype html>
<html>
  <head>
    <title>Singularity First</title>
    <link rel="stylesheet" href="stylesheets/style.css">
  </head>
  <body>
    <div class="container">
    </div>
  </body>
</html>

$ vi sass/style.scss

$grids:4;
// wordt override	,

$grids:60px 60px 60px 60px 60px 60px 60px 60px 60px 60px 60px 60px 60px ;
$gutters:20px;


.container{
  margin:0 auto;
  min-height:100%;
  @include background-grid;
  max-width:940px;
}
html,body{
  height:100%;
  margin:0;
  padding:0;
}

/ OK	,

[eric@walnut demos]$ grep background-grid -r $(bundle show singularitygs)
...
/home/eric/.rvm/gems/ruby-2.0.0-p247/gems/singularitygs-1.1.2/stylesheets/singularitygs/helpers/_background-grid.scss:@mixin background-grid(

/ 7	.

/ git

/ list of tags	,
[eric@walnut first]$ git tag
v1.1
v1.2
v1.3
v1.4
/ current tag	,
[eric@walnut first]$ git describe --tags
v1.4
/ ga naar v1.1
[eric@walnut first]$ git checkout v1.1
Previous HEAD position was 3f11f13... v1.4
HEAD is now at 9bf8ead... v1 1
/stel we zijn in v1.2
/ we edit files	,
$ git commit -a -m "v1.2 modified"
/we kunnen 
$ git tag v1.3
/ of	,
$ git tag -f v1.2
/ Dit kunnen we ook op eerdere versies doen	, bijv v1.1		.




/ we edit sass/style.scss	,

/ we zien 
$ git status
/ modified style.scss
/ dus we moeten	deze stage	,
$ git add .
/ en dan
$ git commit -m "v1.2"
$ git tag v1.2

/ hiervoor hadden we v1.1	, keer terug	,
$ git checkout v1.1
/ OK
/ dan weer naar v1.2
$ git checkout v1.2

/ als we een file willen rm, doe dan	,
$ git rm sass/.style.scss.swp
$ git status
...
$ git commit ...

$ git tag
v1.1
v1.2

/ v1.1 is zonder max-width, v1.2 is met max-width

/ delete tags	,
[eric@walnut first]$ git tag
v0
v0.1
v1
v1.1
v1.2
[eric@walnut first]$ git tag -d v0 v0.1 v1 
Deleted tag 'v0' (was 557099e)
Deleted tag 'v0.1' (was 91d5d96)
Deleted tag 'v1' (was f660f20)
[eric@walnut first]$ git tag
v1.1
v1.2

/ 7	.

http://web/Sass/Singularity/wiki/first/

/ v1.2
/ hij is pixel-perfect	, als beeld >=940px	, en fluid: als vp <940px, dan worden de columns smaller, we blijven 12 columns zien	,

/ 7	.

/ ipv	,
$grids:60px 60px 120px 60px 60px 60px 60px 60px 60px 60px 60px 60px 60px ;
$gutters:20px;
/ kunnen we ook (vrijwel)	, het gaat om de verhoudingen	,
$grids:12;
$gutters: .3;

/ we kunnen ook	,
$gutters:1/3 ;

/ met 
$gutters:1/9 ;
$gutters:1/27 ;
/ NIET OK	,

/ 7	. 

http://web/Sass/Singularity/wiki/first/

/ v1.3	, breakpoints

$grids:4;
/ dan automatisch gutters	,

/ mobile first	,

$grids:4;
$grids:add-grid(6 at 30em);
$grids:add-grid(9 at 40em);
$grids:add-grid(12 at 50em);

/ 50em is een breakpoint en 12, dus 12 columns is dan de context (net als $grids:4)	,
/ hij zegt	,
$grids:add-grid(6 at 30em);
...
	@include breakpoint(30em){
		@include grid-span(2,5);
	}
/ is completely context aware	, dus hij bedoelt: er staat bp 30em, dus hij weet dat er dan 6 colums zijn	, dat is de context	,


/ als de browser smal, dan zien we 4 columns (met aut. gutters)	,

/ lees 	,
www.w3schools.com/css/css_font.asp

/ 1em=16px

/ inderdaad, als we chrome small, en we vergroten tot 30*16px=480px, dan zien we 6 columns,	 en bij 40*16px=640px zien we 9 columns	, en bij 50*16px=800px zien we 12 columns	,
/ als we nog verder vergroten, dan blijft 12px en als we over de 940px gaan, blijft de columns en gutters 940px	,

/ 7	.

aside{
	@include grid-span(2,3);
} 
/ spans 2 columns, starting at grid no 3	, (begint bij 1 dus te tellen)	, zeg: 2 at 3	,
/ voor als er 4 columns zijn	,

aside{
	@include grid-span(2,3);
	background:green;
	@include breakpoint(30em){
		@include grid-span(2,5);
	}
}
/ de 2 columns width sidebar blijft rechts	, 
/ de background color in de 30em context erft van  de default, 	we kunnen overwrite	,

aside{
	@include grid-span(2,3);
	background:green;
	@include breakpoint(30em){
		@include grid-span(2,5);
		background:red;
	}
}
/ bij context 30em wordt sidebar red	,

/ 7	.

/ v1.3

http://web/Sass/Singularity/wiki/first/

/ nested 	,

 <body>
    <div class="container">
			Hello World
			<aside>
        SIDEBAR
        <section>
          <div class="nest-1">
            Nest 1
          </div>
          <div class="nest-2">
            Nest 2
          </div>
        </section>
      </aside>
    </div>
  </body>

aside{
...
	@include breakpoint(50em){
		@include grid-span(6,7);
		background:red;
	}

}

.nest-1{
	@include breakpoint(50em){
		@include grid-span(2,1,6);
		background:green;
	}
}

.nest-2{
	@include breakpoint(50em){		
		@include grid-span(2,4,6);
		background:blue;
	}
}

/ aside is 6 columns in aside, en is te zien als een nested context, in de 12 columns context	, omdat .nest-1 in aside is	, moeten we de nested grid-span 6=nested context (in 12 cols ctx) geven als laatste arg	,
/ TODO

/ hij weet dat we in de 12 columns ctx zijn, omdat we at breakpoint 50em zijn	,
/ met 6 als laatste arg aan grid-span zeggen we dat we in de nested ctx zijn van 6 columns	, 

/als we 	,
.nest-1{
	@include breakpoint(50em){
		@include grid-span(2,3,6);
		background:green;
	}
}

.nest-2{
	@include breakpoint(50em){
		@include grid-span(2,1,6);
		background:blue;
	}
}
/ zien we .nest-2 links van .nest-1, dus we zien een andere volgorde als in html	,

/ 7	. 

/ nonuniform grids

http://web/Sass/Singularity/wiki/first/

/ v1.4

/ geef	,
http://web/Sass/Singularity/wiki/first/



/ Einde SINGULARITY 

/ JBOSS TOOLS 

/ ga naar	,
http://www.jboss.org/tools

/ we zien icons	,
/ click JBoss Developer Studio  7	,
http://marketplace.eclipse.org/node/827807#.UugKH7U1jeQ

/ we zien dat http://marketplace.eclipse.org/ een Drupal 7 site is	,

/ we zien 2 links	,
JBoss Developer Studio 7: jQuery Mobile. 
/ =
http://vimeo.com/67480300
/ en	,
http://docs.jboss.org/tools/movies/

/ Dit zijn ook drupal sites	,
https://mariadb.com/	
/ met bootstrap	responsive	,

http://www.skysql.com
/ geen responsive theme	,

/ Einde JBOSS TOOLS 

/ DRUPAL

/ Voor drupal sites		,
http://buytaert.net/tag/drupal-sites



/ Einde DRUPAL


/ AJAX SHELLEY

http://web/shelley/examples/ch02-05.xhtml

/ 13	.
/ encode uri	,

$ vi ch02-05.xhtml 

<select name="drink" id="drink">
<option value="shoe[color]" selected="selected">Hot Tea</option>
<option value="APPLETINI">Appletini</option>

$ vi drink1.js
   var drink = encodeURIComponent(document.getElementById('drink').value);
shoe%5bcolor%5d

/ 13	. 

$ vi drink1.js

   document.getElementById('myform').onsubmit=function(){
...
   evnt.preventDefault();
	return true
/ =
   return false;



/ Einde AJAX SHELLEY

/ AJAX FORMS SELF

/ form is GEEN ajax form	,
/ als we met form een gedeelte van site willen veranderen,  moet de php code op de pagina staan	, de pagina is dus bijv index.php	,

/ form is WEL ajax form	,
/ als we met form een gedeelte van site willen veranderen,  moet de php code in een andere pagina, bijv server.php	, de pagina is dus bijv index.html,

/ 7	. 

/ form zonder ajax	,

[eric@walnut first]$ pwd
/home/eric/Devel/Web/Ajax/self/first

$ vi index.html

<form action="server.php" method="get">
<label for="color">Color:<label>
<input type="text" name="shoe[color]" id="color" value="blue">
<label for="size">Size:<label>
<input type="text" name="shoe[size]" id="size" value="45">
<input type="submit" value="Order">
</form>

$ vi server.php
<?php
echo "\$_GET:";
var_dump($_GET);
echo "\$_POST:";
var_dump($_POST);
?>


/ Geef	,
http://web/Ajax/self/first/
/ vul in blue, 45, click Order	,
/ dan zien we in de location	,
http://web/Ajax/self/first/server.php?shoe%5Bcolor%5D=&shoe%5Bsize%5D=
/ en in het window	,

$_GET:
array (size=1)
  'shoe' => 
    array (size=2)
      'color' => string 'blue' (length=4)
      'size' => string '45' (length=2)
$_POST:
array (size=0)
  empty

/ Nu veranderen we maar 1 ding, get=> post	,
<form action="server.php" method="post">

/ dan zien we in de location	,
http://web/Ajax/self/first/server.php
/en in het window	,
$_GET:
array (size=0)
  empty
$_POST:
array (size=1)
  'shoe' => 
    array (size=2)
      'color' => string 'blue' (length=4)
      'size' => string '45' (length=2)

/ 7	. 

/ we maken hetzelfde form , maar dan op 1 pagina, zodat je daar ook op terugkomt	,

$ vi second/index.php

<?php
echo "\$_GET:";
var_dump($_GET);
echo "\$_POST:";
var_dump($_POST);
?>
<!doctype html>
<html>
<head>
</head>
<body>

<form method="get">
<label for="color">Color:<label>
<input type="text" name="shoe[color]" id="color" value="blue">
<label for="size">Size:<label>
<input type="text" name="shoe[size]" id="size" value="45">
<input type="submit" value="Order">
</form>

</body>
</html>

/ als form get	,
/ Geef	,
http://web/Ajax/self/second/
/ click Order 	,
/ we zien in de location
http://web/Ajax/self/second/?shoe%5Bcolor%5D=blue&shoe%5Bsize%5D=45
/ we zien in het window	,
$_GET:
array (size=1)
  'shoe' => 
    array (size=2)
      'color' => string 'blue' (length=4)
      'size' => string '45' (length=2)
$_POST:
array (size=0)
  empty

/ als form post	,
/ Geef	,
http://web/Ajax/self/second/
/ click Order 	,
/ we zien in de location
http://web/Ajax/self/second
/ we zien in het window	,
$_GET:
array (size=0)
  empty
$_POST:
array (size=1)
  'shoe' => 
    array (size=2)
      'color' => string 'blue' (length=4)
      'size' => string '45' (length=2)

/ 7	. 

[eric@walnut self]$ cp -a second third

/ 7	.

/ get ajax form

///////////////////////////////
/ bij een ajax form blijft de url in de location onveranderd,	
/ dus het blijft	,
http://web/Ajax/self/fourth
/ en het wordt NIET	,
http://web/Ajax/self/first/result.php?shoe%5Bcolor%5D=blue&shoe%5Bsize%5D=45 

/ we build in script de url	, let op dat je ?, &, = niet uri encode	,
/ we moeten maken	,
http://web/Ajax/self/first/result.php?shoe%5Bcolor%5D=blue&shoe%5Bsize%5D=45 

$ vi index.html

<form method="get" id="form">
<label for="color">Color:<label>
<input type="text" name="shoe[color]" id="color" value="blue">
<label for="size">Size:<label>
<input type="text" name="shoe[size]" id="size" value="45">
<input type="submit" value="Order">
</form>

/ we hoeven geen action attr te geven	,

$ vi script.js

window.onload=function(){
  document.getElementById("form").onsubmit=function(event){
    var xhr=new XMLHttpRequest()
    var color=document.getElementById("color").value
    var size=document.getElementById("size").value
    var url="result.php"+ 
			"?"+
      encodeURIComponent("shoe[color]")+
      "="+
      encodeURIComponent(color)+
      "&"+
      encodeURIComponent("shoe[size]")+
      "="+
      encodeURIComponent(size)
    xhr.open("GET",url,true)
    xhr.onreadystatechange=function(){
      if(xhr.readyState===4 && xhr.status===200){
        console.log(xhr.getAllResponseHeaders())
        console.log(xhr.responseText)
      }
    }
    xhr.send(null)
    return false
  }
}

$ vi server.php

<?php

if(!empty($_GET)){
$result=$_GET["shoe"]["color"].",".$_GET["shoe"]["size"];
}
else if(!empty($_POST)){
$result=$_POST["shoe"]["color"]+","+$_POST["shoe"]["size"];
}
echo $result;

?>

/ 7	.

/ ajax get form, we update een stuk  HTML in index.html	,

$ vi index.html

<form method="get" id="form">
<label for="color">Color:</label>
<input type="text" name="shoe[color]" id="color" value="blue">
<label for="size">Size:</label>
<input type="text" name="shoe[size]" id="size" value="45">
<input type="submit" value="Order">
</form>

<div id="result">
</div>

$ vi script.js

window.onload=function(){
  document.getElementById("form").onsubmit=function(event){
    var xhr=new XMLHttpRequest()
    var color=document.getElementById("color").value
    var size=document.getElementById("size").value
    var url="result.php"+
      "?"+
      encodeURIComponent("shoe[color]")+
      "="+
      encodeURIComponent(color)+
      "&"+
      encodeURIComponent("shoe[size]")+
      "="+
      encodeURIComponent(size)
    xhr.open("GET",url,true)
    xhr.onreadystatechange=function(){
      if(xhr.readyState===4 && xhr.status===200){
        document.getElementById("result").innerHTML=xhr.responseText
      }
    }
    xhr.send(null)
    return false
  }
}

/ Met
        document.getElementById("result").innerHTML=xhr.responseText
/ gaan we terug de pagina	,

$ vi result.php

if(!empty($_GET)){
$result=$_GET["shoe"]["color"].",".$_GET["shoe"]["size"];
}
else if(!empty($_POST)){
$result=$_POST["shoe"]["color"]+","+$_POST["shoe"]["size"];
}
echo $result;

/ 7	. 

/ post, 

[eric@walnut sixth]$ pwd
/home/eric/Devel/Web/Ajax/self/sixth

////////////////////
/ we moeten de request header set	,
    xhr.setRequestHeader('content-type', 'application/x-www-form-urlencoded')
/ we moeten <form method="post">
/ we geven in xhr.send dezelfde string als bij get achter de ?	, 
	shoe%5Bcolor%5D=blue&shoe%5Bsize%5D=45 


$ vi index.html

<form method="post" id="form">
<label for="color">Color:</label>
<input type="text" name="shoe[color]" id="color" value="blue">
<label for="size">Size:</label>
<input type="text" name="shoe[size]" id="size" value="45">
<input type="submit" value="Order">
</form>

<div id="result">
</div>

$ vi script.js

window.onload=function(){
  document.getElementById("form").onsubmit=function(event){
    var xhr=new XMLHttpRequest()
    var color=document.getElementById("color").value
    var size=document.getElementById("size").value
    var url="result.php"
    var data=
      encodeURIComponent("shoe[color]")+
      "="+
      encodeURIComponent(color)+
      "&"+
      encodeURIComponent("shoe[size]")+
      "="+
      encodeURIComponent(size)
    xhr.open("POST",url,true)
    xhr.onreadystatechange=function(){
      if(xhr.readyState===4 && xhr.status===200){
        document.getElementById("result").innerHTML=xhr.responseText
      }
    }
    xhr.setRequestHeader('content-type', 'application/x-www-form-urlencoded')
    xhr.send(data)
//	data="shoe%5Bcolor%5D=blue&shoe%5Bsize%5D=45"
    return false
  }
}

$ vi result.php

if(!empty($_GET)){
$result=$_GET["shoe"]["color"].",".$_GET["shoe"]["size"];
}
else if(!empty($_POST)){
$result=$_POST["shoe"]["color"].",".$_POST["shoe"]["size"];
}
echo "$result";

/ 7	.

/ we kunnen ook met curl 	,
//////////////////////////////
/ dit heeft niets met wel/niet ajax te maken	,

/ geen ajax,
[eric@walnut Default]$ curl -d "shoe%5Bcolor%5D=blue&shoe%5Bsize%5D=45" -H "content-type:application/x-www-form-urlencoded" "http://web/Ajax/self/first/result.php"
blue,45
[eric@walnut Default]$ curl "http://web/Ajax/self/first/result.php?shoe%5Bcolor%5D=blue&shoe%5Bsize%5D=45"
blue,45

/ wel ajax	,
[eric@walnut ]$ curl -d "shoe%5Bcolor%5D=blue&shoe%5Bsize%5D=45" -H "content-type:application/x-www-form-urlencoded" "http://web/Ajax/self/sixth/result.php"
blue,45
[eric@walnut ]$ curl "http://web/Ajax/self/fifth/result.php?shoe%5Bcolor%5D=blue&shoe%5Bsize%5D=45"
blue,45

/ 	7.

   	var color=document.getElementById("color").value
    var size=document.getElementById("size").value
    var url="result.php"
    var data2='{"shoe":{"color":color,"size":size}}'
    var data=JSON.stringify({shoe:{color:color,size:size}})
/ data is goed	,
/ data2 is ERR	,
data: "{"shoe":{"color":"blue","size":"45"}}"
data2: "{"shoe":{"color":color,"size":size}}"
/ we zien dat color letterlijk is genomen, het staat in een string,	

    var data2="{\"shoe\":{\"color\":color,\"size\":size}}"
/ is ook ERR, weer letterlijk	, 
/ in js anders als in bash	,

    var data2="{\"shoe\":{\"color\":"+color+",\"size\":"+size+"}}"
/ is ook ERR	, want de values zijn nu niet quoted	,
data2: "{"shoe":{"color":blue,"size":45}}"

/ Dus doe JSON.stringify	,

/ HIER HIER



/ Einde AJAX FORMS SELF

/ APACHE PHP 

/ 7	.

php > $s='{"foo":"eric j","size":45}';
php > $o=json_decode($s);
php > var_dump($o);
class stdClass#4 (2) {
  public $foo =>
  string(6) "eric j"
  public $size =>
  int(45)
}

php > $a=array("foo"=>"eric j","size"=>45);
php > $t=json_decode($a);
php > echo $t;
{"foo":"eric j","size":45}

/7	.

/ Lees	,
http://stackoverflow.com/questions/5806971/read-associative-array-from-json-in-post

/ $_POST snapt json niet	, alleen urlencoded	, 

$ vi server.php

var_dump($_POST);

$value = json_decode(file_get_contents('php://input'));
var_dump($value);

/ 13	.

/ curl	,

[eric@walnut Administration]$ curl -d '{"shoe":{"foo":"eric j"}}' -H "content-type:application/json" "http://web/Ajax/jquery/first/result.php"
<pre class='xdebug-var-dump' dir='ltr'>
<b>object</b>(<i>stdClass</i>)[<i>1</i>]
  <i>public</i> 'shoe' <font color='#888a85'>=&gt;</font> 
    <b>object</b>(<i>stdClass</i>)[<i>2</i>]
      <i>public</i> 'foo' <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'eric j'</font> <i>(length=6)</i>


/ Einde APACHE PHP

/ PHP REST

/ 7	. 

/ Lees	,
http://code.tutsplus.com/tutorials/a-beginners-introduction-to-http-and-rest--net-16340

[eric@walnut tuts]$ pwd
/home/eric/Devel/Ajax/tuts

[eric@walnut tuts]$ ls -al
-rw-rw-r--. 1 eric eric   47 Nov 12  2010 apache.conf
lrwxrwxrwx. 1 eric eric   11 Apr 13 19:52 .htaccess -> apache.conf
-rw-rw-r--. 1 eric eric 4430 Nov 12  2010 server.php

/ TODO

/ Lees	,
http://coreymaynard.com/blog/creating-a-restful-api-with-php/

/ Lees	,
http://httpd.apache.org/docs/current/mod/mod_rewrite.html

[eric@walnut corey]$ pwd
/home/eric/Devel/Ajax/corey

[eric@walnut corey]$ cat .htaccess 

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule api/v1/(.*)$ api/v1/MyAPI.php?request=$1 [QSA,NC,L]
</IfModule>

/ TODO

/ 7	.

/ kijk	,
https://www.youtube.com/watch?v=5eWC-lf1FxM

[eric@walnut yrrhelp]$ pwd
/home/eric/Devel/Web/Ajax/yrrhelp

$ vi index.php

$model=array("c"=>4,"java"=>3.99);

$lang=$_GET["lang"];
header("content-type:application/json");
if(!empty($model[$lang])){
  $price=$model[$lang];
  deliver_response(200,"Book found",$price);
}else{
  deliver_response(400,"Book not found",NULL);
} 

function deliver_response($status,$status_message,$data){
  header("HTTP/1.1 $status $status_message");
  $response["status"]=$status;
  $response["status_message"]=$status_message;
  $response["data"]=$data;
  $json=json_encode($response);
  echo $json."\n";
}

/ Geef in location	,
http://web/Ajax/yrrhelp/?lang=c
http://web/Ajax/yrrhelp/?lang=javascript

[eric@walnut Administration]$ curl "http://web/Ajax/yrrhelp/index.php?lang=c"
{"status":200,"status_message":"Book found","data":4}
[eric@walnut Administration]$ curl "http://web/Ajax/yrrhelp/index.php?lang=javascript"
{"status":400,"status_message":"Book not found","data":null}

$ vi .htaccess

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^(.*)$ index.php?lang=$1 [QSA,NC,L]
</IfModule>

# vi /etc/httpd/conf/httpd.conf

<Directory /home/eric/Devel/Web>
LogLevel alert rewrite:trace3
        Require all granted
        AllowOverride All
</Directory>

/ LogLevel kan niet in .htaccess set	, maar moet in httpd.conf	,


/ Geef	,
http://web/Ajax/yrrhelp/c

/ kijk dan in, 	je ziet de rules toegepast	,
[root@walnut ~]# vi /var/log/httpd/error_log

URL: /home/eric/Devel/Web/Ajax/yrrhelp/ [IGNORING REWRITE]
[Mon Apr 14 09:59:57.094939 2014] [rewrite:trace3] [pid 13220] mod_rewrite.c(468): [client ::1:36187] ::1 - - [web/sid#7fae76ad8fc0][rid#7fae7702a970/initial] [perdir /home/eric/Devel/Web/Ajax/yrrhelp/] strip per-dir prefix: /home/eric/Devel/Web/Ajax/yrrhelp/c -> c
[Mon Apr 14 09:59:57.095008 2014] [rewrite:trace3] [pid 13220] mod_rewrite.c(468): [client ::1:36187] ::1 - - [web/sid#7fae76ad8fc0][rid#7fae7702a970/initial] [perdir /home/eric/Devel/Web/Ajax/yrrhelp/] applying pattern '^(.*)$' to uri 'c'
[Mon Apr 14 09:59:57.095058 2014] [rewrite:trace2] [pid 13220] mod_rewrite.c(468): [client ::1:36187] ::1 - - [web/sid#7fae76ad8fc0][rid#7fae7702a970/initial] [perdir /home/eric/Devel/Web/Ajax/yrrhelp/] rewrite 'c' -> 'index.php?lang=c'
[Mon Apr 14 09:59:57.095078 2014] [rewrite:trace3] [pid 13220] mod_rewrite.c(468): [client ::1:36187] ::1 - - [web/sid#7fae76ad8fc0][rid#7fae7702a970/initial] split uri=index.php?lang=c -> uri=index.php, args=lang=c
[Mon Apr 14 09:59:57.095093 2014] [rewrite:trace3] [pid 13220] mod_rewrite.c(468): [client ::1:36187] ::1 - - [web/sid#7fae76ad8fc0][rid#7fae7702a970/initial] [perdir /home/eric/Devel/Web/Ajax/yrrhelp/] add per-dir prefix: index.php -> /home/eric/Devel/Web/Ajax/yrrhelp/index.php

/ 7	.

/ Lees	,
http://coreymaynard.com/blog/creating-a-restful-api-with-php/

[eric@walnut corey]$ pwd
/home/eric/Devel/Web/Ajax/corey
$ vi debug.php

echo "\$_GET";
var_dump($_GET);
echo "\$_POST";
var_dump($_POST);
echo "\$_REQUEST";
var_dump($_REQUEST);
echo "\$_SERVER";
var_dump($_SERVER);

[eric@walnut Administration]$ curl -d "lang=c" "http://web/Ajax/corey/debug.php" | grep REQUEST_M
100  4621  100  4615  100     6  1900k   2529 --:--:-- --:--:  'REQUEST_METHOD' <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'POST'</font> <i>(length=4)</i>

[eric@walnut Administration]$ curl -d "lang=c" -X PUT "http://web/Ajax/corey/debug.php" | grep REQUEST_M
100  4474  100  4468  100     6   566k    778 --:--:-- --:  'REQUEST_METHOD' <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'PUT'</font> <i>(length=3)</i>

[eric@walnut Administration]$ curl -d "lang=c" -X DELETE "http://web/Ajax/corey/debug.php" | grep REQUEST_M
100  4477  100  4471  1  'REQUEST_METHOD' <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'DELETE'</font> <i>(length=6)</i>


/ 7	. 

/ we gaan yrrhelp uitbreiden zoals corey	, 

[eric@walnut Ajax]$ cp -a yrrhelp/ yrrhelp2

[eric@walnut yrrhelp2]$ pwd
/home/eric/Devel/Web/Ajax/yrrhelp2

[eric@walnut yrrhelp2]$ vi .htaccess

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?request=$1 [QSA,NC,L]
</IfModule>

/ we doen deze cond's, want als we geven	, willen we ook deze, en niet naar index.php	,
http://web/Ajax/yrrhelp2/test.php


/ we doen	,
[eric@walnut Administration]$ curl  "http://web/Ajax/yrrhelp2/c"
[eric@walnut Administration]$ curl -X POST -d "foo=bar" "http://web/Ajax/yrrhelp2/c/399"

/ hij maakt er van
get, http://web/Ajax/yrrhelp2/index.php?request=c"
post "foo=bar" 	, http://web/Ajax/yrrhelp2/?request=c/399"

/ hij maakt dus ook bij een post van c/399 een request params van 	,
/ Is dat de bedoeling?
/ TODO

/ we program met $_REQUEST	, die bevat en de $_GET en de $_POST	, 
/ specifieker: met $_REQUEST["request"], dus de $_REQUEST["foo"] doen we niets mee	,

$ vi index.php

echo "\$_SERVER";
var_dump($_SERVER);
echo "\$_REQUEST";
var_dump($_REQUEST);

/ geef	,
[eric@walnut Administration]$ curl -X POST -d {foo=bar} "http://web/Ajax/yrrc/399"c

/ we zien	request en foo	,
</pre>$_REQUEST<pre class='xdebug-var-dump' dir='ltr'>
<b>array</b> <i>(size=2)</i>
  'request' <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'c/399'</font> <i>(length=5)</i>
  '{foo' <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'bar}'</font> <i>(length=4)</i>

/ als we  set in index.php hieronder , dan ERR	,
echo "\$_SERVER";
var_dump($_SERVER);
echo "\$_REQUEST";
var_dump($_REQUEST);
/ TODO

/ bij node, express ging het met /:lang/:price	, en dat zijn dan de .param	, dan zijn er ook .body,	 dat zijn de post vars	, bij curl -d	, en .request	, dat zijn die achter de ? in de url	,

$ vi index.php

<?php

$model=array("c"=>4.59,"java"=>3.99);

//header("Content-Type: application/json");

$args = explode('/', rtrim($_REQUEST["request"], '/'));
$lang= array_shift($args);
if(!empty($args))$price= array_shift($args);

switch($_SERVER["REQUEST_METHOD"]){
case "GET":
	process_GET($model,$lang);
	break;
case "POST":
	process_POST($model,$lang,$price);
	break;
case "PUT":
	process_PUT($model,$lang,$price);
	break;
case "DELETE":
	process_DELETE($model,$lang);
	break;
}


function process_GET($model,$lang){

if(!empty($model[$lang])){
	$price=$model[$lang];
	deliver_response(200,"Book found",$price);
}else{
	deliver_response(400,"Book not found",NULL);
}

}

function process_POST($model,$lang,$price){

if(empty($model[$lang])){
	insert($model,$lang,$price);
	deliver_response(200,"Book inserted",$price);
}else{
	deliver_response(405,"Book was already there",$price);
}

}

function process_PUT($model,$lang,$price){

if(!empty($model[$lang])){
	update($model,$lang,$price);
	deliver_response(200,"Book updated",$price);
}else{
	deliver_response(405,"Book was not there",$price);
}

}

function process_DELETE($model,$lang){

if(!empty($model[$lang])){
	delete($model,$lang);
	deliver_response(200,"Book deleted",$lang);
}else{
	deliver_response(405,"Book was not there",$lang);
}

}

function insert($model,$lang,$price){

$model[$lang]=$price;

}

function update($model,$lang,$price){

$model[$lang]=$price;

}

function delete($model,$lang){

unset($model[$lang]);

}

function deliver_response($status,$status_message,$data){
	header("HTTP/1.1 $status $status_message");
	$response["status"]=$status;
	$response["status_message"]=$status_message;
	$response["data"]=$data;
	$json=json_encode($response);
	echo $json."\n";
}

?>


[eric@walnut]$ curl -X POST  "http://web/Ajax/yrrhelp2/c++/10.99"
{"status":200,"status_message":"Book inserted","data":"10.99"}
[eric@walnut]$ curl -X POST  "http://web/Ajax/yrrhelp2/c++/10.99"
{"status":200,"status_message":"Book inserted","data":"10.99"}
/ we zien dat er geen persistence is	,

[eric@walnut Administration]$ curl -X POST  "http://web/Ajax/yrrhelp2/c/3.99"
{"status":405,"status_message":"Book was already there","data":"3.99"}

[eric@walnut Administration]$ curl   "http://web/Ajax/yrrhelp2/c"
{"status":200,"status_message":"Book found","data":4.59}

[eric@walnut Administration]$ curl -X DELETE  "http://web/Ajax/yrrhelp2/c"
{"status":200,"status_message":"Book deleted","data":"c"}

[eric@walnut Administration]$ curl -X PUT  "http://web/Ajax/yrrhelp2/c/3.99"
{"status":200,"status_message":"Book updated","data":"3.99"}

/ als we c++ in de url, dan NIET OK,	 we moeten url encode	,
/ TODO





/ 7	.

/ Lees	,
http://docs.phalconphp.com/en/1.2.6/reference/tutorial-rest.html
/ over mogelijke rest commands	,

/Einde PHP REST

/ PHP REST SESSION

/ Hieronder PHP REST DATABASE

/ 7	. 

/ we maken yrrhelp3, met session	,
/ we maken hieronder yrrhelp4, met database,

$ vi .htaccess

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ server.php?request=$1 [QSA,NC,L]

/ geef in chrome	,
http://web/Ajax/yrrhelp3/server.php?request=c
/ of	,
http://web/Ajax/yrrhelp3/c

/ of curl	,

[eric@walnut Default]$ curl "http://web/Ajax/yrrhelp3/server.php?request=c"
/ of	,
[eric@walnut Default]$ curl "http://web/Ajax/yrrhelp3/c"
{"status":200,"status_message":"Book found","data":4.59}

/ 7	. 

/ session kan niet met curl, 

/ forms	,

/ we hebben init.php en server.php	,
/ we geven 1 keer init.php, 	en vervolgens query steeds server.php	,

[eric@walnut yrrhelp3]$ pwd
/home/eric/Devel/Web/Ajax/yrrhelp3
$ vi init.php

session_start();

$model=array("c"=>4.59,"java"=>3.99);
$_SESSION["model"]=$model;

/ geef 1 keer in chrome	,
http://web/Ajax/yrrhelp3/init.php

/ dan	,
$ cat "/var/lib/php/session/sess_stpnklsarj6u7433m0v7a8koj7" [noeol] 1L, 111C

model|a:4:{s:1:"c";d:4.5899999999999999;s:4:"java";d:3.9900000000000002;s:1}



$ vi index.html

<form id="get">
  <input id="lang" type="text">
  <input "type="submit">
</form>

<div id="result">
</div>

<script src="bower_components/jquery/dist/jquery.js"></script>
<script>

$("#get").submit(function(event){
  event.preventDefault()
  var lang=$("#get #lang").val()
  var val=$.ajax({
    url:"server.php",
    type:"get",
    data:{request:lang},
  }).done(function(data){
      $("#result").append(data)
  })
})
</script>

/Geef in chrome	,
http://web/Ajax/yrrhelp3/
/ geef in text field: c en submit	,
{"status":200,"status_message":"Book found","data":4.59}

/ OK

/ maar nu met rest url	,

$ vi index.html

<!doctype html>
<html>
<head>
</head>
<body>
<form id="get">
	<input value="a" id="lang" type="text">
	<input value="get" type="submit">
</form>
<form id="post">
	<input value="a" id="lang" type="text">
	<input value="5.99" id="price"type="text">
	<input value="post" type="submit">
</form>
<form id="put">
	<input value="a" id="lang" type="text">
	<input value="7.99" id="price"type="text">
	<input value="put" type="submit">
</form>
<form id="delete">
	<input value="a" id="lang" type="text">
	<input value="delete" type="submit">
</form>

<div id="result">
</div>

<script src="bower_components/jquery/dist/jquery.js"></script>
<script>

$("#get").submit(function(event){
  event.preventDefault()
  var lang=$("#get #lang").val()
  var val=$.ajax({
    url:lang,
    type:"get",
  }).done(function(data){
      $("#result").append(data)
  })
})
$("#post").submit(function(event){
  event.preventDefault()
  var lang=$("#post #lang").val()
  var price=$("#post #price").val()
  var val=$.ajax({
    url:lang+"/"+price,
    type:"post",
  }).done(function(data){
      $("#result").append(data)
  })
})
$("#put").submit(function(event){
  event.preventDefault()
  var lang=$("#put #lang").val()
  var price=$("#put #price").val()
  var val=$.ajax({
    url:lang+"/"+price,
    type:"put",
  }).done(function(data){
      $("#result").append(data)
  })
})
$("#delete").submit(function(event){
  event.preventDefault()
  var lang=$("#delete #lang").val()
  var val=$.ajax({
    url:lang,
    type:"delete",
  }).done(function(data){
      $("#result").append(data)
  })
})
</script>

</body>
</html>

$ vi server.php


<?php

session_start();

$model=&$_SESSION["model"];

echo "<br>\$model first";
var_dump($model);
//echo "\$_SERVER";
//var_dump($_SERVER);
//echo "\$_REQUEST";
//var_dump($_REQUEST);

//header("Content-Type: application/json");

echo "<br>\$request";
var_dump($_REQUEST["request"]);

$args = explode('/', rtrim($_REQUEST["request"], '/'));
echo "<br>\$args";
var_dump($args);
$lang= array_shift($args);
if(!empty($args))$price= array_shift($args);

switch($_SERVER["REQUEST_METHOD"]){
case "GET":
	process_GET($model,$lang);
	break;
case "POST":
	process_POST($model,$lang,$price);
	break;
case "PUT":
	process_PUT($model,$lang,$price);
	break;
case "DELETE":
	process_DELETE($model,$lang);
	break;
}


function process_GET($model,$lang){

if(!empty($model[$lang])){
	$price=$model[$lang];
	deliver_response(200,"Book found",$price);
}else{
	deliver_response(405,"Book not found",NULL);
}

}

function process_POST(&$model,$lang,$price){

if(empty($model[$lang])){
	insert($model,$lang,$price);
	deliver_response(200,"Book inserted",$price);
}else{
	deliver_response(405,"Book was already there",$price);
}

echo "<br>\$model in insert";
var_dump($model);
echo "\n\$_SESSION[\"model\"] in insert\n";
var_dump($_SESSION["model"]);

}

function process_PUT(&$model,$lang,$price){

if(!empty($model[$lang])){
	update($model,$lang,$price);
	deliver_response(200,"Book updated",$price);
}else{
	deliver_response(405,"Book was not there",$price);
}

}

function process_DELETE(&$model,$lang){

if(!empty($model[$lang])){
	delete($model,$lang);
	deliver_response(200,"Book deleted",$lang);
}else{
	deliver_response(405,"Book was not there",$lang);
}

}

function insert(&$model,$lang,$price){

$model[$lang]=$price;

echo "<br>\$lang";
print_r($lang);
echo "<br>\$price";
print_r($price);
echo "<br>\$model";
var_dump($model);
}

function update(&$model,$lang,$price){

$model[$lang]=$price;

echo "<br>\$lang";
print_r($lang);
echo "<br>\$price";
print_r($price);
echo "<br>\$model";
var_dump($model);
}

function delete(&$model,$lang){

echo "\n\$model\n";
var_dump($model);

unset($model[$lang]);

echo "<br>\$lang";
print_r($lang);
echo "<br>\$model";
var_dump($model);
}

function deliver_response($status,$status_message,$data){
	header("HTTP/1.1 $status $status_message");
	$response["status"]=$status;
	$response["status_message"]=$status_message;
	$response["data"]=$data;
	$json=json_encode($response);
	echo $json."\n";
}

?>


/ Let op alle &'s	,

/ bij een 405 zien we helemaal niets in het chrome window, alleen in de console	,
POST http://web/Ajax/yrrhelp3/a/5.99 405 (Book was already there) 
/ Dus de eerdere var_dumps NIET (deze zijn er wel, maar niet hier in de server.php in deze notes)	, 

/ als we a:5.99 en b:5.99 post, komen die in de session	,

# cat "/var/lib/php/session/sess_stpnklsarj6u7433m0v7a8koj7" 

model|a:4:{s:1:"c";d:4.5899999999999999;s:4:"java";d:3.9900000000000002;s:1:"a";s:4:"5.99";s:1:"b";s:4:"5.99";}

/ Einde PHP REST SESSION

/ PHP SESSION

/ lees	,
http://nl3.php.net/manual/en/function.session-start.php

[eric@walnut session]$ pwd
/home/eric/Devel/Web/Ajax/session

////////////
/ je enter een session op een site, web of tuts	,

/////////////////
/ Lees steeds  voor ERRs 	,
/var/log/httpd/error_log

/////////////////
/ Lees steeds bijv	, 
"/var/lib/php/session/sess_m8sp3kltaefbgpr1gpuq4s9rc1" [noeol] 1L, 49C

//////////////////////////
/ RELOAD elke keer als we de cookies willen bekijken	, als we ze delete hebben bijv	,
chrome://settings/cookies 

////////////////////////////
/ 7.	

/ we doen 	,
[eric@walnut yrrhelp3]$ pwd
/home/eric/Devel/Web/Ajax/yrrhelp3
$ vi test.php

session_start();
$model=array("c"=>4.59,"java"=>3.99);
$_SESSION["model"]=$model;

/ de PHPSESSID cookie staat in sqlite Cookies	,
[eric@walnut Default]$ pwd
/home/eric/.config/google-chrome/Default

$ sqlite3 Cookies
sqlite> select*from cookies where host_key="web";
13041959469430598|web|PHPSESSID|stpnklsarj6u7433m0v7a8koj7|/|0|0|0|13042124729869410|0|0|1

/ en de data	,
[root@walnut ~]# vi /var/lib/php/session/sess_stpnklsarj6u7433m0v7a8koj7 

model|a:2:{s:1:"c";d:4.5899999999999999;s:4:"java";d:3.9900000000000002;}

//////////////////////////////////// 

/ HIER HIER

$ vi page1.php

session_start();

echo 'Welcome to page #1';

$_SESSION['favcolor'] = 'green';
$_SESSION['animal']   = 'cat';
$_SESSION['time']     = time();

// Works if session cookie was accepted
echo '<br /><a href="page2.php">page 2</a>';

// Or maybe pass along the session id, if needed
echo '<br /><a href="page2.php?' . SID . '">page 2</a>';

$ vi page2.php

[eric@walnut session]$ cat page2.php 

session_start();

echo 'Welcome to page #2<br />';

echo $_SESSION['favcolor']; // green
echo $_SESSION['animal'];   // cat
echo date('Y m d H:i:s', $_SESSION['time']);

// You may want to use SID here, like we did in page1.php
echo '<br /><a href="page1.php">page 1</a>';

/ we zien een cookie verschijnen op	,
chrome://settings/cookies

site: web
Name:	PHPSESSID
Content:	stpnklsarj6u7433m0v7a8koj7
Domain:	web
Path:	/
Send for:	Any kind of connection
Accessible to script:	Yes
Created:	Monday, April 14, 2014 4:31:09 PM
Expires:	When the browsing session ends

/ virtual host web hier op walnut	,
/ set iptables -F hier op walnut	, 
/ op peacan in hosts file	,
192.168.123.170  web

/geef op peacan
web/Ajax/session/page1.php
/ we zien dat er een cookie verschijnt 
/ de session gaat door de pagina's heen	, WH raadpleegt de cookie als op nieuwe page komt	, 
/ de session_start() heeft niets met de link te maken (op page1 naar page2)	, we hebben page2 cp naar page3, en daar wordt ook session_start() , en hij pakt de session op en kent $_SESSION["favcolor"], ...
/ als we de tab sluit, en weer openen, is de cookie er nog	,
/ als we de browser sluit en weer open, is de cookie weg	,

/ 7	.

# vi php.ini
[Date]
; Defines the default timezone used by the date functions
; http://php.net/date.timezone
date.timezone = "Europe/Amsterdam"

[root@walnut ~]# systemctl restart httpd.service 
/ OK

/ Anders krijgen we ERR in page2.php	, want de date fct wil dit	, we use in page1.php deze date fct NIET	,

echo date('Y m d H:i:s', $_SESSION['time']);

/ we kunnen ook php.ini laten als is	, en doen in page2.php	,
ini_set("date.timezone","Europe/Amsterdam");
echo date('Y m d H:i:s', $_SESSION['time']);


/ 7	.

/ in page1 hadden we eerst session_start(), dus page1 heeft oa time in session write, maar nu comment out we session_start() 

$ vi page1.php

//session_start();
echo 'Welcome to page #1';

$_SESSION['favcolor'] = 'green';
$_SESSION['animal']   = 'cat';
$_SESSION['time']     = time();

var_dump($_SESSION);

/ we comment out session_start() in page1	, 
/ Dit is OK	,
/ we zien dat hij iedere keer als we page1 vragen de $_SESSION update	, dus ook de tijd	,maar deze gaan niet de session in ( is dat de cookie PHPSESSID ? ) TODO	,

$ vi page2.php

session_start();
echo $_SESSION['favcolor']; // green
echo $_SESSION['animal'];   // cat
echo date('Y m d H:i:s', $_SESSION['time']);

/ OK	,
/ door session_start() haalt hij $_SESSION uit de session (is dat de PHPSESSID cookie? ) TODO
/ we zien steeds dezelfde tijd	, dat is de tijd ooit eens door page1 set, toen deze nog session_start() deed	, en hem in de sessie write	,

/ 7. 

/ als we in page2.php	 session_start() comment out	, dan ERR	,

//session_start();
echo $_SESSION['favcolor']; // green
echo $_SESSION['animal'];   // cat
echo date('Y m d H:i:s', $_SESSION['time']);

/ want hij kent $_SESSION niet	, 

/ in page1 hadden we ook session_start() comment out	, maar daar write we local $_SESSION, die niets met session te maken heeft	, omdat session_start() comment out is	,

/ 7	.

/ lees	,
http://www.php.net/manual/en/session.examples.basic.php
/ lees	,
http://nl1.php.net/manual/en/function.session-destroy.php

/ we zijn op	,
http://www.php.net/manual/en/session.examples.basic.php
/ en we click de link "session.save_handler"	, we komen op	,
http://www.php.net/manual/en/session.configuration.php

/ daar staat dat we phpinfo() moeten doen	, 
$ vi page1.php
...
phpinfo();
...
/ we zien inderdaad	,
session.save_handler	files	files
session.save_path	/var/lib/php/session	no value

/ we zien 	,
# vi /etc/php.ini
session.save_handler = files
/ session.save_path is WH een default	,

/ de cookie van web/ heet PHPSESSID	, en dat is het enige wat hij bevat, de session id	,  sess_stpnklsarj6u7433m0v7a8koj7
# vi /var/lib/php/session/sess_stpnklsarj6u7433m0v7a8koj7
favcolor|s:5:"green";animal|s:3:"cat";time|i:1397513387;test|i:42;

/ Dit zijn de global session values	, in $_SESSION	,

/ op 
http://www.php.net/manual/en/session.configuration.php
/ zien we waar we een prop kunnen veranderen,	bijv,	
session.save_path PHP_INI_ALL

/ en dit kunnen we lezen op	,
http://www.php.net/manual/en/configuration.changes.modes.php

/7	. 

$ vi page2.php

session_start();
// uit page3  ,
echo $_SESSION['test'];

$ vi page3.php

session_start();
$_SESSION['test'] = 42;

/ als we page2.php , dan ERR, want hij kent "test" niet in de session op de site (web of tuts),  daarom moeten we eerst even page3.php bezoeken	, en daarna terug naar page2.php, dan OK	,


/ 7	. 

$ vi page2.php

echo 'Welcome to page #2<br />';

session_start();
unset($_SESSION["animal"]);

/ als we de site's page2.php hebben gegeven	,bijv	,
http://tuts/page2.php
/ dan is inderdaaad animal weg	,
[root@walnut ~]# vi /var/lib/php/session/sess_m8sp3kltaefbgpr1gpuq4s9rc1 
favcolor|s:5:"green";time|i:1397549488;test|i:42;

/ click op de link page1, dan is hij er weer	,
[root@walnut ~]# vi /var/lib/php/session/sess_m8sp3kltaefbgpr1gpuq4s9rc1 
favcolor|s:5:"green";time|i:1397550831;test|i:42;animal|s:3:"cat";

/ 7	.

$ vi page2.php

session_start();
session_destroy();
echo $_SESSION['favcolor']; // green							// uit page1.php
echo $_SESSION['animal'];   // cat								// uit page1.php
echo date('Y m d H:i:s', $_SESSION['time']);			// uit page1.php
echo $_SESSION['test'];   												// uit page3.php

/ ga eerst naar de site's page1.php en page3.php	, dan naar page2.php
/ session_start() maakt $_SESSION array uit 
/var/lib/php/session/sess_m8sp3kltaefbgpr1gpuq4s9rc1
/ Dan wordt deze file rm, 
/ maar in mem. bestaat $_SESSION wel, net gemaakt,	 dus in het window zien we nog 

green cat 2014 04 15 10:33:51 42 


/ bezoeken we de site's page1.php	, of page3.php	, dan is de file er weer, met dezelfde naame, want de cookie met de phpsessid is er nog	,

[root@walnut ~]# vi /var/lib/php/session/sess_m8sp3kltaefbgpr1gpuq4s9rc1 
favcolor|s:5:"green";animal|s:3:"cat";time|i:1397552533;test|i:42;

/ 7	.

/ we lezen	,
http://stackoverflow.com/questions/5381277/how-to-properly-delete-a-php-session

session_destroy delete the session's data in the media (file, database, etc) where is stored, but doesn't delete the $_SESSION array or the cookies, you have to do it manually, that includes the PHPSESSID cookie.

/ bij ons is session.save_handler files	,
/ hoe in database	?
/ TODO

/we lezen 	,
http://www.php.net/manual/en/function.session-destroy.php

session_destroy() destroys all of the data associated with the current session. It does not unset any of the global variables associated with the session, or unset the session cookie. To use the session variables again, session_start() has to be called.

In order to kill the session altogether, like to log the user out, the session id must also be unset. If a cookie is used to propagate the session id (default behavior), then the session cookie must be deleted. setcookie() may be used for that.

/ lees	,
http://www.php.net/manual/en/function.setcookie.php

/ 7	. 

/ in de site's page1 is een link naar page3, en in page3 naar page2	,

$ vi page2.php

session_start();
session_destroy();

echo $_SESSION['favcolor']; // green            // uit page1.php
echo "\n";
echo $_SESSION['animal'];   // cat              // uit page1.php
echo "\n";

//ini_set("date.timezone","Europe/Amsterdam"); // we hebben in php.ini set	,
echo date('Y m d H:i:s', $_SESSION['time']);    // uit page1.php
echo "\n";

echo $_SESSION['test'];                         // uit page3.php
echo "\n";

echo "\$_SESSION";
echo "\n";
var_dump($_SESSION);

foreach($_SESSION as $key => $val)unset($_SESSION[$key]);

echo "\$_SESSION";
echo "\n";
var_dump($_SESSION);

echo "\$_COOKIE";
echo "\n";
var_dump($_COOKIE);

/ we zien in het window	op de site's page2.php,

Welcome to page #2
green cat 2014 04 15 11:46:14 42 
$_SESSION
array (size=4)
  'favcolor' => string 'green' (length=5)
  'animal' => string 'cat' (length=3)
  'time' => int 1397555174
  'test' => int 42
$_SESSION
array (size=0)
  empty
$_COOKIE
array (size=1)
  'PHPSESSID' => string 'm8sp3kltaefbgpr1gpuq4s9rc1' (length=26)

/ 7	.

/ setcookie staat los van session_start	,
/ session_start calls setcookie	,

$ vi page4.php

$value = 'something from somewhere';
setcookie("TestCookie", $value);

$ vi page2.php

session_start();
session_destroy();
/ de file is weg in /var/lib/php/session	,

foreach($_SESSION as $key => $val)unset($_SESSION[$key]);

foreach($_COOKIE as $key => $val) setcookie($key, "",time()-3600);
/ de cookies zijn weg, 	(doe reload chrome://settings/cookies en zoek de site)	,

/ 7	.

/ als alle $_SESSION vars zijn unset , 

[eric@walnut yrrhelp3]$ pwd
/home/eric/Devel/Web/Ajax/yrrhelp3

/ we zijn dus op de site web	,

$ vi test.php

session_start();

$model=array("c"=>4.59,"java"=>3.99);

$_SESSION["model"]=$model;

echo "\$_SESSION";
var_dump($_SESSION);

/ de site web heeft een cookie laten install in de browser	,
/ en er is	,
[root@walnut ~]# vi /var/lib/php/session/sess_stpnklsarj6u7433m0v7a8koj7 
model|a:2:{s:1:"c";d:4.5899999999999999;s:4:"java";d:3.9900000000000002;}

/ we zien in het window	,
$_SESSION
array (size=1)
  'model' => 
    array (size=2)
      'c' => float 4.59
      'java' => float 3.99

/ 7	. 

$ vi test3.php

session_start();

$model=array("c"=>4.59,"java"=>3.99);

$_SESSION["model"]=$model;

echo "\$_SESSION";
var_dump($_SESSION);

foreach($_SESSION as $key => $val)unset($_SESSION[$key]);
~                                                                             

/ Nu is de file /var/lib/php/session/sess_stpnklsarj6u7433m0v7a8koj7 er nog steeds, maar is leeg	,










 


/ Einde PHP SESSION

/ JAVASCRIPT COOKIES

/ 7	. 

[eric@walnut yrrhelp3]$ pwd
/home/eric/Devel/Web/Ajax/yrrhelp3
$ vi test3.html

<script>

function setCookie(cname,cvalue,exdays)
{
var d = new Date();
d.setTime(d.getTime()+(exdays*24*60*60*1000));
var expires = "expires="+d.toGMTString();
document.cookie = cname+"="+cvalue+"; "+expires;
}

function getCookie(cname)
{
var name = cname + "=";
var ca = document.cookie.split(';');
for(var i=0; i<ca.length; i++)
  {
  var c = ca[i].trim();
  if (c.indexOf(name)==0) return c.substring(name.length,c.length);
  }
return "";
}

function checkCookie()
{
var user=getCookie("strangekey");
if (user!="")
  {
  alert("Welcome again " + user);
  }
else
  {
  user = prompt("Please enter your name:","");
  if (user!="" && user!=null)
    {
    setCookie("strangekey",user,30);
    }
  }
}

</script>



/ we zien andere cookies locally stored in	de Cookies file in	,

[eric@walnut Administration]$ ls ~/.config/google-chrome/Default/
Application Cache          File System                       Preferences
Archived History           GPUCache                          QuotaManager
Archived History-journal   History                           QuotaManager-journal
Bookmarks                  History-journal                   README
Bookmarks.bak              History Provider Cache            Session Storage
Cookies                    IndexedDB                         Shortcuts
Cookies-journal            Last Session                      Shortcuts-journal
Current Session            Last Tabs                         Sync Data
Current Tabs               Local Storage                     Top Sites
databases                  Login Data                        Top Sites-journal
Extension Cookies          Login Data-journal                TransportSecurity
Extension Cookies-journal  Managed Mode Settings             User StyleSheets
Extension Rules            Network Action Predictor          Visited Links
Extensions                 Network Action Predictor-journal  Web Data
Extension State            Origin Bound Certs                Web Data-journal
Favicons                   Origin Bound Certs-journal
Favicons-journal           Pepper Data

/ De cookies created in JS gaan in def file Cookies	,

https://www.sqlite.org/draft/sqlite.html

[eric@walnut Default]$ file Cookies
Cookies: SQLite 3.x database

[eric@walnut Default]$ sqlite3 Cookies
SQLite version 3.7.13 2012-06-11 02:05:22
Enter ".help" for instructions
Enter SQL statements terminated with a ";"

sqlite> .tables
cookies  meta   

sqlite> .schema
CREATE TABLE cookies (creation_utc INTEGER NOT NULL UNIQUE PRIMARY KEY,host_key TEXT NOT NULL,name TEXT NOT NULL,value TEXT NOT NULL,path TEXT NOT NULL,expires_utc INTEGER NOT NULL,secure INTEGER NOT NULL,httponly INTEGER NOT NULL,last_access_utc INTEGER NOT NULL, has_expires INTEGER NOT NULL DEFAULT 1, persistent INTEGER NOT NULL DEFAULT 1, priority INTEGER DEFAULT 1);
CREATE TABLE meta(key LONGVARCHAR NOT NULL UNIQUE PRIMARY KEY, value LONGVARCHAR);
CREATE INDEX domain ON cookies(host_key);

sqlite> select*from cookies where name="strangekey";
13042102679921218|web|strangekey|ericj|/Ajax/yrrhelp3|13044694673000000|0|0|13042102679921218|1|1|1

/ wat zijn 13042102679921218, 13044694673000000
/ Lees	,
https://groups.google.com/forum/#!topic/chromium-extensions/c4lnssuNAFI
/ TODO


/ bash date werkt met seconds, niet met millis	,
[eric@walnut Indexes]$ date
Wed Apr 16 08:44:08 CEST 2014
[eric@walnut Indexes]$ date -u
Wed Apr 16 06:45:44 UTC 2014
[eric@walnut Indexes]$ date +%s
1397630801
[eric@walnut Indexes]$ date -d "@1397630801"
Wed Apr 16 08:46:41 CEST 2014

/ in js	,
d=new Date
Wed Apr 16 2014 09:39:12 GMT+0200 (CEST)
_d.getTime()
1397633952190
/ Dus in js time is in millis	, in bash in seconds	,

_d.toGMTString()
/ =
_d.toUTCString()
"Wed, 16 Apr 2014 10:07:40 GMT"
_d.toISOString()
"2014-04-16T07:39:12.190Z"
_d.toDateString()
"Wed Apr 16 2014"
_d.toLocaleDateString()
"4/16/2014"
d.toLocaleString()
"4/16/2014 9:39:12 AM"

/ Als we in chrome://settings/cookies een cookie rm, 	dan moeten we in sqlite	,
.quit
$ sqlite3 Cookies
/ dan pas zien we dat de cookie weg is in de db	,

/ 7	.

/ we kunnen 2 keer achter elkaar een cookie create met dezelfde key "my", hij overwrite gewoon	,

  var d=new Date
  var t=d.getTime()+60*60*1000
  d.setTime(t)
  var s=d.toUTCString()
  document.cookie="my="+"self"+";expires="+s

  var d=new Date
  var t=d.getTime()+2*60*60*1000
  d.setTime(t)
  var s=d.toUTCString()
  document.cookie="my="+"self"+";expires="+s

/ we zien in sqlite	, name="my", value="self"	,


/ Einde JAVASCRIPT COOKIES

/ JQUERY COOKIES

[eric@walnut yrrhelp3]$ grep cookie <(bower search jquery)
    jquery.cookie git://github.com/carhartl/jquery-cookie.git
    jquery-cookie git://github.com/carhartl/jquery-cookie.git

/ als we willen zoeken in de list van git names, use  <(...)	,
/ als we willen zoeken in de list van files , use  $(...)	,

/ Lees	,
https://github.com/carhartl/jquery-cookie

[eric@walnut yrrhelp3]$ pwd
/home/eric/Devel/Web/Ajax/yrrhelp3
[eric@walnut yrrhelp3]$ bower install jquery jquery-cookie

/ we geven	,
  $.cookie("my","self")
  $.cookie("my","selfie")

/ als we geen domain , path geven	, zoals	,
$.removeCookie("favourite-city", {path: "/", domain: "jspro.com"}); 

/ dan is 	,
domain: web
path: /Ajax/yrrhelp3

/ we geven	,
  $.cookie("my","self")
  $.removeCookie("my")
/ hij sets expires op gisteren, deze tijd	,  de cookie verdwijnt inderdaad	,




/ Einde JQUERY COOKIES


/ AJAX FORMS JQUERY 

/ 7	.

[eric@walnut first]$ pwd
/home/eric/Devel/Web/Ajax/jquery/first

[eric@walnut first]$ bower info jquery
/ we zien list van versions die er zijn	,

[eric@walnut first]$ bower search jquery| grep form
    jquery-form git://github.com/malsup/form.git
/ later	,

/ Of je $.get of $.post doen maakt bij jQuery niets uit	, we geven de data op dezelfde manier mee	, we moeten alleen $.get door $.post vervangen	,
/ index.html is met $.get, post.html met $.post	,

$ bower install jquery

$ vi index.html

<form >
<label for="color">Color:<label>
<input type="text" id="color" value="blue">
<label for="size">Size:<label>
<input type="text" id="size" value="45">
<input type="submit" value="Order">
</form>

<script>
$("form").submit(function(event){
  event.preventDefault()
  var color=$("#color").val()
  var size=$("#size").val()
  var val=$.get("result.php",{shoe:{color:color,size:size}}).
    done(function(data){
      $("#result").append(data) 
    })
})

<div id="result>
</div>

$ vi result.php

if(!empty($_GET)){
$result=$_GET["shoe"]["color"].",".$_GET["shoe"]["size"];
echo "$result";
}
else if(!empty($_POST)){
$result=$_POST["shoe"]["color"].",".$_POST["shoe"]["size"];
echo "$result";
}
echo "";


/ OK	,

  $.get("result.php",{shoe:{color:color,size:size}})
/ =
	$.ajax({url:"result.php",type:"get",data:{shoe:{color:color,size:size}})

$ vi post.html
/ see index.html
...
  var val=$.post("result.php",{shoe:{color:color,size:size}}).
...

/ 7	. 

/ In jquery	,

/ in $.ajax	,

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
s.data: "shoe%5Bcolor%5D=blue&shoe%5Bsize%5D=45"
//////////////
/ Ook als post	, want we send dat als url encoded	,


		s.hasContent = !rnoContent.test( s.type );
true / als s.type="POST"	,
false / als s.type="GET"	,

		if ( !s.hasContent ) {
/ JA, bij "GET"	,
/ result.php wordt result.php?shoe%5Bcolor%5D=blue&shoe%5Bsize%5D=45 
/ NEE bij "POST"

		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
s.contentType: "application/x-www-form-urlencoded; charset=UTF-8"

/ inderdaad, we send de data als url encoded	,
s.data: "shoe%5Bcolor%5D=blue&shoe%5Bsize%5D=45"

						for ( i in headers ) {
Accept: "*/*"
Content-Type: "application/x-www-form-urlencoded; charset=UTF-8"
X-Requested-With: "XMLHttpRequest"
							xhr.setRequestHeader( i, headers[ i ] );

					xhr.send( ( s.hasContent && s.data ) || null );
s.data: "shoe%5Bcolor%5D=blue&shoe%5Bsize%5D=45"

/ 7	.

/ we vervangen $.post door $.ajax	,

[eric@walnut first]$ pwd
/home/eric/Devel/Web/Ajax/jquery/first

$ vi ajax.html
...
  var val=$.ajax({
    url:"result.php",
    type:"post",
    data:{shoe:{color:color,size:size}},
  }).done(function(data){
      $("#result").append(data)
  })


/7	.

[eric@walnut first]$ pwd
/home/eric/Devel/Web/Ajax/jquery/first
$ vi ajax2.html

<form>
<label for="color">Color:</label>
<input type="text" id="color" value="blue">
<label for="size">Size:</label>
<input type="text" id="size" value="45">
<input type="submit" value="Order">
</form>
<div id="result">
</div>

$("form").submit(function(event){
  event.preventDefault()
  var color=$("#color").val()
  var size=$("#size").val()
  var val=$.ajax({
    url:"result.php",
    contentType:"application/json",
    type:"post",
    data:JSON.stringify({shoe:{color:color,size:size}}),
  }).done(function(data){
      $("#result").append(data)
  })
})

$ vi result.php

$value = json_decode(file_get_contents('php://input'),true);
$result=$value["shoe"]["color"].",".$value["shoe"]["size"];
echo "$result";
// of	,
//$value = json_decode(file_get_contents('php://input'));
//$result=$value->shoe->color.",".$value->shoe->size;
//echo "$result";
/ OK, beide	,

/ met true als 2de arg van json_decode is $value een array	, anders 'n obj, 

/ HIER HIER

 

/ Einde AJAX FORMS JQUERY 

/ MYSQL

$ mysql -uroot
> tee /tmp/vars
> show variables\G
/ notee

$ vi /tmp/vars

Variable_name: autocommit
        Value: ON
Variable_name: datadir
        Value: /var/lib/mysql/
Variable_name: default_storage_engine
        Value: InnoDB
Variable_name: have_openssl
        Value: DISABLED
Variable_name: tx_isolation
        Value: REPEATABLE-READ

/ we kunnen inderdaad de global tx_isolation set	, als we dan een nieuwe sessie open , zien we deze tx_isolation	,

/ we maken 2 mysql sessions	,
/ niet beide kanten hoeven hetzelfde te zijn, ze gedragen zich gewoon zoals ze zijn	,

/ 7	.

/ any 
mysql> set autocommit=0;

/ rc
mysql> set tx_isolation="read-committed";
mysql> set autocommit=0;

/ niet beide kanten hoeven hetzelfde te zijn, ze gedragen zich gewoon zoals ze zijn	,

/ any delete a row	, any ziet de row niet meer, rc ziet de row, 
/ any commits , rc ziet de row niet meer,	 

/ 7	.

/  any
mysql> set autocommit=0;

/ rr
mysql> set tx_isolation="repeatable-read";
mysql> set autocommit=0;


/ any delete a row	, any ziet de row niet meer, rr ziet de row, 
/ any commits , rr ziet de row,	 
/ rr commits, rr ziet de row niet meer,	

/ 7	. 

/ als we bij any en rr autocommit=1, dan zijn er geen transacties meer, rr of wat any ook is zijn verdwenen,	
/ als any een row delete, ziet rr deze meteen ook	, 
/ er is toch een verschil met read-uncommitted: daar kun je commit/rollback	,

/ als any geen transactie start, en any een row insert, dan zien rr de row meteen,
/ als any een tr start, en rr niet, en any insert row, dan zien rr de row niet, als any commit, ziet rr de row, dit is dus geen rr gedrag	,
/ als rr een tr start nadat any insert row, precies hetzelfde als hierboven,
/ als rr een tr start voor dat any insert, dan ziet rr de row pas als hij zelf ook commit: rr gedrag	,

/ TODO ser	,




/ Einde MYSQL

/ PHP PDO

[eric@walnut Default]$ mysql -uroot
mysql> create database pdo;
mysql> grant all privileges on pdo.* to pdo@localhost identified by "pdo";
mysql> show grants for pdo@localhost;
+------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'pdo'@'localhost' IDENTIFIED BY PASSWORD '*DBB00071CF5827F42A1585B00A45F508E3066335' |
| GRANT ALL PRIVILEGES ON `pdo`.* TO 'pdo'@'localhost'                                                       |
/ flush privileges WH alleen als we in mysql.user een delete (of WH een insert) doen	, 
/ TODO

/ Dan kunnen we	, 

[eric@walnut pdo]$ pwd
/home/eric/Devel/Web/Ajax/pdo
[eric@walnut pdo]$ vi index.php 

$conn=new PDO("mysql:host=localhost;dbname=pdo","pdo","pdo");

/HIER HIER

/ Einde PHP PDO

/ OPEN 

[eric@walnut Express]$ ls
gen  mongoose  node-todo  posts  self  starter-node-angular  test
/home/eric/Devel/Node.js/Express/self
/home/eric/Devel/Node.js/Express/node-todo
/home/eric/Devel/Node.js/Express/mongoose
/home/eric/Devel/Node.js/Express/test

/home/eric/Devel/Node.js/video

/home/eric/Devel/MongoDB/Manual/Indexes
/home/eric/Devel/MongoDB/Manual/Administration

/home/eric/Devel/Web/angularjs/egghead.io/35_promise
/home/eric/Devel/Web/angularjs/self
/home/eric/Devel/Web/angularjs/egghead.io/35_http_php
/home/eric/Devel/Web/angularjs/egghead.io
/home/eric/Devel/Web/angularjs/DevGuide
[eric@walnut DevGuide]$ ls
compiler    directive  q          scope.css   scope.js
controller  modules    reference  scope.html

/home/eric/Devel/Web/Ajax/jquery/first
/home/eric/Devel/Web/Ajax/self
[eric@walnut self]$ ls
fifth  first  fourth  second  seventh  sixth  third
/home/eric/Devel/Web/shelley/examples
/home/eric/Devel/Web/Ajax/yrrhelp3
/home/eric/Devel/Web/Ajax/pdo
[eric@walnut Ajax]$ pwd
/home/eric/Devel/Web/Ajax
[eric@walnut Ajax]$ ls
corey  jquery  pdo  self  yrrhelp  yrrhelp2  yrrhelp3  yrrhelp4

/ google op	,
angularjs post example
/ we zien	,
http://devzone.co.in/angularjs-simple-example-post-data-php-page/





/ Einde OPEN

/ LIBRARY

1		
Visual Basic 2008 programmer's reference
Author:	 Stephens, Rod
Publish date:	 2008
2
Practical database programming with Visual C# .NET
Author:	 Bai, Ying
Publish date:	 2010
3		
Finite fields
Author:	 Lidl, R.
Publish date:	 1983
4		
Programming ASP.NET AJAX
Author:	 Wenz, Christian
Publish date:	 2007
5		
Programming Visual Basic 2008
Author:	 Patrick, Tim
Publish date:	 2008

1		
Scheme and the art of programming
Author:	 Springer, George
Publish date:	 1989
Document type:	 monografie
Due date:	2014-04-23 
0 days
2		
Algebraic number theory
Author:	 Neukirch, Jürgen
Publish date:	 1999
Document type:	 monografie
Due date:	2014-04-23 
0 days
3		
Hyperbolic geometry
Author:	 Anderson, James W
Publish date:	 1999
Document type:	 monografie
Due date:	2014-04-23 
0 days
4		
Algebraic geometry and arithmetic curves
Author:	 Liu, Qing
Publish date:	 2002
Document type:	 monografie
Due date:	2014-04-23 
0 days
5		
IPSec : the new security standard for the Internet, intranets, and virtual private networks
Author:	 Doraswamy, Naganand
Publish date:	 2003
Document type:	 monografie
Due date:	2014-04-23 
0 days
6		
Kerberos : the definitive guide
Author:	 Garman, Jason
Publish date:	 2003
Document type:	 monografie
Due date:	2014-04-23 
0 days
7		
Visual Basic 2010 : programmer's reference
Author:	 Stephens, Rod
Publish date:	 2010
Document type:	 monografie
Due date:	2014-04-23 
0 days
8		
Expert PHP and MySQL
Author:	 Curioso, Andrew
Publish date:	 2010
Document type:	 monografie
Due date:	2014-04-23 
0 days
9		
Joe Celko's SQL for smarties : advanced sql programming
Author:	 Celko, Joe.
Publish date:	 2011
Document type:	 monografie
Due date:	2014-04-23 
0 days
10		
Visual studio 2010 and .NET 4 six-in-one
Author:	  
Publish date:	 2010
Document type:	 monografie
Due date:	2014-04-23 
0 days
11		
Understanding MySQL internals
Author:	 Pachev, Sasha
Publish date:	 2007
Document type:	 monografie
Due date:	2014-04-23 
0 days
12		
Zend Studio for eclipse : developer's guide
Author:	 MacIntyre, Peter
Publish date:	 2008
Document type:	 monografie
Due date:	2014-04-23 
0 days
13		
Professional search engine optimization with PHP : a developer's guide to SEO
Author:	 Sirovich, Jaimie
Publish date:	 2007
Document type:	 monografie
Due date:	2014-04-23 
0 days


/ Einde LIBRARY

/ PARA

    1 root      20   0 59524 5324 1860 S  0.0  0.1   0:20.91 systemd                                  
[eric@para ~]$ ps ajx | grep vim
  577   680   679   577 pts/42     679 S+    1000   0:00 grep --color=auto vim
19565  3180  3180 19565 pts/34    3180 S+    1000   0:00 vim /etc/my.cnf
18855  3986  3986 18855 pts/31    3986 S+    1000   0:00 vim LOG_29_aug_2013.txt
 2506  4295  4295  2506 pts/0     4295 S+    1000   0:15 vim LOG_27_dec.2013.txt
16353  4329  4329 16353 pts/36    4329 S+    1000   0:00 vim includes/database/database.inc
 4945  5034  5034  4945 pts/26    5034 S+    1000   0:00 vim crypto/evp/evp_key.c
 6340  6484  6484  6340 pts/24    6484 S+    1000   0:00 vim include/openssl/asn1.h
 6589  6646  6646  6589 pts/25    6646 S+    1000   0:00 vim
 6681  6797  6797  6681 pts/3     6797 S+    1000   0:00 vim crypto/evp/bio_enc.c
 6804  6894  6894  6804 pts/4     6894 S+    1000   0:00 vim crypto/bio/bio_lib.c
 7803  7909  7909  7803 pts/15    7909 S+    1000   0:02 vim crypto/des//set_key.c
10041 10138 10138 10041 pts/21   10138 S+    1000   0:00 vim crypto/des/ecb_enc.c
13717 13806 13806 13717 pts/28   13806 S+    1000   0:00 vim crypto/des/set_key.c
 7676 14135 14135  7676 pts/12   14135 S+    1000   0:00 vim crypto/evp/e_des.c
22046 14216 14216 22046 pts/5    14216 S+    1000   0:00 vim crypto/evp/e_des.e
27847 15782 15782 27847 pts/18   15782 S+    1000   0:00 vim crypto/des/ecb_enc.e
 7431 15791 15791  7431 pts/11   15791 S+    1000   0:00 vim crypto/evp/evp_enc.c
15600 15808 15808 15600 pts/23   15808 S+    1000   0:00 vim crypto/des/des_enc.c
 1341 15860 15860  1341 pts/17   15860 S+    1000   0:00 vim crypto/des/des_enc.e
 7964 16086 16086  7964 pts/20   16086 S+    1000   0:00 vim crypto/des/des_locl.h
16011 16115 16115 16011 pts/29   16115 S+    1000   0:00 vim ./crypto/des/spr.h
28148 16456 16456 28148 pts/8    16456 S+    1000   0:00 vim 1a4.c
25568 25654 25654 25568 pts/39   25654 S+    1000   0:00 vim includes/bootstrap.inc
 2729 25884 25884  2729 pts/2    25884 S+    1000   0:03 vim apps/enc.c
26518 26576 26576 26518 pts/7    26576 S+    1000   0:00 vim crypto/objects/obj_dat.h
27906 28019 28019 27906 pts/40   28019 S+    1000   0:00 vim includes/session.inc
31512 31734 31734 31512 pts/14   31734 S+    1000   0:00 vim /usr/local/lib/node_modules/karma/package.json

[eric@para ~]$ ps ajx | grep gdb
  577   683   682   577 pts/42     682 S+    1000   0:00 grep --color=auto gdb
10683 16465 16465 10683 pts/22   16465 S+    1000   0:00 gdb 1a4
 2647 25852 25852  2647 pts/1    25852 S+    1000   0:10 gdb openssl



/ Einde PARA

